"use strict";(self.webpackChunkngtodo=self.webpackChunkngtodo||[]).push([[179],{6304:(at,be,O)=>{O.d(be,{Dh:()=>Se,GT:()=>ge,cc:()=>Re,hO:()=>Be,on:()=>U,pX:()=>ne,xv:()=>ue});var h=O(5879),J=O(7142),F=O(5396);at=O.hmd(at);const ee=["ngOnDestroy"],ne=(Le,_t,ht,ie={})=>new Proxy(Le,{get:(_e,te)=>ht.runOutsideAngular(()=>{var Te;if(Le[te])return!(null===(Te=ie?.spy)||void 0===Te)&&Te.get&&ie.spy.get(te,Le[te]),Le[te];if(ee.indexOf(te)>-1)return()=>{};const Fe=_t.toPromise().then(Ge=>{const le=Ge&&Ge[te];return"function"==typeof le?le.bind(Ge):le&&le.then?le.then(wt=>ht.run(()=>wt)):ht.run(()=>le)});return new Proxy(()=>{},{get:(Ge,le)=>Fe[le],apply:(Ge,le,wt)=>Fe.then(jt=>{var wr;const ni=jt&&jt(...wt);return!(null===(wr=ie?.spy)||void 0===wr)&&wr.apply&&ie.spy.apply(te,wt,ni),ni})})})}),ge=(Le,_t)=>{_t.forEach(ht=>{Object.getOwnPropertyNames(ht.prototype||ht).forEach(ie=>{Object.defineProperty(Le.prototype,ie,Object.getOwnPropertyDescriptor(ht.prototype||ht,ie))})})};class me{constructor(_t){return _t}}const Se=new h.OlP("angularfire2.app.options"),ue=new h.OlP("angularfire2.app.name");function U(Le,_t,ht){const _e="object"==typeof ht&&ht||{};_e.name=_e.name||"string"==typeof ht&&ht||"[DEFAULT]";const Te=J.Z.apps.filter(Fe=>Fe&&Fe.name===_e.name)[0]||_t.runOutsideAngular(()=>J.Z.initializeApp(Le,_e));try{JSON.stringify(Le)!==JSON.stringify(Te.options)&&G("error",`${Te.name} Firebase App already initialized with different options${at.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new me(Te)}const G=(Le,..._t)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Le](..._t)},X={provide:me,useFactory:U,deps:[Se,h.R0b,[new h.FiY,ue]]};let Be=(()=>{class Le{constructor(ht){J.Z.registerVersion("angularfire",F.q4.full,"core"),J.Z.registerVersion("angularfire",F.q4.full,"app-compat"),J.Z.registerVersion("angular",h.q4F.full,ht.toString())}static initializeApp(ht,ie){return{ngModule:Le,providers:[{provide:Se,useValue:ht},{provide:ue,useValue:ie}]}}}return Le.\u0275fac=function(ht){return new(ht||Le)(h.LFG(h.Lbi))},Le.\u0275mod=h.oAB({type:Le}),Le.\u0275inj=h.cJS({providers:[X]}),Le})();function Re(Le,_t,ht,ie,_e){const[,te,Te]=globalThis.\u0275AngularfireInstanceCache.find(Fe=>Fe[0]===Le)||[];if(te)return function We(Le,_t){try{return Le.toString()===_t.toString()}catch{return Le===_t}}(_e,Te)||($e("error",`${_t} was already initialized on the ${ht} Firebase App with different settings.${Oe?" You may need to reload as Firebase is not HMR aware.":""}`),$e("warn",{is:_e,was:Te})),te;{const Fe=ie();return globalThis.\u0275AngularfireInstanceCache.push([Le,Fe,_e]),Fe}}const Oe=!!at.hot,$e=(Le,..._t)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Le](..._t)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5396:(at,be,O)=>{O.d(be,{q4:()=>id,iC:()=>sd,HU:()=>zo,vb:()=>Xh,JM:()=>Jh});var h=O(5879),J=O(3182),F=O(5861),ee=O(534),ne=O(9058),ge=O(4537),me=O(7879);const Se=(I,T)=>T.some(x=>I instanceof x);let ue,U;const Be=new WeakMap,Re=new WeakMap,We=new WeakMap,Oe=new WeakMap,$e=new WeakMap;let ht={get(I,T,x){if(I instanceof IDBTransaction){if("done"===T)return Re.get(I);if("objectStoreNames"===T)return I.objectStoreNames||We.get(I);if("store"===T)return x.objectStoreNames[1]?void 0:x.objectStore(x.objectStoreNames[0])}return Te(I[T])},set:(I,T,x)=>(I[T]=x,!0),has:(I,T)=>I instanceof IDBTransaction&&("done"===T||"store"===T)||T in I};function te(I){return"function"==typeof I?function _e(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function X(){return U||(U=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...T){return I.apply(Fe(this),T),Te(Be.get(this))}:function(...T){return Te(I.apply(Fe(this),T))}:function(T,...x){const V=I.call(Fe(this),T,...x);return We.set(V,T.sort?T.sort():[T]),Te(V)}}(I):(I instanceof IDBTransaction&&function _t(I){if(Re.has(I))return;const T=new Promise((x,V)=>{const z=()=>{I.removeEventListener("complete",Z),I.removeEventListener("error",ce),I.removeEventListener("abort",ce)},Z=()=>{x(),z()},ce=()=>{V(I.error||new DOMException("AbortError","AbortError")),z()};I.addEventListener("complete",Z),I.addEventListener("error",ce),I.addEventListener("abort",ce)});Re.set(I,T)}(I),Se(I,function G(){return ue||(ue=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,ht):I)}function Te(I){if(I instanceof IDBRequest)return function Le(I){const T=new Promise((x,V)=>{const z=()=>{I.removeEventListener("success",Z),I.removeEventListener("error",ce)},Z=()=>{x(Te(I.result)),z()},ce=()=>{V(I.error),z()};I.addEventListener("success",Z),I.addEventListener("error",ce)});return T.then(x=>{x instanceof IDBCursor&&Be.set(x,I)}).catch(()=>{}),$e.set(T,I),T}(I);if(Oe.has(I))return Oe.get(I);const T=te(I);return T!==I&&(Oe.set(I,T),$e.set(T,I)),T}const Fe=I=>$e.get(I),wt=["get","getKey","getAll","getAllKeys","count"],jt=["put","add","delete","clear"],wr=new Map;function ni(I,T){if(!(I instanceof IDBDatabase)||T in I||"string"!=typeof T)return;if(wr.get(T))return wr.get(T);const x=T.replace(/FromIndex$/,""),V=T!==x,z=jt.includes(x);if(!(x in(V?IDBIndex:IDBObjectStore).prototype)||!z&&!wt.includes(x))return;const Z=function(){var ce=(0,F.Z)(function*(ze,...je){const ct=this.transaction(ze,z?"readwrite":"readonly");let Tt=ct.store;return V&&(Tt=Tt.index(je.shift())),(yield Promise.all([Tt[x](...je),z&&ct.done]))[0]});return function(je){return ce.apply(this,arguments)}}();return wr.set(T,Z),Z}!function ie(I){ht=I(ht)}(I=>({...I,get:(T,x,V)=>ni(T,x)||I.get(T,x,V),has:(T,x)=>!!ni(T,x)||I.has(T,x)}));const Ns="@firebase/installations",Qn="0.6.4",Po=1e4,Ps=`w:${Qn}`,he="FIS_v2",fe="https://firebaseinstallations.googleapis.com/v1",we=36e5,et=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function st(I){return I instanceof ne.ZR&&I.code.includes("request-failed")}function Vn({projectId:I}){return`${fe}/projects/${I}/installations`}function pt(I){return{token:I.token,requestStatus:2,expiresIn:Nr(I.expiresIn),creationTime:Date.now()}}function Qt(I,T){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,F.Z)(function*(I,T){const V=(yield T.json()).error;return et.create("request-failed",{requestName:I,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function Sn({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function lr(I){return fn.apply(this,arguments)}function fn(){return(fn=(0,F.Z)(function*(I){const T=yield I();return T.status>=500&&T.status<600?I():T})).apply(this,arguments)}function Nr(I){return Number(I.replace("s","000"))}function yi(){return(yi=(0,F.Z)(function*({appConfig:I,heartbeatServiceProvider:T},{fid:x}){const V=Vn(I),z=Sn(I),Z=T.getImmediate({optional:!0});if(Z){const ct=yield Z.getHeartbeatsHeader();ct&&z.append("x-firebase-client",ct)}const ze={method:"POST",headers:z,body:JSON.stringify({fid:x,authVersion:he,appId:I.appId,sdkVersion:Ps})},je=yield lr(()=>fetch(V,ze));if(je.ok){const ct=yield je.json();return{fid:ct.fid||x,registrationStatus:2,refreshToken:ct.refreshToken,authToken:pt(ct.authToken)}}throw yield Qt("Create Installation",je)})).apply(this,arguments)}function _i(I){return new Promise(T=>{setTimeout(T,I)})}const Qa=/^[cdef][\w-]{21}$/,gt="";function Ht(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const x=function St(I){return function so(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Qa.test(x)?x:gt}catch{return gt}}function yn(I){return`${I.appName}!${I.appId}`}const Pn=new Map;function ri(I,T){const x=yn(I);ua(x,T),function dn(I,T){const x=function Ft(){return!Pr&&"BroadcastChannel"in self&&(Pr=new BroadcastChannel("[Firebase] FID Change"),Pr.onmessage=I=>{ua(I.data.key,I.data.fid)}),Pr}();x&&x.postMessage({key:I,fid:T}),function $i(){0===Pn.size&&Pr&&(Pr.close(),Pr=null)}()}(x,T)}function ua(I,T){const x=Pn.get(I);if(x)for(const V of x)V(T)}let Pr=null;const oo="firebase-installations-database",ca=1,vi="firebase-installations-store";let is=null;function Cr(){return is||(is=function Ge(I,T,{blocked:x,upgrade:V,blocking:z,terminated:Z}={}){const ce=indexedDB.open(I,T),ze=Te(ce);return V&&ce.addEventListener("upgradeneeded",je=>{V(Te(ce.result),je.oldVersion,je.newVersion,Te(ce.transaction))}),x&&ce.addEventListener("blocked",()=>x()),ze.then(je=>{Z&&je.addEventListener("close",()=>Z()),z&&je.addEventListener("versionchange",()=>z())}).catch(()=>{}),ze}(oo,ca,{upgrade:(I,T)=>{0===T&&I.createObjectStore(vi)}})),is}function ir(I,T){return En.apply(this,arguments)}function En(){return(En=(0,F.Z)(function*(I,T){const x=yn(I),z=(yield Cr()).transaction(vi,"readwrite"),Z=z.objectStore(vi),ce=yield Z.get(x);return yield Z.put(T,x),yield z.done,(!ce||ce.fid!==T.fid)&&ri(I,T.fid),T})).apply(this,arguments)}function ss(I){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,F.Z)(function*(I){const T=yn(I),V=(yield Cr()).transaction(vi,"readwrite");yield V.objectStore(vi).delete(T),yield V.done})).apply(this,arguments)}function os(I,T){return qt.apply(this,arguments)}function qt(){return(qt=(0,F.Z)(function*(I,T){const x=yn(I),z=(yield Cr()).transaction(vi,"readwrite"),Z=z.objectStore(vi),ce=yield Z.get(x),ze=T(ce);return void 0===ze?yield Z.delete(x):yield Z.put(ze,x),yield z.done,ze&&(!ce||ce.fid!==ze.fid)&&ri(I,ze.fid),ze})).apply(this,arguments)}function H(I){return B.apply(this,arguments)}function B(){return B=(0,F.Z)(function*(I){let T;const x=yield os(I.appConfig,V=>{const z=function q(I){return mn(I||{fid:Ht(),registrationStatus:0})}(V),Z=function De(I,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(et.create("app-offline"))};const x={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},V=function oe(I,T){return tt.apply(this,arguments)}(I,x);return{installationEntry:x,registrationPromise:V}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:mt(I)}:{installationEntry:T}}(I,z);return T=Z.registrationPromise,Z.installationEntry});return x.fid===gt?{installationEntry:yield T}:{installationEntry:x,registrationPromise:T}}),B.apply(this,arguments)}function tt(){return tt=(0,F.Z)(function*(I,T){try{const x=yield function aa(I,T){return yi.apply(this,arguments)}(I,T);return ir(I.appConfig,x)}catch(x){throw st(x)&&409===x.customData.serverCode?yield ss(I.appConfig):yield ir(I.appConfig,{fid:T.fid,registrationStatus:0}),x}}),tt.apply(this,arguments)}function mt(I){return $t.apply(this,arguments)}function $t(){return($t=(0,F.Z)(function*(I){let T=yield Mn(I.appConfig);for(;1===T.registrationStatus;)yield _i(100),T=yield Mn(I.appConfig);if(0===T.registrationStatus){const{installationEntry:x,registrationPromise:V}=yield H(I);return V||x}return T})).apply(this,arguments)}function Mn(I){return os(I,T=>{if(!T)throw et.create("installation-not-found");return mn(T)})}function mn(I){return function bt(I){return 1===I.registrationStatus&&I.registrationTime+Po<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Ir(){return(Ir=(0,F.Z)(function*({appConfig:I,heartbeatServiceProvider:T},x){const V=function xi(I,{fid:T}){return`${Vn(I)}/${T}/authTokens:generate`}(I,x),z=function An(I,{refreshToken:T}){const x=Sn(I);return x.append("Authorization",function mi(I){return`${he} ${I}`}(T)),x}(I,x),Z=T.getImmediate({optional:!0});if(Z){const ct=yield Z.getHeartbeatsHeader();ct&&z.append("x-firebase-client",ct)}const ze={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:Ps,appId:I.appId}})},je=yield lr(()=>fetch(V,ze));if(je.ok)return pt(yield je.json());throw yield Qt("Generate Auth Token",je)})).apply(this,arguments)}function as(I){return wi.apply(this,arguments)}function wi(){return wi=(0,F.Z)(function*(I,T=!1){let x;const V=yield os(I.appConfig,Z=>{if(!Nt(Z))throw et.create("not-registered");const ce=Z.authToken;if(!T&&function Zt(I){return 2===I.requestStatus&&!function sr(I){const T=Date.now();return T<I.creationTime||I.creationTime+I.expiresIn<T+we}(I)}(ce))return Z;if(1===ce.requestStatus)return x=function pe(I,T){return re.apply(this,arguments)}(I,T),Z;{if(!navigator.onLine)throw et.create("app-offline");const ze=function Jn(I){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:T})}(Z);return x=function ut(I,T){return Dt.apply(this,arguments)}(I,ze),ze}});return x?yield x:V.authToken}),wi.apply(this,arguments)}function re(){return(re=(0,F.Z)(function*(I,T){let x=yield ke(I.appConfig);for(;1===x.authToken.requestStatus;)yield _i(100),x=yield ke(I.appConfig);const V=x.authToken;return 0===V.requestStatus?as(I,T):V})).apply(this,arguments)}function ke(I){return os(I,T=>{if(!Nt(T))throw et.create("not-registered");return function Os(I){return 1===I.requestStatus&&I.requestTime+Po<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Dt(){return Dt=(0,F.Z)(function*(I,T){try{const x=yield function Gt(I,T){return Ir.apply(this,arguments)}(I,T),V=Object.assign(Object.assign({},T),{authToken:x});return yield ir(I.appConfig,V),x}catch(x){if(!st(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const V=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield ir(I.appConfig,V)}else yield ss(I.appConfig);throw x}}),Dt.apply(this,arguments)}function Nt(I){return void 0!==I&&2===I.registrationStatus}function Ja(){return(Ja=(0,F.Z)(function*(I){const T=I,{installationEntry:x,registrationPromise:V}=yield H(T);return V?V.catch(console.error):as(T).catch(console.error),x.fid})).apply(this,arguments)}function br(){return br=(0,F.Z)(function*(I,T=!1){const x=I;return yield function mh(I){return Ri.apply(this,arguments)}(x),(yield as(x,T)).token}),br.apply(this,arguments)}function Ri(){return(Ri=(0,F.Z)(function*(I){const{registrationPromise:T}=yield H(I);T&&(yield T)})).apply(this,arguments)}function Oo(I){return et.create("missing-app-config-values",{valueName:I})}const _h="installations",fy=I=>{const T=I.getProvider("app").getImmediate(),x=function oc(I){if(!I||!I.options)throw Oo("App Configuration");if(!I.name)throw Oo("App Name");const T=["projectId","apiKey","appId"];for(const x of T)if(!I.options[x])throw Oo(x);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(T);return{app:T,appConfig:x,heartbeatServiceProvider:(0,ee._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},ks=I=>{const T=I.getProvider("app").getImmediate(),x=(0,ee._getProvider)(T,_h).getImmediate();return{getId:()=>function ao(I){return Ja.apply(this,arguments)}(x),getToken:z=>function gh(I){return br.apply(this,arguments)}(x,z)}};(function Np(){(0,ee._registerComponent)(new ge.wA(_h,fy,"PUBLIC")),(0,ee._registerComponent)(new ge.wA("installations-internal",ks,"PRIVATE"))})(),(0,ee.registerVersion)(Ns,Qn),(0,ee.registerVersion)(Ns,Qn,"esm2017");const Xa="@firebase/remote-config",pn=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ii{constructor(T,x,V,z){this.client=T,this.storage=x,this.storageCache=V,this.logger=z}isCachedDataFresh(T,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-x,z=V<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${z}.`),z}fetch(T){var x=this;return(0,F.Z)(function*(){const[V,z]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(z&&x.isCachedDataFresh(T.cacheMaxAgeMillis,V))return z;T.eTag=z&&z.eTag;const Z=yield x.client.fetch(T),ce=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Z.status&&ce.push(x.storage.setLastSuccessfulFetchResponse(Z)),yield Promise.all(ce),Z})()}}function Eh(I=navigator){return I.languages&&I.languages[0]||I.language}class cs{constructor(T,x,V,z,Z,ce){this.firebaseInstallations=T,this.sdkVersion=x,this.namespace=V,this.projectId=z,this.apiKey=Z,this.appId=ce}fetch(T){var x=this;return(0,F.Z)(function*(){const[V,z]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),ce=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},je={sdk_version:x.sdkVersion,app_instance_id:V,app_instance_id_token:z,app_id:x.appId,language_code:Eh()},ct={method:"POST",headers:ze,body:JSON.stringify(je)},Tt=fetch(ce,ct),At=new Promise((gr,Sr)=>{T.signal.addEventListener(()=>{const Ko=new Error("The operation was aborted.");Ko.name="AbortError",Sr(Ko)})});let Li;try{yield Promise.race([Tt,At]),Li=yield Tt}catch(gr){let Sr="fetch-client-network";throw"AbortError"===gr?.name&&(Sr="fetch-timeout"),pn.create(Sr,{originalErrorMessage:gr?.message})}let $r=Li.status;const od=Li.headers.get("ETag")||void 0;let qo,Eo;if(200===Li.status){let gr;try{gr=yield Li.json()}catch(Sr){throw pn.create("fetch-client-parse",{originalErrorMessage:Sr?.message})}qo=gr.entries,Eo=gr.state}if("INSTANCE_STATE_UNSPECIFIED"===Eo?$r=500:"NO_CHANGE"===Eo?$r=304:("NO_TEMPLATE"===Eo||"EMPTY_CONFIG"===Eo)&&(qo={}),304!==$r&&200!==$r)throw pn.create("fetch-status",{httpStatus:$r});return{status:$r,eTag:od,config:qo}})()}}class tu{constructor(T,x){this.client=T,this.storage=x}fetch(T){var x=this;return(0,F.Z)(function*(){const V=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(T,V)})()}attemptFetch(T,{throttleEndTimeMillis:x,backoffCount:V}){var z=this;return(0,F.Z)(function*(){yield function On(I,T){return new Promise((x,V)=>{const z=Math.max(T-Date.now(),0),Z=setTimeout(x,z);I.addEventListener(()=>{clearTimeout(Z),V(pn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,x);try{const Z=yield z.client.fetch(T);return yield z.storage.deleteThrottleMetadata(),Z}catch(Z){if(!function fa(I){if(!(I instanceof ne.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}(Z))throw Z;const ce={throttleEndTimeMillis:Date.now()+(0,ne.$s)(V),backoffCount:V+1};return yield z.storage.setThrottleMetadata(ce),z.attemptFetch(T,ce)}})()}}class Ch{constructor(T,x,V,z,Z){this.app=T,this._client=x,this._storageCache=V,this._storage=z,this._logger=Z,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ii(I,T){const x=I.target.error||void 0;return pn.create(T,{originalErrorMessage:x&&x?.message})}const Gn="app_namespace_store";class GI{constructor(T,x,V,z=function Ut(){return new Promise((I,T)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=V=>{T(Ii(V,"storage-open"))},x.onsuccess=V=>{I(V.target.result)},x.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(Gn,{keyPath:"compositeKey"})}}catch(x){T(pn.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=T,this.appName=x,this.namespace=V,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var x=this;return(0,F.Z)(function*(){const V=yield x.openDbPromise;return new Promise((z,Z)=>{const ze=V.transaction([Gn],"readonly").objectStore(Gn),je=x.createCompositeKey(T);try{const ct=ze.get(je);ct.onerror=Tt=>{Z(Ii(Tt,"storage-get"))},ct.onsuccess=Tt=>{const At=Tt.target.result;z(At?At.value:void 0)}}catch(ct){Z(pn.create("storage-get",{originalErrorMessage:ct?.message}))}})})()}set(T,x){var V=this;return(0,F.Z)(function*(){const z=yield V.openDbPromise;return new Promise((Z,ce)=>{const je=z.transaction([Gn],"readwrite").objectStore(Gn),ct=V.createCompositeKey(T);try{const Tt=je.put({compositeKey:ct,value:x});Tt.onerror=At=>{ce(Ii(At,"storage-set"))},Tt.onsuccess=()=>{Z()}}catch(Tt){ce(pn.create("storage-set",{originalErrorMessage:Tt?.message}))}})})()}delete(T){var x=this;return(0,F.Z)(function*(){const V=yield x.openDbPromise;return new Promise((z,Z)=>{const ze=V.transaction([Gn],"readwrite").objectStore(Gn),je=x.createCompositeKey(T);try{const ct=ze.delete(je);ct.onerror=Tt=>{Z(Ii(Tt,"storage-delete"))},ct.onsuccess=()=>{z()}}catch(ct){Z(pn.create("storage-delete",{originalErrorMessage:ct?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class uc{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,F.Z)(function*(){const x=T.storage.getLastFetchStatus(),V=T.storage.getLastSuccessfulFetchTimestampMillis(),z=T.storage.getActiveConfig(),Z=yield x;Z&&(T.lastFetchStatus=Z);const ce=yield V;ce&&(T.lastSuccessfulFetchTimestampMillis=ce);const ze=yield z;ze&&(T.activeConfig=ze)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Lo(){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,F.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}!function ls(){(0,ee._registerComponent)(new ge.wA("remote-config",function I(T,{instanceIdentifier:x}){const V=T.getProvider("app").getImmediate(),z=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw pn.create("registration-window");if(!(0,ne.hl)())throw pn.create("indexed-db-unavailable");const{projectId:Z,apiKey:ce,appId:ze}=V.options;if(!Z)throw pn.create("registration-project-id");if(!ce)throw pn.create("registration-api-key");if(!ze)throw pn.create("registration-app-id");const je=new GI(ze,V.name,x=x||"firebase"),ct=new uc(je),Tt=new me.Yd(Xa);Tt.logLevel=me.in.ERROR;const At=new cs(z,ee.SDK_VERSION,x,Z,ce,ze),Li=new tu(At,je),$r=new ii(Li,je,ct,Tt),od=new Ch(V,$r,ct,je,Tt);return function Mt(I){const T=(0,ne.m9)(I);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(od),od},"PUBLIC").setMultipleInstances(!0)),(0,ee.registerVersion)(Xa,"0.4.4"),(0,ee.registerVersion)(Xa,"0.4.4","esm2017")}();const hr=(I,T)=>T.some(x=>I instanceof x);let py,zn;const Ls=new WeakMap,Vs=new WeakMap,Tr=new WeakMap,kr=new WeakMap,Tl=new WeakMap;let nu={get(I,T,x){if(I instanceof IDBTransaction){if("done"===T)return Vs.get(I);if("objectStoreNames"===T)return I.objectStoreNames||Tr.get(I);if("store"===T)return x.objectStoreNames[1]?void 0:x.objectStore(x.objectStoreNames[0])}return ds(I[T])},set:(I,T,x)=>(I[T]=x,!0),has:(I,T)=>I instanceof IDBTransaction&&("done"===T||"store"===T)||T in I};function gy(I){return"function"==typeof I?function kp(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ga(){return zn||(zn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...T){return I.apply(Sl(this),T),ds(Ls.get(this))}:function(...T){return ds(I.apply(Sl(this),T))}:function(T,...x){const V=I.call(Sl(this),T,...x);return Tr.set(V,T.sort?T.sort():[T]),ds(V)}}(I):(I instanceof IDBTransaction&&function Ih(I){if(Vs.has(I))return;const T=new Promise((x,V)=>{const z=()=>{I.removeEventListener("complete",Z),I.removeEventListener("error",ce),I.removeEventListener("abort",ce)},Z=()=>{x(),z()},ce=()=>{V(I.error||new DOMException("AbortError","AbortError")),z()};I.addEventListener("complete",Z),I.addEventListener("error",ce),I.addEventListener("abort",ce)});Vs.set(I,T)}(I),hr(I,function bi(){return py||(py=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,nu):I)}function ds(I){if(I instanceof IDBRequest)return function Pp(I){const T=new Promise((x,V)=>{const z=()=>{I.removeEventListener("success",Z),I.removeEventListener("error",ce)},Z=()=>{x(ds(I.result)),z()},ce=()=>{V(I.error),z()};I.addEventListener("success",Z),I.addEventListener("error",ce)});return T.then(x=>{x instanceof IDBCursor&&Ls.set(x,I)}).catch(()=>{}),Tl.set(T,I),T}(I);if(kr.has(I))return kr.get(I);const T=gy(I);return T!==I&&(kr.set(I,T),Tl.set(T,I)),T}const Sl=I=>Tl.get(I);function bh(I,T,{blocked:x,upgrade:V,blocking:z,terminated:Z}={}){const ce=indexedDB.open(I,T),ze=ds(ce);return V&&ce.addEventListener("upgradeneeded",je=>{V(ds(ce.result),je.oldVersion,je.newVersion,ds(ce.transaction))}),x&&ce.addEventListener("blocked",()=>x()),ze.then(je=>{Z&&je.addEventListener("close",()=>Z()),z&&je.addEventListener("versionchange",()=>z())}).catch(()=>{}),ze}function ru(I,{blocked:T}={}){const x=indexedDB.deleteDatabase(I);return T&&x.addEventListener("blocked",()=>T()),ds(x).then(()=>{})}const Dh=["get","getKey","getAll","getAllKeys","count"],Fp=["put","add","delete","clear"],Al=new Map;function Lp(I,T){if(!(I instanceof IDBDatabase)||T in I||"string"!=typeof T)return;if(Al.get(T))return Al.get(T);const x=T.replace(/FromIndex$/,""),V=T!==x,z=Fp.includes(x);if(!(x in(V?IDBIndex:IDBObjectStore).prototype)||!z&&!Dh.includes(x))return;const Z=function(){var ce=(0,F.Z)(function*(ze,...je){const ct=this.transaction(ze,z?"readwrite":"readonly");let Tt=ct.store;return V&&(Tt=Tt.index(je.shift())),(yield Promise.all([Tt[x](...je),z&&ct.done]))[0]});return function(je){return ce.apply(this,arguments)}}();return Al.set(T,Z),Z}!function Op(I){nu=I(nu)}(I=>({...I,get:(T,x,V)=>Lp(T,x)||I.get(T,x,V),has:(T,x)=>!!Lp(T,x)||I.has(T,x)}));const Th="/firebase-messaging-sw.js",Ml="/firebase-cloud-messaging-push-scope",iu="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Sh="https://fcmregistrations.googleapis.com/v1",Ah="google.c.a.c_id",Wn="google.c.a.c_l",Vp="google.c.a.ts";var Mh=function(I){return I.PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",I}(Mh||{});function Pi(I){const T=new Uint8Array(I);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function su(I){const x=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(x),z=new Uint8Array(V.length);for(let Z=0;Z<V.length;++Z)z[Z]=V.charCodeAt(Z);return z}const ou="fcm_token_details_db",xh=5,ya="fcm_token_object_Store";function _a(){return _a=(0,F.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Z=>Z.name).includes(ou))return null;let T=null;return(yield bh(ou,xh,{upgrade:(V=(0,F.Z)(function*(z,Z,ce,ze){var je;if(Z<2||!z.objectStoreNames.contains(ya))return;const ct=ze.objectStore(ya),Tt=yield ct.index("fcmSenderId").get(I);if(yield ct.clear(),Tt)if(2===Z){const At=Tt;if(!At.auth||!At.p256dh||!At.endpoint)return;T={token:At.fcmToken,createTime:null!==(je=At.createTime)&&void 0!==je?je:Date.now(),subscriptionOptions:{auth:At.auth,p256dh:At.p256dh,endpoint:At.endpoint,swScope:At.swScope,vapidKey:"string"==typeof At.vapidKey?At.vapidKey:Pi(At.vapidKey)}}}else if(3===Z){const At=Tt;T={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:Pi(At.auth),p256dh:Pi(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:Pi(At.vapidKey)}}}else if(4===Z){const At=Tt;T={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:Pi(At.auth),p256dh:Pi(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:Pi(At.vapidKey)}}}}),function(Z,ce,ze,je){return V.apply(this,arguments)})})).close(),yield ru(ou),yield ru("fcm_vapid_details_db"),yield ru("undefined"),function hs(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:T}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}(T)?T:null;var V}),_a.apply(this,arguments)}const va="firebase-messaging-database",er=1,Fr="firebase-messaging-store";let Rl=null;function wa(){return Rl||(Rl=bh(va,er,{upgrade:(I,T)=>{0===T&&I.createObjectStore(Fr)}})),Rl}function au(I){return Us.apply(this,arguments)}function Us(){return Us=(0,F.Z)(function*(I){const T=lc(I),V=yield(yield wa()).transaction(Fr).objectStore(Fr).get(T);if(V)return V;{const z=yield function ow(I){return _a.apply(this,arguments)}(I.appConfig.senderId);if(z)return yield Rh(I,z),z}}),Us.apply(this,arguments)}function Rh(I,T){return cc.apply(this,arguments)}function cc(){return(cc=(0,F.Z)(function*(I,T){const x=lc(I),z=(yield wa()).transaction(Fr,"readwrite");return yield z.objectStore(Fr).put(T,x),yield z.done,T})).apply(this,arguments)}function Ea(){return(Ea=(0,F.Z)(function*(I){const T=lc(I),V=(yield wa()).transaction(Fr,"readwrite");yield V.objectStore(Fr).delete(T),yield V.done})).apply(this,arguments)}function lc({appConfig:I}){return I.appId}const Lr=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ph(I,T){return Up.apply(this,arguments)}function Up(){return(Up=(0,F.Z)(function*(I,T){const x=yield dc(I),V=Bp(T),z={method:"POST",headers:x,body:JSON.stringify(V)};let Z;try{Z=yield(yield fetch(Ca(I.appConfig),z)).json()}catch(ce){throw Lr.create("token-subscribe-failed",{errorInfo:ce?.toString()})}if(Z.error)throw Lr.create("token-subscribe-failed",{errorInfo:Z.error.message});if(!Z.token)throw Lr.create("token-subscribe-no-token");return Z.token})).apply(this,arguments)}function Pl(){return(Pl=(0,F.Z)(function*(I,T){const x=yield dc(I),V=Bp(T.subscriptionOptions),z={method:"PATCH",headers:x,body:JSON.stringify(V)};let Z;try{Z=yield(yield fetch(`${Ca(I.appConfig)}/${T.token}`,z)).json()}catch(ce){throw Lr.create("token-update-failed",{errorInfo:ce?.toString()})}if(Z.error)throw Lr.create("token-update-failed",{errorInfo:Z.error.message});if(!Z.token)throw Lr.create("token-update-no-token");return Z.token})).apply(this,arguments)}function Ol(I,T){return kl.apply(this,arguments)}function kl(){return(kl=(0,F.Z)(function*(I,T){const V={method:"DELETE",headers:yield dc(I)};try{const Z=yield(yield fetch(`${Ca(I.appConfig)}/${T}`,V)).json();if(Z.error)throw Lr.create("token-unsubscribe-failed",{errorInfo:Z.error.message})}catch(z){throw Lr.create("token-unsubscribe-failed",{errorInfo:z?.toString()})}})).apply(this,arguments)}function Ca({projectId:I}){return`${Sh}/projects/${I}/registrations`}function dc(I){return uu.apply(this,arguments)}function uu(){return(uu=(0,F.Z)(function*({appConfig:I,installations:T}){const x=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Bp({p256dh:I,auth:T,endpoint:x,vapidKey:V}){const z={web:{endpoint:x,auth:T,p256dh:I}};return V!==iu&&(z.web.applicationPubKey=V),z}const Fl=6048e5;function hc(){return hc=(0,F.Z)(function*(I){const T=yield function lu(I,T){return Ia.apply(this,arguments)}(I.swRegistration,I.vapidKey),x={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:T.endpoint,auth:Pi(T.getKey("auth")),p256dh:Pi(T.getKey("p256dh"))},V=yield au(I.firebaseDependencies);if(V){if(function Vr(I,T){return T.vapidKey===I.vapidKey&&T.endpoint===I.endpoint&&T.auth===I.auth&&T.p256dh===I.p256dh}(V.subscriptionOptions,x))return Date.now()>=V.createTime+Fl?function fs(I,T){return cu.apply(this,arguments)}(I,{token:V.token,createTime:Date.now(),subscriptionOptions:x}):V.token;try{yield Ol(I.firebaseDependencies,V.token)}catch(z){console.warn(z)}return Fh(I.firebaseDependencies,x)}return Fh(I.firebaseDependencies,x)}),hc.apply(this,arguments)}function kh(){return kh=(0,F.Z)(function*(I){const T=yield au(I.firebaseDependencies);T&&(yield Ol(I.firebaseDependencies,T.token),yield function Nh(I){return Ea.apply(this,arguments)}(I.firebaseDependencies));const x=yield I.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()}),kh.apply(this,arguments)}function cu(){return cu=(0,F.Z)(function*(I,T){try{const x=yield function Oh(I,T){return Pl.apply(this,arguments)}(I.firebaseDependencies,T),V=Object.assign(Object.assign({},T),{token:x,createTime:Date.now()});return yield Rh(I.firebaseDependencies,V),x}catch(x){throw yield function Ll(I){return kh.apply(this,arguments)}(I),x}}),cu.apply(this,arguments)}function Fh(I,T){return un.apply(this,arguments)}function un(){return(un=(0,F.Z)(function*(I,T){const V={token:yield Ph(I,T),createTime:Date.now(),subscriptionOptions:T};return yield Rh(I,V),V.token})).apply(this,arguments)}function Ia(){return(Ia=(0,F.Z)(function*(I,T){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:su(T)})})).apply(this,arguments)}function ba(I){const T={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Lh(I,T){if(!T.notification)return;I.notification={};const x=T.notification.title;x&&(I.notification.title=x);const V=T.notification.body;V&&(I.notification.body=V);const z=T.notification.image;z&&(I.notification.image=z);const Z=T.notification.icon;Z&&(I.notification.icon=Z)}(T,I),function Bs(I,T){T.data&&(I.data=T.data)}(T,I),function Oi(I,T){var x,V,z,Z,ce;if(!(T.fcmOptions||null!==(x=T.notification)&&void 0!==x&&x.click_action))return;I.fcmOptions={};const ze=null!==(z=null===(V=T.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==z?z:null===(Z=T.notification)||void 0===Z?void 0:Z.click_action;ze&&(I.fcmOptions.link=ze);const je=null===(ce=T.fcmOptions)||void 0===ce?void 0:ce.analytics_label;je&&(I.fcmOptions.analyticsLabel=je)}(T,I),T}function Vh(I,T){const x=[];for(let V=0;V<I.length;V++)x.push(I.charAt(V)),V<T.length&&x.push(T.charAt(V));return x.join("")}function ps(I){return Lr.create("missing-app-config-values",{valueName:I})}Vh("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Vh("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Uh{constructor(T,x,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function Vl(I){if(!I||!I.options)throw ps("App Configuration Object");if(!I.name)throw ps("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:x}=I;for(const V of T)if(!x[V])throw ps(V);return{appName:I.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:z,installations:x,analyticsProvider:V}}_delete(){return Promise.resolve()}}function fc(){return(fc=(0,F.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(Th,{scope:Ml}),I.swRegistration.update().catch(()=>{})}catch(T){throw Lr.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function co(){return(co=(0,F.Z)(function*(I,T){if(!T&&!I.swRegistration&&(yield function Ul(I){return fc.apply(this,arguments)}(I)),T||!I.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Lr.create("invalid-sw-registration");I.swRegistration=T}})).apply(this,arguments)}function Ct(){return(Ct=(0,F.Z)(function*(I,T){T?I.vapidKey=T:I.vapidKey||(I.vapidKey=iu)})).apply(this,arguments)}function Bh(){return Bh=(0,F.Z)(function*(I,T){if(!navigator)throw Lr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Lr.create("permission-blocked");return yield function lo(I,T){return Ct.apply(this,arguments)}(I,T?.vapidKey),yield function Bl(I,T){return co.apply(this,arguments)}(I,T?.serviceWorkerRegistration),function jp(I){return hc.apply(this,arguments)}(I)}),Bh.apply(this,arguments)}function jh(){return(jh=(0,F.Z)(function*(I,T,x){const V=function $p(I){switch(I){case Mh.NOTIFICATION_CLICKED:return"notification_open";case Mh.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(T);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:x[Ah],message_name:x[Wn],message_time:x[Vp],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Gi(){return Gi=(0,F.Z)(function*(I,T){const x=T.data;if(!x.isFirebaseMessaging)return;I.onMessageHandler&&x.messageType===Mh.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(ba(x)):I.onMessageHandler.next(ba(x)));const V=x.data;(function my(I){return"object"==typeof I&&!!I&&Ah in I})(V)&&"1"===V["google.c.a.e"]&&(yield function Hp(I,T,x){return jh.apply(this,arguments)}(I,x.messageType,V))}),Gi.apply(this,arguments)}const Da="@firebase/messaging",$l=I=>{const T=new Uh(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Hl(I,T){return Gi.apply(this,arguments)}(T,x)),T},Gl=I=>{const T=I.getProvider("messaging").getImmediate();return{getToken:V=>function jl(I,T){return Bh.apply(this,arguments)}(T,V)}};function Me(){return zt.apply(this,arguments)}function zt(){return(zt=(0,F.Z)(function*(){try{yield(0,ne.eu)()}catch{return!1}return typeof window<"u"&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Gp(){(0,ee._registerComponent)(new ge.wA("messaging",$l,"PUBLIC")),(0,ee._registerComponent)(new ge.wA("messaging-internal",Gl,"PRIVATE")),(0,ee.registerVersion)(Da,"0.12.4"),(0,ee.registerVersion)(Da,"0.12.4","esm2017")}();const Un="analytics",yy="firebase_id",gc="origin",Yr=6e4,ki="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",mc="https://www.googletagmanager.com/gtag/js",kn=new me.Yd("@firebase/analytics"),Br=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function hu(I){if(!I.startsWith(mc)){const T=Br.create("invalid-gtag-resource",{gtagURL:I});return kn.warn(T.message),""}return I}function $h(I){return Promise.all(I.map(T=>T.catch(x=>x)))}function Uo(){return(Uo=(0,F.Z)(function*(I,T,x,V,z,Z){const ce=V[z];try{if(ce)yield T[ce];else{const je=(yield $h(x)).find(ct=>ct.measurementId===z);je&&(yield T[je.appId])}}catch(ze){kn.error(ze)}I("config",z,Z)})).apply(this,arguments)}function yc(){return(yc=(0,F.Z)(function*(I,T,x,V,z){try{let Z=[];if(z&&z.send_to){let ce=z.send_to;Array.isArray(ce)||(ce=[ce]);const ze=yield $h(x);for(const je of ce){const ct=ze.find(At=>At.measurementId===je),Tt=ct&&T[ct.appId];if(!Tt){Z=[];break}Z.push(Tt)}}0===Z.length&&(Z=Object.values(T)),yield Promise.all(Z),I("event",V,z||{})}catch(Z){kn.error(Z)}})).apply(this,arguments)}const Wp=30,Gh=new class Bo{constructor(T={},x=1e3){this.throttleMetadata=T,this.intervalMillis=x}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,x){this.throttleMetadata[T]=x}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function vy(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function po(){return(po=(0,F.Z)(function*(I){var T;const{appId:x,apiKey:V}=I,z={method:"GET",headers:vy(V)},Z=ki.replace("{app-id}",x),ce=yield fetch(Z,z);if(200!==ce.status&&304!==ce.status){let ze="";try{const je=yield ce.json();null!==(T=je.error)&&void 0!==T&&T.message&&(ze=je.error.message)}catch{}throw Br.create("config-fetch-failed",{httpStatus:ce.status,responseMessage:ze})}return ce.json()})).apply(this,arguments)}function _u(){return(_u=(0,F.Z)(function*(I,T=Gh,x){const{appId:V,apiKey:z,measurementId:Z}=I.options;if(!V)throw Br.create("no-app-id");if(!z){if(Z)return{measurementId:Z,appId:V};throw Br.create("no-api-key")}const ce=T.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new Kl;return setTimeout((0,F.Z)(function*(){ze.abort()}),void 0!==x?x:Yr),qp({appId:V,apiKey:z,measurementId:Z},ce,ze,T)})).apply(this,arguments)}function qp(I,T,x){return zh.apply(this,arguments)}function zh(){return zh=(0,F.Z)(function*(I,{throttleEndTimeMillis:T,backoffCount:x},V,z=Gh){var Z;const{appId:ce,measurementId:ze}=I;try{yield function wy(I,T){return new Promise((x,V)=>{const z=Math.max(T-Date.now(),0),Z=setTimeout(x,z);I.addEventListener(()=>{clearTimeout(Z),V(Br.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(V,T)}catch(je){if(ze)return kn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ze} provided in the "measurementId" field in the local Firebase config. [${je?.message}]`),{appId:ce,measurementId:ze};throw je}try{const je=yield function oi(I){return po.apply(this,arguments)}(I);return z.deleteThrottleMetadata(ce),je}catch(je){const ct=je;if(!function _c(I){if(!(I instanceof ne.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ct)){if(z.deleteThrottleMetadata(ce),ze)return kn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ze} provided in the "measurementId" field in the local Firebase config. [${ct?.message}]`),{appId:ce,measurementId:ze};throw je}const Tt=503===Number(null===(Z=ct?.customData)||void 0===Z?void 0:Z.httpStatus)?(0,ne.$s)(x,z.intervalMillis,Wp):(0,ne.$s)(x,z.intervalMillis),At={throttleEndTimeMillis:Date.now()+Tt,backoffCount:x+1};return z.setThrottleMetadata(ce,At),kn.debug(`Calling attemptFetch again in ${Tt} millis`),qp(I,At,V,z)}}),zh.apply(this,arguments)}class Kl{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let vu,qh;function Wh(){return(Wh=(0,F.Z)(function*(I,T,x,V,z){if(z&&z.global)I("event",x,V);else{const Z=yield T;I("event",x,Object.assign(Object.assign({},V),{send_to:Z}))}})).apply(this,arguments)}function Ec(){return(Ec=(0,F.Z)(function*(){if(!(0,ne.hl)())return kn.warn(Br.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(I){return kn.warn(Br.create("indexeddb-unavailable",{errorInfo:I?.toString()}).message),!1}return!0})).apply(this,arguments)}function js(){return js=(0,F.Z)(function*(I,T,x,V,z,Z,ce){var ze;const je=function Bn(I){return _u.apply(this,arguments)}(I);je.then($r=>{x[$r.measurementId]=$r.appId,I.options.measurementId&&$r.measurementId!==I.options.measurementId&&kn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${$r.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch($r=>kn.error($r)),T.push(je);const ct=function Ql(){return Ec.apply(this,arguments)}().then($r=>{if($r)return V.getId()}),[Tt,At]=yield Promise.all([je,ct]);(function ql(I){const T=window.document.getElementsByTagName("script");for(const x of Object.values(T))if(x.src&&x.src.includes(mc)&&x.src.includes(I))return x;return null})(Z)||function pu(I,T){const x=function fu(I,T){let x;return window.trustedTypes&&(x=window.trustedTypes.createPolicy(I,T)),x}("firebase-js-sdk-policy",{createScriptURL:hu}),V=document.createElement("script"),z=`${mc}?l=${I}&id=${T}`;V.src=x?x?.createScriptURL(z):z,V.async=!0,document.head.appendChild(V)}(Z,Tt.measurementId),qh&&(z("consent","default",qh),function Sa(I){qh=I}(void 0)),z("js",new Date);const Li=null!==(ze=ce?.config)&&void 0!==ze?ze:{};return Li[gc]="firebase",Li.update=!0,null!=At&&(Li[yy]=At),z("config",Tt.measurementId,Li),vu&&(z("set",vu),function wc(I){vu=I}(void 0)),Tt.measurementId}),js.apply(this,arguments)}class Di{constructor(T){this.app=T}_delete(){return delete gn[this.app.options.appId],Promise.resolve()}}let gn={},vt=[];const wu={};let Jl,qi,Aa="dataLayer",Eu=!1;function Xl(I,T,x){!function or(){const I=[];if((0,ne.ru)()&&I.push("This is a browser extension environment."),(0,ne.zI)()||I.push("Cookies are not available."),I.length>0){const T=I.map((V,z)=>`(${z+1}) ${V}`).join(" "),x=Br.create("invalid-analytics-context",{errorInfo:T});kn.warn(x.message)}}();const V=I.options.appId;if(!V)throw Br.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Br.create("no-api-key");kn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=gn[V])throw Br.create("already-exists",{id:V});if(!Eu){!function Wl(I){let T=[];Array.isArray(window[I])?T=window[I]:window[I]=T}(Aa);const{wrappedGtag:Z,gtagCore:ce}=function yu(I,T,x,V,z){let Z=function(...ce){window[V].push(arguments)};return window[z]&&"function"==typeof window[z]&&(Z=window[z]),window[z]=function mu(I,T,x,V){function Z(){return Z=(0,F.Z)(function*(ce,...ze){try{if("event"===ce){const[je,ct]=ze;yield function gs(I,T,x,V,z){return yc.apply(this,arguments)}(I,T,x,je,ct)}else if("config"===ce){const[je,ct]=ze;yield function gu(I,T,x,V,z,Z){return Uo.apply(this,arguments)}(I,T,x,V,je,ct)}else if("consent"===ce){const[je]=ze;I("consent","update",je)}else if("get"===ce){const[je,ct,Tt]=ze;I("get",je,ct,Tt)}else if("set"===ce){const[je]=ze;I("set",je)}else I(ce,...ze)}catch(je){kn.error(je)}}),Z.apply(this,arguments)}return function z(ce){return Z.apply(this,arguments)}}(Z,I,T,x),{gtagCore:Z,wrappedGtag:window[z]}}(gn,vt,wu,Aa,"gtag");qi=Z,Jl=ce,Eu=!0}return gn[V]=function Kh(I,T,x,V,z,Z,ce){return js.apply(this,arguments)}(I,vt,wu,T,Jl,Aa,x),new Di(I)}function Ic(){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,F.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}const bc="@firebase/analytics";!function nd(){(0,ee._registerComponent)(new ge.wA(Un,(T,{options:x})=>Xl(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ee._registerComponent)(new ge.wA("analytics-internal",function I(T){try{const x=T.getProvider(Un).getImmediate();return{logEvent:(V,z,Z)=>function $o(I,T,x,V){I=(0,ne.m9)(I),function jo(I,T,x,V,z){return Wh.apply(this,arguments)}(qi,gn[I.app.options.appId],T,x,V).catch(z=>kn.error(z))}(x,V,z,Z)}}catch(x){throw Br.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ee.registerVersion)(bc,"0.10.0"),(0,ee.registerVersion)(bc,"0.10.0","esm2017")}();var $s=O(2381),Zh=O(6321),rd=O(9397),_o=O(5137),Yh=O(3093);const id=new h.GfV("7.6.1"),vo="__angularfire_symbol__analyticsIsSupportedValue",Gs="__angularfire_symbol__analyticsIsSupported",vs="__angularfire_symbol__remoteConfigIsSupportedValue",Fi="__angularfire_symbol__remoteConfigIsSupported",Go="__angularfire_symbol__messagingIsSupportedValue",wo="__angularfire_symbol__messagingIsSupported";function Jh(I,T,x){if(T){if(1===T.length)return T[0];const Z=T.filter(ce=>ce.app===x);if(1===Z.length)return Z[0]}return x.container.getProvider(I).getImmediate({optional:!0})}globalThis[Gs]||(globalThis[Gs]=Ic().then(I=>globalThis[vo]=I).catch(()=>globalThis[vo]=!1)),globalThis[wo]||(globalThis[wo]=Me().then(I=>globalThis[Go]=I).catch(()=>globalThis[Go]=!1)),globalThis[Fi]||(globalThis[Fi]=Lo().then(I=>globalThis[vs]=I).catch(()=>globalThis[vs]=!1));const Xh=(I,T)=>{const x=T?[T]:(0,J.C6)(),V=[];return x.forEach(z=>{z.container.getProvider(I).instances.forEach(ce=>{V.includes(ce)||V.push(ce)})}),V};function zs(){}class Tc{constructor(T,x=$s.N){this.zone=T,this.delegate=x}now(){return this.delegate.now()}schedule(T,x,V){const z=this.zone;return this.delegate.schedule(function(ce){z.runGuarded(()=>{T.apply(this,[ce])})},x,V)}}class Yp{constructor(T){this.zone=T,this.task=null}call(T,x){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",zs,{},zs,zs)),x.pipe((0,rd.b)({next:V,complete:V,error:V})).subscribe(T).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let zo=(()=>{class I{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Tc(Zone.current)),this.insideAngular=x.run(()=>new Tc(Zone.current,Zh.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(x){return new(x||I)(h.LFG(h.R0b))},I.\u0275prov=h.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function qn(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function sd(I){return qn(),function Hr(I){return function(x){return(x=x.lift(new Yp(I.ngZone))).pipe((0,_o.R)(I.outsideAngular),(0,Yh.Q)(I.insideAngular))}}(qn())(I)}},9058:(at,be,O)=>{O.d(be,{$s:()=>ss,BH:()=>te,DV:()=>Nr,Dv:()=>ua,G6:()=>Ps,GJ:()=>lr,L:()=>ue,LL:()=>Ae,Pz:()=>_e,Sg:()=>Te,UG:()=>le,UI:()=>aa,US:()=>ge,Wj:()=>Ft,Wl:()=>pt,Yr:()=>Po,ZB:()=>X,ZR:()=>Ie,aH:()=>ie,b$:()=>wr,cI:()=>Vn,dS:()=>oo,eu:()=>fe,g5:()=>F,gK:()=>dn,gQ:()=>St,h$:()=>Se,hl:()=>he,hu:()=>J,jU:()=>wt,lb:()=>$i,m9:()=>qt,ne:()=>yn,p$:()=>G,pd:()=>Ht,r3:()=>fn,ru:()=>jt,tV:()=>U,uI:()=>Ge,ug:()=>ca,vZ:()=>yi,w1:()=>Ns,w9:()=>An,xO:()=>Qa,xb:()=>mi,z$:()=>Fe,zI:()=>we,zd:()=>gt});const h={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},J=function(H,B){if(!H)throw F(B)},F=function(H){return new Error("Firebase Database ("+h.SDK_VERSION+") INTERNAL ASSERT FAILED: "+H)},ee=function(H){const B=[];let q=0;for(let De=0;De<H.length;De++){let oe=H.charCodeAt(De);oe<128?B[q++]=oe:oe<2048?(B[q++]=oe>>6|192,B[q++]=63&oe|128):55296==(64512&oe)&&De+1<H.length&&56320==(64512&H.charCodeAt(De+1))?(oe=65536+((1023&oe)<<10)+(1023&H.charCodeAt(++De)),B[q++]=oe>>18|240,B[q++]=oe>>12&63|128,B[q++]=oe>>6&63|128,B[q++]=63&oe|128):(B[q++]=oe>>12|224,B[q++]=oe>>6&63|128,B[q++]=63&oe|128)}return B},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,B){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,De=[];for(let oe=0;oe<H.length;oe+=3){const tt=H[oe],mt=oe+1<H.length,$t=mt?H[oe+1]:0,Mn=oe+2<H.length,mn=Mn?H[oe+2]:0;let Ir=(15&$t)<<2|mn>>6,xi=63&mn;Mn||(xi=64,mt||(Ir=64)),De.push(q[tt>>2],q[(3&tt)<<4|$t>>4],q[Ir],q[xi])}return De.join("")},encodeString(H,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(H):this.encodeByteArray(ee(H),B)},decodeString(H,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(H):function(H){const B=[];let q=0,De=0;for(;q<H.length;){const oe=H[q++];if(oe<128)B[De++]=String.fromCharCode(oe);else if(oe>191&&oe<224){const tt=H[q++];B[De++]=String.fromCharCode((31&oe)<<6|63&tt)}else if(oe>239&&oe<365){const Mn=((7&oe)<<18|(63&H[q++])<<12|(63&H[q++])<<6|63&H[q++])-65536;B[De++]=String.fromCharCode(55296+(Mn>>10)),B[De++]=String.fromCharCode(56320+(1023&Mn))}else{const tt=H[q++],mt=H[q++];B[De++]=String.fromCharCode((15&oe)<<12|(63&tt)<<6|63&mt)}}return B.join("")}(this.decodeStringToByteArray(H,B))},decodeStringToByteArray(H,B){this.init_();const q=B?this.charToByteMapWebSafe_:this.charToByteMap_,De=[];for(let oe=0;oe<H.length;){const tt=q[H.charAt(oe++)],$t=oe<H.length?q[H.charAt(oe)]:0;++oe;const mn=oe<H.length?q[H.charAt(oe)]:64;++oe;const Gt=oe<H.length?q[H.charAt(oe)]:64;if(++oe,null==tt||null==$t||null==mn||null==Gt)throw new me;De.push(tt<<2|$t>>4),64!==mn&&(De.push($t<<4&240|mn>>2),64!==Gt&&De.push(mn<<6&192|Gt))}return De},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}};class me extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Se=function(H){const B=ee(H);return ge.encodeByteArray(B,!0)},ue=function(H){return Se(H).replace(/\./g,"")},U=function(H){try{return ge.decodeString(H,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function G(H){return X(void 0,H)}function X(H,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return B}for(const q in B)!B.hasOwnProperty(q)||!Be(q)||(H[q]=X(H[q],B[q]));return H}function Be(H){return"__proto__"!==H}const Le=()=>{try{return function Re(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const B=H&&U(H[1]);return B&&JSON.parse(B)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},ie=()=>{var H;return null===(H=Le())||void 0===H?void 0:H.config},_e=H=>{var B;return null===(B=Le())||void 0===B?void 0:B[`_${H}`]};class te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,q)=>{this.resolve=B,this.reject=q})}wrapCallback(B){return(q,De)=>{q?this.reject(q):this.resolve(De),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(q):B(q,De))}}}function Te(H,B){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const De=B||"demo-project",oe=H.iat||0,tt=H.sub||H.user_id;if(!tt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const mt=Object.assign({iss:`https://securetoken.google.com/${De}`,aud:De,iat:oe,exp:oe+3600,auth_time:oe,sub:tt,user_id:tt,firebase:{sign_in_provider:"custom",identities:{}}},H);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(mt)),""].join(".")}function Fe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ge(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function le(){var H;const B=null===(H=Le())||void 0===H?void 0:H.forceEnvironment;if("node"===B)return!0;if("browser"===B)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function wt(){return"object"==typeof self&&self.self===self}function jt(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function wr(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ns(){const H=Fe();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function Po(){return!0===h.NODE_CLIENT||!0===h.NODE_ADMIN}function Ps(){return!le()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function he(){try{return"object"==typeof indexedDB}catch{return!1}}function fe(){return new Promise((H,B)=>{try{let q=!0;const De="validate-browser-context-for-indexeddb-analytics-module",oe=self.indexedDB.open(De);oe.onsuccess=()=>{oe.result.close(),q||self.indexedDB.deleteDatabase(De),H(!0)},oe.onupgradeneeded=()=>{q=!1},oe.onerror=()=>{var tt;B((null===(tt=oe.error)||void 0===tt?void 0:tt.message)||"")}}catch(q){B(q)}})}function we(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ie extends Error{constructor(B,q,De){super(q),this.code=B,this.customData=De,this.name="FirebaseError",Object.setPrototypeOf(this,Ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ae.prototype.create)}}class Ae{constructor(B,q,De){this.service=B,this.serviceName=q,this.errors=De}create(B,...q){const De=q[0]||{},oe=`${this.service}/${B}`,tt=this.errors[B],mt=tt?function et(H,B){return H.replace(st,(q,De)=>{const oe=B[De];return null!=oe?String(oe):`<${De}?>`})}(tt,De):"Error";return new Ie(oe,`${this.serviceName}: ${mt} (${oe}).`,De)}}const st=/\{\$([^}]+)}/g;function Vn(H){return JSON.parse(H)}function pt(H){return JSON.stringify(H)}const Qt=function(H){let B={},q={},De={},oe="";try{const tt=H.split(".");B=Vn(U(tt[0])||""),q=Vn(U(tt[1])||""),oe=tt[2],De=q.d||{},delete q.d}catch{}return{header:B,claims:q,data:De,signature:oe}},An=function(H){const q=Qt(H).claims;return!!q&&"object"==typeof q&&q.hasOwnProperty("iat")},lr=function(H){const B=Qt(H).claims;return"object"==typeof B&&!0===B.admin};function fn(H,B){return Object.prototype.hasOwnProperty.call(H,B)}function Nr(H,B){if(Object.prototype.hasOwnProperty.call(H,B))return H[B]}function mi(H){for(const B in H)if(Object.prototype.hasOwnProperty.call(H,B))return!1;return!0}function aa(H,B,q){const De={};for(const oe in H)Object.prototype.hasOwnProperty.call(H,oe)&&(De[oe]=B.call(q,H[oe],oe,H));return De}function yi(H,B){if(H===B)return!0;const q=Object.keys(H),De=Object.keys(B);for(const oe of q){if(!De.includes(oe))return!1;const tt=H[oe],mt=B[oe];if(_i(tt)&&_i(mt)){if(!yi(tt,mt))return!1}else if(tt!==mt)return!1}for(const oe of De)if(!q.includes(oe))return!1;return!0}function _i(H){return null!==H&&"object"==typeof H}function Qa(H){const B=[];for(const[q,De]of Object.entries(H))Array.isArray(De)?De.forEach(oe=>{B.push(encodeURIComponent(q)+"="+encodeURIComponent(oe))}):B.push(encodeURIComponent(q)+"="+encodeURIComponent(De));return B.length?"&"+B.join("&"):""}function gt(H){const B={};return H.replace(/^\?/,"").split("&").forEach(De=>{if(De){const[oe,tt]=De.split("=");B[decodeURIComponent(oe)]=decodeURIComponent(tt)}}),B}function Ht(H){const B=H.indexOf("?");if(!B)return"";const q=H.indexOf("#",B);return H.substring(B,q>0?q:void 0)}class St{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let B=1;B<this.blockSize;++B)this.pad_[B]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(B,q){q||(q=0);const De=this.W_;if("string"==typeof B)for(let Gt=0;Gt<16;Gt++)De[Gt]=B.charCodeAt(q)<<24|B.charCodeAt(q+1)<<16|B.charCodeAt(q+2)<<8|B.charCodeAt(q+3),q+=4;else for(let Gt=0;Gt<16;Gt++)De[Gt]=B[q]<<24|B[q+1]<<16|B[q+2]<<8|B[q+3],q+=4;for(let Gt=16;Gt<80;Gt++){const Ir=De[Gt-3]^De[Gt-8]^De[Gt-14]^De[Gt-16];De[Gt]=4294967295&(Ir<<1|Ir>>>31)}let mn,bt,oe=this.chain_[0],tt=this.chain_[1],mt=this.chain_[2],$t=this.chain_[3],Mn=this.chain_[4];for(let Gt=0;Gt<80;Gt++){Gt<40?Gt<20?(mn=$t^tt&(mt^$t),bt=1518500249):(mn=tt^mt^$t,bt=1859775393):Gt<60?(mn=tt&mt|$t&(tt|mt),bt=2400959708):(mn=tt^mt^$t,bt=3395469782);const Ir=(oe<<5|oe>>>27)+mn+Mn+bt+De[Gt]&4294967295;Mn=$t,$t=mt,mt=4294967295&(tt<<30|tt>>>2),tt=oe,oe=Ir}this.chain_[0]=this.chain_[0]+oe&4294967295,this.chain_[1]=this.chain_[1]+tt&4294967295,this.chain_[2]=this.chain_[2]+mt&4294967295,this.chain_[3]=this.chain_[3]+$t&4294967295,this.chain_[4]=this.chain_[4]+Mn&4294967295}update(B,q){if(null==B)return;void 0===q&&(q=B.length);const De=q-this.blockSize;let oe=0;const tt=this.buf_;let mt=this.inbuf_;for(;oe<q;){if(0===mt)for(;oe<=De;)this.compress_(B,oe),oe+=this.blockSize;if("string"==typeof B){for(;oe<q;)if(tt[mt]=B.charCodeAt(oe),++mt,++oe,mt===this.blockSize){this.compress_(tt),mt=0;break}}else for(;oe<q;)if(tt[mt]=B[oe],++mt,++oe,mt===this.blockSize){this.compress_(tt),mt=0;break}}this.inbuf_=mt,this.total_+=q}digest(){const B=[];let q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let oe=this.blockSize-1;oe>=56;oe--)this.buf_[oe]=255&q,q/=256;this.compress_(this.buf_);let De=0;for(let oe=0;oe<5;oe++)for(let tt=24;tt>=0;tt-=8)B[De]=this.chain_[oe]>>tt&255,++De;return B}}function yn(H,B){const q=new Pn(H,B);return q.subscribe.bind(q)}class Pn{constructor(B,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{B(this)}).catch(De=>{this.error(De)})}next(B){this.forEachObserver(q=>{q.next(B)})}error(B){this.forEachObserver(q=>{q.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,q,De){let oe;if(void 0===B&&void 0===q&&void 0===De)throw new Error("Missing Observer.");oe=function an(H,B){if("object"!=typeof H||null===H)return!1;for(const q of B)if(q in H&&"function"==typeof H[q])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:q,complete:De},void 0===oe.next&&(oe.next=Er),void 0===oe.error&&(oe.error=Er),void 0===oe.complete&&(oe.complete=Er);const tt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?oe.error(this.finalError):oe.complete()}catch{}}),this.observers.push(oe),tt}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,B)}sendOne(B,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{q(this.observers[B])}catch(De){typeof console<"u"&&console.error&&console.error(De)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Er(){}const ua=function(H,B,q,De){let oe;if(De<B?oe="at least "+B:De>q&&(oe=0===q?"none":"no more than "+q),oe)throw new Error(H+" failed: Was called with "+De+(1===De?" argument.":" arguments.")+" Expects "+oe+".")};function dn(H,B){return`${H} failed: ${B} argument `}function Ft(H,B,q,De){if((!De||q)&&"function"!=typeof q)throw new Error(dn(H,B)+"must be a valid function.")}function $i(H,B,q,De){if((!De||q)&&("object"!=typeof q||null===q))throw new Error(dn(H,B)+"must be a valid context object.")}const oo=function(H){const B=[];let q=0;for(let De=0;De<H.length;De++){let oe=H.charCodeAt(De);if(oe>=55296&&oe<=56319){const tt=oe-55296;De++,J(De<H.length,"Surrogate pair missing trail surrogate."),oe=65536+(tt<<10)+(H.charCodeAt(De)-56320)}oe<128?B[q++]=oe:oe<2048?(B[q++]=oe>>6|192,B[q++]=63&oe|128):oe<65536?(B[q++]=oe>>12|224,B[q++]=oe>>6&63|128,B[q++]=63&oe|128):(B[q++]=oe>>18|240,B[q++]=oe>>12&63|128,B[q++]=oe>>6&63|128,B[q++]=63&oe|128)}return B},ca=function(H){let B=0;for(let q=0;q<H.length;q++){const De=H.charCodeAt(q);De<128?B++:De<2048?B+=2:De>=55296&&De<=56319?(B+=4,q++):B+=3}return B},is=1e3,Cr=2,ir=144e5,En=.5;function ss(H,B=is,q=Cr){const De=B*Math.pow(q,H),oe=Math.round(En*De*(Math.random()-.5)*2);return Math.min(ir,De+oe)}function qt(H){return H&&H._delegate?H._delegate:H}},1758:(at,be,O)=>{var h=O(5879);let J=null;function F(){return J}class ne{}const ge=new h.OlP("DocumentToken");let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(ue)},providedIn:"platform"}),n})();const Se=new h.OlP("Location Initialized");let ue=(()=>{class n extends me{constructor(){super(),this._doc=(0,h.f3M)(ge),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new n},providedIn:"platform"}),n})();function U(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function G(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function X(n){return n&&"?"!==n[0]?"?"+n:n}let Be=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(We)},providedIn:"root"}),n})();const Re=new h.OlP("appBaseHref");let We=(()=>{class n extends Be{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(ge).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return U(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+X(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+X(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+X(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(me),h.LFG(Re,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Oe=(()=>{class n extends Be{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=U(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+X(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+X(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(me),h.LFG(Re,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),$e=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ie(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(G(ht(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+X(r))}normalize(t){return n.stripTrailingSlash(function _t(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,ht(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+X(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+X(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=X,n.joinWithSlash=U,n.stripTrailingSlash=G,n.\u0275fac=function(t){return new(t||n)(h.LFG(Be))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Le(){return new $e((0,h.LFG)(Be))}()},providedIn:"root"}),n})();function ht(n){return n.replace(/\/index.html$/,"")}function ao(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}const Ja=/\s+/,gh=[];let br=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this.initialClasses=gh,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(Ja):gh}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Ja):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(Ja).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class El{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let la=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new El(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,c),yh(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{yh(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function yh(n,e){n.context.$implicit=e.item}let us=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new hy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Rp("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Rp("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class hy{constructor(){this.$implicit=null,this.ngIf=null}}function Rp(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}let Ci=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function Fo(n){return"server"===n}let ls=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new si((0,h.LFG)(ge),window)}),n})();class si{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Lo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ni(this.window.history)||Ni(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ni(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class hr{}class Ia extends ne{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Vr extends Ia{static makeCurrent(){!function ee(n){J||(J=n)}(new Vr)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Lh(){return ba=ba||document.querySelector("base"),ba?ba.getAttribute("href"):null}();return null==t?null:function Oi(n){Bs=Bs||document.createElement("a"),Bs.setAttribute("href",n);const e=Bs.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ba=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ao(document.cookie,e)}}let Bs,ba=null,Vh=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Vl=new h.OlP("EventManagerPlugins");let ps=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(a=>a.supports(t)),!r)throw new h.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Vl),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Uh{constructor(e){this._doc=e}}const Ul="ng-app-id";let fc=(()=>{class n{constructor(t,r,i,a={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Fo(a),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Ul}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const a=i.get(t);return a.usage+=r,a.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,a=i?.get(r);if(a?.parentNode===t)return i.delete(r),a.removeAttribute(Ul),a;{const c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(Ul,this.appId),c}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const a=this.styleRef,c=a.get(r)?.elements;c?c.push(i):a.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ge),h.LFG(h.AFp),h.LFG(h.Ojb,8),h.LFG(h.Lbi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Bl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},co=/%COMP%/g,Hp=new h.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Hl(n,e){return e.map(t=>t.replace(co,n))}let Gi=(()=>{class n{constructor(t,r,i,a,c,f,y,w=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=a,this.doc=c,this.platformId=f,this.ngZone=y,this.nonce=w,this.rendererByCompId=new Map,this.platformIsServer=Fo(f),this.defaultRenderer=new Da(t,c,y,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===h.ifc.ShadowDom&&(r={...r,encapsulation:h.ifc.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof zt?i.applyToHost(t):i instanceof Me&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const c=this.doc,f=this.ngZone,y=this.eventManager,w=this.sharedStylesHost,D=this.removeStylesOnCompDestroy,M=this.platformIsServer;switch(r.encapsulation){case h.ifc.Emulated:a=new zt(y,w,r,this.appId,D,c,f,M);break;case h.ifc.ShadowDom:return new Gp(y,w,t,r,c,f,this.nonce,M);default:a=new Me(y,w,r,D,c,f,M)}i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ps),h.LFG(fc),h.LFG(h.AFp),h.LFG(Hp),h.LFG(ge),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(h.Ojb))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Da{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Bl[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Gl(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Gl(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new h.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Bl[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Bl[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=F().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Gl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Gp extends Da{constructor(e,t,r,i,a,c,f,y){super(e,a,c,y),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const w=Hl(i.id,i.styles);for(const D of w){const M=document.createElement("style");f&&M.setAttribute("nonce",f),M.textContent=D,this.shadowRoot.appendChild(M)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Me extends Da{constructor(e,t,r,i,a,c,f,y){super(e,a,c,f),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=y?Hl(y,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class zt extends Me{constructor(e,t,r,i,a,c,f,y){const w=i+"-"+r.id;super(e,t,r,a,c,f,y,w),this.contentAttr=function jh(n){return"_ngcontent-%COMP%".replace(co,n)}(w),this.hostAttr=function $p(n){return"_nghost-%COMP%".replace(co,n)}(w)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let zp=(()=>{class n extends Uh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ge))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ho=["alt","control","meta","shift"],Ur={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fo={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let pc=(()=>{class n extends Uh{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),c="code."),ho.forEach(w=>{const D=r.indexOf(w);D>-1&&(r.splice(D,1),c+=w+".")}),c+=a,0!=r.length||0===a.length)return null;const y={};return y.domEventName=i,y.fullKey=c,y}static matchEventFullKeyCode(t,r){let i=Ur[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ho.forEach(c=>{c!==i&&(0,fo[c])(t)&&(a+=c+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ge))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const mc=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function yy(){Vr.makeCurrent()},multi:!0},{provide:ge,useFactory:function Yr(){return(0,h.RDi)(document),document},deps:[]}]),kn=new h.OlP(""),Wi=[{provide:h.rWj,useClass:class my{addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new h.vHH(5103,!1);return a},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const f=function(y){c=c||y,a--,0==a&&r(c)};i.forEach(y=>{y.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],Br=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function gc(){return new h.qLn},deps:[]},{provide:Vl,useClass:zp,multi:!0,deps:[ge,h.R0b,h.Lbi]},{provide:Vl,useClass:pc,multi:!0,deps:[ge]},Gi,fc,ps,{provide:h.FYo,useExisting:Gi},{provide:hr,useClass:Vh,deps:[]},[]];let hu=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId}]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(kn,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...Br,...Wi],imports:[Ci,h.hGG]}),n})(),gu=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ge))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Wl(){return new gu((0,h.LFG)(ge))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var ms=O(8645);let ys=(()=>{class n{constructor(){this.subject=new ms.x}getModal(){return this.subject.asObservable()}modalState(t,r,i){this.subject.next({show:t,title:r,action:i})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();var jr=O(5619);let ai=(()=>{class n{constructor(){this.subject=new jr.X("")}getAlert(){return this.subject.asObservable()}showAlert(t,r){this.subject.next({message:t,type:r})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();var _n=O(2459),fr=O(5592);const{isArray:qh}=Array,{getPrototypeOf:Sa,prototype:wc,keys:Ql}=Object;function Ec(n){if(1===n.length){const e=n[0];if(qh(e))return{args:e,keys:null};if(function Kh(n){return n&&"object"==typeof n&&Sa(n)===wc}(e)){const t=Ql(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var js=O(4829),Di=O(4564),gn=O(8251),vt=O(7398);const{isArray:wu}=Array;function go(n){return(0,vt.U)(e=>function Aa(n,e){return wu(e)?n(...e):n(e)}(n,e))}function Jl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let Eu=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),mo=(()=>{class n extends Eu{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const or=new h.OlP("NgValueAccessor"),Cu={provide:or,useExisting:(0,h.Gpc)(()=>Hs),multi:!0},Iu=new h.OlP("CompositionEventMode");let Hs=(()=>{class n extends Eu{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ic(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(Iu,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[h._Bn([Cu]),h.qOj]}),n})();function Ho(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function bu(n){return null!=n&&"number"==typeof n.length}const pr=new h.OlP("NgValidators"),_s=new h.OlP("NgAsyncValidators"),ed=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class td{static min(e){return function $o(n){return e=>{if(Ho(e.value)||Ho(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function yo(n){return e=>{if(Ho(e.value)||Ho(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function bc(n){return Ho(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function Dc(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function nd(n){return Ho(n.value)||ed.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function $s(n){return e=>Ho(e.value)||!bu(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Zh(n){return e=>bu(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function rd(n){if(!n)return _o;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Ho(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Go(e)}static composeAsync(e){return Ki(e)}}function _o(n){return null}function Yh(n){return null!=n}function id(n){return(0,h.QGY)(n)?(0,_n.D)(n):n}function vo(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Gs(n,e){return e.map(t=>t(n))}function Fi(n){return n.map(e=>function vs(n){return!n.validate}(e)?e:t=>e.validate(t))}function Go(n){if(!n)return null;const e=n.filter(Yh);return 0==e.length?null:function(t){return vo(Gs(t,e))}}function wo(n){return null!=n?Go(Fi(n)):null}function Ki(n){if(!n)return null;const e=n.filter(Yh);return 0==e.length?null:function(t){return function qi(...n){const e=(0,Di.jO)(n),{args:t,keys:r}=Ec(n),i=new fr.y(a=>{const{length:c}=t;if(!c)return void a.complete();const f=new Array(c);let y=c,w=c;for(let D=0;D<c;D++){let M=!1;(0,js.Xf)(t[D]).subscribe((0,gn.x)(a,P=>{M||(M=!0,w--),f[D]=P},()=>y--,void 0,()=>{(!y||!M)&&(w||a.next(r?Jl(r,f):f),a.complete())}))}});return e?i.pipe(go(e)):i}(Gs(t,e).map(id)).pipe((0,vt.U)(vo))}}function Kp(n){return null!=n?Ki(Fi(n)):null}function Qh(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Zp(n){return n._rawValidators}function Jh(n){return n._rawAsyncValidators}function Xh(n){return n?Array.isArray(n)?n:[n]:[]}function zs(n,e){return Array.isArray(n)?n.includes(e):n===e}function Tc(n,e){const t=Xh(e);return Xh(n).forEach(i=>{zs(t,i)||t.push(i)}),t}function Yp(n,e){return Xh(e).filter(t=>!zs(n,t))}class zo{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=wo(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Kp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class qn extends zo{get formDirective(){return null}get path(){return null}}class ws extends zo{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Cn{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let sd=(()=>{class n extends Cn{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ws,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})(),Hr=(()=>{class n extends Cn{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(qn,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[h.qOj]}),n})();const qo="VALID",Eo="INVALID",gr="PENDING",Sr="DISABLED";function Ko(n){return(ud(n)?n.validators:n)||null}function ad(n,e){return(ud(e)?e.asyncValidators:n)||null}function ud(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Qp(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[t])throw new h.vHH(1001,"")}function Mc(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new h.vHH(1002,"")})}class Du{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===qo}get invalid(){return this.status===Eo}get pending(){return this.status==gr}get disabled(){return this.status===Sr}get enabled(){return this.status!==Sr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Tc(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Tc(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Yp(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Yp(e,this._rawAsyncValidators))}hasValidator(e){return zs(this._rawValidators,e)}hasAsyncValidator(e){return zs(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=gr,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Sr,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=qo,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===qo||this.status===gr)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Sr:qo}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=gr,this._hasOwnPendingAsyncValidator=!0;const t=id(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?Sr:this.errors?Eo:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gr)?gr:this._anyControlsHaveStatus(Eo)?Eo:qo}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ud(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function ef(n){return Array.isArray(n)?wo(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function tf(n){return Array.isArray(n)?Kp(n):n||null}(this._rawAsyncValidators)}}class cd extends Du{constructor(e,t,r){super(Ko(t),ad(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Mc(this,0,e),Object.keys(e).forEach(r=>{Qp(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class Co extends cd{}const Ma=new h.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>nf}),nf="always";function hd(n,e,t=nf){Xp(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function xa(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&eg(n,e)})}(n,e),function Iy(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function cw(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&eg(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Cy(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Jp(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),xc(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function rf(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Xp(n,e){const t=Zp(n);null!==e.validator?n.setValidators(Qh(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Jh(n);null!==e.asyncValidator?n.setAsyncValidators(Qh(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();rf(e._rawValidators,i),rf(e._rawAsyncValidators,i)}function xc(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=Zp(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(c=>c!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=Jh(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(c=>c!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return rf(e._rawValidators,r),rf(e._rawAsyncValidators,r),t}function eg(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ng(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function fd(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Ra=class extends Du{constructor(e=null,t,r){super(Ko(t),ad(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ud(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=fd(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ng(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ng(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){fd(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let xy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Ti=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const Au=new h.OlP("NgModelWithFormControlWarning"),Zi={provide:qn,useExisting:(0,h.Gpc)(()=>Zo)};let Zo=(()=>{class n extends qn{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(xc(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return hd(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Jp(t.control||null,t,!1),function qI(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function dw(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Jp(r||null,t),(n=>n instanceof Ra)(i)&&(hd(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function tg(n,e){Xp(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function by(n,e){return xc(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Xp(this.form,this),this._oldForm&&xc(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(pr,10),h.Y36(_s,10),h.Y36(Ma,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([Zi]),h.qOj,h.TTD]}),n})();const Oy={provide:ws,useExisting:(0,h.Gpc)(()=>yd)};let yd=(()=>{class n extends ws{set isDisabled(t){}constructor(t,r,i,a,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.name=null,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Dy(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===Hs?t=a:function WI(n){return Object.getPrototypeOf(n.constructor)===mo}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){this._added||this._setUpControl(),function Su(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function dd(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(qn,13),h.Y36(pr,10),h.Y36(_s,10),h.Y36(or,10),h.Y36(Au,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([Oy]),h.qOj,h.TTD]}),n})(),Es=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Ti]}),n})();class Lc extends Du{constructor(e,t,r){super(Ko(t),ad(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Mc(this,0,e),e.forEach((r,i)=>{Qp(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function vd(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let fg=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let a={};return vd(r)?a=r:null!==r&&(a.validators=r.validator,a.asyncValidators=r.asyncValidator),new cd(i,a)}record(t,r=null){const i=this._reduceControls(t);return new Co(i,r)}control(t,r,i){let a={};return this.useNonNullable?(vd(r)?a=r:(a.validators=r,a.asyncValidators=i),new Ra(t,{...a,nonNullable:!0})):new Ra(t,r,i)}array(t,r,i){const a=t.map(c=>this._createControl(c));return new Lc(a,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof Ra||t instanceof Du?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Cd=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ma,useValue:t.callSetDisabledState??nf}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Es]}),n})(),Id=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Au,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Ma,useValue:t.callSetDisabledState??nf}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Es]}),n})();var Et=O(2096),Ar=O(1631),Yo=O(4674);function hf(n,e){return(0,Yo.m)(e)?(0,Ar.z)(n,e,1):(0,Ar.z)(n,1)}var Yi=O(9360);function To(n,e){return(0,Yi.e)((t,r)=>{let i=0;t.subscribe((0,gn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}function pg(n){return(0,Yi.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var Qr=O(4664);class gg{}class mg{}class Ws{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(c):this.headers.set(a,[c])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ws?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ws;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ws?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let c=this.headers.get(t);if(!c)return;c=c.filter(f=>-1===a.indexOf(f)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(a=>a.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class ff{encodeKey(e){return YI(e)}encodeValue(e){return YI(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const eM=/%(\d[a-f0-9])/gi,cO={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function YI(n){return encodeURIComponent(n).replace(eM,(e,t)=>cO[t]??e)}function pf(n){return`${n}`}class Vc{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new ff,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function XA(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[c,f]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],y=t.get(c)||[];y.push(f),t.set(c,y)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(pf):[pf(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Vc({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(pf(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(pf(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class By{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function ww(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Ew(n){return typeof Blob<"u"&&n instanceof Blob}function Cw(n){return typeof FormData<"u"&&n instanceof FormData}class yg{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function vw(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new Ws),this.context||(this.context=new By),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+c}}else this.params=new Vc,this.urlWithParams=t}serializeBody(){return null===this.body?null:ww(this.body)||Ew(this.body)||Cw(this.body)||function QI(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Vc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Cw(this.body)?null:Ew(this.body)?this.body.type||null:ww(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Vc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,c=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,f=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let y=e.headers||this.headers,w=e.params||this.params;const D=e.context??this.context;return void 0!==e.setHeaders&&(y=Object.keys(e.setHeaders).reduce((M,P)=>M.set(P,e.setHeaders[P]),y)),e.setParams&&(w=Object.keys(e.setParams).reduce((M,P)=>M.set(P,e.setParams[P]),w)),new yg(t,r,a,{params:w,headers:y,context:D,reportProgress:f,responseType:i,withCredentials:c})}}var gf=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(gf||{});class Iw{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ws,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class bw extends Iw{constructor(e={}){super(e),this.type=gf.ResponseHeader}clone(e={}){return new bw({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class mf extends Iw{constructor(e={}){super(e),this.type=gf.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new mf({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class xu extends Iw{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function bd(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let tM=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof yg)a=t;else{let y,w;y=i.headers instanceof Ws?i.headers:new Ws(i.headers),i.params&&(w=i.params instanceof Vc?i.params:new Vc({fromObject:i.params})),a=new yg(t,r,void 0!==i.body?i.body:null,{headers:y,context:i.context,params:w,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=(0,Et.of)(a).pipe(hf(y=>this.handler.handle(y)));if(t instanceof yg||"events"===i.observe)return c;const f=c.pipe(To(y=>y instanceof mf));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return f.pipe((0,vt.U)(y=>{if(null!==y.body&&!(y.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return y.body}));case"blob":return f.pipe((0,vt.U)(y=>{if(null!==y.body&&!(y.body instanceof Blob))throw new Error("Response is not a Blob.");return y.body}));case"text":return f.pipe((0,vt.U)(y=>{if(null!==y.body&&"string"!=typeof y.body)throw new Error("Response is not a string.");return y.body}));default:return f.pipe((0,vt.U)(y=>y.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Vc).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,bd(i,r))}post(t,r,i={}){return this.request("POST",t,bd(i,r))}put(t,r,i={}){return this.request("PUT",t,bd(i,r))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(gg))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function JI(n,e){return e(n)}function rM(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const Tw=new h.OlP(""),qs=new h.OlP(""),yf=new h.OlP("");function XI(){let n=null;return(e,t)=>{null===n&&(n=((0,h.f3M)(Tw,{optional:!0})??[]).reduceRight(rM,JI));const r=(0,h.f3M)(h.HDt),i=r.add();return n(e,t).pipe(pg(()=>r.remove(i)))}}let Sw=(()=>{class n extends gg{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=(0,h.f3M)(h.HDt)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(qs),...this.injector.get(yf,[])]));this.chain=i.reduceRight((a,c)=>function iM(n,e,t){return(r,i)=>t.runInContext(()=>e(r,a=>n(a,i)))}(a,c,this.injector),JI)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(pg(()=>this.pendingTasks.remove(r)))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(mg),h.LFG(h.lqb))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const aM=/^\)\]\}',?\n/;let Mw=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new h.vHH(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?(0,_n.D)(r.\u0275loadImpl()):(0,Et.of)(null)).pipe((0,Qr.w)(()=>new fr.y(a=>{const c=r.build();if(c.open(t.method,t.urlWithParams),t.withCredentials&&(c.withCredentials=!0),t.headers.forEach((ae,ye)=>c.setRequestHeader(ae,ye.join(","))),t.headers.has("Accept")||c.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const ae=t.detectContentTypeHeader();null!==ae&&c.setRequestHeader("Content-Type",ae)}if(t.responseType){const ae=t.responseType.toLowerCase();c.responseType="json"!==ae?ae:"text"}const f=t.serializeBody();let y=null;const w=()=>{if(null!==y)return y;const ae=c.statusText||"OK",ye=new Ws(c.getAllResponseHeaders()),Qe=function uM(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(c)||t.url;return y=new bw({headers:ye,status:c.status,statusText:ae,url:Qe}),y},D=()=>{let{headers:ae,status:ye,statusText:Qe,url:dt}=w(),Xe=null;204!==ye&&(Xe=typeof c.response>"u"?c.responseText:c.response),0===ye&&(ye=Xe?200:0);let It=ye>=200&&ye<300;if("json"===t.responseType&&"string"==typeof Xe){const Bt=Xe;Xe=Xe.replace(aM,"");try{Xe=""!==Xe?JSON.parse(Xe):null}catch(tn){Xe=Bt,It&&(It=!1,Xe={error:tn,text:Xe})}}It?(a.next(new mf({body:Xe,headers:ae,status:ye,statusText:Qe,url:dt||void 0})),a.complete()):a.error(new xu({error:Xe,headers:ae,status:ye,statusText:Qe,url:dt||void 0}))},M=ae=>{const{url:ye}=w(),Qe=new xu({error:ae,status:c.status||0,statusText:c.statusText||"Unknown Error",url:ye||void 0});a.error(Qe)};let P=!1;const j=ae=>{P||(a.next(w()),P=!0);let ye={type:gf.DownloadProgress,loaded:ae.loaded};ae.lengthComputable&&(ye.total=ae.total),"text"===t.responseType&&c.responseText&&(ye.partialText=c.responseText),a.next(ye)},K=ae=>{let ye={type:gf.UploadProgress,loaded:ae.loaded};ae.lengthComputable&&(ye.total=ae.total),a.next(ye)};return c.addEventListener("load",D),c.addEventListener("error",M),c.addEventListener("timeout",M),c.addEventListener("abort",M),t.reportProgress&&(c.addEventListener("progress",j),null!==f&&c.upload&&c.upload.addEventListener("progress",K)),c.send(f),a.next({type:gf.Sent}),()=>{c.removeEventListener("error",M),c.removeEventListener("abort",M),c.removeEventListener("load",D),c.removeEventListener("timeout",M),t.reportProgress&&(c.removeEventListener("progress",j),null!==f&&c.upload&&c.upload.removeEventListener("progress",K)),c.readyState!==c.DONE&&c.abort()}})))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(hr))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const _f=new h.OlP("XSRF_ENABLED"),jy=new h.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Dd=new h.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class nb{}let dM=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ao(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ge),h.LFG(h.Lbi),h.LFG(jy))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function rb(n,e){const t=n.url.toLowerCase();if(!(0,h.f3M)(_f)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,h.f3M)(nb).getToken(),i=(0,h.f3M)(Dd);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Uc=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Uc||{});function Td(n,e){return{\u0275kind:n,\u0275providers:e}}function fM(...n){const e=[tM,Mw,Sw,{provide:gg,useExisting:Sw},{provide:mg,useExisting:Mw},{provide:qs,useValue:rb,multi:!0},{provide:_f,useValue:!0},{provide:nb,useClass:dM}];for(const t of n)e.push(...t.\u0275providers);return(0,h.MR2)(e)}const xw=new h.OlP("LEGACY_INTERCEPTOR_FN");let ib=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[fM(Td(Uc.LegacyInterceptors,[{provide:xw,useFactory:XI},{provide:qs,useExisting:xw,multi:!0}]))]}),n})();var zy=O(6321),Kn=O(5396),vf=O(7537);function Pw(...n){return function Sd(){return(0,vf.J)(1)}()((0,_n.D)(n,(0,Di.yG)(n)))}function wf(...n){const e=(0,Di.yG)(n);return(0,Yi.e)((t,r)=>{(e?Pw(n,t,e):Pw(n,t)).subscribe(r)})}function Ef(){return(0,Yi.e)((n,e)=>{let t,r=!1;n.subscribe((0,gn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function Ru(n,e){return(0,Yi.e)(function mM(n,e,t,r,i){return(a,c)=>{let f=t,y=e,w=0;a.subscribe((0,gn.x)(c,D=>{const M=w++;y=f?n(y,D,M):(f=!0,D),r&&c.next(y)},i&&(()=>{f&&c.next(y),c.complete()})))}}(n,e,arguments.length>=2,!0))}var Je,Cf=O(3997),Mr=O(6304),Wy=(O(5967),O(3106)),ve=O(5861),Qo=O(534),Oa=O(4537),Vi=O(7879),k=O(9058),yM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Jo={},qy=qy||{},Lt=yM||self;function _g(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ad(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var cb="closure_uid_"+(1e9*Math.random()>>>0),_M=0;function vM(n,e,t){return n.call.apply(n.bind,arguments)}function wO(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Qi(n,e,t){return(Qi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?vM:wO).apply(null,arguments)}function Md(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ci(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,a){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++)c[f-2]=arguments[f];return e.prototype[i].apply(r,c)}}function ka(){this.s=this.s,this.o=this.o}ka.prototype.s=!1,ka.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function vO(n){Object.prototype.hasOwnProperty.call(n,cb)&&n[cb]||(n[cb]=++_M)}(this)},ka.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const xd=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function vg(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Ky(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(_g(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let c=0;c<a;c++)n[i+c]=r[c]}else n.push(r)}}function zr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}zr.prototype.h=function(){this.defaultPrevented=!0};var Zy=function(){if(!Lt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Lt.addEventListener("test",()=>{},e),Lt.removeEventListener("test",()=>{},e)}catch{}return n}();function Nu(n){return/^[\s\xa0]*$/.test(n)}function wg(){var n=Lt.navigator;return n&&(n=n.userAgent)?n:""}function So(n){return-1!=wg().indexOf(n)}function If(n){return If[" "](n),n}If[" "]=function(){};var Uw,n,kw=So("Opera"),Bc=So("Trident")||So("MSIE"),Fw=So("Edge"),Lw=Fw||Bc,lb=So("Gecko")&&!(-1!=wg().toLowerCase().indexOf("webkit")&&!So("Edge"))&&!(So("Trident")||So("MSIE"))&&!So("Edge"),db=-1!=wg().toLowerCase().indexOf("webkit")&&!So("Edge");function Vw(){var n=Lt.document;return n?n.documentMode:void 0}e:{var Bw="",hb=(n=wg(),lb?/rv:([^\);]+)(\)|;)/.exec(n):Fw?/Edge\/([\d\.]+)/.exec(n):Bc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):db?/WebKit\/(\S+)/.exec(n):kw?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(hb&&(Bw=hb?hb[1]:""),Bc){var jw=Vw();if(null!=jw&&jw>parseFloat(Bw)){Uw=String(jw);break e}}Uw=Bw}var wM=Lt.document&&Bc&&(Vw()||parseInt(Uw,10))||void 0;function bf(n,e){if(zr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(lb){e:{try{If(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Hw[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&bf.$.h.call(this)}}ci(bf,zr);var Hw={2:"touch",3:"pen",4:"mouse"};bf.prototype.h=function(){bf.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var jc="closure_listenable_"+(1e6*Math.random()|0),EM=0;function fb(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++EM,this.fa=this.ia=!1}function Qy(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Jy(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function pb(n){const e={};for(const t in n)e[t]=n[t];return e}const Cg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gb(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<Cg.length;a++)t=Cg[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Pu(n){this.src=n,this.g={},this.h=0}function Rd(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=xd(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Qy(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function $w(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.fa&&a.listener==e&&a.capture==!!t&&a.la==r)return i}return-1}Pu.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=$w(n,e,r,i);return-1<c?(e=n[c],t||(e.ia=!1)):((e=new fb(e,this.src,a,!!r,i)).ia=t,n.push(e)),e};var Xy="closure_lm_"+(1e6*Math.random()|0),Gw={};function mb(n,e,t,r,i){if(r&&r.once)return zw(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)mb(n,e[a],t,r,i);return null}return t=Df(t),n&&n[jc]?n.O(e,t,Ad(r)?!!r.capture:!!r,i):yb(n,e,t,!1,r,i)}function yb(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=Ad(i)?!!i.capture:!!i,f=Ig(n);if(f||(n[Xy]=f=new Pu(n)),(t=f.add(e,t,r,c,a)).proxy)return t;if(r=function _b(){const e=IO;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Zy||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Ww(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function zw(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)zw(n,e[a],t,r,i);return null}return t=Df(t),n&&n[jc]?n.P(e,t,Ad(r)?!!r.capture:!!r,i):yb(n,e,t,!0,r,i)}function e_(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)e_(n,e[a],t,r,i);else r=Ad(r)?!!r.capture:!!r,t=Df(t),n&&n[jc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=$w(a=n.g[e],t,r,i))&&(Qy(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Ig(n))&&(e=n.g[e.toString()],n=-1,e&&(n=$w(e,t,r,i)),(t=-1<n?e[n]:null)&&Nd(t))}function Nd(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[jc])Rd(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Ww(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Ig(e))?(Rd(t,n),0==t.h&&(t.src=null,e[Xy]=null)):Qy(n)}}}function Ww(n){return n in Gw?Gw[n]:Gw[n]="on"+n}function IO(n,e){if(n.fa)n=!0;else{e=new bf(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Nd(n),n=t.call(r,e)}return n}function Ig(n){return(n=n[Xy])instanceof Pu?n:null}var Hc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Df(n){return"function"==typeof n?n:(n[Hc]||(n[Hc]=function(e){return n.handleEvent(e)}),n[Hc])}function Jr(){ka.call(this),this.i=new Pu(this),this.S=this,this.J=null}function li(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new zr(e,n);else if(e instanceof zr)e.target=e.target||n;else{var i=e;gb(e=new zr(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=t_(c,r,!0,e)&&i}if(i=t_(c=e.g=n,r,!0,e)&&i,i=t_(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=t_(c=e.g=t[a],r,!1,e)&&i}function t_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.fa&&c.capture==t){var f=c.listener,y=c.la||c.src;c.ia&&Rd(n.i,c),i=!1!==f.call(y,r)&&i}}return i&&!r.defaultPrevented}ci(Jr,ka),Jr.prototype[jc]=!0,Jr.prototype.removeEventListener=function(n,e,t,r){e_(this,n,e,t,r)},Jr.prototype.N=function(){if(Jr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Qy(t[r]);delete n.g[e],n.h--}}this.J=null},Jr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Jr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var qw=Lt.JSON.stringify;function IM(){var n=Kw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var vb=new class CM{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new wb,n=>n.reset());class wb{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Tf(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Ou(n){Lt.setTimeout(()=>{throw n},0)}let Sf,n_=!1,Kw=new class bM{constructor(){this.h=this.g=null}add(e,t){const r=vb.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},DM=()=>{const n=Lt.Promise.resolve(void 0);Sf=()=>{n.then(bO)}};var bO=()=>{for(var n;n=IM();){try{n.h.call(n.g)}catch(t){Ou(t)}var e=vb;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}n_=!1};function bg(n,e){Jr.call(this),this.h=n||1,this.g=e||Lt,this.j=Qi(this.qb,this),this.l=Date.now()}function r_(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Eb(n,e,t){if("function"==typeof n)t&&(n=Qi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Qi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Lt.setTimeout(n,e||0)}function Zw(n){n.g=Eb(()=>{n.g=null,n.i&&(n.i=!1,Zw(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ci(bg,Jr),(Je=bg.prototype).ga=!1,Je.T=null,Je.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),li(this,"tick"),this.ga&&(r_(this),this.start()))}},Je.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Je.N=function(){bg.$.N.call(this),r_(this),delete this.g};class i_ extends ka{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Zw(this)}N(){super.N(),this.g&&(Lt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Af(n){ka.call(this),this.h=n,this.g={}}ci(Af,ka);var Yw=[];function Qw(n,e,t,r){Array.isArray(t)||(t&&(Yw[0]=t.toString()),t=Yw);for(var i=0;i<t.length;i++){var a=mb(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function Vt(n){Jy(n.g,function(e,t){this.g.hasOwnProperty(t)&&Nd(e)},n),n.g={}}function Dg(){this.g=!0}function Pd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function TM(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return qw(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Af.prototype.N=function(){Af.$.N.call(this),Vt(this)},Af.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Dg.prototype.Ea=function(){this.g=!1},Dg.prototype.info=function(){};var Od={},Jw=null;function s_(){return Jw=Jw||new Jr}function Xw(n){zr.call(this,Od.Ta,n)}function Tg(n){const e=s_();li(e,new Xw(e))}function bb(n,e){zr.call(this,Od.STAT_EVENT,n),this.stat=e}function Cs(n){const e=s_();li(e,new bb(e,n))}function e0(n,e){zr.call(this,Od.Ua,n),this.size=e}function Mf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Lt.setTimeout(function(){n()},e)}Od.Ta="serverreachability",ci(Xw,zr),Od.STAT_EVENT="statevent",ci(bb,zr),Od.Ua="timingevent",ci(e0,zr);var Xo={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},kd={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function o_(){}function Sg(){}o_.prototype.h=null;var a_,Fa={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ag(){zr.call(this,"d")}function Fd(){zr.call(this,"c")}function xf(){}function Ld(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Af(this),this.P=Tb,this.V=new bg(n=Lw?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new u_}function u_(){this.i=null,this.g="",this.h=!1}ci(Ag,zr),ci(Fd,zr),ci(xf,o_),xf.prototype.g=function(){return new XMLHttpRequest},xf.prototype.i=function(){return{}},a_=new xf;var Tb=45e3,Mg={},c_={};function t0(n,e,t){n.L=1,n.v=h_(ku(e)),n.s=t,n.S=!0,Sb(n,null)}function Sb(n,e){n.G=Date.now(),xg(n),n.A=ku(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),c0(t.i,"t",r),n.C=0,t=n.l.J,n.h=new u_,n.g=qb(n.l,t?e:null,!n.s),0<n.O&&(n.M=new i_(Qi(n.Pa,n,n.g),n.O)),Qw(n.U,n.g,"readystatechange",n.nb),e=n.I?pb(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Tg(),function Cb(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",f=a.split("&"),y=0;y<f.length;y++){var w=f[y].split("=");if(1<w.length){var D=w[0];w=w[1];var M=D.split("_");c=2<=M.length&&"type"==M[1]?c+(D+"=")+w+"&":c+(D+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function n0(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function Ab(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=SM(n,t),i==c_){4==e&&(n.o=4,Cs(14),r=!1),Pd(n.j,n.m,null,"[Incomplete Response]");break}if(i==Mg){n.o=4,Cs(15),Pd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Pd(n.j,n.m,i,null),r0(n,i)}n0(n)&&i!=c_&&i!=Mg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Cs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),C0(e),e.M=!0,Cs(11))):(Pd(n.j,n.m,t,"[Invalid Chunked Response]"),Vd(n),Rf(n))}function SM(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?c_:(t=Number(e.substring(t,r)),isNaN(t)?Mg:(r+=1)+t>e.length?c_:(e=e.slice(r,r+t),n.C=r+t,e))}function xg(n){n.Y=Date.now()+n.P,Mb(n,n.P)}function Mb(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Mf(Qi(n.lb,n),e)}function Rg(n){n.B&&(Lt.clearTimeout(n.B),n.B=null)}function Rf(n){0==n.l.H||n.J||zb(n.l,n)}function Vd(n){Rg(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,r_(n.V),Vt(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function r0(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Og(t.i,n)))if(!n.K&&Og(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;__(t),m_(t)}E0(t),Cs(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=Mf(Qi(t.ib,t),6e3));if(1>=f0(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else jd(t,11)}else if((n.K||t.g==n)&&__(t),!Nu(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.V=w[0],w=w[1],2==t.H)if("c"==w[0]){t.K=w[1],t.pa=w[2];const D=w[3];null!=D&&(t.ra=D,t.l.info("VER="+t.ra));const M=w[4];null!=M&&(t.Ga=M,t.l.info("SVER="+t.Ga));const P=w[5];null!=P&&"number"==typeof P&&0<P&&(t.L=r=1.5*P,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const j=n.g;if(j){const K=j.g?j.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(K){var a=r.i;a.g||-1==K.indexOf("spdy")&&-1==K.indexOf("quic")&&-1==K.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(ea(a,a.h),a.h=null))}if(r.F){const ae=j.g?j.g.getResponseHeader("X-HTTP-Session-Id"):null;ae&&(r.Da=ae,Zn(r.I,r.F,ae))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var c=n;if((r=t).wa=b0(r,r.J?r.pa:null,r.Y),c.K){Ob(r.i,c);var f=c,y=r.L;y&&f.setTimeout(y),f.B&&(Rg(f),xg(f)),r.g=c}else Vg(r);0<t.j.length&&y_(t)}else"stop"!=w[0]&&"close"!=w[0]||jd(t,7);else 3==t.H&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?jd(t,7):v0(t):"noop"!=w[0]&&t.h&&t.h.Aa(w),t.A=0)}Tg()}catch{}}function xb(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(_g(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function AM(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(_g(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Ks(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(_g(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(Je=Ld.prototype).setTimeout=function(n){this.P=n},Je.nb=function(n){n=n.target;const e=this.M;e&&3==Va(n)?e.l():this.Pa(n)},Je.Pa=function(n){try{if(n==this.g)e:{const D=Va(this.g);var e=this.g.Ia();if(this.g.da(),!(3>D)&&(3!=D||Lw||this.g&&(this.h.h||this.g.ja()||Vb(this.g)))){this.J||4!=D||7==e||Tg(),Rg(this);var t=this.g.da();this.ca=t;t:if(n0(this)){var r=Vb(this.g);n="";var i=r.length,a=4==Va(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Vd(this),Rf(this);var c="";break t}this.h.i=new Lt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==t,function DO(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.W,D,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var f,y=this.g;if((f=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Nu(f)){var w=f;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,Cs(12),Vd(this),Rf(this);break e}Pd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,r0(this,t)}this.S?(Ab(this,D,c),Lw&&this.i&&3==D&&(Qw(this.U,this.V,"tick",this.mb),this.V.start())):(Pd(this.j,this.m,c,null),r0(this,c)),4==D&&Vd(this),this.i&&!this.J&&(4==D?zb(this.l,this):(this.i=!1,xg(this)))}else(function Fg(n){const e={};n=(n.g&&2<=Va(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Nu(n[r]))continue;var t=Tf(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const a=e[i]||[];e[i]=a,a.push(t)}!function CO(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Cs(12)):(this.o=0,Cs(13)),Vd(this),Rf(this)}}}catch{}},Je.mb=function(){if(this.g){var n=Va(this.g),e=this.g.ja();this.C<e.length&&(Rg(this),Ab(this,n,e),this.i&&4!=n&&xg(this))}},Je.cancel=function(){this.J=!0,Vd(this)},Je.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Ib(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Tg(),Cs(17)),Vd(this),this.o=2,Rf(this)):Mb(this,this.Y-n)};var MM=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $c(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof $c){this.h=n.h,l_(this,n.j),this.s=n.s,this.g=n.g,d_(this,n.m),this.l=n.l;var e=n.i,t=new Pg;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),o0(this,t),this.o=n.o}else n&&(e=String(n).match(MM))?(this.h=!1,l_(this,e[1]||"",!0),this.s=Ud(e[2]||""),this.g=Ud(e[3]||"",!0),d_(this,e[4]),this.l=Ud(e[5]||"",!0),o0(this,e[6]||"",!0),this.o=Ud(e[7]||"")):(this.h=!1,this.i=new Pg(null,this.h))}function ku(n){return new $c(n)}function l_(n,e,t){n.j=t?Ud(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function d_(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function o0(n,e,t){e instanceof Pg?(n.i=e,function l0(n,e){e&&!n.j&&(Fu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Nb(this,r),c0(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Ng(e,La)),n.i=new Pg(e,n.h))}function Zn(n,e,t){n.i.set(e,t)}function h_(n){return Zn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Ud(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ng(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,xM),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function xM(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}$c.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ng(e,Rb,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ng(e,Rb,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ng(t,"/"==t.charAt(0)?NM:RM,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ng(t,a0)),n.join("")};var Rb=/[#\/\?@]/g,RM=/[#\?:]/g,NM=/[#\?]/g,La=/[#\?@]/g,a0=/#/g;function Pg(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Fu(n){n.g||(n.g=new Map,n.h=0,n.i&&function s0(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Nb(n,e){Fu(n),e=Lu(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function u0(n,e){return Fu(n),e=Lu(n,e),n.g.has(e)}function c0(n,e,t){Nb(n,e),0<t.length&&(n.i=null,n.g.set(Lu(n,e),vg(t)),n.h+=t.length)}function Lu(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function d0(n){this.l=n||Pb,n=Lt.PerformanceNavigationTiming?0<(n=Lt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Lt.g&&Lt.g.Ka&&Lt.g.Ka()&&Lt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Je=Pg.prototype).add=function(n,e){Fu(this),this.i=null,n=Lu(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Je.forEach=function(n,e){Fu(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Je.ta=function(){Fu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},Je.Z=function(n){Fu(this);let e=[];if("string"==typeof n)u0(this,n)&&(e=e.concat(this.g.get(Lu(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Je.set=function(n,e){return Fu(this),this.i=null,u0(this,n=Lu(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Je.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Je.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var i=a;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var Pb=10;function h0(n){return!!n.h||!!n.g&&n.g.size>=n.j}function f0(n){return n.h?1:n.g?n.g.size:0}function Og(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function ea(n,e){n.g?n.g.add(e):n.h=e}function Ob(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function kb(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return vg(n.i)}d0.prototype.cancel=function(){if(this.i=kb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var p0=class{stringify(n){return Lt.JSON.stringify(n,void 0)}parse(n){return Lt.JSON.parse(n,void 0)}};function PM(){this.g=new p0}function g0(n,e,t){const r=t||"";try{xb(n,function(i,a){let c=i;Ad(i)&&(c=qw(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function f_(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Nf(n){this.l=n.fc||null,this.j=n.ob||!1}function p_(n,e){Jr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Pf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ci(Nf,o_),Nf.prototype.g=function(){return new p_(this.l,this.j)},Nf.prototype.i=function(n){return function(){return n}}({}),ci(p_,Jr);var Pf=0;function Of(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Gc(n){n.readyState=4,n.l=null,n.j=null,n.A=null,g_(n)}function g_(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Je=p_.prototype).open=function(n,e){if(this.readyState!=Pf)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,g_(this)},Je.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Lt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Je.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Gc(this)),this.readyState=Pf},Je.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,g_(this)),this.g&&(this.readyState=3,g_(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Lt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Of(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Je.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Gc(this):g_(this),3==this.readyState&&Of(this)}},Je.Za=function(n){this.g&&(this.response=this.responseText=n,Gc(this))},Je.Ya=function(n){this.g&&(this.response=n,Gc(this))},Je.ka=function(){this.g&&Gc(this)},Je.setRequestHeader=function(n,e){this.v.append(n,e)},Je.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Je.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(p_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var kM=Lt.JSON.parse;function ar(n){Jr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=m0,this.L=this.M=!1}ci(ar,Jr);var m0="",FM=/^https?$/i,LM=["POST","PUT"];function y0(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,kf(n),kg(n)}function kf(n){n.F||(n.F=!0,li(n,"complete"),li(n,"error"))}function Lb(n){if(n.h&&typeof qy<"u"&&(!n.C[1]||4!=Va(n)||2!=n.da()))if(n.v&&4==Va(n))Eb(n.La,0,n);else if(li(n,"readystatechange"),4==Va(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var i=String(n.I).match(MM)[1]||null;!i&&Lt.self&&Lt.self.location&&(i=Lt.self.location.protocol.slice(0,-1)),r=!FM.test(i?i.toLowerCase():"")}t=r}if(t)li(n,"complete"),li(n,"success");else{n.m=6;try{var a=2<Va(n)?n.g.statusText:""}catch{a=""}n.j=a+" ["+n.da()+"]",kf(n)}}finally{kg(n)}}}function kg(n,e){if(n.g){_0(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||li(n,"ready");try{t.onreadystatechange=r}catch{}}}function _0(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Lt.clearTimeout(n.A),n.A=null)}function Va(n){return n.g?n.g.readyState:0}function Vb(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case m0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Ub(n){let e="";return Jy(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Bb(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Ub(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Zn(n,e,t))}function Lg(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function jb(n){this.Ga=0,this.j=[],this.l=new Dg,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Lg("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Lg("baseRetryDelayMs",5e3,n),this.hb=Lg("retryDelaySeedMs",1e4,n),this.eb=Lg("forwardChannelMaxRetries",2,n),this.xa=Lg("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new d0(n&&n.concurrentRequestLimit),this.Ja=new PM,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function v0(n){if(Hb(n),3==n.H){var e=n.W++,t=ku(n.I);if(Zn(t,"SID",n.K),Zn(t,"RID",e),Zn(t,"TYPE","terminate"),Bd(n,t),(e=new Ld(n,n.l,e)).L=2,e.v=h_(ku(t)),t=!1,Lt.navigator&&Lt.navigator.sendBeacon)try{t=Lt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Lt.Image&&((new Image).src=e.v,t=!0),t||(e.g=qb(e.l,null),e.g.ha(e.v)),e.G=Date.now(),xg(e)}I0(n)}function m_(n){n.g&&(C0(n),n.g.cancel(),n.g=null)}function Hb(n){m_(n),n.u&&(Lt.clearTimeout(n.u),n.u=null),__(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Lt.clearTimeout(n.m),n.m=null)}function y_(n){if(!h0(n.i)&&!n.m){n.m=!0;var e=n.Na;Sf||DM(),n_||(Sf(),n_=!0),Kw.add(e,n),n.C=0}}function w0(n,e){var t;t=e?e.m:n.W++;const r=ku(n.I);Zn(r,"SID",n.K),Zn(r,"RID",t),Zn(r,"AID",n.V),Bd(n,r),n.o&&n.s&&Bb(r,n.o,n.s),t=new Ld(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=$b(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),ea(n.i,t),t0(t,r,e)}function Bd(n,e){n.na&&Jy(n.na,function(t,r){Zn(e,r,t)}),n.h&&xb({},function(t,r){Zn(e,r,t)})}function $b(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Qi(n.h.Va,n.h,n):null;e:{var i=n.j;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].g,c.push("ofs="+a)):a=0:c.push("ofs="+a);let f=!0;for(let y=0;y<t;y++){let w=i[y].g;const D=i[y].map;if(w-=a,0>w)a=Math.max(0,i[y].g-100),f=!1;else try{g0(D,c,"req"+w+"_")}catch{r&&r(D)}}if(f){r=c.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function Vg(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Sf||DM(),n_||(Sf(),n_=!0),Kw.add(e,n),n.A=0}}function E0(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Mf(Qi(n.Ma,n),Wb(n,n.A)),n.A++,0))}function C0(n){null!=n.B&&(Lt.clearTimeout(n.B),n.B=null)}function Gb(n){n.g=new Ld(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=ku(n.wa);Zn(e,"RID","rpc"),Zn(e,"SID",n.K),Zn(e,"AID",n.V),Zn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Zn(e,"TO",n.qa),Zn(e,"TYPE","xmlhttp"),Bd(n,e),n.o&&n.s&&Bb(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=h_(ku(e)),t.s=null,t.S=!0,Sb(t,n)}function __(n){null!=n.v&&(Lt.clearTimeout(n.v),n.v=null)}function zb(n,e){var t=null;if(n.g==e){__(n),C0(n),n.g=null;var r=2}else{if(!Og(n.i,e))return;t=e.F,Ob(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;li(r=s_(),new e0(r,t)),y_(n)}else Vg(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function VM(n,e){return!(f0(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Mf(Qi(n.Na,n,e),Wb(n,n.C)),n.C++,0)))}(n,e)||2==r&&E0(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:jd(n,5);break;case 4:jd(n,10);break;case 3:jd(n,6);break;default:jd(n,2)}}function Wb(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function jd(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Qi(n.pb,n);t||(t=new $c("//www.google.com/images/cleardot.gif"),Lt.location&&"http"==Lt.location.protocol||l_(t,"https"),h_(t)),function OM(n,e){const t=new Dg;if(Lt.Image){const r=new Image;r.onload=Md(f_,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Md(f_,t,r,"TestLoadImage: error",!1,e),r.onabort=Md(f_,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Md(f_,t,r,"TestLoadImage: timeout",!1,e),Lt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Cs(2);n.H=0,n.h&&n.h.za(e),I0(n),Hb(n)}function I0(n){if(n.H=0,n.ma=[],n.h){const e=kb(n.i);(0!=e.length||0!=n.j.length)&&(Ky(n.ma,e),Ky(n.ma,n.j),n.i.i.length=0,vg(n.j),n.j.length=0),n.h.ya()}}function b0(n,e,t){var r=t instanceof $c?ku(t):new $c(t);if(""!=r.g)e&&(r.g=e+"."+r.g),d_(r,r.m);else{var i=Lt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new $c(null);r&&l_(a,r),e&&(a.g=e),i&&d_(a,i),t&&(a.l=t),r=a}return e=n.Da,(t=n.F)&&e&&Zn(r,t,e),Zn(r,"VER",n.ra),Bd(n,r),r}function qb(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ar(t&&n.Ha&&!n.va?new Nf({ob:!0}):n.va)).Oa(n.J),e}function UM(){}function Ug(){if(Bc&&!(10<=Number(wM)))throw Error("Environmental error: no available transport.")}function Is(n,e){Jr.call(this),this.g=new jb(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Nu(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Nu(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ff(this)}function BM(n){Ag.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Bg(){Fd.call(this),this.status=1}function Ff(n){this.g=n}function Zs(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function D0(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var a=n.g[3],c=(e=n.g[0])+(a^(t=n.g[1])&((i=n.g[2])^a))+r[0]+3614090360&4294967295;c=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=t+(c<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=e+(i^a&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=e+(t^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=e+(i^(t|~a))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~a))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~a))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((a=(e=t+((c=e+(i^(t|~a))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((i=a+((c=i+(e^(a|~t))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+a&4294967295}function Yt(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var a=0|n[i];r&&a==e||(t[i]=a,r=!1)}this.g=t}(Je=ar.prototype).Oa=function(n){this.M=n},Je.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():a_.g(),this.C=function Db(n){return n.h||(n.h=n.i())}(this.u?this.u:a_),this.g.onreadystatechange=Qi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(a){return void y0(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Lt.FormData&&n instanceof Lt.FormData,!(0<=xd(LM,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,c]of t)this.g.setRequestHeader(a,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{_0(this),0<this.B&&((this.L=function Fb(n){return Bc&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qi(this.ua,this)):this.A=Eb(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){y0(this,a)}},Je.ua=function(){typeof qy<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,li(this,"timeout"),this.abort(8))},Je.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,li(this,"complete"),li(this,"abort"),kg(this))},Je.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),kg(this,!0)),ar.$.N.call(this)},Je.La=function(){this.s||(this.G||this.v||this.l?Lb(this):this.kb())},Je.kb=function(){Lb(this)},Je.isActive=function(){return!!this.g},Je.da=function(){try{return 2<Va(this)?this.g.status:-1}catch{return-1}},Je.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Je.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),kM(e)}},Je.Ia=function(){return this.m},Je.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Je=jb.prototype).ra=8,Je.H=1,Je.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Ld(this,this.l,n);let a=this.s;if(this.U&&(a?(a=pb(a),gb(a,this.U)):a=this.U),null!==this.o||this.O||(i.I=a,a=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=$b(this,i,e),Zn(t=ku(this.I),"RID",n),Zn(t,"CVER",22),this.F&&Zn(t,"X-HTTP-Session-Id",this.F),Bd(this,t),a&&(this.O?e="headers="+encodeURIComponent(String(Ub(a)))+"&"+e:this.o&&Bb(t,this.o,a)),ea(this.i,i),this.bb&&Zn(t,"TYPE","init"),this.P?(Zn(t,"$req",e),Zn(t,"SID","null"),i.aa=!0,t0(i,t,null)):t0(i,t,e),this.H=2}}else 3==this.H&&(n?w0(this,n):0==this.j.length||h0(this.i)||w0(this))},Je.Ma=function(){if(this.u=null,Gb(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Mf(Qi(this.jb,this),n)}},Je.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Cs(10),m_(this),Gb(this))},Je.ib=function(){null!=this.v&&(this.v=null,m_(this),E0(this),Cs(19))},Je.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Cs(2)):(this.l.info("Failed to ping google.com"),Cs(1))},Je.isActive=function(){return!!this.h&&this.h.isActive(this)},(Je=UM.prototype).Ba=function(){},Je.Aa=function(){},Je.za=function(){},Je.ya=function(){},Je.isActive=function(){return!0},Je.Va=function(){},Ug.prototype.g=function(n,e){return new Is(n,e)},ci(Is,Jr),Is.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Cs(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=b0(n,null,n.Y),y_(n)},Is.prototype.close=function(){v0(this.g)},Is.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=qw(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&y_(e)},Is.prototype.N=function(){this.g.h=null,delete this.j,v0(this.g),delete this.g,Is.$.N.call(this)},ci(BM,Ag),ci(Bg,Fd),ci(Ff,UM),Ff.prototype.Ba=function(){li(this.g,"a")},Ff.prototype.Aa=function(n){li(this.g,new BM(n))},Ff.prototype.za=function(n){li(this.g,new Bg)},Ff.prototype.ya=function(){li(this.g,"b")},ci(Zs,function jM(){this.blockSize=-1}),Zs.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Zs.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,a=0;a<e;){if(0==i)for(;a<=t;)D0(this,n,a),a+=this.blockSize;if("string"==typeof n){for(;a<e;)if(r[i++]=n.charCodeAt(a++),i==this.blockSize){D0(this,r),i=0;break}}else for(;a<e;)if(r[i++]=n[a++],i==this.blockSize){D0(this,r),i=0;break}}this.h=i,this.i+=e},Zs.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var jg={};function di(n){return-128<=n&&128>n?function EO(n,e){var t=jg;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Yt([0|e],0>e?-1:0)}):new Yt([0|n],0>n?-1:0)}function Ui(n){if(isNaN(n)||!isFinite(n))return zc;if(0>n)return mr(Ui(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=bs;return new Yt(e,0)}var bs=4294967296,zc=di(0),Wc=di(1),Hd=di(16777216);function Ds(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Si(n){return-1==n.h}function mr(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Yt(t,~n.h).add(Wc)}function Vu(n,e){return n.add(mr(e))}function Uu(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Ua(n,e){this.g=n,this.h=e}function Bu(n,e){if(Ds(e))throw Error("division by zero");if(Ds(n))return new Ua(zc,zc);if(Si(n))return e=Bu(mr(n),e),new Ua(mr(e.g),mr(e.h));if(Si(e))return e=Bu(n,mr(e)),new Ua(mr(e.g),e.h);if(30<n.g.length){if(Si(n)||Si(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Wc,r=e;0>=r.X(n);)t=T0(t),r=T0(r);var i=$d(t,1),a=$d(r,1);for(r=$d(r,2),t=$d(t,2);!Ds(r);){var c=a.add(r);0>=c.X(n)&&(i=i.add(t),a=c),r=$d(r,1),t=$d(t,1)}return e=Vu(n,i.R(e)),new Ua(i,e)}for(i=zc;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),c=(a=Ui(t)).R(e);Si(c)||0<c.X(n);)c=(a=Ui(t-=r)).R(e);Ds(a)&&(a=Wc),i=i.add(a),n=Vu(n,c)}return new Ua(i,n)}function T0(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Yt(t,n.h)}function $d(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],a=0;a<r;a++)i[a]=0<e?n.D(a+t)>>>e|n.D(a+t+1)<<32-e:n.D(a+t);return new Yt(i,n.h)}(Je=Yt.prototype).ea=function(){if(Si(this))return-mr(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:bs+r)*e,e*=bs}return n},Je.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Ds(this))return"0";if(Si(this))return"-"+mr(this).toString(n);for(var e=Ui(Math.pow(n,6)),t=this,r="";;){var i=Bu(t,e).g,a=((0<(t=Vu(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Ds(t=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Je.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Je.X=function(n){return Si(n=Vu(this,n))?-1:Ds(n)?0:1},Je.abs=function(){return Si(this)?mr(this):this},Je.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var a=r+(65535&this.D(i))+(65535&n.D(i)),c=(a>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=c>>>16,t[i]=(c&=65535)<<16|(a&=65535)}return new Yt(t,-2147483648&t[t.length-1]?-1:0)},Je.R=function(n){if(Ds(this)||Ds(n))return zc;if(Si(this))return Si(n)?mr(this).R(mr(n)):mr(mr(this).R(n));if(Si(n))return mr(this.R(mr(n)));if(0>this.X(Hd)&&0>n.X(Hd))return Ui(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var a=this.D(r)>>>16,c=65535&this.D(r),f=n.D(i)>>>16,y=65535&n.D(i);t[2*r+2*i]+=c*y,Uu(t,2*r+2*i),t[2*r+2*i+1]+=a*y,Uu(t,2*r+2*i+1),t[2*r+2*i+1]+=c*f,Uu(t,2*r+2*i+1),t[2*r+2*i+2]+=a*f,Uu(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Yt(t,0)},Je.gb=function(n){return Bu(this,n).h},Je.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Yt(t,this.h&n.h)},Je.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Yt(t,this.h|n.h)},Je.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Yt(t,this.h^n.h)},Ug.prototype.createWebChannel=Ug.prototype.g,Is.prototype.send=Is.prototype.u,Is.prototype.open=Is.prototype.m,Is.prototype.close=Is.prototype.close,Xo.NO_ERROR=0,Xo.TIMEOUT=8,Xo.HTTP_ERROR=6,kd.COMPLETE="complete",Sg.EventType=Fa,Fa.OPEN="a",Fa.CLOSE="b",Fa.ERROR="c",Fa.MESSAGE="d",Jr.prototype.listen=Jr.prototype.O,ar.prototype.listenOnce=ar.prototype.P,ar.prototype.getLastError=ar.prototype.Sa,ar.prototype.getLastErrorCode=ar.prototype.Ia,ar.prototype.getStatus=ar.prototype.da,ar.prototype.getResponseJson=ar.prototype.Wa,ar.prototype.getResponseText=ar.prototype.ja,ar.prototype.send=ar.prototype.ha,ar.prototype.setWithCredentials=ar.prototype.Oa,Zs.prototype.digest=Zs.prototype.l,Zs.prototype.reset=Zs.prototype.reset,Zs.prototype.update=Zs.prototype.j,Yt.prototype.add=Yt.prototype.add,Yt.prototype.multiply=Yt.prototype.R,Yt.prototype.modulo=Yt.prototype.gb,Yt.prototype.compare=Yt.prototype.X,Yt.prototype.toNumber=Yt.prototype.ea,Yt.prototype.toString=Yt.prototype.toString,Yt.prototype.getBits=Yt.prototype.D,Yt.fromNumber=Ui,Yt.fromString=function Hg(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return mr(Hg(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Ui(Math.pow(e,8)),r=zc,i=0;i<n.length;i+=8){var a=Math.min(8,n.length-i),c=parseInt(n.substring(i,i+a),e);8>a?(a=Ui(Math.pow(e,a)),r=r.R(a).add(Ui(c))):r=(r=r.R(t)).add(Ui(c))}return r};var Kb=Jo.createWebChannelTransport=function(){return new Ug},Zb=Jo.getStatEventTarget=function(){return s_()},v_=Jo.ErrorCode=Xo,Yb=Jo.EventType=kd,Qb=Jo.Event=Od,S0=Jo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Jb=Jo.FetchXmlHttpFactory=Nf,Lf=Jo.WebChannel=Sg,HM=Jo.XhrIo=ar,SO=Jo.Md5=Zs,$g=Jo.Integer=Yt;const Xb="@firebase/firestore";class hi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hi.UNAUTHENTICATED=new hi(null),hi.GOOGLE_CREDENTIALS=new hi("google-credentials-uid"),hi.FIRST_PARTY=new hi("first-party-uid"),hi.MOCK_USER=new hi("mock-user");let Gg="9.23.0";const qc=new Vi.Yd("@firebase/firestore");function eD(){return qc.logLevel}function Ve(n,...e){if(qc.logLevel<=Vi.in.DEBUG){const t=e.map(Gd);qc.debug(`Firestore (${Gg}): ${n}`,...t)}}function xr(n,...e){if(qc.logLevel<=Vi.in.ERROR){const t=e.map(Gd);qc.error(`Firestore (${Gg}): ${n}`,...t)}}function Ts(n,...e){if(qc.logLevel<=Vi.in.WARN){const t=e.map(Gd);qc.warn(`Firestore (${Gg}): ${n}`,...t)}}function Gd(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function rt(n="Unexpected state"){const e=`FIRESTORE (${Gg}) INTERNAL ASSERTION FAILED: `+n;throw xr(e),new Error(e)}function lt(n,e){n||rt()}function qe(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ur{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class nD{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(hi.UNAUTHENTICATED))}shutdown(){}}class zM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class WM{constructor(e){this.t=e,this.currentUser=hi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let c=new ur;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ur,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const w=c;e.enqueueRetryable((0,ve.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},y=w=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(w=>y(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?y(w):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ur)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(lt("string"==typeof r.accessToken),new nD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return lt(null===e||"string"==typeof e),new hi(e)}}class A0{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=hi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class w_{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new A0(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(hi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AO{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.T;return this.T=a.token,Ve("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?i(a):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(lt("string"==typeof t.token),this.T=t.token,new zg(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function qM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class E_{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=qM(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[a]%62))}return r}}function Ot(n,e){return n<e?-1:n>e?1:0}function zd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function rD(n){return n+"\0"}class tr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tr.fromMillis(Date.now())}static fromDate(e){return tr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new tr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ot(this.nanoseconds,e.nanoseconds):Ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class yt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new yt(e)}static min(){return new yt(new tr(0,0))}static max(){return new yt(new tr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Vf{constructor(e,t,r){void 0===t?t=0:t>e.length&&rt(),void 0===r?r=e.length-t:r>e.length-t&&rt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Vf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class cn extends Vf{construct(e,t,r){return new cn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new cn(t)}static emptyPath(){return new cn([])}}const KM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yr extends Vf{construct(e,t,r){return new yr(e,t,r)}static isValidIdentifier(e){return KM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new yr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ne(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Ne(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Ne(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===f?(c=!c,i++):"."!==f||c?(r+=f,i++):(a(),i++)}if(a(),c)throw new Ne(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yr(t)}static emptyPath(){return new yr([])}}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(cn.fromString(e))}static fromName(e){return new Ke(cn.fromString(e).popFirst(5))}static empty(){return new Ke(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===cn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new cn(e.slice()))}}class C_{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Wg(n){return n.fields.find(e=>2===e.kind)}function ju(n){return n.fields.filter(e=>2!==e.kind)}C_.UNKNOWN_ID=-1;class Wd{constructor(e,t){this.fieldPath=e,this.kind=t}}class qd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new qd(0,Ys.min())}}function M0(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=yt.fromTimestamp(1e9===r?new tr(t+1,0):new tr(t,r));return new Ys(i,Ke.empty(),e)}function iD(n){return new Ys(n.readTime,n.key,-1)}class Ys{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ys(yt.min(),Ke.empty(),-1)}static max(){return new Ys(yt.max(),Ke.empty(),-1)}}function x0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ke.comparator(n.documentKey,e.documentKey),0!==t?t:Ot(n.largestBatchId,e.largestBatchId))}const qg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Kg{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Hu(n){return b_.apply(this,arguments)}function b_(){return b_=(0,ve.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==qg)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),b_.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let i=0,a=0,c=!1;e.forEach(f=>{++i,f.next(()=>{++a,c&&a===i&&t()},y=>r(y))}),c=!0,a===i&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(i=>i?se.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new se((r,i)=>{const a=e.length,c=new Array(a);let f=0;for(let y=0;y<a;y++){const w=y;t(e[w]).next(D=>{c[w]=D,++f,f===a&&r(c)},D=>i(D))}})}static doWhile(e,t){return new se((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class D_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new ur,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Uf(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=T_(r.target.error);this.v.reject(new Uf(e,i))}}static open(e,t,r,i){try{return new D_(t,e.transaction(i,r))}catch(a){throw new Uf(t,a)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new sD(t)}}class Ao{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Ao.S((0,k.z$)())&&xr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),Kd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,k.hl)())return!1;if(Ao.C())return!0;const e=(0,k.z$)(),t=Ao.S(e),r=0<t&&t<10,i=Ao.N(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,ve.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new Uf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const f=c.target.error;i("VersionError"===f.name?new Ne(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Ne(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new Uf(e,f))},a.onupgradeneeded=c=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.V.O(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ve.Z)(function*(){const c="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.$(e);const y=D_.open(a.db,e,c?"readonly":"readwrite",r),w=i(y).next(D=>(y.P(),D)).catch(D=>(y.abort(D),se.reject(D))).toPromise();return w.catch(()=>{}),yield y.R,w}catch(y){const w=y,D="FirebaseError"!==w.name&&f<3;if(Ve("SimpleDb","Transaction failed with error:",w.message,"Retrying:",D),a.close(),!D)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class R0{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Kd(this.L.delete())}}class Uf extends Ne{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ba(n){return"IndexedDbTransactionError"===n.name}class sD{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Kd(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),Kd(this.store.add(e))}get(e){return Kd(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),Kd(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),Kd(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.W(i,(c,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new se((a,c)=>{i.onerror=f=>{c(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((i,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}J(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(a,c,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new se((r,i)=>{t.onerror=a=>{const c=T_(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():r()}):r()}})}W(e,t){const r=[];return new se((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void i();const y=new R0(f),w=t(f.primaryKey,f.value,y);if(w instanceof se){const D=w.catch(M=>(y.done(),se.reject(M)));r.push(D)}y.isDone?i():null===y.K?f.continue():f.continue(y.K)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Kd(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=T_(r.target.error);t(i)}})}let N0=!1;function T_(n){const e=Ao.S((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return N0||(N0=!0,setTimeout(()=>{throw r},0)),r}}return n}class oD{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ve("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ve.Z)(function*(){t.task=null;try{Ve("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Ba(r)?Ve("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Hu(r)}yield t.et(6e4)}))}}class aD{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ve.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,a=!0;return se.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Ve("IndexBackiller",`Processing collection: ${c}`),this.it(e,c,i).next(f=>{i-=f,r.add(c)});a=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const c=a.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.rt(i,a)).next(f=>(Ve("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>c.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,a)=>{const c=iD(a);x0(c,r)>0&&(r=c)}),new Ys(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Qs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Zg(n){return null==n}function Yg(n){return 0===n&&1/n==-1/0}function S_(n){return"number"==typeof n&&Number.isInteger(n)&&!Yg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function fi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=P0(e)),e=uD(n.get(t),e);return P0(e)}function uD(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function P0(n){return n+"\x01\x01"}function ta(n){const e=n.length;if(lt(e>=2),2===e)return lt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),cn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&rt(),n.charAt(c+1)){case"\x01":const f=n.substring(a,c);let y;0===i.length?y=f:(i+=f,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:rt()}a=c+2}return new cn(r)}const O0=["userId","batchId"];function Qg(n,e){return[n,fi(e)]}function k0(n,e,t){return[n,fi(e),t]}const cD={},lD=["prefixPath","collectionGroup","readTime","documentId"],A_=["prefixPath","collectionGroup","documentId"],Kc=["collectionGroup","readTime","prefixPath","documentId"],YM=["canonicalId","targetId"],QM=["targetId","path"],F0=["path","targetId"],Zd=["collectionId","parent"],L0=["indexId","uid"],JM=["uid","sequenceNumber"],V0=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],xO=["indexId","uid","orderedDocumentKey"],RO=["userId","collectionPath","documentId"],XM=["userId","collectionPath","largestBatchId"],ex=["userId","collectionGroup","largestBatchId"],U0=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],tx=[...U0,"documentOverlays"],Wr=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],B0=Wr,nx=[...B0,"indexConfiguration","indexState","indexEntries"];class j0 extends Kg{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Xr(n,e){const t=qe(n);return Ao.M(t.ht,e)}function dD(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function $u(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function H0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class vn{constructor(e,t){this.comparator=e,this.root=t||Ai.EMPTY}insert(e,t){return new vn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ai.BLACK,null,null))}remove(e){return new vn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ai.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new M_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new M_(this.root,e,this.comparator,!1)}getReverseIterator(){return new M_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new M_(this.root,e,this.comparator,!0)}}class M_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ai{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Ai.RED,this.left=i??Ai.EMPTY,this.right=a??Ai.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Ai(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ai.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ai.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ai.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ai.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}}Ai.EMPTY=null,Ai.RED=!0,Ai.BLACK=!1,Ai.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ai(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class jn{constructor(e){this.comparator=e,this.data=new vn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hD(this.data.getIterator())}getIteratorFrom(e){return new hD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof jn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new jn(this.comparator);return t.data=e,t}}class hD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Yd(n){return n.hasNext()?n.getNext():void 0}class Js{constructor(e){this.fields=e,e.sort(yr.comparator)}static empty(){return new Js([])}unionWith(e){let t=new jn(yr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Js(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class $0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new $0("Invalid base64 string: "+i):i}}(e);return new Rn(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rn.EMPTY_BYTE_STRING=new Rn("");const rx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gu(n){if(lt(!!n),"string"==typeof n){let e=0;const t=rx.exec(n);if(lt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wn(n.seconds),nanos:wn(n.nanos)}}function wn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ei(n){return"string"==typeof n?Rn.fromBase64String(n):Rn.fromUint8Array(n)}function Ss(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Jg(n){const e=n.mapValue.fields.__previous_value__;return Ss(e)?Jg(e):e}function Bf(n){const e=Gu(n.mapValue.fields.__local_write_time__.timestampValue);return new tr(e.seconds,e.nanos)}class ix{constructor(e,t,r,i,a,c,f,y,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=y,this.useFetchStreams=w}}class Zc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Zc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Zc&&e.projectId===this.projectId&&e.database===this.database}}const Yc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},x_={nullValue:"NULL_VALUE"};function ja(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ss(n)?4:P_(n)?9007199254740991:10:rt()}function As(n,e){if(n===e)return!0;const t=ja(n);if(t!==ja(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bf(n).isEqual(Bf(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Gu(r.timestampValue),c=Gu(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,ei(n.bytesValue).isEqual(ei(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return wn(r.geoPointValue.latitude)===wn(i.geoPointValue.latitude)&&wn(r.geoPointValue.longitude)===wn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return wn(r.integerValue)===wn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=wn(r.doubleValue),c=wn(i.doubleValue);return a===c?Yg(a)===Yg(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return zd(n.arrayValue.values||[],e.arrayValue.values||[],As);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(dD(a)!==dD(c))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===c[f]||!As(a[f],c[f])))return!1;return!0}(n,e);default:return rt()}var i}function Xg(n,e){return void 0!==(n.values||[]).find(t=>As(t,e))}function zu(n,e){if(n===e)return 0;const t=ja(n),r=ja(e);if(t!==r)return Ot(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ot(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=wn(i.integerValue||i.doubleValue),f=wn(a.integerValue||a.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(n,e);case 3:return fD(n.timestampValue,e.timestampValue);case 4:return fD(Bf(n),Bf(e));case 5:return Ot(n.stringValue,e.stringValue);case 6:return function(i,a){const c=ei(i),f=ei(a);return c.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),f=a.split("/");for(let y=0;y<c.length&&y<f.length;y++){const w=Ot(c[y],f[y]);if(0!==w)return w}return Ot(c.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=Ot(wn(i.latitude),wn(a.latitude));return 0!==c?c:Ot(wn(i.longitude),wn(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],f=a.values||[];for(let y=0;y<c.length&&y<f.length;++y){const w=zu(c[y],f[y]);if(w)return w}return Ot(c.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Yc.mapValue&&a===Yc.mapValue)return 0;if(i===Yc.mapValue)return 1;if(a===Yc.mapValue)return-1;const c=i.fields||{},f=Object.keys(c),y=a.fields||{},w=Object.keys(y);f.sort(),w.sort();for(let D=0;D<f.length&&D<w.length;++D){const M=Ot(f[D],w[D]);if(0!==M)return M;const P=zu(c[f[D]],y[w[D]]);if(0!==P)return P}return Ot(f.length,w.length)}(n.mapValue,e.mapValue);default:throw rt()}}function fD(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ot(n,e);const t=Gu(n),r=Gu(e),i=Ot(t.seconds,r.seconds);return 0!==i?i:Ot(t.nanos,r.nanos)}function jf(n){return R_(n)}function R_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Gu(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ei(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=R_(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const f of i)c?c=!1:a+=",",a+=`${f}:${R_(r.fields[f])}`;return a+"}"}(n.mapValue):rt();var e}function Ha(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function z0(n){return!!n&&"integerValue"in n}function Hf(n){return!!n&&"arrayValue"in n}function W0(n){return!!n&&"nullValue"in n}function q0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function N_(n){return!!n&&"mapValue"in n}function tm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return $u(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=tm(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=tm(n.arrayValue.values[t]);return e}return Object.assign({},n)}function P_(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function O_(n){return"nullValue"in n?x_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ha(Zc.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:rt()}function pD(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ha(Zc.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Yc:rt()}function K0(n,e){const t=zu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Z0(n,e){const t=zu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class pi{constructor(e){this.value=e}static empty(){return new pi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!N_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tm(t)}setAll(e){let t=yr.emptyPath(),r={},i=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=f.popLast()}c?r[f.lastSegment()]=tm(c):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());N_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return As(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];N_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){$u(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new pi(tm(this.value))}}function Y0(n){const e=[];return $u(n.fields,(t,r)=>{const i=new yr([t]);if(N_(r)){const a=Y0(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new Js(e)}class Hn{constructor(e,t,r,i,a,c,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=f}static newInvalidDocument(e){return new Hn(e,0,yt.min(),yt.min(),yt.min(),pi.empty(),0)}static newFoundDocument(e,t,r,i){return new Hn(e,1,t,yt.min(),r,i,0)}static newNoDocument(e,t){return new Hn(e,2,t,yt.min(),yt.min(),pi.empty(),0)}static newUnknownDocument(e,t){return new Hn(e,3,t,yt.min(),yt.min(),pi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(yt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Wu{constructor(e,t){this.position=e,this.inclusive=t}}function Q0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?Ke.comparator(Ke.fromName(c.referenceValue),t.key):zu(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function gD(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!As(n.position[t],e.position[t]))return!1;return!0}class $f{constructor(e,t="asc"){this.field=e,this.dir=t}}function sx(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class mD{}class nn extends mD{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new ox(e,t,r):"array-contains"===t?new CD(e,r):"in"===t?new tE(e,r):"not-in"===t?new ID(e,r):"array-contains-any"===t?new bD(e,r):new nn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new ax(e,r):new ux(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(zu(t,this.value)):null!==t&&ja(this.value)===ja(t)&&this.matchesComparison(zu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Tn extends mD{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Tn(e,t)}matches(e){return Gf(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Gf(n){return"and"===n.op}function J0(n){return"or"===n.op}function X0(n){return yD(n)&&Gf(n)}function yD(n){for(const e of n.filters)if(e instanceof Tn)return!1;return!0}function eE(n){if(n instanceof nn)return n.field.canonicalString()+n.op.toString()+jf(n.value);if(X0(n))return n.filters.map(e=>eE(e)).join(",");{const e=n.filters.map(t=>eE(t)).join(",");return`${n.op}(${e})`}}function _D(n,e){return n instanceof nn?(t=n,(r=e)instanceof nn&&t.op===r.op&&t.field.isEqual(r.field)&&As(t.value,r.value)):n instanceof Tn?function(t,r){return r instanceof Tn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,c)=>i&&_D(a,r.filters[c]),!0)}(n,e):void rt();var t,r}function vD(n,e){const t=n.filters.concat(e);return Tn.create(t,n.op)}function wD(n){return n instanceof nn?`${(e=n).field.canonicalString()} ${e.op} ${jf(e.value)}`:n instanceof Tn?function(e){return e.op.toString()+" {"+e.getFilters().map(wD).join(" ,")+"}"}(n):"Filter";var e}class ox extends nn{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class ax extends nn{constructor(e,t){super(e,"in",t),this.keys=ED(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ux extends nn{constructor(e,t){super(e,"not-in",t),this.keys=ED(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ED(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class CD extends nn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Hf(t)&&Xg(t.arrayValue,this.value)}}class tE extends nn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Xg(this.value.arrayValue,t)}}class ID extends nn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Xg(this.value.arrayValue,t)}}class bD extends nn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Hf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Xg(this.value.arrayValue,r))}}class DD{constructor(e,t=null,r=[],i=[],a=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=f,this.dt=null}}function k_(n,e=null,t=[],r=[],i=null,a=null,c=null){return new DD(n,e,t,r,i,a,c)}function Qc(n){const e=qe(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>eE(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Zg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>jf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>jf(r)).join(",")),e.dt=t}return e.dt}function zf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!sx(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!_D(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!gD(n.startAt,e.startAt)&&gD(n.endAt,e.endAt)}function nm(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function rm(n,e){return n.filters.filter(t=>t instanceof nn&&t.field.isEqual(e))}function nE(n,e,t){let r=x_,i=!0;for(const a of rm(n,e)){let c=x_,f=!0;switch(a.op){case"<":case"<=":c=O_(a.value);break;case"==":case"in":case">=":c=a.value;break;case">":c=a.value,f=!1;break;case"!=":case"not-in":c=x_}K0({value:r,inclusive:i},{value:c,inclusive:f})<0&&(r=c,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];K0({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function Jc(n,e,t){let r=Yc,i=!0;for(const a of rm(n,e)){let c=Yc,f=!0;switch(a.op){case">=":case">":c=pD(a.value),f=!1;break;case"==":case"in":case"<=":c=a.value;break;case"<":c=a.value,f=!1;break;case"!=":case"not-in":c=Yc}Z0({value:r,inclusive:i},{value:c,inclusive:f})>0&&(r=c,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];Z0({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class qu{constructor(e,t=null,r=[],i=[],a=null,c="F",f=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=f,this.endAt=y,this.wt=null,this._t=null}}function TD(n,e,t,r,i,a,c,f){return new qu(n,e,t,r,i,a,c,f)}function na(n){return new qu(n)}function cx(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function im(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function rE(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function F_(n){return null!==n.collectionGroup}function Xc(n){const e=qe(n);if(null===e.wt){e.wt=[];const t=rE(e),r=im(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new $f(t)),e.wt.push(new $f(yr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new $f(yr.keyField(),a))}}}return e.wt}function Ms(n){const e=qe(n);if(!e._t)if("F"===e.limitType)e._t=k_(e.path,e.collectionGroup,Xc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Xc(e))t.push(new $f(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Wu(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Wu(e.startAt.position,e.startAt.inclusive):null;e._t=k_(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function el(n,e){e.getFirstInequalityField(),rE(n);const t=n.filters.concat([e]);return new qu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function L_(n,e,t){return new qu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function sm(n,e){return zf(Ms(n),Ms(e))&&n.limitType===e.limitType}function SD(n){return`${Qc(Ms(n))}|lt:${n.limitType}`}function tl(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>wD(r)).join(", ")}]`),Zg(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>jf(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>jf(r)).join(",")),`Target(${t})`}(Ms(n))}; limitType=${n.limitType})`}function om(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ke.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Xc(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const f=Q0(i,a,c);return i.inclusive?f<=0:f<0}(t.startAt,Xc(t),r)||t.endAt&&!function(i,a,c){const f=Q0(i,a,c);return i.inclusive?f>=0:f>0}(t.endAt,Xc(t),r)));var t,r}function am(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function um(n){return(e,t)=>{let r=!1;for(const i of Xc(n)){const a=xs(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function xs(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(i,a,c){const f=a.data.field(i),y=c.data.field(i);return null!==f&&null!==y?zu(f,y):rt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return rt()}}class nl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$u(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return H0(this.inner)}size(){return this.innerSize}}const AD=new vn(Ke.comparator);function Ji(){return AD}const MD=new vn(Ke.comparator);function Wf(...n){let e=MD;for(const t of n)e=e.insert(t.key,t);return e}function iE(n){let e=MD;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ra(){return cm()}function sE(){return cm()}function cm(){return new nl(n=>n.toString(),(n,e)=>n.isEqual(e))}const lx=new vn(Ke.comparator),dx=new jn(Ke.comparator);function kt(...n){let e=dx;for(const t of n)e=e.add(t);return e}const hx=new jn(Ot);function oE(){return hx}function xD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yg(e)?"-0":e}}function lm(n){return{integerValue:""+n}}function aE(n,e){return S_(e)?lm(e):xD(n,e)}class dm{constructor(){this._=void 0}}function RD(n,e,t){return n instanceof $a?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Ss(i)&&(i=Jg(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Qd?ND(n,e):n instanceof Jd?uE(n,e):function(r,i){const a=qf(r,i),c=cE(a)+cE(r.gt);return z0(a)&&z0(r.gt)?lm(c):xD(r.serializer,c)}(n,e)}function fx(n,e,t){return n instanceof Qd?ND(n,e):n instanceof Jd?uE(n,e):t}function qf(n,e){return n instanceof Xd?z0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class $a extends dm{}class Qd extends dm{constructor(e){super(),this.elements=e}}function ND(n,e){const t=PD(e);for(const r of n.elements)t.some(i=>As(i,r))||t.push(r);return{arrayValue:{values:t}}}class Jd extends dm{constructor(e){super(),this.elements=e}}function uE(n,e){let t=PD(e);for(const r of n.elements)t=t.filter(i=>!As(i,r));return{arrayValue:{values:t}}}class Xd extends dm{constructor(e,t){super(),this.serializer=e,this.gt=t}}function cE(n){return wn(n.integerValue||n.doubleValue)}function PD(n){return Hf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Kf{constructor(e,t){this.field=e,this.transform=t}}class gx{constructor(e,t){this.version=e,this.transformResults=t}}class cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cr}static exists(e){return new cr(void 0,e)}static updateTime(e){return new cr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lE(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class dE{}function mx(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Zf(n.key,cr.none()):new eh(n.key,n.data,cr.none());{const t=n.data,r=pi.empty();let i=new jn(yr.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);null===c&&a.length>1&&(a=a.popLast(),c=t.field(a)),null===c?r.delete(a):r.set(a,c),i=i.add(a)}return new Xs(n.key,r,new Js(i.toArray()),cr.none())}}function OD(n,e,t){n instanceof eh?function(r,i,a){const c=r.value.clone(),f=LD(r.fieldTransforms,i,a.transformResults);c.setAll(f),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Xs?function(r,i,a){if(!lE(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=LD(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(FD(r)),f.setAll(c),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function rl(n,e,t,r){return n instanceof eh?function(i,a,c,f){if(!lE(i.precondition,a))return c;const y=i.value.clone(),w=VD(i.fieldTransforms,f,a);return y.setAll(w),a.convertToFoundDocument(a.version,y).setHasLocalMutations(),null}(n,e,t,r):n instanceof Xs?function(i,a,c,f){if(!lE(i.precondition,a))return c;const y=VD(i.fieldTransforms,f,a),w=a.data;return w.setAll(FD(i)),w.setAll(y),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(D=>D.field))}(n,e,t,r):(c=t,lE(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c);var a,c}function yx(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=qf(r.transform,i||null);null!=a&&(null===t&&(t=pi.empty()),t.set(r.field,a))}return t||null}function kD(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&zd(t,r,(i,a)=>function px(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Qd&&r instanceof Qd||t instanceof Jd&&r instanceof Jd?zd(t.elements,r.elements,As):t instanceof Xd&&r instanceof Xd?As(t.gt,r.gt):t instanceof $a&&r instanceof $a);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class eh extends dE{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xs extends dE{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function FD(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function LD(n,e,t){const r=new Map;lt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,f=e.data.field(a.field);r.set(a.field,fx(c,f,t[i]))}return r}function VD(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,RD(a,c,e))}return r}class Zf extends dE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UD extends dE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class hE{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&OD(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=rl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=rl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=sE();return this.mutations.forEach(i=>{const a=e.get(i.key),c=a.overlayedDocument;let f=this.applyToLocalView(c,a.mutatedFields);f=t.has(i.key)?null:f;const y=mx(c,f);null!==y&&r.set(i.key,y),c.isValidDocument()||c.convertToNoDocument(yt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),kt())}isEqual(e){return this.batchId===e.batchId&&zd(this.mutations,e.mutations,(t,r)=>kD(t,r))&&zd(this.baseMutations,e.baseMutations,(t,r)=>kD(t,r))}}class V_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){lt(e.mutations.length===r.length);let i=lx;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new V_(e,t,r,i)}}class fE{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class hm{constructor(e,t){this.count=e,this.unchangedNames=t}}var qr,ln;function BD(n){switch(n){default:return rt();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function pE(n){if(void 0===n)return xr("GRPC error has no .code"),de.UNKNOWN;switch(n){case qr.OK:return de.OK;case qr.CANCELLED:return de.CANCELLED;case qr.UNKNOWN:return de.UNKNOWN;case qr.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case qr.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case qr.INTERNAL:return de.INTERNAL;case qr.UNAVAILABLE:return de.UNAVAILABLE;case qr.UNAUTHENTICATED:return de.UNAUTHENTICATED;case qr.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case qr.NOT_FOUND:return de.NOT_FOUND;case qr.ALREADY_EXISTS:return de.ALREADY_EXISTS;case qr.PERMISSION_DENIED:return de.PERMISSION_DENIED;case qr.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case qr.ABORTED:return de.ABORTED;case qr.OUT_OF_RANGE:return de.OUT_OF_RANGE;case qr.UNIMPLEMENTED:return de.UNIMPLEMENTED;case qr.DATA_LOSS:return de.DATA_LOSS;default:return rt()}}(ln=qr||(qr={}))[ln.OK=0]="OK",ln[ln.CANCELLED=1]="CANCELLED",ln[ln.UNKNOWN=2]="UNKNOWN",ln[ln.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ln[ln.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ln[ln.NOT_FOUND=5]="NOT_FOUND",ln[ln.ALREADY_EXISTS=6]="ALREADY_EXISTS",ln[ln.PERMISSION_DENIED=7]="PERMISSION_DENIED",ln[ln.UNAUTHENTICATED=16]="UNAUTHENTICATED",ln[ln.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ln[ln.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ln[ln.ABORTED=10]="ABORTED",ln[ln.OUT_OF_RANGE=11]="OUT_OF_RANGE",ln[ln.UNIMPLEMENTED=12]="UNIMPLEMENTED",ln[ln.INTERNAL=13]="INTERNAL",ln[ln.UNAVAILABLE=14]="UNAVAILABLE",ln[ln.DATA_LOSS=15]="DATA_LOSS";class gE{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return fm}static getOrCreateInstance(){return null===fm&&(fm=new gE),fm}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let fm=null;function jD(){return new TextEncoder}const mE=new $g([4294967295,4294967295],0);function HD(n){const e=jD().encode(n),t=new SO;return t.update(e),new Uint8Array(t.digest())}function yE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new $g([t,r],0),new $g([i,a],0)]}class U_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new pm(`Invalid padding: ${t}`);if(r<0)throw new pm(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new pm(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new pm(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=$g.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply($g.fromNumber(r)));return 1===i.compare(mE)&&(i=new $g([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=HD(e),[r,i]=yE(t);for(let a=0;a<this.hashCount;a++){const c=this.Et(r,i,a);if(!this.At(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new U_(a,i,t);return r.forEach(f=>c.insert(f)),c}insert(e){if(0===this.It)return;const t=HD(e),[r,i]=yE(t);for(let a=0;a<this.hashCount;a++){const c=this.Et(r,i,a);this.Rt(c)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class pm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class gm{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,mm.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new gm(yt.min(),i,new vn(Ot),Ji(),kt())}}class mm{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new mm(r,t,kt(),kt(),kt())}}class Yf{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class $D{constructor(e,t){this.targetId=e,this.Vt=t}}class _E{constructor(e,t,r=Rn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class GD{constructor(){this.St=0,this.Dt=WD(),this.Ct=Rn.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=kt(),t=kt(),r=kt();return this.Dt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:rt()}}),new mm(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=WD()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class vx{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ji(),this.zt=zD(),this.Wt=new vn(Ot)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:rt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,a=this.se(r);if(a){const c=a.target;if(nm(c))if(0===i){const f=new Ke(c.path);this.Yt(r,f,Hn.newNoDocument(f,yt.min()))}else lt(1===i);else{const f=this.ie(r);if(f!==i){const y=this.re(e,f);0!==y&&(this.ee(r),this.Wt=this.Wt.insert(r,2===y?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=gE.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(w,D,M){var P,j,K,ae,ye,Qe;const dt={localCacheCount:D,existenceFilterCount:M.count},Xe=M.unchangedNames;return Xe&&(dt.bloomFilter={applied:0===w,hashCount:null!==(P=Xe?.hashCount)&&void 0!==P?P:0,bitmapLength:null!==(ae=null===(K=null===(j=Xe?.bits)||void 0===j?void 0:j.bitmap)||void 0===K?void 0:K.length)&&void 0!==ae?ae:0,padding:null!==(Qe=null===(ye=Xe?.bits)||void 0===ye?void 0:ye.padding)&&void 0!==Qe?Qe:0}),dt}(y,f,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:a="",padding:c=0},hashCount:f=0}=r;let y,w;try{y=ei(a).toUint8Array()}catch(D){if(D instanceof $0)return Ts("Decoding the base64 bloom filter in existence filter failed ("+D.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw D}try{w=new U_(y,c,f)}catch(D){return Ts(D instanceof pm?"BloomFilter error: ":"Applying bloom filter failed: ",D),1}return 0===w.It?1:i!==t-this.oe(e.targetId,w)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(a=>{const c=this.Gt.ue(),f=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;t.vt(f)||(this.Yt(e,a,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((a,c)=>{const f=this.se(c);if(f){if(a.current&&nm(f.target)){const y=new Ke(f.target.path);null!==this.jt.get(y)||this.ae(c,y)||this.Yt(c,y,Hn.newNoDocument(y,e))}a.Mt&&(t.set(c,a.Ot()),a.Ft())}});let r=kt();this.zt.forEach((a,c)=>{let f=!0;c.forEachWhile(y=>{const w=this.se(y);return!w||"TargetPurposeLimboResolution"===w.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.jt.forEach((a,c)=>c.setReadTime(e));const i=new gm(e,t,this.Wt,this.jt,r);return this.jt=Ji(),this.zt=zD(),this.Wt=new vn(Ot),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new GD,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new jn(Ot),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new GD),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function zD(){return new vn(Ke.comparator)}function WD(){return new vn(Ke.comparator)}const wx={asc:"ASCENDING",desc:"DESCENDING"},Ex={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Cx={and:"AND",or:"OR"};class Ix{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function B_(n,e){return n.useProto3Json||Zg(e)?e:{value:e}}function th(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qD(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function bx(n,e){return th(n,e.toTimestamp())}function _r(n){return lt(!!n),yt.fromTimestamp(function(e){const t=Gu(e);return new tr(t.seconds,t.nanos)}(n))}function vE(n,e){return(t=n,new cn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function KD(n){const e=cn.fromString(n);return lt(IE(e)),e}function ym(n,e){return vE(n.databaseId,e.path)}function Mo(n,e){const t=KD(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(ZD(t))}function _m(n,e){return vE(n.databaseId,e)}function wE(n){const e=KD(n);return 4===e.length?cn.emptyPath():ZD(e)}function nh(n){return new cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ZD(n){return lt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function YD(n,e,t){return{name:ym(n,e),fields:t.value.mapValue.fields}}function j_(n,e,t){const r=Mo(n,e.name),i=_r(e.updateTime),a=e.createTime?_r(e.createTime):yt.min(),c=new pi({mapValue:{fields:e.fields}}),f=Hn.newFoundDocument(r,i,a,c);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function Ga(n,e){let t;if(e instanceof eh)t={update:YD(n,e.key,e.value)};else if(e instanceof Zf)t={delete:ym(n,e.key)};else if(e instanceof Xs)t={update:YD(n,e.key,e.data),updateMask:eT(e.fieldMask)};else{if(!(e instanceof UD))return rt();t={verify:ym(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof $a)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Qd)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Jd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Xd)return{fieldPath:a.field.canonicalString(),increment:c.gt};throw rt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:bx(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:rt()),t;var i}function H_(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?cr.updateTime(_r(i.updateTime)):void 0!==i.exists?cr.exists(i.exists):cr.none():cr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let f=null;"setToServerValue"in c?(lt("REQUEST_TIME"===c.setToServerValue),f=new $a):"appendMissingElements"in c?f=new Qd(c.appendMissingElements.values||[]):"removeAllFromArray"in c?f=new Jd(c.removeAllFromArray.values||[]):"increment"in c?f=new Xd(a,c.increment):rt();const y=yr.fromServerFormat(c.fieldPath);return new Kf(y,f)}(n,i)):[];var i;if(e.update){const i=Mo(n,e.update.name),a=new pi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Js((e.updateMask.fieldPaths||[]).map(w=>yr.fromServerFormat(w)));return new Xs(i,a,c,t,r)}return new eh(i,a,t,r)}if(e.delete){const i=Mo(n,e.delete);return new Zf(i,t)}if(e.verify){const i=Mo(n,e.verify);return new UD(i,t)}return rt()}function Sx(n,e){return{documents:[_m(n,e.path)]}}function vm(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=_m(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=_m(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0!==y.length)return CE(Tn.create(y,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(y){if(0!==y.length)return y.map(w=>{return{field:za((D=w).field),direction:JD(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=B_(n,e.limit);var f,y;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function $_(n){let e=wE(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){lt(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=function(D){const M=EE(D);return M instanceof Tn&&X0(M)?M.getFilters():[M]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(D=>{return new $f(rh((M=D).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let f=null;t.limit&&(f=function(D){let M;return M="object"==typeof D?D.value:D,Zg(M)?null:M}(t.limit));let y=null;var D;t.startAt&&(y=new Wu((D=t.startAt).values||[],!!D.before));let w=null;return t.endAt&&(w=function(D){return new Wu(D.values||[],!D.before)}(t.endAt)),TD(e,i,c,a,f,"F",y,w)}function EE(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=rh(e.unaryFilter.field);return nn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=rh(e.unaryFilter.field);return nn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=rh(e.unaryFilter.field);return nn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=rh(e.unaryFilter.field);return nn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}(n):void 0!==n.fieldFilter?nn.create(rh((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Tn.create(e.compositeFilter.filters.map(t=>EE(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return rt()}}(e.compositeFilter.op))}(n):rt();var e}function JD(n){return wx[n]}function Mx(n){return Ex[n]}function XD(n){return Cx[n]}function za(n){return{fieldPath:n.canonicalString()}}function rh(n){return yr.fromServerFormat(n.fieldPath)}function CE(n){return n instanceof nn?function(e){if("=="===e.op){if(q0(e.value))return{unaryFilter:{field:za(e.field),op:"IS_NAN"}};if(W0(e.value))return{unaryFilter:{field:za(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(q0(e.value))return{unaryFilter:{field:za(e.field),op:"IS_NOT_NAN"}};if(W0(e.value))return{unaryFilter:{field:za(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:za(e.field),op:Mx(e.op),value:e.value}}}(n):n instanceof Tn?function(e){const t=e.getFilters().map(r=>CE(r));return 1===t.length?t[0]:{compositeFilter:{op:XD(e.op),filters:t}}}(n):rt()}function eT(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function IE(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ku{constructor(e,t,r,i,a=yt.min(),c=yt.min(),f=Rn.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=y}withSequenceNumber(e){return new Ku(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ku(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ku(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ku(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class tT{constructor(e){this.fe=e}}function nT(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:wm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:ym(i=n.fe,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:th(i,a.version.toTimestamp()),createTime:th(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Qf(e.version)};else{if(!e.isUnknownDocument())return rt();r.unknownDocument={path:t.path.toArray(),version:Qf(e.version)}}var i,a;return r}function wm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Qf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function il(n){const e=new tr(n.seconds,n.nanoseconds);return yt.fromTimestamp(e)}function ih(n,e){const t=(e.baseMutations||[]).map(a=>H_(n.fe,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>H_(n.fe,a)),i=tr.fromMillis(e.localWriteTimeMs);return new hE(e.batchId,i,t,r)}function Em(n){const e=il(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?il(n.lastLimboFreeSnapshotVersion):yt.min();let r;var i;return void 0!==n.query.documents?(lt(1===(i=n.query).documents.length),r=Ms(na(wE(i.documents[0])))):r=Ms($_(n.query)),new Ku(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Rn.fromBase64String(n.resumeToken))}function Rx(n,e){const t=Qf(e.snapshotVersion),r=Qf(e.lastLimboFreeSnapshotVersion);let i;i=nm(e.target)?Sx(n.fe,e.target):vm(n.fe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Qc(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function bE(n){const e=$_({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?L_(e,e.limit,"L"):e}function DE(n,e){return new fE(e.largestBatchId,H_(n.fe,e.overlayMutation))}function TE(n,e){const t=e.path.lastSegment();return[n,fi(e.path.popLast()),t]}function SE(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Qf(r.readTime),documentKey:fi(r.documentKey.path),largestBatchId:r.largestBatchId}}class rT{getBundleMetadata(e,t){return AE(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:il(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return AE(e).put({bundleId:(r=t).id,createTime:Qf(_r(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return iT(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:bE(i.bundledQuery),readTime:il(i.readTime)};var i})}saveNamedQuery(e,t){return iT(e).put({name:(r=t).name,readTime:Qf(_r(r.readTime)),bundledQuery:r.bundledQuery});var r}}function AE(n){return Xr(n,"bundles")}function iT(n){return Xr(n,"namedQueries")}class G_{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new G_(e,t.uid||"")}getOverlay(e,t){return Cm(e).get(TE(this.userId,t)).next(r=>r?DE(this.serializer,r):null)}getOverlays(e,t){const r=ra();return se.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,c)=>{const f=new fE(t,c);i.push(this.we(e,f))}),se.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(fi(c.getCollectionPath())));const a=[];return i.forEach(c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(Cm(e).J("collectionPathOverlayIndex",f))}),se.waitFor(a)}getOverlaysForCollection(e,t,r){const i=ra(),a=fi(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Cm(e).j("collectionPathOverlayIndex",c).next(f=>{for(const y of f){const w=DE(this.serializer,y);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=ra();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Cm(e).X({index:"collectionGroupOverlayIndex",range:f},(y,w,D)=>{const M=DE(this.serializer,w);a.size()<i||M.largestBatchId===c?(a.set(M.getKey(),M),c=M.largestBatchId):D.done()}).next(()=>a)}we(e,t){return Cm(e).put(function(r,i,a){const[c,f,y]=TE(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:y,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Ga(r.fe,a.mutation)}}(this.serializer,this.userId,t))}}function Cm(n){return Xr(n,"documentOverlays")}class sh{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(wn(e.integerValue));else if("doubleValue"in e){const r=wn(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Yg(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(ei(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?P_(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):rt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),Ke.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Nx(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function sT(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=Nx(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}sh.Ve=new sh;class Im{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=sT(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=sT(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class oT{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class aT{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Jf{constructor(){this.je=new Im,this.ze=new oT(this.je),this.We=new aT(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class sl{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new sl(this.indexId,this.documentKey,this.arrayValue,r)}}function Zu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=uT(n.arrayValue,e.arrayValue),0!==t?t:(t=uT(n.directionalValue,e.directionalValue),0!==t?t:Ke.comparator(n.documentKey,e.documentKey)))}function uT(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Px{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){lt(e.collectionGroup===this.collectionId);const t=Wg(e);if(void 0!==t&&!this.en(t))return!1;const r=ju(e);let i=new Set,a=0,c=0;for(;a<r.length&&this.en(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const f=r[a];if(!this.nn(this.Ze,f)||!this.sn(this.Ye[c++],f))return!1}++a}for(;a<r.length;++a)if(c>=this.Ye.length||!this.sn(this.Ye[c++],r[a]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Ox(n){var e,t;if(lt(n instanceof nn||n instanceof Tn),n instanceof nn){if(n instanceof tE){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>nn.create(n.field,"==",a)))||[];return Tn.create(i,"or")}return n}const r=n.filters.map(i=>Ox(i));return Tn.create(r,n.op)}function NO(n){if(0===n.getFilters().length)return[];const e=RE(Ox(n));return lt(cT(e)),ME(e)||xE(e)?[e]:e.getFilters()}function ME(n){return n instanceof nn}function xE(n){return n instanceof Tn&&X0(n)}function cT(n){return ME(n)||xE(n)||function(e){if(e instanceof Tn&&J0(e)){for(const t of e.getFilters())if(!ME(t)&&!xE(t))return!1;return!0}return!1}(n)}function RE(n){if(lt(n instanceof nn||n instanceof Tn),n instanceof nn)return n;if(1===n.filters.length)return RE(n.filters[0]);const e=n.filters.map(r=>RE(r));let t=Tn.create(e,n.op);return t=z_(t),cT(t)?t:(lt(t instanceof Tn),lt(Gf(t)),lt(t.filters.length>1),t.filters.reduce((r,i)=>NE(r,i)))}function NE(n,e){let t;return lt(n instanceof nn||n instanceof Tn),lt(e instanceof nn||e instanceof Tn),t=n instanceof nn?e instanceof nn?Tn.create([n,e],"and"):Xf(n,e):e instanceof nn?Xf(e,n):function(r,i){if(lt(r.filters.length>0&&i.filters.length>0),Gf(r)&&Gf(i))return vD(r,i.getFilters());const a=J0(r)?r:i,c=J0(r)?i:r,f=a.filters.map(y=>NE(y,c));return Tn.create(f,"or")}(n,e),z_(t)}function Xf(n,e){if(Gf(e))return vD(e,n.getFilters());{const t=e.filters.map(r=>NE(n,r));return Tn.create(t,"or")}}function z_(n){if(lt(n instanceof nn||n instanceof Tn),n instanceof nn)return n;const e=n.getFilters();if(1===e.length)return z_(e[0]);if(yD(n))return n;const t=e.map(i=>z_(i)),r=[];return t.forEach(i=>{i instanceof nn?r.push(i):i instanceof Tn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Tn.create(r,n.op)}class PE{constructor(){this.rn=new xo}addToCollectionParentIndex(e,t){return this.rn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Ys.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Ys.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class xo{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new jn(cn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new jn(cn.comparator)).toArray()}}const W_=new Uint8Array(0);class OE{constructor(e,t){this.user=e,this.databaseId=t,this.on=new xo,this.un=new nl(r=>Qc(r),(r,i)=>zf(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const a={collectionId:r,parent:fi(i)};return ep(e).put(a)}return se.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[rD(t),""],!1,!0);return ep(e).j(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(ta(c.parent))}return r})}addFieldIndex(e,t){const r=q_(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var c;delete i.indexId;const a=r.add(i);if(t.indexState){const c=Dm(e);return a.next(f=>{c.put(SE(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=q_(e),i=Dm(e),a=bm(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=bm(e);let i=!0;const a=new Map;return se.forEach(this.cn(t),c=>this.an(e,c).next(f=>{i&&(i=!!f),a.set(c,f)})).next(()=>{if(i){let c=kt();const f=[];return se.forEach(a,(y,w)=>{var D;Ve("IndexedDbIndexManager",`Using index ${D=y,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(Xe=>`${Xe.fieldPath}:${Xe.kind}`).join(",")}`} to execute ${Qc(t)}`);const M=function(Xe,It){const Bt=Wg(It);if(void 0===Bt)return null;for(const tn of rm(Xe,Bt.fieldPath))switch(tn.op){case"array-contains-any":return tn.value.arrayValue.values||[];case"array-contains":return[tn.value]}return null}(w,y),P=function(Xe,It){const Bt=new Map;for(const tn of ju(It))for(const rs of rm(Xe,tn.fieldPath))switch(rs.op){case"==":case"in":Bt.set(tn.fieldPath.canonicalString(),rs.value);break;case"not-in":case"!=":return Bt.set(tn.fieldPath.canonicalString(),rs.value),Array.from(Bt.values())}return null}(w,y),j=function(Xe,It){const Bt=[];let tn=!0;for(const rs of ju(It)){const xp=0===rs.kind?nE(Xe,rs.fieldPath,Xe.startAt):Jc(Xe,rs.fieldPath,Xe.startAt);Bt.push(xp.value),tn&&(tn=xp.inclusive)}return new Wu(Bt,tn)}(w,y),K=function(Xe,It){const Bt=[];let tn=!0;for(const rs of ju(It)){const xp=0===rs.kind?Jc(Xe,rs.fieldPath,Xe.endAt):nE(Xe,rs.fieldPath,Xe.endAt);Bt.push(xp.value),tn&&(tn=xp.inclusive)}return new Wu(Bt,tn)}(w,y),ae=this.hn(y,w,j),ye=this.hn(y,w,K),Qe=this.ln(y,w,P),dt=this.fn(y.indexId,M,ae,j.inclusive,ye,K.inclusive,Qe);return se.forEach(dt,Xe=>r.H(Xe,t.limit).next(It=>{It.forEach(Bt=>{const tn=Ke.fromSegments(Bt.documentKey);c.has(tn)||(c=c.add(tn),f.push(tn))})}))}).next(()=>f)}return se.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:NO(Tn.create(e.filters,"and")).map(r=>k_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,a,c,f){const y=(null!=t?t.length:1)*Math.max(r.length,a.length),w=y/(null!=t?t.length:1),D=[];for(let M=0;M<y;++M){const P=t?this.dn(t[M/w]):W_,j=this.wn(e,P,r[M%w],i),K=this._n(e,P,a[M%w],c),ae=f.map(ye=>this.wn(e,P,ye,!0));D.push(...this.createRange(j,K,ae))}return D}wn(e,t,r,i){const a=new sl(e,Ke.empty(),t,r);return i?a:a.Je()}_n(e,t,r,i){const a=new sl(e,Ke.empty(),t,r);return i?a.Je():a}an(e,t){const r=new Px(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let c=null;for(const f of a)r.tn(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c})}getIndexType(e,t){let r=2;const i=this.cn(t);return se.forEach(i,a=>this.an(e,a).next(c=>{c?0!==r&&c.fields.length<function(f){let y=new jn(yr.comparator),w=!1;for(const D of f.filters)for(const M of D.getFlattenedFilters())M.field.isKeyField()||("array-contains"===M.op||"array-contains-any"===M.op?w=!0:y=y.add(M.field));for(const D of f.orderBy)D.field.isKeyField()||(y=y.add(D.field));return y.size+(w?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new Jf;for(const i of ju(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.He(i.kind);sh.Ve._e(a,c)}return r.Qe()}dn(e){const t=new Jf;return sh.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new Jf;return sh.Ve._e(Ha(this.databaseId,t),r.He(function(i){const a=ju(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new Jf);let a=0;for(const c of ju(e)){const f=r[a++];for(const y of i)if(this.yn(t,c.fieldPath)&&Hf(f))i=this.pn(i,c,f);else{const w=y.He(c.kind);sh.Ve._e(f,w)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],a=[];for(const c of r.arrayValue.values||[])for(const f of i){const y=new Jf;y.seed(f.Qe()),sh.Ve._e(c,y.He(t.kind)),a.push(y)}return a}yn(e,t){return!!e.filters.find(r=>r instanceof nn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=q_(e),i=Dm(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(a=>{const c=[];return se.forEach(a,f=>i.get([f.indexId,this.uid]).next(y=>{c.push(function(w,D){const M=D?new qd(D.sequenceNumber,new Ys(il(D.readTime),new Ke(ta(D.documentKey)),D.largestBatchId)):qd.empty(),P=w.fields.map(([j,K])=>new Wd(yr.fromServerFormat(j),K));return new C_(w.indexId,w.collectionGroup,P,M)}(f,y))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Ot(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=q_(e),a=Dm(e);return this.Tn(e).next(c=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>se.forEach(f,y=>a.put(SE(y.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?se.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),se.forEach(f,y=>this.En(e,i,y).next(w=>{const D=this.An(a,y);return w.isEqual(D)?se.resolve():this.vn(e,a,y,w,D)}))))})}Rn(e,t,r,i){return bm(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return bm(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=bm(e);let a=new jn(Zu);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(c,f)=>{a=a.add(new sl(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}An(e,t){let r=new jn(Zu);const i=this.mn(t,e);if(null==i)return r;const a=Wg(t);if(null!=a){const c=e.data.field(a.fieldPath);if(Hf(c))for(const f of c.arrayValue.values||[])r=r.add(new sl(t.indexId,e.key,this.dn(f),i))}else r=r.add(new sl(t.indexId,e.key,W_,i));return r}vn(e,t,r,i,a){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(f,y,w,D,M){const P=f.getIterator(),j=y.getIterator();let K=Yd(P),ae=Yd(j);for(;K||ae;){let ye=!1,Qe=!1;if(K&&ae){const dt=w(K,ae);dt<0?Qe=!0:dt>0&&(ye=!0)}else null!=K?Qe=!0:ye=!0;ye?(D(ae),ae=Yd(j)):Qe?(M(K),K=Yd(P)):(K=Yd(P),ae=Yd(j))}}(i,a,Zu,f=>{c.push(this.Rn(e,t,r,f))},f=>{c.push(this.Pn(e,t,r,f))}),se.waitFor(c)}Tn(e){let t=1;return Dm(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,f)=>Zu(c,f)).filter((c,f,y)=>!f||0!==Zu(c,y[f-1]));const i=[];i.push(e);for(const c of r){const f=Zu(c,e),y=Zu(c,t);if(0===f)i[0]=e.Je();else if(f>0&&y<0)i.push(c),i.push(c.Je());else if(y>0)break}i.push(t);const a=[];for(let c=0;c<i.length;c+=2){if(this.bn(i[c],i[c+1]))return[];a.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,W_,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,W_,[]]))}return a}bn(e,t){return Zu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Tm)}getMinOffset(e,t){return se.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||rt())).next(Tm)}}function ep(n){return Xr(n,"collectionParents")}function bm(n){return Xr(n,"indexEntries")}function q_(n){return Xr(n,"indexConfiguration")}function Dm(n){return Xr(n,"indexState")}function Tm(n){lt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;x0(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ys(e.readTime,e.documentKey,t)}const kE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Bi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Bi(e,Bi.DEFAULT_COLLECTION_PERCENTILE,Bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function lT(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],c=IDBKeyRange.only(t.batchId);let f=0;const y=r.X({range:c},(D,M,P)=>(f++,P.delete()));a.push(y.next(()=>{lt(1===f)}));const w=[];for(const D of t.mutations){const M=k0(e,D.key.path,t.batchId);a.push(i.delete(M)),w.push(D.key)}return se.waitFor(a).next(()=>w)}function tp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt();e=n.noDocument}return JSON.stringify(e).length}Bi.DEFAULT_COLLECTION_PERCENTILE=10,Bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bi.DEFAULT=new Bi(41943040,Bi.DEFAULT_COLLECTION_PERCENTILE,Bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bi.DISABLED=new Bi(-1,0,0);class K_{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){lt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new K_(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Yu(e).X({index:"userMutationsIndex",range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=np(e),c=Yu(e);return c.add({}).next(f=>{lt("number"==typeof f);const y=new hE(f,t,r,i),w=function(P,j,K){const ae=K.baseMutations.map(Qe=>Ga(P.fe,Qe)),ye=K.mutations.map(Qe=>Ga(P.fe,Qe));return{userId:j,batchId:K.batchId,localWriteTimeMs:K.localWriteTime.toMillis(),baseMutations:ae,mutations:ye}}(this.serializer,this.userId,y),D=[];let M=new jn((P,j)=>Ot(P.canonicalString(),j.canonicalString()));for(const P of i){const j=k0(this.userId,P.key.path,f);M=M.add(P.key.path.popLast()),D.push(c.put(w)),D.push(a.put(j,cD))}return M.forEach(P=>{D.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.Vn[f]=y.keys()}),se.waitFor(D).next(()=>y)})}lookupMutationBatch(e,t){return Yu(e).get(t).next(r=>r?(lt(r.userId===this.userId),ih(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?se.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Yu(e).X({index:"userMutationsIndex",range:i},(c,f,y)=>{f.userId===this.userId&&(lt(f.batchId>=r),a=ih(this.serializer,f)),y.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Yu(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Yu(e).j("userMutationsIndex",t).next(r=>r.map(i=>ih(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Qg(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return np(e).X({range:i},(c,f,y)=>{const[w,D,M]=c,P=ta(D);if(w===this.userId&&t.path.isEqual(P))return Yu(e).get(M).next(j=>{if(!j)throw rt();lt(j.userId===this.userId),a.push(ih(this.serializer,j))});y.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jn(Ot);const i=[];return t.forEach(a=>{const c=Qg(this.userId,a.path),f=IDBKeyRange.lowerBound(c),y=np(e).X({range:f},(w,D,M)=>{const[P,j,K]=w,ae=ta(j);P===this.userId&&a.path.isEqual(ae)?r=r.add(K):M.done()});i.push(y)}),se.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Qg(this.userId,r),c=IDBKeyRange.lowerBound(a);let f=new jn(Ot);return np(e).X({range:c},(y,w,D)=>{const[M,P,j]=y,K=ta(P);M===this.userId&&r.isPrefixOf(K)?K.length===i&&(f=f.add(j)):D.done()}).next(()=>this.Dn(e,f))}Dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Yu(e).get(a).next(c=>{if(null===c)throw rt();lt(c.userId===this.userId),r.push(ih(this.serializer,c))}))}),se.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return lT(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),se.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return np(e).X({range:r},(a,c,f)=>{if(a[0]===this.userId){const y=ta(a[1]);i.push(y)}else f.done()}).next(()=>{lt(0===i.length)})})}containsKey(e,t){return dT(e,this.userId,t)}xn(e){return hT(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function dT(n,e,t){const r=Qg(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return np(n).X({range:a,Y:!0},(f,y,w)=>{const[D,M,P]=f;D===e&&M===i&&(c=!0),w.done()}).next(()=>c)}function Yu(n){return Xr(n,"mutations")}function np(n){return Xr(n,"documentMutations")}function hT(n){return Xr(n,"mutationQueues")}class ol{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new ol(0)}static Mn(){return new ol(-1)}}class Z_{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new ol(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>yt.fromTimestamp(new tr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>rp(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(lt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return rp(e).X((c,f)=>{const y=Em(f);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,a.push(this.removeTargetData(e,y)))}).next(()=>se.waitFor(a)).next(()=>i)}forEachTarget(e,t){return rp(e).X((r,i)=>{const a=Em(i);t(a)})}$n(e){return fT(e).get("targetGlobalKey").next(t=>(lt(null!==t),t))}On(e,t){return fT(e).put("targetGlobalKey",t)}Fn(e,t){return rp(e).put(Rx(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Qc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return rp(e).X({range:i,index:"queryTargetsIndex"},(c,f,y)=>{const w=Em(f);zf(t,w.target)&&(a=w,y.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Qu(e);return t.forEach(c=>{const f=fi(c.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,c))}),se.waitFor(i)}removeMatchingKeys(e,t,r){const i=Qu(e);return se.forEach(t,a=>{const c=fi(a.path);return se.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Qu(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Qu(e);let a=kt();return i.X({range:r,Y:!0},(c,f,y)=>{const w=ta(c[1]),D=new Ke(w);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=fi(t.path),i=IDBKeyRange.bound([r],[rD(r)],!1,!0);let a=0;return Qu(e).X({index:"documentTargetsIndex",Y:!0,range:i},([c,f],y,w)=>{0!==c&&(a++,w.done())}).next(()=>a>0)}le(e,t){return rp(e).get(t).next(r=>r?Em(r):null)}}function rp(n){return Xr(n,"targets")}function fT(n){return Xr(n,"targetGlobal")}function Qu(n){return Xr(n,"targetDocuments")}function FE([n,e],[t,r]){const i=Ot(n,t);return 0===i?Ot(e,r):i}class LE{constructor(e){this.Ln=e,this.buffer=new jn(FE),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();FE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class VE{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ve.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ba(r)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Hu(r)}yield t.Qn(3e5)}))}}class kx{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(Qs.ct);const r=new LE(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(kE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kE):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,a,c,f,y,w;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,c=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,f=Date.now(),this.removeTargets(e,r,t))).next(M=>(a=M,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(w=Date.now(),eD()<=Vi.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-D}ms\n\tDetermined least recently used ${i} in `+(f-c)+`ms\n\tRemoved ${a} targets in `+(y-f)+`ms\n\tRemoved ${M} documents in `+(w-y)+`ms\nTotal Duration: ${w-D}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:M})))}}class pT{constructor(e,t){this.db=e,this.garbageCollector=function UE(n,e){return new kx(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return Y_(e,r)}removeReference(e,t,r){return Y_(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Y_(e,t)}Xn(e,t){return function(r,i){let a=!1;return hT(r).Z(c=>dT(r,c,i).next(f=>(f&&(a=!0),se.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Yn(e,(c,f)=>{if(f<=t){const y=this.Xn(e,c).next(w=>{if(!w)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,yt.min()),Qu(e).delete([0,fi(c.path)])))});i.push(y)}}).next(()=>se.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Y_(e,t)}Yn(e,t){const r=Qu(e);let i,a=Qs.ct;return r.X({index:"documentTargetsIndex"},([c,f],{path:y,sequenceNumber:w})=>{0===c?(a!==Qs.ct&&t(new Ke(ta(i)),a),a=w,i=y):a=Qs.ct}).next(()=>{a!==Qs.ct&&t(new Ke(ta(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Y_(n,e){return Qu(n).put((r=n.currentSequenceNumber,{targetId:0,path:fi(e.path),sequenceNumber:r}));var r}class gT{constructor(){this.changes=new nl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class BE{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ju(e).put(r)}removeEntry(e,t,r){return Ju(e).delete(function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],wm(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Hn.newInvalidDocument(t);return Ju(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Sm(t))},(i,a)=>{r=this.ts(t,a)}).next(()=>r)}es(e,t){let r={size:0,document:Hn.newInvalidDocument(t)};return Ju(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Sm(t))},(i,a)=>{r={document:this.ts(t,a),size:tp(a)}}).next(()=>r)}getEntries(e,t){let r=Ji();return this.ns(e,t,(i,a)=>{const c=this.ts(i,a);r=r.insert(i,c)}).next(()=>r)}ss(e,t){let r=Ji(),i=new vn(Ke.comparator);return this.ns(e,t,(a,c)=>{const f=this.ts(a,c);r=r.insert(a,f),i=i.insert(a,tp(c))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return se.resolve();let i=new jn(_T);t.forEach(y=>i=i.add(y));const a=IDBKeyRange.bound(Sm(i.first()),Sm(i.last())),c=i.getIterator();let f=c.getNext();return Ju(e).X({index:"documentKeyIndex",range:a},(y,w,D)=>{const M=Ke.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;f&&_T(f,M)<0;)r(f,null),f=c.getNext();f&&f.isEqual(M)&&(r(f,w),f=c.hasNext()?c.getNext():null),f?D.G(Sm(f)):D.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,c=[a.popLast().toArray(),a.lastSegment(),wm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ju(e).j(IDBKeyRange.bound(c,f,!0)).next(y=>{let w=Ji();for(const D of y){const M=this.ts(Ke.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);M.isFoundDocument()&&(om(t,M)||i.has(M.key))&&(w=w.insert(M.key,M))}return w})}getAllFromCollectionGroup(e,t,r,i){let a=Ji();const c=yT(t,r),f=yT(t,Ys.max());return Ju(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,f,!0)},(y,w,D)=>{const M=this.ts(Ke.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(M.key,M),a.size===i&&D.done()}).next(()=>a)}newChangeBuffer(e){return new mT(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return J_(e).get("remoteDocumentGlobalKey").next(t=>(lt(!!t),t))}Zn(e,t){return J_(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function xx(n,e){let t;if(e.document)t=j_(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),i=il(e.noDocument.readTime);t=Hn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt();{const r=Ke.fromSegments(e.unknownDocument.path),i=il(e.unknownDocument.version);t=Hn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new tr(r[0],r[1]);return yt.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(yt.min()))return r}return Hn.newInvalidDocument(e)}}function Q_(n){return new BE(n)}class mT extends gT{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new nl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new jn((a,c)=>Ot(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const f=this.us.get(a);if(t.push(this.os.removeEntry(e,a,f.readTime)),c.isValidDocument()){const y=nT(this.os.serializer,c);i=i.add(a.path.popLast());const w=tp(y);r+=w-f.size,t.push(this.os.addEntry(e,a,y))}else if(r-=f.size,this.trackRemovals){const y=nT(this.os.serializer,c.convertToNoDocument(yt.min()));t.push(this.os.addEntry(e,a,y))}}),i.forEach(a=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.os.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((a,c)=>{this.us.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function J_(n){return Xr(n,"remoteDocumentGlobal")}function Ju(n){return Xr(n,"remoteDocumentsV14")}function Sm(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yT(n,e){const t=e.documentKey.path.toArray();return[n,wm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function _T(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Ot(t[a],r[a]),i)return i;return i=Ot(t.length,r.length),i||(i=Ot(t[t.length-2],r[r.length-2]),i||Ot(t[t.length-1],r[r.length-1]))}class Fx{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class jE{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&rl(r.mutation,i,Js.empty(),tr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,kt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=kt()){const i=ra();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let c=Wf();return a.forEach((f,y)=>{c=c.insert(f,y.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=ra();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,kt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,r,i){let a=Ji();const c=cm(),f=cm();return t.forEach((y,w)=>{const D=r.get(w.key);i.has(w.key)&&(void 0===D||D.mutation instanceof Xs)?a=a.insert(w.key,w):void 0!==D?(c.set(w.key,D.mutation.getFieldMask()),rl(D.mutation,w,D.mutation.getFieldMask(),tr.now())):c.set(w.key,Js.empty())}),this.recalculateAndSaveOverlays(e,a).next(y=>(y.forEach((w,D)=>c.set(w,D)),t.forEach((w,D)=>{var M;return f.set(w,new Fx(D,null!==(M=c.get(w))&&void 0!==M?M:null))}),f))}recalculateAndSaveOverlays(e,t){const r=cm();let i=new vn((c,f)=>c-f),a=kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(y=>{const w=t.get(y);if(null===w)return;let D=r.get(y)||Js.empty();D=f.applyToLocalView(w,D),r.set(y,D);const M=(i.get(f.batchId)||kt()).add(y);i=i.insert(f.batchId,M)})}).next(()=>{const c=[],f=i.getReverseIterator();for(;f.hasNext();){const y=f.getNext(),w=y.key,D=y.value,M=sE();D.forEach(P=>{if(!a.has(P)){const j=mx(t.get(P),r.get(P));null!==j&&M.set(P,j),a=a.add(P)}}),c.push(this.documentOverlayCache.saveOverlays(e,w,M))}return se.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ke.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):F_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):se.resolve(ra());let f=-1,y=a;return c.next(w=>se.forEach(w,(D,M)=>(f<M.largestBatchId&&(f=M.largestBatchId),a.get(D)?se.resolve():this.remoteDocumentCache.getEntry(e,D).next(P=>{y=y.insert(D,P)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,y,w,kt())).next(D=>({batchId:f,changes:iE(D)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next(r=>{let i=Wf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Wf();return this.indexManager.getCollectionParents(e,i).next(c=>se.forEach(c,f=>{const y=(w=t,D=f.child(i),new qu(D,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,D;return this.getDocumentsMatchingCollectionQuery(e,y,r).next(w=>{w.forEach((D,M)=>{a=a.insert(D,M)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((f,y)=>{const w=y.getKey();null===a.get(w)&&(a=a.insert(w,Hn.newInvalidDocument(w)))});let c=Wf();return a.forEach((f,y)=>{const w=i.get(f);void 0!==w&&rl(w.mutation,y,Js.empty(),tr.now()),om(t,y)&&(c=c.insert(f,y))}),c})}}class HE{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return se.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:_r(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:bE(r.bundledQuery),readTime:_r(r.readTime)}),se.resolve();var r}}class vT{constructor(){this.overlays=new vn(Ke.comparator),this.ls=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ra();return se.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.we(e,t,a)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ls.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const i=ra(),a=t.length+1,c=new Ke(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const y=f.getNext().value,w=y.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&y.largestBatchId>r&&i.set(y.getKey(),y)}return se.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new vn((w,D)=>w-D);const c=this.overlays.getIterator();for(;c.hasNext();){const w=c.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let D=a.get(w.largestBatchId);null===D&&(D=ra(),a=a.insert(w.largestBatchId,D)),D.set(w.getKey(),w)}}const f=ra(),y=a.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((w,D)=>f.set(w,D)),!(f.size()>=i)););return se.resolve(f)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new fE(t,r));let a=this.ls.get(t);void 0===a&&(a=kt(),this.ls.set(t,a)),this.ls.set(t,a.add(r.key))}}class $E{constructor(){this.fs=new jn(ti.ds),this.ws=new jn(ti._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new ti(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new ti(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Ke(new cn([])),r=new ti(t,e),i=new ti(t,e+1),a=[];return this.ws.forEachInRange([r,i],c=>{this.ys(c),a.push(c.key)}),a}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ke(new cn([])),r=new ti(t,e),i=new ti(t,e+1);let a=kt();return this.ws.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new ti(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ti{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ke.comparator(e.key,t.key)||Ot(e.As,t.As)}static _s(e,t){return Ot(e.As,t.As)||Ke.comparator(e.key,t.key)}}class wT{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new jn(ti.ds)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.vs;this.vs++;const c=new hE(a,t,r,i);this.mutationQueue.push(c);for(const f of i)this.Rs=this.Rs.add(new ti(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return se.resolve(c)}lookupMutationBatch(e,t){return se.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),a=i<0?0:i;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ti(t,0),i=new ti(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],c=>{const f=this.Ps(c.As);a.push(f)}),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jn(Ot);return t.forEach(i=>{const a=new ti(i,0),c=new ti(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([a,c],f=>{r=r.add(f.As)})}),se.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ke.isDocumentKey(a)||(a=a.child(""));const c=new ti(new Ke(a),0);let f=new jn(Ot);return this.Rs.forEachWhile(y=>{const w=y.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(f=f.add(y.As)),!0)},c),se.resolve(this.Vs(f))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){lt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return se.forEach(t.mutations,i=>{const a=new ti(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new ti(t,0),i=this.Rs.firstAfterOrEqual(r);return se.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return se.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Lx{constructor(e){this.Ds=e,this.docs=new vn(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():Hn.newInvalidDocument(t))}getEntries(e,t){let r=Ji();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Hn.newInvalidDocument(i))}),se.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Ji();const c=t.path,f=new Ke(c.child("")),y=this.docs.getIteratorFrom(f);for(;y.hasNext();){const{key:w,value:{document:D}}=y.getNext();if(!c.isPrefixOf(w.path))break;w.path.length>c.length+1||x0(iD(D),r)<=0||(i.has(D.key)||om(t,D))&&(a=a.insert(D.key,D.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,t,r,i){rt()}Cs(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ET(this)}getSize(e){return se.resolve(this.size)}}class ET extends gT{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class CT{constructor(e){this.persistence=e,this.xs=new nl(t=>Qc(t),zf),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new $E,this.targetCount=0,this.Ms=ol.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),se.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new ol(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Fn(t),se.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.xs.forEach((c,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.xs.delete(c),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),se.waitFor(a).next(()=>i)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),se.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.ks.containsKey(t))}}class GE{constructor(e,t){this.$s={},this.overlays={},this.Os=new Qs(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new CT(this),this.indexManager=new PE,this.remoteDocumentCache=new Lx(r=>this.referenceDelegate.Ls(r)),this.serializer=new tT(t),this.qs=new HE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new wT(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const i=new IT(this.Os.next());return this.referenceDelegate.Us(),r(i).next(a=>this.referenceDelegate.Ks(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Gs(e,t){return se.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class IT extends Kg{constructor(e){super(),this.currentSequenceNumber=e}}class X_{constructor(e){this.persistence=e,this.Qs=new $E,this.js=null}static zs(e){return new X_(e)}get Ws(){if(this.js)return this.js;throw rt()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),se.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ws.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Ws,r=>{const i=Ke.fromPath(r);return this.Hs(e,i).next(a=>{a||t.removeEntry(i,yt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return se.or([()=>se.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class ip{constructor(e){this.serializer=e}O(e,t,r,i){const a=new D_("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",O0,{unique:!0}),f.createObjectStore("documentMutations"),bT(e),function(f){f.createObjectStore("remoteDocuments")}(e));let c=se.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),bT(e)),c=c.next(()=>function(f){const y=f.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yt.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(f,y){return y.store("mutations").j().next(w=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",O0,{unique:!0});const D=y.store("mutations"),M=w.map(P=>D.put(P));return se.waitFor(M)})}(e,a))),c=c.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Ys(a))),r<6&&i>=6&&(c=c.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(a)))),r<7&&i>=7&&(c=c.next(()=>this.Zs(a))),r<8&&i>=8&&(c=c.next(()=>this.ti(e,a))),r<9&&i>=9&&(c=c.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.ei(a))),r<11&&i>=11&&(c=c.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(f){const y=f.createObjectStore("documentOverlays",{keyPath:RO});y.createIndex("collectionPathOverlayIndex",XM,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",ex,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(f){const y=f.createObjectStore("remoteDocumentsV14",{keyPath:lD});y.createIndex("documentKeyIndex",A_),y.createIndex("collectionGroupIndex",Kc)}(e)).next(()=>this.ni(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.si(e,a))),r<15&&i>=15&&(c=c.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:L0}).createIndex("sequenceNumberIndex",JM,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:V0}).createIndex("documentKeyIndex",xO,{unique:!1})}(e))),c}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=tp(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>se.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",c).next(f=>se.forEach(f,y=>{lt(y.userId===a.userId);const w=ih(this.serializer,y);return lT(e,a.userId,w).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((c,f)=>{const y=new cn(c),w=[0,fi(y)];a.push(t.get(w).next(D=>D?se.resolve():t.put({targetId:0,path:fi(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>se.waitFor(a))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Zd});const r=t.store("collectionParents"),i=new xo,a=c=>{if(i.add(c)){const f=c.lastSegment(),y=c.popLast();return r.put({collectionId:f,parent:fi(y)})}};return t.store("remoteDocuments").X({Y:!0},(c,f)=>{const y=new cn(c);return a(y.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([c,f,y],w)=>{const D=ta(f);return a(D.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const a=Em(i),c=Rx(this.serializer,a);return t.put(c)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,c)=>{const f=t.store("remoteDocumentsV14"),y=(w=c,w.document?new Ke(cn.fromString(w.document.name).popFirst(5)):w.noDocument?Ke.fromSegments(w.noDocument.path):w.unknownDocument?Ke.fromSegments(w.unknownDocument.path):rt()).path.toArray();var w;const D={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(f.put(D))}).next(()=>se.waitFor(i))}si(e,t){const r=t.store("mutations"),i=Q_(this.serializer),a=new GE(X_.zs,this.serializer.fe);return r.j().next(c=>{const f=new Map;return c.forEach(y=>{var w;let D=null!==(w=f.get(y.userId))&&void 0!==w?w:kt();ih(this.serializer,y).keys().forEach(M=>D=D.add(M)),f.set(y.userId,D)}),se.forEach(f,(y,w)=>{const D=new hi(w),M=G_.de(this.serializer,D),P=a.getIndexManager(D),j=K_.de(D,this.serializer,P,a.referenceDelegate);return new jE(i,j,M,P).recalculateAndSaveOverlaysForDocumentKeys(new j0(t,Qs.ct),y).next()})})}}function bT(n){n.createObjectStore("targetDocuments",{keyPath:QM}).createIndex("documentTargetsIndex",F0,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",YM,{unique:!0}),n.createObjectStore("targetGlobal")}const zE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class DT{constructor(e,t,r,i,a,c,f,y,w,D,M=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=a,this.window=c,this.document=f,this.ri=w,this.oi=D,this.ui=M,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=P=>Promise.resolve(),!DT.D())throw new Ne(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pT(this,i),this.di=t+"main",this.serializer=new tT(y),this.wi=new Ao(this.di,this.ui,new ip(this.serializer)),this.Bs=new Z_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Q_(this.serializer),this.qs=new rT,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===D&&xr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(de.FAILED_PRECONDITION,zE);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Qs(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,ve.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Am(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Ba(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return ev(e).get("owner").next(t=>se.resolve(this.Ri(t)))}Pi(e){return Am(e).delete(this.clientId)}bi(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Xr(r,"clientMetadata");return i.j().next(a=>{const c=e.Si(a,18e5),f=a.filter(y=>-1===c.indexOf(y));return se.forEach(f,y=>i.delete(y.clientId)).next(()=>f)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?se.resolve(!0):ev(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Ne(de.FAILED_PRECONDITION,zE);return!1}}return!(!this.networkEnabled||!this.inForeground)||Am(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new j0(t,Qs.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Am(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return K_.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new OE(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return G_.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(c=this.ui)?nx:14===c?B0:13===c?Wr:12===c?tx:11===c?U0:void rt();var c;let f;return this.wi.runTransaction(e,i,a,y=>(f=new j0(y,this.Os?this.Os.next():Qs.ct),"readwrite-primary"===t?this.Ti(f).next(w=>!!w||this.Ei(f)).next(w=>{if(!w)throw xr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Ne(de.FAILED_PRECONDITION,qg);return r(f)}).next(w=>this.vi(f).next(()=>w)):this.Oi(f).next(()=>r(f)))).then(y=>(f.raiseOnCommittedEvent(),y))}Oi(e){return ev(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(de.FAILED_PRECONDITION,zE)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ev(e).put("owner",t)}static D(){return Ao.D()}Ai(e){const t=ev(e);return t.get("owner").next(r=>this.Ri(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(xr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,k.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return xr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){xr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ev(n){return Xr(n,"owner")}function Am(n){return Xr(n,"clientMetadata")}function Mm(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class oh{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=kt(),i=kt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new oh(e,t.fromCache,r,i)}}class TT{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(a=>a||this.Gi(e,t,i,r)).next(a=>a||this.Qi(e,t))}Ki(e,t){if(cx(t))return se.resolve(null);let r=Ms(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=L_(t,null,"F"),r=Ms(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=kt(...a);return this.Ui.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,r).next(y=>{const w=this.ji(t,f);return this.zi(t,w,c,y.readTime)?this.Ki(e,L_(t,null,"F")):this.Wi(e,w,t,y)}))})))}Gi(e,t,r,i){return cx(t)||i.isEqual(yt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(a=>{const c=this.ji(t,a);return this.zi(t,c,r,i)?this.Qi(e,t):(eD()<=Vi.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),tl(t)),this.Wi(e,c,t,M0(i,-1)))})}ji(e,t){let r=new jn(um(e));return t.forEach((i,a)=>{om(e,a)&&(r=r.add(a))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Qi(e,t){return eD()<=Vi.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",tl(t)),this.Ui.getDocumentsMatchingQuery(e,t,Ys.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}class WE{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new vn(Ot),this.Yi=new nl(a=>Qc(a),zf),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jE(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function ST(n,e,t,r){return new WE(n,e,t,r)}function qE(n,e){return KE.apply(this,arguments)}function KE(){return KE=(0,ve.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],f=[];let y=kt();for(const w of i){c.push(w.batchId);for(const D of w.mutations)y=y.add(D.key)}for(const w of a){f.push(w.batchId);for(const D of w.mutations)y=y.add(D.key)}return t.localDocuments.getDocuments(r,y).next(w=>({er:w,removedBatchIds:c,addedBatchIds:f}))})})}),KE.apply(this,arguments)}function AT(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function YE(n,e,t){let r=kt(),i=kt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=Ji();return t.forEach((f,y)=>{const w=a.get(f);y.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(f)),y.isNoDocument()&&y.version.isEqual(yt.min())?(e.removeEntry(f,y.readTime),c=c.insert(f,y)):!w.isValidDocument()||y.version.compareTo(w.version)>0||0===y.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(y),c=c.insert(f,y)):Ve("LocalStore","Ignoring outdated watch update for ",f,". Current version:",w.version," Watch version:",y.version)}),{nr:c,sr:i}})}function Ux(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Xu(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(a=>a?(i=a,se.resolve(i)):t.Bs.allocateTargetId(r).next(c=>(i=new Ku(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function al(n,e,t){return MT.apply(this,arguments)}function MT(){return MT=(0,ve.Z)(function*(n,e,t){const r=qe(n),i=r.Ji.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Ba(c))throw c;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),MT.apply(this,arguments)}function xm(n,e,t){const r=qe(n);let i=yt.min(),a=kt();return r.persistence.runTransaction("Execute query","readonly",c=>function(f,y,w){const D=qe(f),M=D.Yi.get(w);return void 0!==M?se.resolve(D.Ji.get(M)):D.Bs.getTargetData(y,w)}(r,c,Ms(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(c,f.targetId).next(y=>{a=y})}).next(()=>r.Hi.getDocumentsMatchingQuery(c,e,t?i:yt.min(),t?a:kt())).next(f=>(ah(r,am(e),f),{documents:f,ir:a})))}function xT(n,e){const t=qe(n),r=qe(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.le(a,e).next(c=>c?c.target:null))}function QE(n,e){const t=qe(n),r=t.Xi.get(e)||yt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,M0(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(ah(t,e,i),i))}function ah(n,e,t){let r=n.Xi.get(e)||yt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Xi.set(e,r)}function tv(){return tv=(0,ve.Z)(function*(n,e,t,r){const i=qe(n);let a=kt(),c=Ji();for(const w of t){const D=e.rr(w.metadata.name);w.document&&(a=a.add(D));const M=e.ur(w);M.setReadTime(e.cr(w.metadata.readTime)),c=c.insert(D,M)}const f=i.Zi.newChangeBuffer({trackRemovals:!0}),y=yield Xu(i,(w=r,Ms(na(cn.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>YE(w,f,c).next(D=>(f.apply(w),D)).next(D=>i.Bs.removeMatchingKeysForTargetId(w,y.targetId).next(()=>i.Bs.addMatchingKeys(w,a,y.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,D.nr,D.sr)).next(()=>D.nr)))}),tv.apply(this,arguments)}function JE(n,e){return RT.apply(this,arguments)}function RT(){return RT=(0,ve.Z)(function*(n,e,t=kt()){const r=yield Xu(n,Ms(bE(e.bundledQuery))),i=qe(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=_r(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.qs.saveNamedQuery(a,e);const f=r.withResumeToken(Rn.EMPTY_BYTE_STRING,c);return i.Ji=i.Ji.insert(f.targetId,f),i.Bs.updateTargetData(a,f).next(()=>i.Bs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Bs.addMatchingKeys(a,t,r.targetId)).next(()=>i.qs.saveNamedQuery(a,e))})}),RT.apply(this,arguments)}function NT(n,e){return`firestore_clients_${n}_${e}`}function jx(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function XE(n,e){return`firestore_targets_${n}_${e}`}class nv{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new Ne(i.error.code,i.error.message))),c?new nv(e,t,i.state,a):(xr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rm{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ne(r.error.code,r.error.message))),a?new Rm(e,r.state,i):(xr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Nm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=oE();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=S_(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new Nm(e,a):(xr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class rv{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new rv(t.clientId,t.onlineState):(xr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class eC{constructor(){this.activeTargetIds=oE()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iv{constructor(e,t,r,i,a){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new vn(Ot),this.started=!1,this.yr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=NT(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new eC),this.Tr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const a=e.getItem(NT(e.persistenceKey,i));if(a){const c=Nm.ar(i,a);c&&(e.gr=e.gr.insert(c.clientId,c))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(XE(this.persistenceKey,e));if(r){const i=Rm.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(XE(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void xr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(a){let c=Qs.ct;if(null!=a)try{const f=JSON.parse(a);lt("number"==typeof f),c=f}catch(f){xr("SharedClientState","Failed to read sequence number from WebStorage",f)}return c}(r.newValue);i!==Qs.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Qr(a)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new nv(this.currentUser,e,t,r),a=jx(this.persistenceKey,this.currentUser,e);this.setItem(a,i.hr())}Cr(e){const t=jx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=XE(this.persistenceKey,e),a=new Rm(e,t,r);this.setItem(i,a.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return Nm.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return nv.ar(new hi(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return Rm.ar(i,t)}br(e){return rv.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),c=[],f=[];return a.forEach(y=>{i.has(y)||c.push(y)}),i.forEach(y=>{a.has(y)||f.push(y)}),this.syncEngine.Wr(c,f).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=oE();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class tC{constructor(){this.Hr=new eC,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new eC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Hx{Yr(e){}shutdown(){}}class PT{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Pm=null;function nC(){return null===Pm?Pm=268435456+Math.round(2147483648*Math.random()):Pm++,"0x"+Pm.toString(16)}const OT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kT{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Mi="WebChannelConnection";class FT extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,a){const c=nC(),f=this.To(e,t);Ve("RestConnection",`Sending RPC '${e}' ${c}:`,f,r);const y={};return this.Eo(y,i,a),this.Ao(e,f,y,r).then(w=>(Ve("RestConnection",`Received RPC '${e}' ${c}: `,w),w),w=>{throw Ts("RestConnection",`RPC '${e}' ${c} failed with error: `,w,"url: ",f,"request:",r),w})}vo(e,t,r,i,a,c){return this.Io(e,t,r,i,a)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Gg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}To(e,t){return`${this.mo}/v1/${t}:${OT[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const a=nC();return new Promise((c,f)=>{const y=new HM;y.setWithCredentials(!0),y.listenOnce(Yb.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case v_.NO_ERROR:const D=y.getResponseJson();Ve(Mi,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(D)),c(D);break;case v_.TIMEOUT:Ve(Mi,`RPC '${e}' ${a} timed out`),f(new Ne(de.DEADLINE_EXCEEDED,"Request time out"));break;case v_.HTTP_ERROR:const M=y.getStatus();if(Ve(Mi,`RPC '${e}' ${a} failed with status:`,M,"response text:",y.getResponseText()),M>0){let P=y.getResponseJson();Array.isArray(P)&&(P=P[0]);const j=P?.error;if(j&&j.status&&j.message){const K=function(ae){const ye=ae.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(ye)>=0?ye:de.UNKNOWN}(j.status);f(new Ne(K,j.message))}else f(new Ne(de.UNKNOWN,"Server responded with status "+y.getStatus()))}else f(new Ne(de.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{Ve(Mi,`RPC '${e}' ${a} completed.`)}});const w=JSON.stringify(i);Ve(Mi,`RPC '${e}' ${a} sending request:`,i),y.send(t,"POST",w,r,15)})}Ro(e,t,r){const i=nC(),a=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Kb(),f=Zb(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;void 0!==w&&(y.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(y.xmlHttpFactory=new Jb({})),this.Eo(y.initMessageHeaders,t,r),y.encodeInitMessageHeaders=!0;const D=a.join("");Ve(Mi,`Creating RPC '${e}' stream ${i}: ${D}`,y);const M=c.createWebChannel(D,y);let P=!1,j=!1;const K=new kT({ro:ye=>{j?Ve(Mi,`Not sending because RPC '${e}' stream ${i} is closed:`,ye):(P||(Ve(Mi,`Opening RPC '${e}' stream ${i} transport.`),M.open(),P=!0),Ve(Mi,`RPC '${e}' stream ${i} sending:`,ye),M.send(ye))},oo:()=>M.close()}),ae=(ye,Qe,dt)=>{ye.listen(Qe,Xe=>{try{dt(Xe)}catch(It){setTimeout(()=>{throw It},0)}})};return ae(M,Lf.EventType.OPEN,()=>{j||Ve(Mi,`RPC '${e}' stream ${i} transport opened.`)}),ae(M,Lf.EventType.CLOSE,()=>{j||(j=!0,Ve(Mi,`RPC '${e}' stream ${i} transport closed`),K.wo())}),ae(M,Lf.EventType.ERROR,ye=>{j||(j=!0,Ts(Mi,`RPC '${e}' stream ${i} transport errored:`,ye),K.wo(new Ne(de.UNAVAILABLE,"The operation could not be completed")))}),ae(M,Lf.EventType.MESSAGE,ye=>{var Qe;if(!j){const dt=ye.data[0];lt(!!dt);const It=dt.error||(null===(Qe=dt[0])||void 0===Qe?void 0:Qe.error);if(It){Ve(Mi,`RPC '${e}' stream ${i} received error:`,It);const Bt=It.status;let tn=function(xp){const p2=qr[xp];if(void 0!==p2)return pE(p2)}(Bt),rs=It.message;void 0===tn&&(tn=de.INTERNAL,rs="Unknown error status: "+Bt+" with message "+It.message),j=!0,K.wo(new Ne(tn,rs)),M.close()}else Ve(Mi,`RPC '${e}' stream ${i} received:`,dt),K._o(dt)}}),ae(f,Qb.STAT_EVENT,ye=>{ye.stat===S0.PROXY?Ve(Mi,`RPC '${e}' stream ${i} detected buffering proxy`):ye.stat===S0.NOPROXY&&Ve(Mi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{K.fo()},0),K}}function LT(){return typeof window<"u"?window:null}function sv(){return typeof document<"u"?document:null}function ov(n){return new Ix(n,!0)}class av{constructor(e,t,r=1e3,i=1.5,a=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class $x{constructor(e,t,r,i,a,c,f,y){this.ii=e,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=y,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new av(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ve.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ve.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(xr(t.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Ne(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,ve.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PO extends $x{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function QD(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:rt(),i=e.targetChange.targetIds||[],a=function(y,w){return y.useProto3Json?(lt(void 0===w||"string"==typeof w),Rn.fromBase64String(w||"")):(lt(void 0===w||w instanceof Uint8Array),Rn.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(y){const w=void 0===y.code?de.UNKNOWN:pE(y.code);return new Ne(w,y.message||"")}(c);t=new _E(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Mo(n,r.document.name),a=_r(r.document.updateTime),c=r.document.createTime?_r(r.document.createTime):yt.min(),f=new pi({mapValue:{fields:r.document.fields}}),y=Hn.newFoundDocument(i,a,c,f);t=new Yf(r.targetIds||[],r.removedTargetIds||[],y.key,y)}else if("documentDelete"in e){const r=e.documentDelete,i=Mo(n,r.document),a=r.readTime?_r(r.readTime):yt.min(),c=Hn.newNoDocument(i,a);t=new Yf([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Mo(n,r.document);t=new Yf([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return rt();{const r=e.filter,{count:i=0,unchangedNames:a}=r,c=new hm(i,a);t=new $D(r.targetId,c)}}var y;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return yt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?yt.min():a.readTime?_r(a.readTime):yt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=nh(this.serializer),t.addTarget=function(i,a){let c;const f=a.target;if(c=nm(f)?{documents:Sx(i,f)}:{query:vm(i,f)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=qD(i,a.resumeToken);const y=B_(i,a.expectedCount);null!==y&&(c.expectedCount=y)}else if(a.snapshotVersion.compareTo(yt.min())>0){c.readTime=th(i,a.snapshotVersion.toTimestamp());const y=B_(i,a.expectedCount);null!==y&&(c.expectedCount=y)}return c}(this.serializer,e);const r=function Ax(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=nh(this.serializer),t.removeTarget=e,this.Wo(t)}}class OO extends $x{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function Tx(n,e){return n&&n.length>0?(lt(void 0!==e),n.map(t=>function(r,i){let a=_r(r.updateTime?r.updateTime:i);return a.isEqual(yt.min())&&(a=_r(i)),new gx(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=_r(e.commitTime);return this.listener.cu(r,t)}return lt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=nh(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ga(this.serializer,r))};this.Wo(t)}}class kO extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Ne(de.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Io(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(de.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.vo(e,t,r,a,c,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ne(de.UNKNOWN,a.toString())})}terminate(){this.lu=!0}}class LO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(xr(t),this.mu=!1):Ve("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class VO{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr(f=>{r.enqueueAndForget((0,ve.Z)(function*(){var y;ec(c)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,ve.Z)(function*(w){const D=qe(w);D.vu.add(4),yield ul(D),D.bu.set("Unknown"),D.vu.delete(4),yield uv(D)}),function(w){return y.apply(this,arguments)})(c))}))}),this.bu=new LO(r,i)}}function uv(n){return cv.apply(this,arguments)}function cv(){return cv=(0,ve.Z)(function*(n){if(ec(n))for(const e of n.Ru)yield e(!0)}),cv.apply(this,arguments)}function ul(n){return lv.apply(this,arguments)}function lv(){return lv=(0,ve.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),lv.apply(this,arguments)}function dv(n,e){const t=qe(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),iC(t)?UT(t):ll(t).Ko()&&rC(t,e))}function cl(n,e){const t=qe(n),r=ll(t);t.Au.delete(e),r.Ko()&&Gx(t,e),0===t.Au.size&&(r.Ko()?r.jo():ec(t)&&t.bu.set("Unknown"))}function rC(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(yt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ll(n).su(e)}function Gx(n,e){n.Vu.qt(e),ll(n).iu(e)}function UT(n){n.Vu=new vx({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),ll(n).start(),n.bu.gu()}function iC(n){return ec(n)&&!ll(n).Uo()&&n.Au.size>0}function ec(n){return 0===qe(n).vu.size}function BT(n){n.Vu=void 0}function zx(n){return sC.apply(this,arguments)}function sC(){return sC=(0,ve.Z)(function*(n){n.Au.forEach((e,t)=>{rC(n,e)})}),sC.apply(this,arguments)}function UO(n,e){return oC.apply(this,arguments)}function oC(){return oC=(0,ve.Z)(function*(n,e){BT(n),iC(n)?(n.bu.Iu(e),UT(n)):n.bu.set("Unknown")}),oC.apply(this,arguments)}function jT(n,e,t){return hv.apply(this,arguments)}function hv(){return hv=(0,ve.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof _E&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(i,a){const c=a.cause;for(const f of a.targetIds)i.Au.has(f)&&(yield i.remoteSyncer.rejectListen(f,c),i.Au.delete(f),i.Vu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield aC(n,r)}else if(e instanceof Yf?n.Vu.Ht(e):e instanceof $D?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(yt.min()))try{const r=yield AT(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.Vu.ce(a);return c.targetChanges.forEach((f,y)=>{if(f.resumeToken.approximateByteSize()>0){const w=i.Au.get(y);w&&i.Au.set(y,w.withResumeToken(f.resumeToken,a))}}),c.targetMismatches.forEach((f,y)=>{const w=i.Au.get(f);if(!w)return;i.Au.set(f,w.withResumeToken(Rn.EMPTY_BYTE_STRING,w.snapshotVersion)),Gx(i,f);const D=new Ku(w.target,f,y,w.sequenceNumber);rC(i,D)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield aC(n,r)}var r}),hv.apply(this,arguments)}function aC(n,e,t){return eo.apply(this,arguments)}function eo(){return eo=(0,ve.Z)(function*(n,e,t){if(!Ba(e))throw e;n.vu.add(1),yield ul(n),n.bu.set("Offline"),t||(t=()=>AT(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield uv(n)}))}),eo.apply(this,arguments)}function uC(n,e){return e().catch(t=>aC(n,t,e))}function sp(n){return HT.apply(this,arguments)}function HT(){return HT=(0,ve.Z)(function*(n){const e=qe(n),t=es(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;Xi(e);)try{const i=yield Ux(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,Wx(e,i)}catch(i){yield aC(e,i)}fv(e)&&$T(e)}),HT.apply(this,arguments)}function Xi(n){return ec(n)&&n.Eu.length<10}function Wx(n,e){n.Eu.push(e);const t=es(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function fv(n){return ec(n)&&!es(n).Uo()&&n.Eu.length>0}function $T(n){es(n).start()}function qx(n){return Om.apply(this,arguments)}function Om(){return Om=(0,ve.Z)(function*(n){es(n).hu()}),Om.apply(this,arguments)}function GT(n){return pv.apply(this,arguments)}function pv(){return pv=(0,ve.Z)(function*(n){const e=es(n);for(const t of n.Eu)e.uu(t.mutations)}),pv.apply(this,arguments)}function Kx(n,e,t){return gv.apply(this,arguments)}function gv(){return gv=(0,ve.Z)(function*(n,e,t){const r=n.Eu.shift(),i=V_.from(r,e,t);yield uC(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield sp(n)}),gv.apply(this,arguments)}function zT(n,e){return mv.apply(this,arguments)}function mv(){return mv=(0,ve.Z)(function*(n,e){var t;e&&es(n).ou&&(yield(t=(0,ve.Z)(function*(r,i){if(BD(a=i.code)&&a!==de.ABORTED){const c=r.Eu.shift();es(r).Qo(),yield uC(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield sp(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),fv(n)&&$T(n)}),mv.apply(this,arguments)}function cC(n,e){return lC.apply(this,arguments)}function lC(){return lC=(0,ve.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=ec(t);t.vu.add(3),yield ul(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield uv(t)}),lC.apply(this,arguments)}function yv(n,e){return dC.apply(this,arguments)}function dC(){return dC=(0,ve.Z)(function*(n,e){const t=qe(n);e?(t.vu.delete(2),yield uv(t)):e||(t.vu.add(2),yield ul(t),t.bu.set("Unknown"))}),dC.apply(this,arguments)}function ll(n){return n.Su||(n.Su=function(e,t,r){const i=qe(e);return i.fu(),new PO(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:zx.bind(null,n),ao:UO.bind(null,n),nu:jT.bind(null,n)}),n.Ru.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Su.Qo(),iC(n)?UT(n):n.bu.set("Unknown")):(yield n.Su.stop(),BT(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function es(n){return n.Du||(n.Du=function(e,t,r){const i=qe(e);return i.fu(),new OO(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:qx.bind(null,n),ao:zT.bind(null,n),au:GT.bind(null,n),cu:Kx.bind(null,n)}),n.Ru.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Du.Qo(),yield sp(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class _v{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,f=new _v(e,t,c,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dl(n,e){if(xr("AsyncQueue",`${e}: ${n}`),Ba(n))return new Ne(de.UNAVAILABLE,`${e}: ${n}`);throw n}class hl{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=Wf(),this.sortedSet=new vn(this.comparator)}static emptySet(e){return new hl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new hl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class WT{constructor(){this.Cu=new vn(Ke.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):rt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class km{constructor(e,t,r,i,a,c,f,y,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=y,this.hasCachedResults=w}static fromInitialDocuments(e,t,r,i,a){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new km(e,t,hl.emptySet(t),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class qT{constructor(){this.Nu=void 0,this.listeners=[]}}class Zx{constructor(){this.queries=new nl(e=>SD(e),sm),this.onlineState="Unknown",this.ku=new Set}}function hC(n,e){return fC.apply(this,arguments)}function fC(){return fC=(0,ve.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new qT),i)try{a.Nu=yield t.onListen(r)}catch(c){const f=dl(c,`Initialization of query '${tl(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.Mu(t.onlineState),a.Nu&&e.$u(a.Nu)&&gC(t)}),fC.apply(this,arguments)}function pC(n,e){return vv.apply(this,arguments)}function vv(){return vv=(0,ve.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),vv.apply(this,arguments)}function BO(n,e){const t=qe(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const f of c.listeners)f.$u(i)&&(r=!0);c.Nu=i}}r&&gC(t)}function KT(n,e,t){const r=qe(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function gC(n){n.ku.forEach(e=>{e.next()})}class wv{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new km(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=km.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class jO{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class Ev{constructor(e){this.serializer=e}rr(e){return Mo(this.serializer,e)}ur(e){return e.metadata.exists?j_(this.serializer,e.document,!1):Hn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return _r(e)}}class ZT{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=mC(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=cn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new Ev(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.rr(i.metadata.name);for(const c of i.metadata.queries){const f=(t.get(c)||kt()).add(a);t.set(c,f)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function Bx(n,e,t,r){return tv.apply(this,arguments)}(e.localStore,new Ev(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield JE(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function mC(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class YT{constructor(e){this.key=e}}class yC{constructor(e){this.key=e}}class _C{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=kt(),this.mutatedKeys=kt(),this.tc=um(e),this.ec=new hl(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new WT,i=t?t.ec:this.ec;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const y="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,M)=>{const P=i.get(D),j=om(this.query,M)?M:null,K=!!P&&this.mutatedKeys.has(P.key),ae=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let ye=!1;P&&j?P.data.isEqual(j.data)?K!==ae&&(r.track({type:3,doc:j}),ye=!0):this.rc(P,j)||(r.track({type:2,doc:j}),ye=!0,(y&&this.tc(j,y)>0||w&&this.tc(j,w)<0)&&(f=!0)):!P&&j?(r.track({type:0,doc:j}),ye=!0):P&&!j&&(r.track({type:1,doc:P}),ye=!0,(y||w)&&(f=!0)),ye&&(j?(c=c.add(j),a=ae?a.add(D):a.delete(D)):(c=c.delete(D),a=a.delete(D)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const D="F"===this.query.limitType?c.last():c.first();c=c.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{ec:c,ic:r,zi:f,mutatedKeys:a}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const a=e.ic.xu();a.sort((w,D)=>function(M,P){const j=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return j(M)-j(P)}(w.type,D.type)||this.tc(w.doc,D.doc)),this.oc(r);const c=t?this.uc():[],f=0===this.Zu.size&&this.current?1:0,y=f!==this.Xu;return this.Xu=f,0!==a.length||y?{snapshot:new km(this.query,e.ec,i,a,e.mutatedKeys,0===f,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new WT,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=kt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new yC(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new YT(r))}),t}hc(e){this.Yu=e.ir,this.Zu=kt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return km.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class op{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Cv{constructor(e){this.key=e,this.fc=!1}}class QT{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new nl(f=>SD(f),sm),this._c=new Map,this.mc=new Set,this.gc=new vn(Ke.comparator),this.yc=new Map,this.Ic=new $E,this.Tc={},this.Ec=new Map,this.Ac=ol.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function JT(n,e){return vC.apply(this,arguments)}function vC(){return vC=(0,ve.Z)(function*(n,e){const t=fS(n);let r,i;const a=t.wc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.lc();else{const c=yield Xu(t.localStore,Ms(e)),f=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield wC(t,e,r,"current"===f,c.resumeToken),t.isPrimaryClient&&dv(t.remoteStore,c)}return i}),vC.apply(this,arguments)}function wC(n,e,t,r,i){return XT.apply(this,arguments)}function XT(){return XT=(0,ve.Z)(function*(n,e,t,r,i){n.Rc=(M,P,j)=>{return(K=(0,ve.Z)(function*(ae,ye,Qe,dt){let Xe=ye.view.sc(Qe);Xe.zi&&(Xe=yield xm(ae.localStore,ye.query,!1).then(({documents:tn})=>ye.view.sc(tn,Xe)));const It=dt&&dt.targetChanges.get(ye.targetId),Bt=ye.view.applyChanges(Xe,ae.isPrimaryClient,It);return Iv(ae,ye.targetId,Bt.cc),Bt.snapshot}),function(ae,ye,Qe,dt){return K.apply(this,arguments)})(n,M,P,j);var K};const a=yield xm(n.localStore,e,!0),c=new _C(e,a.ir),f=c.sc(a.documents),y=mm.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),w=c.applyChanges(f,n.isPrimaryClient,y);Iv(n,t,w.cc);const D=new op(e,t,c);return n.wc.set(e,D),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),w.snapshot}),XT.apply(this,arguments)}function eS(n,e){return EC.apply(this,arguments)}function EC(){return EC=(0,ve.Z)(function*(n,e){const t=qe(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(a=>!sm(a,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield al(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),cl(t.remoteStore,r.targetId),up(t,r.targetId)}).catch(Hu))):(up(t,r.targetId),yield al(t.localStore,r.targetId,!0))}),EC.apply(this,arguments)}function tS(){return tS=(0,ve.Z)(function*(n,e,t){const r=Sv(n);try{const i=yield function(a,c){const f=qe(a),y=tr.now(),w=c.reduce((P,j)=>P.add(j.key),kt());let D,M;return f.persistence.runTransaction("Locally write mutations","readwrite",P=>{let j=Ji(),K=kt();return f.Zi.getEntries(P,w).next(ae=>{j=ae,j.forEach((ye,Qe)=>{Qe.isValidDocument()||(K=K.add(ye))})}).next(()=>f.localDocuments.getOverlayedDocuments(P,j)).next(ae=>{D=ae;const ye=[];for(const Qe of c){const dt=yx(Qe,D.get(Qe.key).overlayedDocument);null!=dt&&ye.push(new Xs(Qe.key,dt,Y0(dt.value.mapValue),cr.exists(!0)))}return f.mutationQueue.addMutationBatch(P,y,ye,c)}).next(ae=>{M=ae;const ye=ae.applyToLocalDocumentSet(D,K);return f.documentOverlayCache.saveOverlays(P,ae.batchId,ye)})}).then(()=>({batchId:M.batchId,changes:iE(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,f){let y=a.Tc[a.currentUser.toKey()];y||(y=new vn(Ot)),y=y.insert(c,f),a.Tc[a.currentUser.toKey()]=y}(r,i.batchId,t),yield ia(r,i.changes),yield sp(r.remoteStore)}catch(i){const a=dl(i,"Failed to persist write");t.reject(a)}}),tS.apply(this,arguments)}function Qx(n,e){return nS.apply(this,arguments)}function nS(){return nS=(0,ve.Z)(function*(n,e){const t=qe(n);try{const r=yield function ZE(n,e){const t=qe(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const f=[];e.targetChanges.forEach((D,M)=>{const P=i.get(M);if(!P)return;f.push(t.Bs.removeMatchingKeys(a,D.removedDocuments,M).next(()=>t.Bs.addMatchingKeys(a,D.addedDocuments,M)));let j=P.withSequenceNumber(a.currentSequenceNumber);var K,ae,ye;null!==e.targetMismatches.get(M)?j=j.withResumeToken(Rn.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):D.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(D.resumeToken,r)),i=i.insert(M,j),ae=j,ye=D,(0===(K=P).resumeToken.approximateByteSize()||ae.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=3e8||ye.addedDocuments.size+ye.modifiedDocuments.size+ye.removedDocuments.size>0)&&f.push(t.Bs.updateTargetData(a,j))});let y=Ji(),w=kt();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,D))}),f.push(YE(a,c,e.documentUpdates).next(D=>{y=D.nr,w=D.sr})),!r.isEqual(yt.min())){const D=t.Bs.getLastRemoteSnapshotVersion(a).next(M=>t.Bs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(D)}return se.waitFor(f).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,y,w)).next(()=>y)}).then(a=>(t.Ji=i,a))}(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.yc.get(a);c&&(lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.fc=!0:i.modifiedDocuments.size>0?lt(c.fc):i.removedDocuments.size>0&&(lt(c.fc),c.fc=!1))}),yield ia(t,r,e)}catch(r){yield Hu(r)}}),nS.apply(this,arguments)}function CC(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((a,c)=>{const f=c.view.Mu(e);f.snapshot&&i.push(f.snapshot)}),function(a,c){const f=qe(a);f.onlineState=c;let y=!1;f.queries.forEach((w,D)=>{for(const M of D.listeners)M.Mu(c)&&(y=!0)}),y&&gC(f)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Jx(n,e,t){return IC.apply(this,arguments)}function IC(){return IC=(0,ve.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),a=i&&i.key;if(a){let c=new vn(Ke.comparator);c=c.insert(a,Hn.newNoDocument(a,yt.min()));const f=kt().add(a),y=new gm(yt.min(),new Map,new vn(Ot),c,f);yield Qx(r,y),r.gc=r.gc.remove(a),r.yc.delete(e),bv(r)}else yield al(r.localStore,e,!1).then(()=>up(r,e,t)).catch(Hu)}),IC.apply(this,arguments)}function Xx(n,e){return rS.apply(this,arguments)}function rS(){return rS=(0,ve.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const i=yield function Vx(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Zi.newChangeBuffer({trackRemovals:!0});return function(c,f,y,w){const D=y.batch,M=D.keys();let P=se.resolve();return M.forEach(j=>{P=P.next(()=>w.getEntry(f,j)).next(K=>{const ae=y.docVersions.get(j);lt(null!==ae),K.version.compareTo(ae)<0&&(D.applyToRemoteDocument(K,y),K.isValidDocument()&&(K.setReadTime(y.commitVersion),w.addEntry(K)))})}),P.next(()=>c.mutationQueue.removeMutationBatch(f,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let f=kt();for(let y=0;y<c.mutationResults.length;++y)c.mutationResults[y].transformResults.length>0&&(f=f.add(c.batch.mutations[y].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);ap(t,r,null),bC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ia(t,i)}catch(i){yield Hu(i)}}),rS.apply(this,arguments)}function HO(n,e,t){return iS.apply(this,arguments)}function iS(){return iS=(0,ve.Z)(function*(n,e,t){const r=qe(n);try{const i=yield function(a,c){const f=qe(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let w;return f.mutationQueue.lookupMutationBatch(y,c).next(D=>(lt(null!==D),w=D.keys(),f.mutationQueue.removeMutationBatch(y,D))).next(()=>f.mutationQueue.performConsistencyCheck(y)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(y,w,c)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w)).next(()=>f.localDocuments.getDocuments(y,w))})}(r.localStore,e);ap(r,e,t),bC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ia(r,i)}catch(i){yield Hu(i)}}),iS.apply(this,arguments)}function sS(){return sS=(0,ve.Z)(function*(n,e){const t=qe(n);ec(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=qe(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>c.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=dl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),sS.apply(this,arguments)}function bC(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function ap(n,e,t){const r=qe(n);let i=r.Tc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function up(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||oS(n,r)})}function oS(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(cl(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),bv(n))}function Iv(n,e,t){for(const r of t)r instanceof YT?(n.Ic.addReference(r.key,e),uh(n,r)):r instanceof yC?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||oS(n,r.key)):rt()}function uh(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.mc.add(r),bv(n))}function bv(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Ke(cn.fromString(e)),r=n.Ac.next();n.yc.set(r,new Cv(t)),n.gc=n.gc.insert(t,r),dv(n.remoteStore,new Ku(Ms(na(t.path)),r,"TargetPurposeLimboResolution",Qs.ct))}}function ia(n,e,t){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,ve.Z)(function*(n,e,t){const r=qe(n),i=[],a=[],c=[];var f;r.wc.isEmpty()||(r.wc.forEach((f,y)=>{c.push(r.Rc(y,e,t).then(w=>{if((w||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,w?.fromCache?"not-current":"current"),w){i.push(w);const D=oh.Li(y.targetId,w);a.push(D)}}))}),yield Promise.all(c),r.dc.nu(i),yield(f=(0,ve.Z)(function*(y,w){const D=qe(y);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>se.forEach(w,P=>se.forEach(P.Fi,j=>D.persistence.referenceDelegate.addReference(M,P.targetId,j)).next(()=>se.forEach(P.Bi,j=>D.persistence.referenceDelegate.removeReference(M,P.targetId,j)))))}catch(M){if(!Ba(M))throw M;Ve("LocalStore","Failed to update sequence numbers: "+M)}for(const M of w){const P=M.targetId;if(!M.fromCache){const j=D.Ji.get(P),ae=j.withLastLimboFreeSnapshotVersion(j.snapshotVersion);D.Ji=D.Ji.insert(P,ae)}}}),function(y,w){return f.apply(this,arguments)})(r.localStore,a))}),Fm.apply(this,arguments)}function eR(n,e){return Lm.apply(this,arguments)}function Lm(){return Lm=(0,ve.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield qE(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(c=>{c.forEach(f=>{f.reject(new Ne(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ia(t,r.er)}var i}),Lm.apply(this,arguments)}function DC(n,e){const t=qe(n),r=t.yc.get(e);if(r&&r.fc)return kt().add(r.key);{let i=kt();const a=t._c.get(e);if(!a)return i;for(const c of a){const f=t.wc.get(c);i=i.unionWith(f.view.nc)}return i}}function Dv(n,e){return aS.apply(this,arguments)}function aS(){return aS=(0,ve.Z)(function*(n,e){const t=qe(n),r=yield xm(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&Iv(t,e.targetId,i.cc),i}),aS.apply(this,arguments)}function GO(n,e){return uS.apply(this,arguments)}function uS(){return uS=(0,ve.Z)(function*(n,e){const t=qe(n);return QE(t.localStore,e).then(r=>ia(t,r))}),uS.apply(this,arguments)}function cS(n,e,t,r){return TC.apply(this,arguments)}function TC(){return TC=(0,ve.Z)(function*(n,e,t,r){const i=qe(n),a=yield function(c,f){const y=qe(c),w=qe(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",D=>w.Sn(D,f).next(M=>M?y.localDocuments.getDocuments(D,M):se.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield sp(i.remoteStore):"acknowledged"===t||"rejected"===t?(ap(i,e,r||null),bC(i,e),f=e,qe(qe(i.localStore).mutationQueue).Cn(f)):rt(),yield ia(i,a)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),TC.apply(this,arguments)}function SC(){return SC=(0,ve.Z)(function*(n,e){const t=qe(n);if(fS(t),Sv(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield lS(t,r.toArray());t.vc=!0,yield yv(t.remoteStore,!0);for(const a of i)dv(t.remoteStore,a)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(up(t,c),al(t.localStore,c,!0))),cl(t.remoteStore,c)}),yield i,yield lS(t,r),function(a){const c=qe(a);c.yc.forEach((f,y)=>{cl(c.remoteStore,y)}),c.Ic.Ts(),c.yc=new Map,c.gc=new vn(Ke.comparator)}(t),t.vc=!1,yield yv(t.remoteStore,!1)}}),SC.apply(this,arguments)}function lS(n,e,t){return Tv.apply(this,arguments)}function Tv(){return Tv=(0,ve.Z)(function*(n,e,t){const r=qe(n),i=[],a=[];for(const c of e){let f;const y=r._c.get(c);if(y&&0!==y.length){f=yield Xu(r.localStore,Ms(y[0]));for(const w of y){const D=r.wc.get(w),M=yield Dv(r,D);M.snapshot&&a.push(M.snapshot)}}else{const w=yield xT(r.localStore,c);f=yield Xu(r.localStore,w),yield wC(r,AC(w),c,!1,f.resumeToken)}i.push(f)}return r.dc.nu(a),i}),Tv.apply(this,arguments)}function AC(n){return TD(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function dS(n){const e=qe(n);return qe(qe(e.localStore).persistence).$i()}function nR(n,e,t,r){return MC.apply(this,arguments)}function MC(){return MC=(0,ve.Z)(function*(n,e,t,r){const i=qe(n);if(i.vc)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const a=i._c.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const c=yield QE(i.localStore,am(a[0])),f=gm.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Rn.EMPTY_BYTE_STRING);yield ia(i,c,f);break}case"rejected":yield al(i.localStore,e,!0),up(i,e,r);break;default:rt()}}),MC.apply(this,arguments)}function hS(n,e,t){return Vm.apply(this,arguments)}function Vm(){return Vm=(0,ve.Z)(function*(n,e,t){const r=fS(n);if(r.vc){for(const i of e){if(r._c.has(i)){Ve("SyncEngine","Adding an already active target "+i);continue}const a=yield xT(r.localStore,i),c=yield Xu(r.localStore,a);yield wC(r,AC(a),c.targetId,!1,c.resumeToken),dv(r.remoteStore,c)}for(const i of t)r._c.has(i)&&(yield al(r.localStore,i,!1).then(()=>{cl(r.remoteStore,i),up(r,i)}).catch(Hu))}}),Vm.apply(this,arguments)}function fS(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Qx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Jx.bind(null,e),e.dc.nu=BO.bind(null,e.eventManager),e.dc.Pc=KT.bind(null,e.eventManager),e}function Sv(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Xx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HO.bind(null,e),e}class Um{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.serializer=ov(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return ST(this.persistence,new TT,e.initialUser,this.serializer)}createPersistence(e){return new GE(X_.zs,this.serializer)}createSharedClientState(e){return new tC}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class pS extends Um{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield Sv(r.Vc.syncEngine),yield sp(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return ST(this.persistence,new TT,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new VE(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new aD(t,this.persistence);return new oD(e.asyncQueue,r)}createPersistence(e){const t=Mm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Bi.withCacheSize(this.cacheSizeBytes):Bi.DEFAULT;return new DT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,LT(),sv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new tC}}class iR extends pS{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof iv&&(r.sharedClientState.syncEngine={jr:cS.bind(null,i),zr:nR.bind(null,i),Wr:hS.bind(null,i),$i:dS.bind(null,i),Qr:GO.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var a=(0,ve.Z)(function*(c){yield function tR(n,e){return SC.apply(this,arguments)}(r.Vc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}createSharedClientState(e){const t=LT();if(!iv.D(t))throw new Ne(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Mm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new iv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class cp{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>CC(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=eR.bind(null,r.syncEngine),yield yv(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Zx}createDatastore(e){const t=ov(e.databaseInfo.databaseId),r=new FT(e.databaseInfo);return new kO(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>CC(this.syncEngine,f,0),c=PT.D()?new PT:new Hx,new VO(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,f,y,w){const D=new QT(r,i,a,c,f,y);return w&&(D.vc=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=qe(t);Ve("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield ul(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function gS(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Av{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):xr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class sR{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new ur,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const a=yield e.$c(i);return new jO(JSON.parse(a),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,ve.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class mS{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ve.Z)(function*(a,c){const f=qe(a),y=nh(f.serializer)+"/documents",w={documents:c.map(j=>ym(f.serializer,j))},D=yield f.vo("BatchGetDocuments",y,w,c.length),M=new Map;D.forEach(j=>{const K=function Dx(n,e){return"found"in e?function(t,r){lt(!!r.found);const i=Mo(t,r.found.name),a=_r(r.found.updateTime),c=r.found.createTime?_r(r.found.createTime):yt.min(),f=new pi({mapValue:{fields:r.found.fields}});return Hn.newFoundDocument(i,a,c,f)}(n,e):"missing"in e?function(t,r){lt(!!r.missing),lt(!!r.readTime);const i=Mo(t,r.missing),a=_r(r.readTime);return Hn.newNoDocument(i,a)}(n,e):rt()}(f.serializer,j);M.set(K.key.toString(),K)});const P=[];return c.forEach(j=>{const K=M.get(j.toString());lt(!!K),P.push(K)}),P}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Ke.fromPath(i);e.mutations.push(new UD(a,e.precondition(a)))}),yield(r=(0,ve.Z)(function*(i,a){const c=qe(i),f=nh(c.serializer)+"/documents",y={writes:a.map(w=>Ga(c.serializer,w))};yield c.Io("Commit",f,y)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rt();t=yt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(yt.min())?cr.exists(!1):cr.updateTime(t):cr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(yt.min()))throw new Ne(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return cr.updateTime(t)}return cr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class yS{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new av(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,ve.Z)(function*(){const t=new mS(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Uc(a)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!Zg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!BD(t)}return!1}}class zO{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=hi.UNAUTHENTICATED,this.clientId=E_.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ve.Z)(function*(f){Ve("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Ve("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=dl(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Mv(n,e){return Bm.apply(this,arguments)}function Bm(){return Bm=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ve.Z)(function*(a){r.isEqual(a)||(yield qE(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Bm.apply(this,arguments)}function xv(n,e){return Rv.apply(this,arguments)}function Rv(){return Rv=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield jm(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>cC(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>cC(e.remoteStore,a)),n._onlineComponents=e}),Rv.apply(this,arguments)}function _S(n){return"FirebaseError"===n.name?n.code===de.FAILED_PRECONDITION||n.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function jm(n){return RC.apply(this,arguments)}function RC(){return RC=(0,ve.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ve("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Mv(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!_S(t))throw t;Ts("Error using user provided cache. Falling back to memory cache: "+t),yield Mv(n,new Um)}}else Ve("FirestoreClient","Using default OfflineComponentProvider"),yield Mv(n,new Um);return n._offlineComponents}),RC.apply(this,arguments)}function Nv(n){return Pv.apply(this,arguments)}function Pv(){return Pv=(0,ve.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ve("FirestoreClient","Using user provided OnlineComponentProvider"),yield xv(n,n._uninitializedComponentsProvider._online)):(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield xv(n,new cp))),n._onlineComponents}),Pv.apply(this,arguments)}function NC(n){return jm(n).then(e=>e.persistence)}function PC(n){return jm(n).then(e=>e.localStore)}function vS(n){return Nv(n).then(e=>e.remoteStore)}function lp(n){return Nv(n).then(e=>e.syncEngine)}function dp(n){return wS.apply(this,arguments)}function wS(){return wS=(0,ve.Z)(function*(n){const e=yield Nv(n),t=e.eventManager;return t.onListen=JT.bind(null,e.syncEngine),t.onUnlisten=eS.bind(null,e.syncEngine),t}),wS.apply(this,arguments)}function uR(n,e,t={}){const r=new ur;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,a,c,f,y){const w=new Av({next:M=>{a.enqueueAndForget(()=>pC(i,D));const P=M.docs.has(c);!P&&M.fromCache?y.reject(new Ne(de.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&M.fromCache&&f&&"server"===f.source?y.reject(new Ne(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(M)},error:M=>y.reject(M)}),D=new wv(na(c.path),w,{includeMetadataChanges:!0,Ku:!0});return hC(i,D)}(yield dp(n),n.asyncQueue,e,t,r)})),r.promise}function cR(n,e,t={}){const r=new ur;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,a,c,f,y){const w=new Av({next:M=>{a.enqueueAndForget(()=>pC(i,D)),M.fromCache&&"server"===f.source?y.reject(new Ne(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(M)},error:M=>y.reject(M)}),D=new wv(c,w,{includeMetadataChanges:!0,Ku:!0});return hC(i,D)}(yield dp(n),n.asyncQueue,e,t,r)})),r.promise}function dR(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const hR=new Map;function ES(n,e,t){if(!t)throw new Ne(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function CS(n,e,t,r){if(!0===e&&!0===r)throw new Ne(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function fR(n){if(!Ke.isDocumentKey(n))throw new Ne(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function s(n){if(Ke.isDocumentKey(n))throw new Ne(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function o(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":rt()}function u(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=o(n);throw new Ne(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function l(n,e){if(e<=0)throw new Ne(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class d{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=dR(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Ne(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ne(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ne(de.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class g{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new d({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ne(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new d(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new GM;switch(t.type){case"firstParty":return new w_(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ne(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=hR.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),hR.delete(e),t.terminate())}(this),Promise.resolve()}}class C{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new A(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new C(this.firestore,e,this._key)}}class b{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new b(this.firestore,e,this._query)}}class A extends b{constructor(e,t,r){super(e,t,na(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new C(this.firestore,null,new Ke(e))}withConverter(e){return new A(this.firestore,e,this._path)}}function N(n,e,...t){if(n=(0,k.m9)(n),ES("collection","path",e),n instanceof g){const r=cn.fromString(e,...t);return s(r),new A(n,null,r)}{if(!(n instanceof C||n instanceof A))throw new Ne(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return s(r),new A(n.firestore,null,r)}}function W(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=E_.A()),ES("doc","path",e),n instanceof g){const r=cn.fromString(e,...t);return fR(r),new C(n,null,new Ke(r))}{if(!(n instanceof C||n instanceof A))throw new Ne(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return fR(r),new C(n.firestore,n instanceof A?n.converter:null,new Ke(r))}}function Q(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof C||n instanceof A)&&(e instanceof C||e instanceof A)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Ce(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof b&&e instanceof b&&n.firestore===e.firestore&&sm(n._query,e._query)&&n.converter===e.converter}class Ue{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new av(this,"async_queue_retry"),this.Xc=()=>{const t=sv();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=sv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=sv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new ur;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ve.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Ba(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,xr("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=_v.createAndSchedule(this,e,t,r,a=>this.na(a));return this.zc.push(i),i}Zc(){this.Wc&&rt()}verifyOperationInProgress(){}sa(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Ze(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class ft{constructor(){this._progressObserver={},this._taskCompletionResolver=new ur,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class it extends g{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Ue,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Hm(this),this._firestoreClient.terminate()}}function sn(n){return n._firestoreClient||Hm(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Hm(n){var e,t,r;const i=n._freezeSettings(),a=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ix(n._databaseId,f,n._persistenceKey,(w=i).host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,dR(w.experimentalLongPollingOptions),w.useFetchStreams));var f,w;n._firestoreClient=new zO(n._authCredentials,n._appCheckCredentials,n._queue,a),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function JO(n,e,t){const r=new ur;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield Mv(n,t),yield xv(n,e),r.resolve()}catch(i){const a=i;if(!_S(a))throw a;Ts("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a)}})).then(()=>r.promise)}function XO(n){if(n._initialized||n._terminated)throw new Ne(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class fl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fl(Rn.fromBase64String(e))}catch(t){throw new Ne(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fl(Rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ch{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class $m{constructor(e){this._methodName=e}}class IS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ot(this._lat,e._lat)||Ot(this._long,e._long)}}const M2=/^__.*__$/;class x2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Xs(e,this.data,this.fieldMask,t,this.fieldTransforms):new eh(e,this.data,t,this.fieldTransforms)}}class ek{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Xs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function tk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class bS{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new bS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return SS(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(tk(this.ca)&&M2.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class R2{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ov(e)}ya(e,t,r,i=!1){return new bS({ca:e,methodName:t,ga:r,path:yr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gm(n){const e=n._freezeSettings(),t=ov(n._databaseId);return new R2(n._databaseId,!!e.ignoreUndefinedProperties,t)}function DS(n,e,t,r,i,a={}){const c=n.ya(a.merge||a.mergeFields?2:0,e,t,i);vR("Data must be an object, but it was:",c,r);const f=ik(r,c);let y,w;if(a.merge)y=new Js(c.fieldMask),w=c.fieldTransforms;else if(a.mergeFields){const D=[];for(const M of a.mergeFields){const P=FC(e,M,t);if(!c.contains(P))throw new Ne(de.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);ok(D,P)||D.push(P)}y=new Js(D),w=c.fieldTransforms.filter(M=>y.covers(M.field))}else y=null,w=c.fieldTransforms;return new x2(new pi(f),y,w)}class kC extends $m{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kC}}function nk(n,e,t){return new bS({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class mR extends $m{_toFieldTransform(e){return new Kf(e.path,new $a)}isEqual(e){return e instanceof mR}}class N2 extends $m{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=nk(this,e,!0),r=this.pa.map(a=>zm(a,t)),i=new Qd(r);return new Kf(e.path,i)}isEqual(e){return this===e}}class P2 extends $m{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=nk(this,e,!0),r=this.pa.map(a=>zm(a,t)),i=new Jd(r);return new Kf(e.path,i)}isEqual(e){return this===e}}class O2 extends $m{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Xd(e.serializer,aE(e.serializer,this.Ia));return new Kf(e.path,t)}isEqual(e){return this===e}}function yR(n,e,t,r){const i=n.ya(1,e,t);vR("Data must be an object, but it was:",i,r);const a=[],c=pi.empty();$u(r,(y,w)=>{const D=TS(e,y,t);w=(0,k.m9)(w);const M=i.da(D);if(w instanceof kC)a.push(D);else{const P=zm(w,M);null!=P&&(a.push(D),c.set(D,P))}});const f=new Js(a);return new ek(c,f,i.fieldTransforms)}function _R(n,e,t,r,i,a){const c=n.ya(1,e,t),f=[FC(e,r,t)],y=[i];if(a.length%2!=0)throw new Ne(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<a.length;P+=2)f.push(FC(e,a[P])),y.push(a[P+1]);const w=[],D=pi.empty();for(let P=f.length-1;P>=0;--P)if(!ok(w,f[P])){const j=f[P];let K=y[P];K=(0,k.m9)(K);const ae=c.da(j);if(K instanceof kC)w.push(j);else{const ye=zm(K,ae);null!=ye&&(w.push(j),D.set(j,ye))}}const M=new Js(w);return new ek(D,M,c.fieldTransforms)}function rk(n,e,t,r=!1){return zm(t,n.ya(r?4:3,e))}function zm(n,e){if(sk(n=(0,k.m9)(n)))return vR("Unsupported field value:",e,n),ik(n,e);if(n instanceof $m)return function(t,r){if(!tk(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let f=zm(c,r.wa(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return aE(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=tr.fromDate(t);return{timestampValue:th(r.serializer,i)}}if(t instanceof tr){const i=new tr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:th(r.serializer,i)}}if(t instanceof IS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof fl)return{bytesValue:qD(r.serializer,t._byteString)};if(t instanceof C){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:vE(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${o(t)}`)}(n,e)}function ik(n,e){const t={};return H0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$u(n,(r,i)=>{const a=zm(i,e.ha(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function sk(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof tr||n instanceof IS||n instanceof fl||n instanceof C||n instanceof $m)}function vR(n,e,t){if(!sk(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=o(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function FC(n,e,t){if((e=(0,k.m9)(e))instanceof ch)return e._internalPath;if("string"==typeof e)return TS(n,e);throw SS("Field path arguments must be of type string or ",n,!1,void 0,t)}const k2=new RegExp("[~\\*/\\[\\]]");function TS(n,e,t){if(e.search(k2)>=0)throw SS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ch(...e.split("."))._internalPath}catch{throw SS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function SS(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let y="";return(a||c)&&(y+=" (found",a&&(y+=` in field ${r}`),c&&(y+=` in document ${i}`),y+=")"),new Ne(de.INVALID_ARGUMENT,f+n+y)}function ok(n,e){return n.some(t=>t.isEqual(e))}class LC{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new C(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new F2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(AS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class F2 extends LC{data(){return super.data()}}function AS(n,e){return"string"==typeof e?TS(n,e):e instanceof ch?e._internalPath:e._delegate._internalPath}function ak(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wR{}class VC extends wR{}function hp(n,e,...t){let r=[];e instanceof wR&&r.push(e),r=r.concat(t),function(i){const a=i.filter(f=>f instanceof Ov).length,c=i.filter(f=>f instanceof UC).length;if(a>1||a>0&&c>0)throw new Ne(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class UC extends VC{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new UC(e,t,r)}_apply(e){const t=this._parse(e);return dk(e._query,t),new b(e.firestore,e.converter,el(e._query,t))}_parse(e){const t=Gm(e.firestore);return function(i,a,c,f,y,w,D){let M;if(y.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Ne(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){lk(D,w);const P=[];for(const j of D)P.push(ck(f,i,j));M={arrayValue:{values:P}}}else M=ck(f,i,D)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||lk(D,w),M=rk(c,"where",D,"in"===w||"not-in"===w);return nn.create(y,w,M)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Ov extends wR{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ov(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Tn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const c=i.getFlattenedFilters();for(const f of c)dk(a,f),a=el(a,f)}(e._query,t),new b(e.firestore,e.converter,el(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ER extends VC{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ER(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ne(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new $f(i,a);return function(f,y){if(null===im(f)){const w=rE(f);null!==w&&hk(0,w,y.field)}}(r,c),c}(e._query,this._field,this._direction);return new b(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new qu(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class MS extends VC{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new MS(e,t,r)}_apply(e){return new b(e.firestore,e.converter,L_(e._query,this._limit,this._limitType))}}class xS extends VC{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new xS(e,t,r)}_apply(e){const t=uk(e,this.type,this._docOrFields,this._inclusive);return new b(e.firestore,e.converter,(i=t,new qu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class RS extends VC{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new RS(e,t,r)}_apply(e){const t=uk(e,this.type,this._docOrFields,this._inclusive);return new b(e.firestore,e.converter,(i=t,new qu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function uk(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof LC)return function(i,a,c,f,y){if(!f)throw new Ne(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const w=[];for(const D of Xc(i))if(D.field.isKeyField())w.push(Ha(a,f.key));else{const M=f.data.field(D.field);if(Ss(M))throw new Ne(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const P=D.field.canonicalString();throw new Ne(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}w.push(M)}return new Wu(w,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Gm(n.firestore);return function(a,c,f,y,w,D){const M=a.explicitOrderBy;if(w.length>M.length)throw new Ne(de.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let j=0;j<w.length;j++){const K=w[j];if(M[j].field.isKeyField()){if("string"!=typeof K)throw new Ne(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof K}`);if(!F_(a)&&-1!==K.indexOf("/"))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${K}' contains a slash.`);const ae=a.path.child(cn.fromString(K));if(!Ke.isDocumentKey(ae))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${ae}' is not because it contains an odd number of segments.`);const ye=new Ke(ae);P.push(Ha(c,ye))}else{const ae=rk(f,y,K);P.push(ae)}}return new Wu(P,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function ck(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Ne(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!F_(e)&&-1!==t.indexOf("/"))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(cn.fromString(t));if(!Ke.isDocumentKey(r))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ha(n,new Ke(r))}if(t instanceof C)return Ha(n,t._key);throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${o(t)}.`)}function lk(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dk(n,e){if(e.isInequality()){const r=rE(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=im(n);null!==a&&hk(0,i,a)}const t=function(r,i){for(const a of r)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ne(de.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function hk(n,e,t){if(!t.isEqual(e))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class CR{convertValue(e,t="none"){switch(ja(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ei(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return $u(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new IS(wn(e.latitude),wn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Jg(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Bf(e));default:return null}}convertTimestamp(e){const t=Gu(e);return new tr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=cn.fromString(e);lt(IE(r));const i=new Zc(r.get(1),r.get(3)),a=new Ke(r.popFirst(5));return i.isEqual(t)||xr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function NS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class z2 extends CR{constructor(e){super(),this.firestore=e}convertBytes(e){return new fl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new C(this.firestore,null,t)}}class Wm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lh extends LC{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new BC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(AS("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class BC extends lh{data(e={}){return super.data(e)}}class fp{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Wm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new BC(this._firestore,this._userDataWriter,r.key,r,new Wm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new BC(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Wm(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const f=new BC(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Wm(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,w=-1;return 0!==c.type&&(y=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),w=a.indexOf(c.doc.key)),{type:q2(c.type),doc:f,oldIndex:y,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function q2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}function pk(n,e){return n instanceof lh&&e instanceof lh?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof fp&&e instanceof fp&&n._firestore===e._firestore&&Ce(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class pp extends CR{constructor(e){super(),this.firestore=e}convertBytes(e){return new fl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new C(this.firestore,null,t)}}function gk(n,e,t){n=u(n,C);const r=u(n.firestore,it),i=NS(n.converter,e,t);return kv(r,[DS(Gm(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,cr.none())])}function mk(n,e,t,...r){n=u(n,C);const i=u(n.firestore,it),a=Gm(i);let c;return c="string"==typeof(e=(0,k.m9)(e))||e instanceof ch?_R(a,"updateDoc",n._key,e,t,r):yR(a,"updateDoc",n._key,e),kv(i,[c.toMutation(n._key,cr.exists(!0))])}function yk(n,...e){var t,r,i;n=(0,k.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||Ze(e[c])||(a=e[c],c++);const f={includeMetadataChanges:a.includeMetadataChanges};if(Ze(e[c])){const M=e[c];e[c]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[c+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[c+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let y,w,D;if(n instanceof C)w=u(n.firestore,it),D=na(n._key.path),y={next:M=>{e[c]&&e[c](IR(w,n,M))},error:e[c+1],complete:e[c+2]};else{const M=u(n,b);w=u(M.firestore,it),D=M._query;const P=new pp(w);y={next:j=>{e[c]&&e[c](new fp(w,P,M,j))},error:e[c+1],complete:e[c+2]},ak(n._query)}return function(M,P,j,K){const ae=new Av(K),ye=new wv(P,ae,j);return M.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return hC(yield dp(M),ye)})),()=>{ae.Dc(),M.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return pC(yield dp(M),ye)}))}}(sn(w),D,f,y)}function kv(n,e){return function(t,r){const i=new ur;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function Yx(n,e,t){return tS.apply(this,arguments)}(yield lp(t),r,i)})),i.promise}(sn(n),e)}function IR(n,e,t){const r=t.docs.get(e._key),i=new pp(n);return new lh(n,i,e._key,r,new Wm(t.hasPendingWrites,t.fromCache),e.converter)}const dU={maxAttempts:5};class _k{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Gm(e)}set(e,t,r){this._verifyNotCommitted();const i=gp(e,this._firestore),a=NS(i.converter,t,r),c=DS(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,cr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=gp(e,this._firestore);let c;return c="string"==typeof(t=(0,k.m9)(t))||t instanceof ch?_R(this._dataReader,"WriteBatch.update",a._key,t,r,i):yR(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,cr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=gp(e,this._firestore);return this._mutations=this._mutations.concat(new Zf(t._key,cr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gp(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Ne(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class hU extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Gm(e)}get(e){const t=gp(e,this._firestore),r=new z2(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return rt();const a=i[0];if(a.isFoundDocument())return new LC(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new LC(this._firestore,r,t._key,null,t.converter);throw rt()})}set(e,t,r){const i=gp(e,this._firestore),a=NS(i.converter,t,r),c=DS(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=gp(e,this._firestore);let c;return c="string"==typeof(t=(0,k.m9)(t))||t instanceof ch?_R(this._dataReader,"Transaction.update",a._key,t,r,i):yR(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=gp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=gp(e,this._firestore),r=new pp(this._firestore);return super.get(e).then(i=>new lh(this._firestore,r,t._key,i._document,new Wm(!1,!1),t.converter))}}function bR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function wk(){if(typeof Uint8Array>"u")throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function Ek(){if(!function G0(){return typeof atob<"u"}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Gg=Qo.SDK_VERSION,(0,Qo._registerComponent)(new Oa.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),c=new it(new WM(t.getProvider("auth-internal")),new AO(t.getProvider("app-check-internal")),function(f,y){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ne(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zc(f.options.projectId,y)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,Qo.registerVersion)(Xb,"3.13.0",n),(0,Qo.registerVersion)(Xb,"3.13.0","esm2017")}();class jC{constructor(e){this._delegate=e}static fromBase64String(e){return Ek(),new jC(fl.fromBase64String(e))}static fromUint8Array(e){return wk(),new jC(fl.fromUint8Array(e))}toBase64(){return Ek(),this._delegate.toBase64()}toUint8Array(){return wk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function DR(n){return function EU(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class CU{enableIndexedDbPersistence(e,t){return function pR(n,e){XO(n=u(n,it));const t=sn(n);if(t._uninitializedComponentsProvider)throw new Ne(de.FAILED_PRECONDITION,"SDK cache is already specified.");Ts("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new cp;return JO(t,i,new pS(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function gR(n){XO(n=u(n,it));const e=sn(n);if(e._uninitializedComponentsProvider)throw new Ne(de.FAILED_PRECONDITION,"SDK cache is already specified.");Ts("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new cp;return JO(e,r,new iR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function C2(n){if(n._initialized&&!n._terminated)throw new Ne(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ur;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!Ao.D())return Promise.resolve();const i=r+"main";yield Ao.delete(i)}),function(r){return t.apply(this,arguments)})(Mm(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Ck{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Zc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ts("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function _(n,e,t,r={}){var i;const a=(n=u(n,g))._getSettings(),c=`${e}:${t}`;if("firestore.googleapis.com"!==a.host&&a.host!==c&&Ts("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:c,ssl:!1})),r.mockUserToken){let f,y;if("string"==typeof r.mockUserToken)f=r.mockUserToken,y=hi.MOCK_USER;else{f=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ne(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new hi(w)}n._authCredentials=new zM(new nD(f,y))}}(this._delegate,e,t,r)}enableNetwork(){return function b2(n){return function WO(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield NC(n),t=yield vS(n);return e.setNetworkEnabled(!0),function(r){const i=qe(r);return i.vu.delete(0),uv(i)}(t)}))}(sn(n=u(n,it)))}(this._delegate)}disableNetwork(){return function D2(n){return function aR(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield NC(n),t=yield vS(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(i){const a=qe(i);a.vu.add(0),yield ul(a),a.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(sn(n=u(n,it)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,CS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function I2(n){return function(e){const t=new ur;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function $O(n,e){return sS.apply(this,arguments)}(yield lp(e),t)})),t.promise}(sn(n=u(n,it)))}(this._delegate)}onSnapshotsInSync(e){return function nU(n,e){return function ZO(n,e){const t=new Av(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield dp(n),i=t,qe(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield dp(n),i=t,void qe(r).ku.delete(i);var r,i}))}}(sn(n=u(n,it)),Ze(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Fv(this,N(this._delegate,e))}catch(t){throw to(t,"collection()","Firestore.collection()")}}doc(e){try{return new Wa(this,W(this._delegate,e))}catch(t){throw to(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new no(this,function L(n,e){if(n=u(n,g),ES("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new b(n,null,(t=e,new qu(cn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw to(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function fU(n,e,t){n=u(n,it);const r=Object.assign(Object.assign({},dU),t);return function(i){if(i.maxAttempts<1)throw new Ne(de.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,c){const f=new ur;return i.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const y=yield function oR(n){return Nv(n).then(e=>e.datastore)}(i);new yS(i.asyncQueue,y,c,a,f).run()})),f.promise}(sn(n),i=>e(new hU(n,i)),r)}(this._delegate,t=>e(new Ik(this,t)))}batch(){return sn(this._delegate),new bk(new _k(this._delegate,e=>kv(this._delegate,e)))}loadBundle(e){return function T2(n,e){const t=sn(n=u(n,it)),r=new ft;return function lR(n,e,t,r){const i=function(a,c){let f;return f="string"==typeof a?jD().encode(a):a,y=function(y,w){if(y instanceof Uint8Array)return gS(y,w);if(y instanceof ArrayBuffer)return gS(new Uint8Array(y),w);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new sR(y,c);var y}(t,ov(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function xC(n,e,t){const r=qe(n);var i;(i=(0,ve.Z)(function*(a,c,f){try{const y=yield c.getMetadata();if(yield function(P,j){const K=qe(P),ae=_r(j.createTime);return K.persistence.runTransaction("hasNewerBundle","readonly",ye=>K.qs.getBundleMetadata(ye,j.id)).then(ye=>!!ye&&ye.createTime.compareTo(ae)>=0)}(a.localStore,y))return yield c.close(),f._completeWith({taskState:"Success",documentsLoaded:(P=y).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);f._updateProgress(mC(y));const w=new ZT(y,a.localStore,c.serializer);let D=yield c.bc();for(;D;){const P=yield w.zu(D);P&&f._updateProgress(P),D=yield c.bc()}const M=yield w.complete();return yield ia(a,M.Ju,void 0),yield function(P,j){const K=qe(P);return K.persistence.runTransaction("Save bundle","readwrite",ae=>K.qs.saveBundleMetadata(ae,j))}(a.localStore,y),f._completeWith(M.progress),Promise.resolve(M.Hu)}catch(y){return Ts("SyncEngine",`Loading bundle failed with ${y}`),f._failWith(y),Promise.resolve(new Set)}var P}),function(a,c,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield lp(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function S2(n,e){return function YO(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const i=qe(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.qs.getNamedQuery(a,r))}(yield PC(n),e)}))}(sn(n=u(n,it)),e).then(t=>t?new b(n,null,t.query):null)}(this._delegate,e).then(t=>t?new no(this,t):null)}}class PS extends CR{constructor(e){super(),this.firestore=e}convertBytes(e){return new jC(new fl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Wa.forKey(t,this.firestore,null)}}class Ik{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new PS(e)}get(e){const t=Km(e);return this._delegate.get(t).then(r=>new HC(this._firestore,new lh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Km(e);return r?(bR("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Km(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Km(e);return this._delegate.delete(t),this}}class bk{constructor(e){this._delegate=e}set(e,t,r){const i=Km(e);return r?(bR("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Km(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Km(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class qm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new BC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $C(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=qm.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new qm(e,new PS(e),t),i.set(t,a)),a}}qm.INSTANCES=new WeakMap;class Wa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new PS(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Wa(t,new C(t._delegate,r,new Ke(e)))}static forKey(e,t,r){return new Wa(t,new C(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Fv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Fv(this.firestore,N(this._delegate,e))}catch(t){throw to(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof C&&Q(this._delegate,e)}set(e,t){t=bR("DocumentReference.set",t);try{return t?gk(this._delegate,e,t):gk(this._delegate,e)}catch(r){throw to(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?mk(this._delegate,e):mk(this._delegate,e,t,...r)}catch(i){throw to(i,"updateDoc()","DocumentReference.update()")}}delete(){return function eU(n){return kv(u(n.firestore,it),[new Zf(n._key,cr.none())])}(this._delegate)}onSnapshot(...e){const t=Dk(e),r=Tk(e,i=>new HC(this.firestore,new lh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return yk(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Z2(n){n=u(n,C);const e=u(n.firestore,it),t=sn(e),r=new pp(e);return function qO(n,e){const t=new ur;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,a,c){try{const f=yield function(y,w){const D=qe(y);return D.persistence.runTransaction("read document","readonly",M=>D.localDocuments.getDocument(M,w))}(i,a);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new Ne(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const y=dl(f,`Failed to get document '${a} from cache`);c.reject(y)}}),function(i,a,c){return r.apply(this,arguments)})(yield PC(n),e,t);var r})),t.promise}(t,n._key).then(i=>new lh(e,r,n._key,i,new Wm(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Y2(n){n=u(n,C);const e=u(n.firestore,it);return uR(sn(e),n._key,{source:"server"}).then(t=>IR(e,n,t))}(this._delegate):function K2(n){n=u(n,C);const e=u(n.firestore,it);return uR(sn(e),n._key).then(t=>IR(e,n,t))}(this._delegate),t.then(r=>new HC(this.firestore,new lh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Wa(this.firestore,this._delegate.withConverter(e?qm.getInstance(this.firestore,e):null))}}function to(n,e,t){return n.message=n.message.replace(e,t),n}function Dk(n){for(const e of n)if("object"==typeof e&&!DR(e))return e;return{}}function Tk(n,e){var t,r;let i;return i=DR(n[0])?n[0]:DR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class HC{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Wa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return pk(this._delegate,e._delegate)}}class $C extends HC{data(e){const t=this._delegate.data(e);return function tD(n,e){n||rt()}(void 0!==t),t}}class no{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new PS(e)}where(e,t,r){try{return new no(this.firestore,hp(this._delegate,function L2(n,e,t){const r=e,i=AS("where",n);return UC._create(i,r,t)}(e,t,r)))}catch(i){throw to(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new no(this.firestore,hp(this._delegate,function V2(n,e="asc"){const t=e,r=AS("orderBy",n);return ER._create(r,t)}(e,t)))}catch(r){throw to(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new no(this.firestore,hp(this._delegate,function U2(n){return l("limit",n),MS._create("limit",n,"F")}(e)))}catch(t){throw to(t,"limit()","Query.limit()")}}limitToLast(e){try{return new no(this.firestore,hp(this._delegate,function B2(n){return l("limitToLast",n),MS._create("limitToLast",n,"L")}(e)))}catch(t){throw to(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new no(this.firestore,hp(this._delegate,function j2(...n){return xS._create("startAt",n,!0)}(...e)))}catch(t){throw to(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new no(this.firestore,hp(this._delegate,function H2(...n){return xS._create("startAfter",n,!1)}(...e)))}catch(t){throw to(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new no(this.firestore,hp(this._delegate,function $2(...n){return RS._create("endBefore",n,!1)}(...e)))}catch(t){throw to(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new no(this.firestore,hp(this._delegate,function G2(...n){return RS._create("endAt",n,!0)}(...e)))}catch(t){throw to(t,"endAt()","Query.endAt()")}}isEqual(e){return Ce(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function J2(n){n=u(n,b);const e=u(n.firestore,it),t=sn(e),r=new pp(e);return function KO(n,e){const t=new ur;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,a,c){try{const f=yield xm(i,a,!0),y=new _C(a,f.ir),w=y.sc(f.documents),D=y.applyChanges(w,!1);c.resolve(D.snapshot)}catch(f){const y=dl(f,`Failed to execute query '${a} against cache`);c.reject(y)}}),function(i,a,c){return r.apply(this,arguments)})(yield PC(n),e,t);var r})),t.promise}(t,n._query).then(i=>new fp(e,r,n,i))}(this._delegate):"server"===e?.source?function X2(n){n=u(n,b);const e=u(n.firestore,it),t=sn(e),r=new pp(e);return cR(t,n._query,{source:"server"}).then(i=>new fp(e,r,n,i))}(this._delegate):function Q2(n){n=u(n,b);const e=u(n.firestore,it),t=sn(e),r=new pp(e);return ak(n._query),cR(t,n._query).then(i=>new fp(e,r,n,i))}(this._delegate),t.then(r=>new TR(this.firestore,new fp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Dk(e),r=Tk(e,i=>new TR(this.firestore,new fp(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return yk(this._delegate,t,r)}withConverter(e){return new no(this.firestore,this._delegate.withConverter(e?qm.getInstance(this.firestore,e):null))}}class bU{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new $C(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class TR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new no(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new $C(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new bU(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new $C(this._firestore,r))})}isEqual(e){return pk(this._delegate,e._delegate)}}class Fv extends no{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Wa(this.firestore,e):null}doc(e){try{return new Wa(this.firestore,void 0===e?W(this._delegate):W(this._delegate,e))}catch(t){throw to(t,"doc()","CollectionReference.doc()")}}add(e){return function tU(n,e){const t=u(n.firestore,it),r=W(n),i=NS(n.converter,e);return kv(t,[DS(Gm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,cr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Wa(this.firestore,t))}isEqual(e){return Q(this._delegate,e._delegate)}withConverter(e){return new Fv(this.firestore,this._delegate.withConverter(e?qm.getInstance(this.firestore,e):null))}}function Km(n){return u(n,C)}class SR{constructor(...e){this._delegate=new ch(...e)}static documentId(){return new SR(yr.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof ch&&this._delegate._internalPath.isEqual(e._internalPath)}}class Zm{constructor(e){this._delegate=e}static serverTimestamp(){const e=function gU(){return new mR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Zm(e)}static delete(){const e=function pU(){return new kC("deleteField")}();return e._methodName="FieldValue.delete",new Zm(e)}static arrayUnion(...e){const t=function mU(...n){return new N2("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Zm(t)}static arrayRemove(...e){const t=function yU(...n){return new P2("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Zm(t)}static increment(e){const t=function _U(n){return new O2("increment",n)}(e);return t._methodName="FieldValue.increment",new Zm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const DU={Firestore:Ck,GeoPoint:IS,Timestamp:tr,Blob:jC,Transaction:Ik,WriteBatch:bk,DocumentReference:Wa,DocumentSnapshot:HC,Query:no,QueryDocumentSnapshot:$C,QuerySnapshot:TR,CollectionReference:Fv,FieldPath:SR,FieldValue:Zm,setLogLevel:function IU(n){!function $M(n){qc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function SU(n){(function TU(n,e){n.INTERNAL.registerComponent(new Oa.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},DU)))})(n,(e,t)=>new Ck(e,t,new CU)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(Wy.Z);var AR=O(3019),GC=O(3093),AU=O(4552);class MU extends ms.x{constructor(e=1/0,t=1/0,r=AU.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let f=0;for(let y=1;y<r.length&&r[y]<=c;y+=2)f=y;f&&r.splice(0,f+1)}}}var Sk=O(3020);function Ak(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Sk.B)({connector:()=>new MU(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const OS=(0,O(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var mp=O(6232);function Lv(n){return n<=0?()=>mp.E:(0,Yi.e)((e,t)=>{let r=0;e.subscribe((0,gn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function kS(n){return(0,Yi.e)((e,t)=>{let r=!1;e.subscribe((0,gn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Mk(n=RU){return(0,Yi.e)((e,t)=>{let r=!1;e.subscribe((0,gn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function RU(){return new OS}var zC=O(2737);function yp(n,e){const t=arguments.length>=2;return r=>r.pipe(n?To((i,a)=>n(i,a,r)):zC.y,Lv(1),t?kS(e):Mk(()=>new OS))}function xk(n,e){return(0,Yo.m)(e)?(0,Qr.w)(()=>n,e):(0,Qr.w)(()=>n)}var MR=O(5137);O(3182);const RR=new Map,Nk={activated:!1,tokenObservers:[]},FU={initialized:!1,enabled:!1};function Kr(n){return RR.get(n)||Object.assign({},Nk)}function LS(){return FU}const NR="https://content-firebaseappcheck.googleapis.com/v1",BU="exchangeDebugToken",Pk={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class HU{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function $U(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ts=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function PR(n){if(!Kr(n).activated)throw ts.create("use-before-activation",{appName:n.name})}function BS(n,e){return kR.apply(this,arguments)}function kR(){return kR=(0,ve.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const M=yield i.getHeartbeatsHeader();M&&(r["X-Firebase-Client"]=M)}const a={method:"POST",body:JSON.stringify(e),headers:r};let c,f;try{c=yield fetch(n,a)}catch(M){throw ts.create("fetch-network-error",{originalErrorMessage:M?.message})}if(200!==c.status)throw ts.create("fetch-status-error",{httpStatus:c.status});try{f=yield c.json()}catch(M){throw ts.create("fetch-parse-error",{originalErrorMessage:M?.message})}const y=f.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw ts.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const w=1e3*Number(y[1]),D=Date.now();return{token:f.token,expireTimeMillis:D+w,issuedAtTimeMillis:D}}),kR.apply(this,arguments)}function Ok(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${NR}/projects/${t}/apps/${r}:${BU}?key=${i}`,body:{debug_token:e}}}const qU="firebase-app-check-database",KU=1,WC="firebase-app-check-store";let jS=null;function FR(){return FR=(0,ve.Z)(function*(n,e){const r=(yield function Fk(){return jS||(jS=new Promise((n,e)=>{try{const t=indexedDB.open(qU,KU);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ts.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(WC,{keyPath:"compositeKey"})}}catch(t){e(ts.create("storage-open",{originalErrorMessage:t?.message}))}}),jS)}()).transaction(WC,"readwrite"),a=r.objectStore(WC).put({compositeKey:n,value:e});return new Promise((c,f)=>{a.onsuccess=y=>{c()},r.onerror=y=>{var w;f(ts.create("storage-set",{originalErrorMessage:null===(w=y.target.error)||void 0===w?void 0:w.message}))}})}),FR.apply(this,arguments)}const qC=new Vi.Yd("@firebase/app-check");function UR(n,e){return(0,k.hl)()?function YU(n,e){return function Lk(n,e){return FR.apply(this,arguments)}(function Uk(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{qC.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function jR(){return LS().enabled}function HR(){return $R.apply(this,arguments)}function $R(){return $R=(0,ve.Z)(function*(){const n=LS();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),$R.apply(this,arguments)}const nB={error:"UNKNOWN_ERROR"};function rB(n){return k.US.encodeString(JSON.stringify(n),!1)}function HS(n){return GR.apply(this,arguments)}function GR(){return GR=(0,ve.Z)(function*(n,e=!1){const t=n.app;PR(t);const r=Kr(t);let a,i=r.token;if(i&&!Vv(i)&&(r.token=void 0,i=void 0),!i){const y=yield r.cachedTokenPromise;y&&(Vv(y)?i=y:yield UR(t,void 0))}if(!e&&i&&Vv(i))return{token:i.token};let f,c=!1;if(jR()){r.exchangeTokenPromise||(r.exchangeTokenPromise=BS(Ok(t,yield HR()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const y=yield r.exchangeTokenPromise;return yield UR(t,y),r.token=y,{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield Kr(t).exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?qC.warn(y.message):qC.error(y),a=y}return i?a?f=Vv(i)?{token:i.token,internalError:a}:$k(a):(f={token:i.token},r.token=i,yield UR(t,i)):f=$k(a),c&&function Hk(n,e){const t=Kr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,f),f}),GR.apply(this,arguments)}function zR(){return zR=(0,ve.Z)(function*(n){const e=n.app;PR(e);const{provider:t}=Kr(e);if(jR()){const r=yield HR(),{token:i}=yield BS(Ok(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),zR.apply(this,arguments)}function qR(n,e){const t=Kr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function jk(n){const{app:e}=n,t=Kr(e);let r=t.tokenRefresher;r||(r=function iB(n){const{app:e}=n;return new HU((0,ve.Z)(function*(){let r;if(r=Kr(e).token?yield HS(n,!0):yield HS(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Kr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},Pk.RETRIAL_MIN_WAIT,Pk.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Vv(n){return n.expireTimeMillis-Date.now()>0}function $k(n){return{token:rB(nB),error:n}}class sB{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Kr(this.app);for(const t of e)qR(this.app,t.next);return Promise.resolve()}}const Qk="app-check-internal";!function vB(){(0,Qo._registerComponent)(new Oa.wA("app-check",n=>function oB(n,e){return new sB(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Qk).initialize()})),(0,Qo._registerComponent)(new Oa.wA(Qk,n=>function aB(n){return{getToken:e=>HS(n,e),getLimitedUseToken:()=>function Bk(n){return zR.apply(this,arguments)}(n),addTokenListener:e=>function WR(n,e,t,r){const{app:i}=n,a=Kr(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&Vv(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),jk(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>jk(n))}(n,"INTERNAL",e),removeTokenListener:e=>qR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Qo.registerVersion)("@firebase/app-check","0.8.0")}();class GS{constructor(){return(0,Kn.vb)("app-check")}}typeof window<"u"&&window;var bB=O(7142);const JR=new h.OlP("angularfire2.auth.use-emulator"),XR=new h.OlP("angularfire2.auth.settings"),eN=new h.OlP("angularfire2.auth.tenant-id"),tN=new h.OlP("angularfire2.auth.langugage-code"),nN=new h.OlP("angularfire2.auth.use-device-language"),rN=new h.OlP("angularfire.auth.persistence"),iN=(n,e,t,r,i,a,c,f)=>(0,Mr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,a&&y.useDeviceLanguage(),c)for(const[w,D]of Object.entries(c))y.settings[w]=D;return f&&y.setPersistence(f),y},[t,r,i,a,c,f]);let sN=(()=>{class n{constructor(t,r,i,a,c,f,y,w,D,M,P,j){const K=new ms.x,ae=(0,Et.of)(void 0).pipe((0,GC.Q)(c.outsideAngular),(0,Qr.w)(()=>a.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,5967)))),(0,vt.U)(()=>(0,Mr.on)(t,a,r)),(0,vt.U)(ye=>iN(ye,a,f,w,D,M,y,P)),Ak({bufferSize:1,refCount:!1}));if(Fo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Et.of)(null);else{ae.pipe(yp()).subscribe();const Qe=ae.pipe((0,Qr.w)(It=>It.getRedirectResult().then(Bt=>Bt,()=>null)),Kn.iC,Ak({bufferSize:1,refCount:!1})),dt=ae.pipe((0,Qr.w)(It=>new fr.y(Bt=>({unsubscribe:a.runOutsideAngular(()=>It.onAuthStateChanged(tn=>Bt.next(tn),tn=>Bt.error(tn),()=>Bt.complete()))})))),Xe=ae.pipe((0,Qr.w)(It=>new fr.y(Bt=>({unsubscribe:a.runOutsideAngular(()=>It.onIdTokenChanged(tn=>Bt.next(tn),tn=>Bt.error(tn),()=>Bt.complete()))}))));this.authState=Qe.pipe(xk(dt),(0,MR.R)(c.outsideAngular),(0,GC.Q)(c.insideAngular)),this.user=Qe.pipe(xk(Xe),(0,MR.R)(c.outsideAngular),(0,GC.Q)(c.insideAngular)),this.idToken=this.user.pipe((0,Qr.w)(It=>It?(0,_n.D)(It.getIdToken()):(0,Et.of)(null))),this.idTokenResult=this.user.pipe((0,Qr.w)(It=>It?(0,_n.D)(It.getIdTokenResult()):(0,Et.of)(null))),this.credential=(0,AR.T)(Qe,K,this.authState.pipe(To(It=>!It))).pipe((0,vt.U)(It=>It?.user?It:null),(0,MR.R)(c.outsideAngular),(0,GC.Q)(c.insideAngular))}return(0,Mr.pX)(this,ae,a,{spy:{apply:(ye,Qe,dt)=>{(ye.startsWith("signIn")||ye.startsWith("createUser"))&&dt.then(Xe=>K.next(Xe))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Mr.Dh),h.LFG(Mr.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Kn.HU),h.LFG(JR,8),h.LFG(XR,8),h.LFG(eN,8),h.LFG(tN,8),h.LFG(nN,8),h.LFG(rN,8),h.LFG(GS,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Xk(n,e){return function TB(n,e=zy.z){return new fr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function oN(n,e){return Xk(n,e).pipe((0,vt.U)(t=>({payload:t,type:"query"})))}function zS(n,e){return oN(n,e).pipe(wf(void 0),Ef(),(0,vt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,f)=>{const y=i.find(D=>D.doc.ref.isEqual(c.ref)),w=t?.payload.docs.find(D=>D.ref.isEqual(c.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(c.metadata)||!y&&w&&JSON.stringify(w.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:c}})}),a}))}function e1(n,e,t){return zS(n,t).pipe(Ru((r,i)=>function AB(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function MB(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return aN(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return aN(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return aN(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),(0,Cf.x)(),(0,vt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function aN(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function t1(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class n1{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=zS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,vt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(wf(void 0),Ef(),To(([r,i])=>i.length>0||!r),(0,vt.U)(([r,i])=>i),Kn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ru((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=t1(e);return e1(this.query,t,this.afs.schedulers.outsideAngular).pipe(Kn.iC)}valueChanges(e={}){return oN(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Kn.iC)}get(e){return(0,_n.D)(this.query.get(e)).pipe(Kn.iC)}add(e){return this.ref.add(e)}doc(e){return new r1(this.ref.doc(e),this.afs)}}class r1{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=i1(r,t);return new n1(i,a,this.afs)}snapshotChanges(){return function SB(n,e){return Xk(n,e).pipe(wf(void 0),Ef(),(0,vt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Kn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,vt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,_n.D)(this.ref.get(e)).pipe(Kn.iC)}}class xB{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?zS(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),To(t=>t.length>0),Kn.iC):zS(this.query,this.afs.schedulers.outsideAngular).pipe(Kn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ru((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=t1(e);return e1(this.query,t,this.afs.schedulers.outsideAngular).pipe(Kn.iC)}valueChanges(e={}){return oN(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Kn.iC)}get(e){return(0,_n.D)(this.query.get(e)).pipe(Kn.iC)}}const RB=new h.OlP("angularfire2.enableFirestorePersistence"),NB=new h.OlP("angularfire2.firestore.persistenceSettings"),PB=new h.OlP("angularfire2.firestore.settings"),OB=new h.OlP("angularfire2.firestore.use-emulator");function i1(n,e=(t=>t)){return{query:e(n),ref:n}}let kB=(()=>{class n{constructor(t,r,i,a,c,f,y,w,D,M,P,j,K,ae,ye,Qe,dt){this.schedulers=y;const Xe=(0,Mr.on)(t,f,r),It=D;M&&iN(Xe,f,P,K,ae,ye,j,Qe),[this.firestore,this.persistenceEnabled$]=(0,Mr.cc)(`${Xe.name}.firestore`,"AngularFirestore",Xe.name,()=>{const Bt=f.runOutsideAngular(()=>Xe.firestore());if(a&&Bt.settings(a),It&&Bt.useEmulator(...It),i&&!Fo(c)){const tn=()=>{try{return(0,_n.D)(Bt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(rs){return typeof console<"u"&&console.warn(rs),(0,Et.of)(!1)}};return[Bt,f.runOutsideAngular(tn)]}return[Bt,(0,Et.of)(!1)]},[a,It,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=i1(i,r),f=this.schedulers.ngZone.run(()=>a);return new n1(f,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new xB(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new r1(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Mr.Dh),h.LFG(Mr.xv,8),h.LFG(RB,8),h.LFG(PB,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Kn.HU),h.LFG(NB,8),h.LFG(OB,8),h.LFG(sN,8),h.LFG(JR,8),h.LFG(XR,8),h.LFG(eN,8),h.LFG(tN,8),h.LFG(nN,8),h.LFG(rN,8),h.LFG(GS,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),KC=(()=>{class n{constructor(t){this.db=t,this.API_URL="/todos",this.todosRef=this.db.collection(this.API_URL)}getTodos(){return this.todosRef}createTodo(t){this.todosRef.add({title:t.title,completed:t.completed})}deleteTodo(t){this.todosRef.doc(t.id).delete()}updateTodo(t){this.todosRef.doc(t.id).update({title:t.title,completed:t.completed})}completeAllTodo(t){t.forEach(r=>{this.updateTodo(r)})}deleteAllTodo(t){t.forEach(r=>{this.deleteTodo(r)})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(kB))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),uN=(()=>{class n{constructor(){this.subject=new jr.X("")}getLoader(){return this.subject.asObservable()}loaderBehaviour(t){this.subject.next({show:t.show,title:t.title})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function FB(n,e){1&n&&(h.TgZ(0,"div",5),h._UZ(1,"div",6),h.TgZ(2,"span",7),h._uU(3,"skeleton"),h.qZA(),h._UZ(4,"div",6)(5,"div",6),h.qZA())}const LB=function(){return[0,1,2,4]};function VB(n,e){1&n&&(h.TgZ(0,"div",2)(1,"div",3),h.YNc(2,FB,6,0,"div",4),h.qZA()()),2&n&&(h.xp6(2),h.Q6J("ngForOf",h.DdM(1,LB)))}function UB(n,e){1&n&&(h.TgZ(0,"div",8)(1,"div",3),h._UZ(2,"i",9),h.qZA()())}const s1=function(n,e){return{"todo-list--completed":n,"todo-list--disabled":e}};function BB(n,e){if(1&n){const t=h.EpF();h.ynx(0),h.TgZ(1,"div",12)(2,"input",13),h.NdJ("change",function(){h.CHM(t);const i=h.oxw().$implicit,a=h.oxw(2);return h.KtG(a.completeTodo(i))}),h.qZA(),h.TgZ(3,"span",14),h.NdJ("click",function(){h.CHM(t);const i=h.oxw().$implicit,a=h.oxw(2);return h.KtG(a.viewTodo(i))}),h._uU(4),h.qZA(),h.TgZ(5,"i",15),h.NdJ("click",function(){h.CHM(t);const i=h.oxw().$implicit,a=h.oxw(2);return h.KtG(a.editTodo(i))}),h.qZA(),h.TgZ(6,"i",16),h.NdJ("click",function(){h.CHM(t);const i=h.oxw().$implicit,a=h.oxw(2);return h.KtG(a.deleteTodo(i))}),h.qZA()(),h.BQk()}if(2&n){const t=h.oxw().$implicit,r=h.oxw(2);h.xp6(1),h.s9C("id",t.id),h.Q6J("ngClass",h.WLB(5,s1,t.completed,r.disabled||r.finishAll)),h.xp6(1),h.s9C("id",t.id),h.Q6J("checked",t.completed||r.finishAll),h.xp6(2),h.Oqu(t.title)}}function jB(n,e){if(1&n&&(h.ynx(0),h.YNc(1,BB,7,8,"ng-container",11),h.BQk()),2&n){const t=e.$implicit;h.xp6(1),h.Q6J("ngIf",!t.completed)}}function HB(n,e){if(1&n&&(h.TgZ(0,"div",2),h.YNc(1,jB,2,1,"ng-container",10),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngForOf",t.todos)}}function $B(n,e){if(1&n){const t=h.EpF();h.ynx(0),h.TgZ(1,"div",12)(2,"input",13),h.NdJ("change",function(){h.CHM(t);const i=h.oxw().$implicit,a=h.oxw(2);return h.KtG(a.completeTodo(i))}),h.qZA(),h.TgZ(3,"span",14),h.NdJ("click",function(){h.CHM(t);const i=h.oxw().$implicit,a=h.oxw(2);return h.KtG(a.viewTodo(i))}),h._uU(4),h.qZA(),h.TgZ(5,"i",16),h.NdJ("click",function(){h.CHM(t);const i=h.oxw().$implicit,a=h.oxw(2);return h.KtG(a.deleteTodo(i))}),h.qZA()(),h.BQk()}if(2&n){const t=h.oxw().$implicit,r=h.oxw(2);h.xp6(1),h.s9C("id",t.id),h.Q6J("ngClass",h.WLB(5,s1,t.completed,r.disabled||r.finishAll)),h.xp6(1),h.s9C("id",t.id),h.Q6J("checked",t.completed||r.finishAll),h.xp6(2),h.Oqu(t.title)}}function GB(n,e){if(1&n&&(h.ynx(0),h.YNc(1,$B,6,8,"ng-container",11),h.BQk()),2&n){const t=e.$implicit;h.xp6(1),h.Q6J("ngIf",t.completed)}}function zB(n,e){if(1&n&&(h.TgZ(0,"div",2),h.YNc(1,GB,2,1,"ng-container",10),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngForOf",t.todos)}}let WB=(()=>{class n{constructor(t,r,i,a){this.todoService=t,this.alertService=r,this.modalService=i,this.loaderService=a,this.loading=!1,this.disabled=!1,this.todoItemEvent=new h.vpe,this.activeTab="",this.finishAll=!1,this.todoViewEvent=new h.vpe}ngOnInit(){this.getTodos()}getTodos(){this.loaderService.loaderBehaviour({show:!0,title:"Loading..."}),this.loading=!0,this.todoService.getTodos().snapshotChanges().pipe((0,vt.U)(t=>t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()})))).subscribe(t=>{this.todos=t,this.loading=!1,this.loaderService.loaderBehaviour({show:!1,title:""})})}deleteTodo(t){confirm("are you sure want to delete")&&(this.todoService.deleteTodo(t),this.alertService.showAlert("Todo deleted successfully","danger"))}viewTodo(t){this.todoItemEvent.emit({mode:"viewMode",todo:t})}editTodo(t){this.modalService.modalState(!0,"Edit Todo","Update"),this.todoItemEvent.emit({mode:"editMode",todo:t})}completeTodo(t){let r=document.getElementById(t.id);r.classList.add(t.completed?"out":"in");let i={id:t.id,title:t.title,completed:!t.completed};this.disabled=!0,this.todoViewEvent.emit({mode:"checkMode",todo:i}),setTimeout(()=>{r.classList.remove("in"),r.classList.remove("out"),this.todoService.updateTodo(i),this.todoItemEvent.emit({mode:"completedMode",todo:null}),this.disabled=!1},i.completed?500:300)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(KC),h.Y36(ai),h.Y36(ys),h.Y36(uN))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-todo-list"]],inputs:{activeTab:"activeTab",finishAll:"finishAll"},outputs:{todoItemEvent:"todoItemEvent",todoViewEvent:"todoViewEvent"},decls:4,vars:4,consts:[["class","card",4,"ngIf"],["class","card card--empty",4,"ngIf"],[1,"card"],[1,"card-body"],["class","todo-list skeleton",4,"ngFor","ngForOf"],[1,"todo-list","skeleton"],[1,"sk-aim",2,"width","20px","height","20px"],[1,"sk-aim","sk-t"],[1,"card","card--empty"],[1,"fas","fa-duotone","fa-trash"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"todo-list",3,"id","ngClass"],["type","checkbox",3,"id","checked","change"],[3,"click"],[1,"fas","fa-edit",3,"click"],[1,"fas","fa-trash",3,"click"]],template:function(t,r){1&t&&(h.YNc(0,VB,3,2,"div",0),h.YNc(1,UB,3,0,"div",1),h.YNc(2,HB,2,1,"div",0),h.YNc(3,zB,2,1,"div",0)),2&t&&(h.Q6J("ngIf",r.loading),h.xp6(1),h.Q6J("ngIf",!(null!=r.todos&&r.todos.length||r.loading)),h.xp6(1),h.Q6J("ngIf","All"==r.activeTab&&!r.loading&&(null==r.todos?null:r.todos.length)),h.xp6(1),h.Q6J("ngIf","Completed"==r.activeTab&&!r.loading&&(null==r.todos?null:r.todos.length)))},dependencies:[br,la,us],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 0 1.25rem #1f2d3d05;margin-bottom:20px;border:0!important;border-radius:10px;min-height:300px;transition:all .3s;overflow:hidden;animation:_ngcontent-%COMP%_show .5s forwards}.card-body[_ngcontent-%COMP%]{padding:0}.card--empty[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-bottom:0}.card--empty[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:100px;position:absolute;z-index:1;left:50%;top:50%;transform:translate(-50%,-50%);color:#7d7d8326}.todo-list[_ngcontent-%COMP%]{padding:16px 25px;color:#7d7d83;display:flex;align-items:center;gap:1rem;border-bottom:1px solid #e8e8e8;cursor:pointer;transition:all .3s}.todo-list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}.todo-list[_ngcontent-%COMP%]:last-child{border:0}.todo-list--completed[_ngcontent-%COMP%]{opacity:.3}.todo-list--completed[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-decoration:line-through}.todo-list--disabled[_ngcontent-%COMP%]{opacity:.7;pointer-events:none}.todo-list.in[_ngcontent-%COMP%]{background:rgba(232,232,232,.35);pointer-events:none}.todo-list.out[_ngcontent-%COMP%]{opacity:1}.todo-list.out[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-decoration:none}.todo-list[_ngcontent-%COMP%]:hover{background:rgba(232,232,232,.35);transition:all .3s}input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px}.card-loading[_ngcontent-%COMP%]{display:flex;min-height:300px}@keyframes _ngcontent-%COMP%_show{0%{transform:scale(.95);opacity:0}to{transform:scale(1);opacity:1}}"]}),n})();function qB(n,e){1&n&&(h.ynx(0),h.TgZ(1,"div",2),h._UZ(2,"img",3),h.qZA(),h.BQk())}function KB(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",8),h.NdJ("click",function(){h.CHM(t);const i=h.oxw(2);return h.KtG(i.editTodo(i.todo))}),h._uU(1,"Edit"),h.qZA()}}const ZB=function(n){return{"card-body--completed":n}};function YB(n,e){if(1&n){const t=h.EpF();h.ynx(0),h.TgZ(1,"div",4)(2,"h3"),h._uU(3),h.qZA()(),h.TgZ(4,"div",5),h.YNc(5,KB,2,0,"button",6),h.TgZ(6,"button",7),h.NdJ("click",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.deleteTodo(i.todo))}),h._uU(7,"Delete"),h.qZA()(),h.BQk()}if(2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngClass",h.VKq(3,ZB,t.todo.completed)),h.xp6(2),h.Oqu(null==t.todo?null:t.todo.title),h.xp6(2),h.Q6J("ngIf","Completed"!==t.activeTab)}}let QB=(()=>{class n{constructor(t,r,i){this.service=t,this.alertService=r,this.modalService=i,this.todoViewEvent=new h.vpe,this.activeTab=""}ngOnInit(){}editTodo(t){this.modalService.modalState(!0,"Edit Todo","Update"),this.todoViewEvent.emit({mode:"editMode",todo:t})}deleteTodo(t){confirm("are you sure want to delete")&&(this.service.deleteTodo(t),this.alertService.showAlert("Todo deleted successfully","danger"),this.todo=null)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(KC),h.Y36(ai),h.Y36(ys))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-todo-view"]],inputs:{todo:"todo",viewMode:"viewMode",activeTab:"activeTab"},outputs:{todoViewEvent:"todoViewEvent"},decls:3,vars:2,consts:[[1,"card"],[4,"ngIf"],[1,"card-body","card__empty"],["src","./assets/img/empty.jpg","alt","empty","width","200"],[1,"card-body",3,"ngClass"],[1,"card-footer"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.YNc(1,qB,3,0,"ng-container",1),h.YNc(2,YB,8,5,"ng-container",1),h.qZA()),2&t&&(h.xp6(1),h.Q6J("ngIf",!r.todo),h.xp6(1),h.Q6J("ngIf",r.todo))},dependencies:[br,us],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 0 1.25rem #1f2d3d09;border:0!important;border-radius:10px;transition:background .2s ease-in-out;height:max-content;min-height:300px}.card-body[_ngcontent-%COMP%]{padding:25px}.card-body--completed[_ngcontent-%COMP%]{opacity:.3;text-decoration:line-through}.card__empty[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.card-footer[_ngcontent-%COMP%]{display:flex;gap:1rem;background:#fff;justify-content:space-between}.btn[_ngcontent-%COMP%]{font-weight:700;padding:9px 24px;border-radius:7px;font-size:14px;min-width:150px;flex:1}"]}),n})();function JB(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"form",5),h.NdJ("ngSubmit",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.onSubmit(i.todoForm))}),h.TgZ(4,"div",6)(5,"h5",7),h._uU(6),h.qZA(),h.TgZ(7,"button",8),h.NdJ("click",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.modalClose())}),h._UZ(8,"i",9),h.qZA()(),h.TgZ(9,"div",10),h._UZ(10,"input",11),h.qZA(),h.TgZ(11,"div",12)(12,"button",13),h._uU(13,"Cancel"),h.qZA(),h.TgZ(14,"button",14),h._uU(15),h.qZA()()()()()()}if(2&n){const t=h.oxw();h.xp6(3),h.Q6J("formGroup",t.todoForm),h.xp6(3),h.Oqu(t.title),h.xp6(8),h.Q6J("disabled",t.todoForm.invalid),h.xp6(1),h.Oqu(t.action)}}function XB(n,e){1&n&&h._UZ(0,"div",15)}let ej=(()=>{class n{constructor(t,r,i,a){this.modalService=t,this.fb=r,this.todoSerive=i,this.alertService=a,this.show=!1,this.action="",this.title="",this.editMode=!1,this.todoUpdatedEvent=new h.vpe,this.todoClosedEvent=new h.vpe,this.customValidateTitle=()=>this.editMode&&this.todoForm.get("todoText")?.value==this.todo.title?{invalidTitle:!0}:null,this.todoForm=this.fb.group({todoText:["",[td.required,td.minLength(2)]]})}ngOnInit(){this.modalService.getModal().subscribe(t=>{this.show=t.show,this.title=t.title,this.action=t.action})}onSubmit(t){this.editMode?this.updateTodo():this.addTodo()}modalClose(){this.todoForm.reset(),this.modalService.modalState(!1,"",""),this.editMode=!1,this.todoClosedEvent.emit({mode:"closeMode"})}addTodo(){this.todoSerive.createTodo({title:this.todoForm.value.todoText,completed:!1}),this.modalClose(),this.alertService.showAlert("Todo added successfully","success")}updateTodo(){let t={id:this.todo.id,title:this.todoForm.value.todoText,completed:this.todo.completed};this.todoSerive.updateTodo(t),this.modalClose(),this.alertService.showAlert("Todo updated successfully","success"),this.todoUpdatedEvent.emit({mode:"updateMode",todo:t})}ngOnChanges(t){this.editMode&&(this.todoForm=this.fb.group({todoText:[this.todo.title,[td.required,td.minLength(2),this.customValidateTitle]]}))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ys),h.Y36(fg),h.Y36(KC),h.Y36(ai))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-todo-modal"]],inputs:{todo:"todo",editMode:"editMode"},outputs:{todoUpdatedEvent:"todoUpdatedEvent",todoClosedEvent:"todoClosedEvent"},features:[h.TTD],decls:2,vars:2,consts:[["class","modal show",4,"ngIf"],["class"," modal-backdrop fade show",4,"ngIf"],[1,"modal","show"],[1,"modal-dialog"],[1,"modal-content"],[3,"formGroup","ngSubmit"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close",3,"click"],[1,"fas","fa-close"],[1,"modal-body"],["formControlName","todoText","type","text","id","todoText","placeholder","Add Todo",1,"todo-input"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"modal-backdrop","fade","show"]],template:function(t,r){1&t&&(h.YNc(0,JB,16,4,"div",0),h.YNc(1,XB,1,0,"div",1)),2&t&&(h.Q6J("ngIf",r.show),h.xp6(1),h.Q6J("ngIf",r.show))},dependencies:[us,xy,Hs,sd,Hr,Zo,yd],styles:[".btn[_ngcontent-%COMP%]{font-weight:700;padding:9px 24px;border-radius:7px;font-size:14px}.todo-input[_ngcontent-%COMP%]{width:100%;padding:12px 25px;height:auto;border-radius:25px;border:1px solid #e8e8e8;font-size:12px;font-weight:700;color:#5c6662;outline:0}.modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{z-index:1050;margin-top:5rem}.modal[_ngcontent-%COMP%]   .modal-title[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:#5c6662;line-height:21px}.modal[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{font-size:18px;outline:0;border:0;background:0;width:30px;height:30px}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{border:0;box-shadow:0 3px 10px #3e55780d;border-radius:10px}.modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{border-bottom:0;padding:25px 25px 20px}.modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:0 25px}.modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{padding:20px 25px 25px;border:0}.modal.show[_ngcontent-%COMP%]{display:block}"]}),n})();var WS=O(7394);const tj=function(n,e,t){return{"alert-success":n,"alert-danger":e,"alert-secondary":t}};function nj(n,e){if(1&n){const t=h.EpF();h.ynx(0),h.TgZ(1,"div",3)(2,"span"),h._uU(3),h.qZA(),h.TgZ(4,"button",4),h.NdJ("click",function(){const a=h.CHM(t).index,c=h.oxw(2);return h.KtG(c.closeAlert(a))}),h.qZA()(),h.BQk()}if(2&n){const t=e.$implicit;h.xp6(1),h.Q6J("ngClass",h.kEZ(2,tj,"success"===t.type,"danger"===t.type,"secondary"===t.type)),h.xp6(2),h.Oqu(t.message)}}function rj(n,e){if(1&n&&(h.TgZ(0,"div",1),h.YNc(1,nj,5,6,"ng-container",2),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngForOf",t.alerts)}}let ij=(()=>{class n{constructor(t){this.alertService=t,this.show=!1,this.message="",this.alerts=[],this.subscription=new WS.w0}ngOnInit(){this.subscription=this.alertService.getAlert().subscribe(t=>{t&&this.alerts.push({message:t.message,type:t.type}),this.autoClose()})}closeAlert(t){this.alerts.splice(t,1)}autoClose(){setTimeout(()=>{this.alerts.pop()},2e3)}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ai))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-todo-alert"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[4,"ngFor","ngForOf"],[1,"alert",3,"ngClass"],["type","button",1,"btn-close",3,"click"]],template:function(t,r){1&t&&h.YNc(0,rj,2,1,"div",0),2&t&&h.Q6J("ngIf",r.alerts.length)},dependencies:[br,la,us],styles:[".container[_ngcontent-%COMP%]{position:absolute;top:1rem;display:flex;flex-direction:column;gap:1rem;left:50%;transform:translate(-50%);padding:0;margin:0;width:max-content;overflow:hidden;z-index:1030}.alert[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;gap:10px;z-index:1060;margin-bottom:1rem;min-width:360px;font-weight:600;animation:_ngcontent-%COMP%_fadein .3s}span[_ngcontent-%COMP%]{flex:1}button[_ngcontent-%COMP%]{box-shadow:none!important}@keyframes _ngcontent-%COMP%_fadein{0%{margin-top:2rem;opacity:0}to{margin-top:0;opacity:1}}"]}),n})();function sj(n,e){if(1&n&&(h.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"strong",4),h._uU(4),h.qZA()(),h.TgZ(5,"div",5)(6,"div",6),h._UZ(7,"div",7),h.qZA()()()()),2&n){const t=h.oxw();h.xp6(4),h.Oqu(t.title)}}let oj=(()=>{class n{constructor(t){this.loaderService=t,this.subscription=new WS.w0,this.show=!1,this.title=""}ngOnInit(){this.subscription=this.loaderService.getLoader().subscribe(t=>{this.show=t.show,this.title=t.title})}ngOnDestroy(){this.subscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(uN))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-loader"]],decls:1,vars:1,consts:[["class","modal",4,"ngIf"],[1,"modal"],[1,"toast","show"],[1,"toast-header"],[1,"me-auto"],[1,"toast-body"],[1,"progress"],[1,"progress-bar","progress-bar-striped","progress-bar-animated","bg-success",2,"width","100%"]],template:function(t,r){1&t&&h.YNc(0,sj,8,1,"div",0),2&t&&h.Q6J("ngIf",r.show)},dependencies:[us],styles:[".modal[_ngcontent-%COMP%]{display:block;background:rgba(0,0,0,.4)}.toast[_ngcontent-%COMP%]{margin:1rem auto;min-width:500px}"]}),n})();const aj=function(n){return{active:n}};function uj(n,e){if(1&n){const t=h.EpF();h.ynx(0),h.TgZ(1,"div",15),h.NdJ("click",function(){const a=h.CHM(t).$implicit,c=h.oxw();return h.KtG(c.activeTabFun(a))}),h._UZ(2,"i"),h._uU(3),h.qZA(),h.BQk()}if(2&n){const t=e.$implicit,r=h.oxw();h.xp6(1),h.Q6J("ngClass",h.VKq(5,aj,r.activeTab==t.text)),h.xp6(1),h.Tol(t.icon),h.xp6(1),h.hij("",t.text," ")}}let o1=(()=>{class n{constructor(t,r){this.modalService=t,this.todoService=r,this.editMode=!1,this.activeTab="All",this.finishAll=!1,this.hasTodoItem=!1,this.tabs=[{text:"All",icon:"fas fa-bars"},{text:"Completed",icon:"fas fa-check"}]}ngOnInit(){this.todoService.getTodos().snapshotChanges().subscribe(t=>{this.hasTodoItem=!!t.length})}todoItemEvent({mode:t,todo:r}){"editMode"==t&&(this.editTodo=r,this.editMode=!0),"viewMode"==t&&(this.viewTodo=r,this.editMode=!1),this.viewTodo&&"updateMode"==t&&(this.viewTodo=r),"closeMode"==t&&(this.editMode=!1),"checkMode"==t&&(this.viewTodo=r),"completedMode"==t&&(this.viewTodo=r)}addTodo(){this.modalService.modalState(!0,"Add Todo","Add")}activeTabFun(t){this.activeTab=t.text,this.editMode=!1,this.editTodo=null,this.viewTodo=null}completedProcess(t){if(t){let i=t.filter(a=>!a.completed).map(a=>(a.completed=!0,a));this.todoService.completeAllTodo(i),this.finishAll=!1}}completeAll(){this.finishAll=!0,this.todoService.getTodos().snapshotChanges().pipe((0,vt.U)(t=>t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()})))).subscribe(t=>{setTimeout(()=>{this.completedProcess(t),this.finishAll=!1},1e3)})}DeleteAll(){this.finishAll=!0,this.todoService.getTodos().snapshotChanges().pipe((0,vt.U)(t=>t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()})))).subscribe(t=>{setTimeout(()=>{this.todoService.deleteAllTodo(t),this.finishAll=!1},1e3)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ys),h.Y36(KC))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:21,vars:9,consts:[[1,"page-layout"],[1,"card","card--action"],[1,"card-body"],[1,"btn","btn-success","btn-block",3,"click"],[1,"todo-action"],[4,"ngFor","ngForOf"],[1,"card","card--header-action"],[1,"action-header"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fas","fa-check"],[1,"btn","btn-danger",3,"disabled","click"],[1,"fas","fa-trash"],[3,"finishAll","activeTab","todoViewEvent","todoItemEvent"],[3,"todo","activeTab","todoViewEvent"],[3,"todo","editMode","todoUpdatedEvent","todoClosedEvent"],[3,"ngClass","click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),h.NdJ("click",function(){return r.addTodo()}),h._uU(4," Create New Task "),h.qZA(),h.TgZ(5,"div",4),h.YNc(6,uj,4,7,"ng-container",5),h.qZA()()(),h.TgZ(7,"div",6)(8,"div",2)(9,"div",7)(10,"button",8),h.NdJ("click",function(){return r.completeAll()}),h._UZ(11,"i",9),h._uU(12,"Complete All "),h.qZA(),h.TgZ(13,"button",10),h.NdJ("click",function(){return r.DeleteAll()}),h._UZ(14,"i",11),h._uU(15,"Delete All "),h.qZA()()()(),h.TgZ(16,"app-todo-list",12),h.NdJ("todoViewEvent",function(a){return r.todoItemEvent(a)})("todoItemEvent",function(a){return r.todoItemEvent(a)}),h.qZA(),h.TgZ(17,"app-todo-view",13),h.NdJ("todoViewEvent",function(a){return r.todoItemEvent(a)}),h.qZA()(),h.TgZ(18,"app-todo-modal",14),h.NdJ("todoUpdatedEvent",function(a){return r.todoItemEvent(a)})("todoClosedEvent",function(a){return r.todoItemEvent(a)}),h.qZA(),h._UZ(19,"app-todo-alert")(20,"app-loader")),2&t&&(h.xp6(6),h.Q6J("ngForOf",r.tabs),h.xp6(4),h.Q6J("disabled",!r.hasTodoItem),h.xp6(3),h.Q6J("disabled",!r.hasTodoItem),h.xp6(3),h.Q6J("finishAll",r.finishAll)("activeTab",r.activeTab),h.xp6(1),h.Q6J("todo",r.viewTodo)("activeTab",r.activeTab),h.xp6(1),h.Q6J("todo",r.editTodo)("editMode",r.editMode))},dependencies:[br,la,WB,QB,ej,ij,oj],styles:[".page-layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:max-content;width:100vw;height:100vh;padding:3rem 4rem;background:#f8faf9;grid-template-columns:repeat(12,1fr);grid-gap:2rem}.card--action[_ngcontent-%COMP%]{grid-row:1/span 2;grid-column:1/span 3}.card--header-action[_ngcontent-%COMP%]{grid-row:1/span 1;grid-column:4/span 9}app-todo-list[_ngcontent-%COMP%]{grid-row:2/span 1;grid-column:4/span 5;overflow:hidden}app-todo-view[_ngcontent-%COMP%]{grid-column:9/span 4;grid-row:2/span 1;overflow:hidden}.card[_ngcontent-%COMP%]{box-shadow:0 0 1.25rem #1f2d3d09;border:0!important;border-radius:10px;transition:background .2s ease-in-out;height:max-content}.card-body[_ngcontent-%COMP%]{padding:25px}.todo-action[_ngcontent-%COMP%]{margin:2rem 0 0}.todo-action[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center;padding:9px 20px;color:#7d7d83cc;font-weight:700;font-size:13px;border-radius:10px;transition:all .2s ease-in-out;margin-bottom:3px;overflow:hidden;line-height:23px;cursor:pointer}.todo-action[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover, .todo-action[_ngcontent-%COMP%]   div.active[_ngcontent-%COMP%]{background:rgba(40,167,69,.05);color:#5fd0a5}.btn[_ngcontent-%COMP%]{font-weight:700;padding:9px 24px;border-radius:7px;font-size:14px}.action-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.action-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:1rem}.completed-all[_ngcontent-%COMP%]{opacity:.3;pointer-events:none;transition:all .3s}"]}),n})();var lj=O(7103);function cN(...n){const e=(0,Di.yG)(n),t=(0,Di.jO)(n),{args:r,keys:i}=Ec(n);if(0===r.length)return(0,_n.D)([],e);const a=new fr.y(function dj(n,e,t=zC.y){return r=>{a1(e,()=>{const{length:i}=n,a=new Array(i);let c=i,f=i;for(let y=0;y<i;y++)a1(e,()=>{const w=(0,_n.D)(n[y],e);let D=!1;w.subscribe((0,gn.x)(r,M=>{a[y]=M,D||(D=!0,f--),f||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>Jl(i,c):zC.y));return t?a.pipe(go(t)):a}function a1(n,e,t){n?(0,lj.f)(t,n,e):e()}function u1(n){return new fr.y(e=>{(0,js.Xf)(n()).subscribe(e)})}var hj=O(8407);function ZC(n,e){const t=(0,Yo.m)(n)?n:()=>n,r=i=>i.error(t());return new fr.y(e?i=>e.schedule(r,0,i):r)}function lN(){return(0,Yi.e)((n,e)=>{let t=null;n._refCount++;const r=(0,gn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class c1 extends fr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Yi.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new WS.w0;const t=this.getSubject();e.add(this.source.subscribe((0,gn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=WS.w0.EMPTY)}return e}refCount(){return lN()(this)}}var ro=O(9397);function Ym(n){return(0,Yi.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,gn.x)(t,void 0,void 0,c=>{a=(0,js.Xf)(n(c,Ym(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function dN(n){return n<=0?()=>mp.E:(0,Yi.e)((e,t)=>{let r=[];e.subscribe((0,gn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}const Kt="primary",YC=Symbol("RouteTitle");class gj{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Uv(n){return new gj(n)}function mj(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],f=n[a];if(c.startsWith(":"))i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function pl(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!l1(n[i],e[i]))return!1;return!0}function l1(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function d1(n){return n.length>0?n[n.length-1]:null}function _p(n){return function cj(n){return!!n&&(n instanceof fr.y||(0,Yo.m)(n.lift)&&(0,Yo.m)(n.subscribe))}(n)?n:(0,h.QGY)(n)?(0,_n.D)(Promise.resolve(n)):(0,Et.of)(n)}const _j={exact:function p1(n,e,t){if(!Qm(n.segments,e.segments)||!qS(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!p1(n.children[r],e.children[r],t))return!1;return!0},subset:g1},h1={exact:function vj(n,e){return pl(n,e)},subset:function wj(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>l1(n[t],e[t]))},ignored:()=>!0};function f1(n,e,t){return _j[t.paths](n.root,e.root,t.matrixParams)&&h1[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function g1(n,e,t){return m1(n,e,e.segments,t)}function m1(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Qm(i,t)||e.hasChildren()||!qS(i,t,r))}if(n.segments.length===t.length){if(!Qm(n.segments,t)||!qS(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!g1(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Qm(n.segments,i)&&qS(n.segments,i,r)&&n.children[Kt])&&m1(n.children[Kt],e,a,r)}}function qS(n,e,t){return e.every((r,i)=>h1[t](n[i].parameters,r.parameters))}class Bv{constructor(e=new Ln([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Uv(this.queryParams)),this._queryParamMap}toString(){return Ij.serialize(this)}}class Ln{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return KS(this)}}class QC{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Uv(this.parameters)),this._parameterMap}toString(){return v1(this)}}function Qm(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let JC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new hN},providedIn:"root"}),n})();class hN{parse(e){const t=new Oj(e);return new Bv(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${XC(e.root,!0)}`,r=function Tj(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ZS(t)}=${ZS(i)}`).join("&"):`${ZS(t)}=${ZS(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function bj(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const Ij=new hN;function KS(n){return n.segments.map(e=>v1(e)).join("/")}function XC(n,e){if(!n.hasChildren())return KS(n);if(e){const t=n.children[Kt]?XC(n.children[Kt],!1):"",r=[];return Object.entries(n.children).forEach(([i,a])=>{i!==Kt&&r.push(`${i}:${XC(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Cj(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Kt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Kt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Kt?[XC(n.children[Kt],!1)]:[`${i}:${XC(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Kt]?`${KS(n)}/${t[0]}`:`${KS(n)}/(${t.join("//")})`}}function y1(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ZS(n){return y1(n).replace(/%3B/gi,";")}function fN(n){return y1(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function YS(n){return decodeURIComponent(n)}function _1(n){return YS(n.replace(/\+/g,"%20"))}function v1(n){return`${fN(n.path)}${function Dj(n){return Object.keys(n).map(e=>`;${fN(e)}=${fN(n[e])}`).join("")}(n.parameters)}`}const Sj=/^[^\/()?;#]+/;function pN(n){const e=n.match(Sj);return e?e[0]:""}const Aj=/^[^\/()?;=#]+/,xj=/^[^=?&#]+/,Nj=/^[^&#]+/;class Oj{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ln([],{}):new Ln([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Kt]=new Ln(e,t)),r}parseSegment(){const e=pN(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,!1);return this.capture(e),new QC(YS(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Mj(n){const e=n.match(Aj);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=pN(this.remaining);i&&(r=i,this.capture(r))}e[YS(t)]=YS(r)}parseQueryParam(e){const t=function Rj(n){const e=n.match(xj);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Pj(n){const e=n.match(Nj);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=_1(t),a=_1(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=pN(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new h.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Kt);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[Kt]:new Ln([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,!1)}}function w1(n){return n.segments.length>0?new Ln([],{[Kt]:n}):n}function E1(n){const e={};for(const r of Object.keys(n.children)){const a=E1(n.children[r]);if(r===Kt&&0===a.segments.length&&a.hasChildren())for(const[c,f]of Object.entries(a.children))e[c]=f;else(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function kj(n){if(1===n.numberOfChildren&&n.children[Kt]){const e=n.children[Kt];return new Ln(n.segments.concat(e.segments),e.children)}return n}(new Ln(n.segments,e))}function Jm(n){return n instanceof Bv}function C1(n){let e;const i=w1(function t(a){const c={};for(const y of a.children){const w=t(y);c[y.outlet]=w}const f=new Ln(a.url,c);return a===n&&(e=f),f}(n.root));return e??i}function I1(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return gN(i,i,i,t,r);const a=function Lj(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new D1(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return Object.entries(a.outlets).forEach(([y,w])=>{f[y]="string"==typeof w?w.split("/"):w}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((f,y)=>{0==y&&"."===f||(0==y&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new D1(t,e,r)}(e);if(a.toRoot())return gN(i,i,new Ln([],{}),t,r);const c=function Vj(n,e,t){if(n.isAbsolute)return new JS(e,!0,0);if(!t)return new JS(e,!1,NaN);if(null===t.parent)return new JS(t,!0,0);const r=QS(n.commands[0])?0:1;return function Uj(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new h.vHH(4005,!1);i=r.segments.length}return new JS(r,!1,i-a)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(a,i,n),f=c.processChildren?tI(c.segmentGroup,c.index,a.commands):T1(c.segmentGroup,c.index,a.commands);return gN(i,c.segmentGroup,f,t,r)}function QS(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function eI(n){return"object"==typeof n&&null!=n&&n.outlets}function gN(n,e,t,r,i){let c,a={};r&&Object.entries(r).forEach(([y,w])=>{a[y]=Array.isArray(w)?w.map(D=>`${D}`):`${w}`}),c=n===e?t:b1(n,e,t);const f=w1(E1(c));return new Bv(f,a,i)}function b1(n,e,t){const r={};return Object.entries(n.children).forEach(([i,a])=>{r[i]=a===e?t:b1(a,e,t)}),new Ln(n.segments,r)}class D1{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&QS(r[0]))throw new h.vHH(4003,!1);const i=r.find(eI);if(i&&i!==d1(r))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class JS{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function T1(n,e,t){if(n||(n=new Ln([],{})),0===n.segments.length&&n.hasChildren())return tI(n,e,t);const r=function jj(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],f=t[r];if(eI(f))break;const y=`${f}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&w&&"object"==typeof w&&void 0===w.outlets){if(!A1(y,w,c))return a;r+=2}else{if(!A1(y,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Ln(n.segments.slice(0,r.pathIndex),{});return a.children[Kt]=new Ln(n.segments.slice(r.pathIndex),n.children),tI(a,0,i)}return r.match&&0===i.length?new Ln(n.segments,{}):r.match&&!n.hasChildren()?mN(n,e,t):r.match?tI(n,0,i):mN(n,e,t)}function tI(n,e,t){if(0===t.length)return new Ln(n.segments,{});{const r=function Bj(n){return eI(n[0])?n[0].outlets:{[Kt]:n}}(t),i={};if(!r[Kt]&&n.children[Kt]&&1===n.numberOfChildren&&0===n.children[Kt].segments.length){const a=tI(n.children[Kt],e,t);return new Ln(n.segments,a.children)}return Object.entries(r).forEach(([a,c])=>{"string"==typeof c&&(c=[c]),null!==c&&(i[a]=T1(n.children[a],e,c))}),Object.entries(n.children).forEach(([a,c])=>{void 0===r[a]&&(i[a]=c)}),new Ln(n.segments,i)}}function mN(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(eI(a)){const y=Hj(a.outlets);return new Ln(r,y)}if(0===i&&QS(t[0])){r.push(new QC(n.segments[e].path,S1(t[0]))),i++;continue}const c=eI(a)?a.outlets[Kt]:`${a}`,f=i<t.length-1?t[i+1]:null;c&&f&&QS(f)?(r.push(new QC(c,S1(f))),i+=2):(r.push(new QC(c,{})),i++)}return new Ln(r,{})}function Hj(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=mN(new Ln([],{}),0,r))}),e}function S1(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function A1(n,e,t){return n==t.path&&pl(e,t.parameters)}const nI="imperative";class gl{constructor(e,t){this.id=e,this.url=t}}class yN extends gl{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Xm extends gl{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class XS extends gl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class rI extends gl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class _N extends gl{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class $j extends gl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gj extends gl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zj extends gl{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Wj extends gl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qj extends gl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kj{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Zj{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Yj{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qj{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jj{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xj{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class M1{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class eH{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new iI,this.attachRef=null}}let iI=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new eH,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class x1{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=vN(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=vN(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=wN(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return wN(e,this._root).map(t=>t.value)}}function vN(n,e){if(n===e.value)return e;for(const t of e.children){const r=vN(n,t);if(r)return r}return null}function wN(n,e){if(n===e.value)return[e];for(const t of e.children){const r=wN(n,t);if(r.length)return r.unshift(e),r}return[]}class dh{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function jv(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class R1 extends x1{constructor(e,t){super(e),this.snapshot=t,EN(this,e)}toString(){return this.snapshot.toString()}}function N1(n,e){const t=function tH(n,e){const c=new eA([],{},{},"",{},Kt,e,null,{});return new O1("",new dh(c,[]))}(0,e),r=new jr.X([new QC("",{})]),i=new jr.X({}),a=new jr.X({}),c=new jr.X({}),f=new jr.X(""),y=new Hv(r,i,c,f,a,Kt,e,t.root);return y.snapshot=t.root,new R1(new dh(y,[]),t)}class Hv{constructor(e,t,r,i,a,c,f,y){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=a,this.outlet=c,this.component=f,this._futureSnapshot=y,this.title=this.dataSubject?.pipe((0,vt.U)(w=>w[YC]))??(0,Et.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,vt.U)(e=>Uv(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,vt.U)(e=>Uv(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function P1(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function nH(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class eA{get title(){return this.data?.[YC]}constructor(e,t,r,i,a,c,f,y,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=f,this.routeConfig=y,this._resolve=w}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Uv(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Uv(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class O1 extends x1{constructor(e,t){super(t),this.url=e,EN(this,t)}toString(){return k1(this._root)}}function EN(n,e){e.value._routerState=n,e.children.forEach(t=>EN(n,t))}function k1(n){const e=n.children.length>0?` { ${n.children.map(k1).join(", ")} } `:"";return`${n.value}${e}`}function CN(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,pl(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),pl(e.params,t.params)||n.paramsSubject.next(t.params),function yj(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!pl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),pl(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function IN(n,e){const t=pl(n.params,e.params)&&function Ej(n,e){return Qm(n,e)&&n.every((t,r)=>pl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||IN(n.parent,e.parent))}let F1=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Kt,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.parentContexts=(0,h.f3M)(iI),this.location=(0,h.f3M)(h.s_b),this.changeDetector=(0,h.f3M)(h.sBO),this.environmentInjector=(0,h.f3M)(h.lqb),this.inputBinder=(0,h.f3M)(tA,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,!1);this._activatedRoute=t;const i=this.location,c=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,y=new rH(t,f,i.injector);this.activated=i.createComponent(c,{index:i.length,injector:y,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[h.TTD]}),n})();class rH{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Hv?this.route:e===iI?this.childContexts:this.parent.get(e,t)}}const tA=new h.OlP("");let L1=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=cN([r.queryParams,r.params,r.data]).pipe((0,Qr.w)(([a,c,f],y)=>(f={...a,...c,...f},0===y?(0,Et.of)(f):Promise.resolve(f)))).subscribe(a=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const c=(0,h.qFp)(r.component);if(c)for(const{templateName:f}of c.inputs)t.activatedComponentRef.setInput(f,a[f]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function sI(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function sH(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return sI(n,r,i);return sI(n,r)})}(n,e,t);return new dh(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(f=>sI(n,f)),c}}const r=function oH(n){return new Hv(new jr.X(n.url),new jr.X(n.params),new jr.X(n.queryParams),new jr.X(n.fragment),new jr.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>sI(n,a));return new dh(r,i)}}const bN="ngNavigationCancelingError";function V1(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Jm(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=U1(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function U1(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[bN]=!0,r.cancellationCode=e,t&&(r.url=t),r}function B1(n){return j1(n)&&Jm(n.url)}function j1(n){return n&&n[bN]}let H1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[F1],encapsulation:2}),n})();function DN(n){const e=n.children&&n.children.map(DN),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Kt&&(t.component=H1),t}function tc(n){return n.outlet||Kt}function oI(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class fH{constructor(e,t,r,i,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=a}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),CN(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=jv(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),Object.values(i).forEach(a=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=jv(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=jv(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=jv(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Xj(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Qj(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(CN(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),CN(f.route.value),this.activateChildRoutes(e,null,c.children)}else{const f=oI(i.snapshot);c.attachRef=null,c.route=i,c.injector=f,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class $1{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class nA{constructor(e,t){this.component=e,this.route=t}}function pH(n,e,t){const r=n._root;return aI(r,e?e._root:null,t,[r.value])}function $v(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function aI(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=jv(e);return n.children.forEach(c=>{(function mH(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const y=function yH(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Qm(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Qm(n.url,e.url)||!pl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!IN(n,e)||!pl(n.queryParams,e.queryParams);default:return!IN(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new $1(r)):(a.data=c.data,a._resolvedData=c._resolvedData),aI(n,e,a.component?f?f.children:null:t,r,i),y&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new nA(f.outlet.component,c))}else c&&uI(e,f,i),i.canActivateChecks.push(new $1(r)),aI(n,null,a.component?f?f.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),Object.entries(a).forEach(([c,f])=>uI(f,t.getContext(c),i)),i}function uI(n,e,t){const r=jv(n),i=n.value;Object.entries(r).forEach(([a,c])=>{uI(c,i.component?e?e.children.getContext(a):null:e,t)}),t.canDeactivateChecks.push(new nA(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function cI(n){return"function"==typeof n}function G1(n){return n instanceof OS||"EmptyError"===n?.name}const rA=Symbol("INITIAL_VALUE");function Gv(){return(0,Qr.w)(n=>cN(n.map(e=>e.pipe(Lv(1),wf(rA)))).pipe((0,vt.U)(e=>{for(const t of e)if(!0!==t){if(t===rA)return rA;if(!1===t||t instanceof Bv)return t}return!0}),To(e=>e!==rA),Lv(1)))}function z1(n){return(0,hj.z)((0,ro.b)(e=>{if(Jm(e))throw V1(0,e)}),(0,vt.U)(e=>!0===e))}class iA{constructor(e){this.segmentGroup=e||null}}class W1{constructor(e){this.urlTree=e}}function zv(n){return ZC(new iA(n))}function q1(n){return ZC(new W1(n))}class LH{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new h.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,Et.of)(r);if(i.numberOfChildren>1||!i.children[Kt])return ZC(new h.vHH(4e3,!1));i=i.children[Kt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Bv(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,a])=>{if("string"==typeof a&&a.startsWith(":")){const f=a.substring(1);r[i]=t[f]}else r[i]=a}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return Object.entries(t.children).forEach(([f,y])=>{c[f]=this.createSegmentGroup(e,y,r,i)}),new Ln(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new h.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const TN={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function VH(n,e,t,r,i){const a=SN(n,e,t);return a.matched?(r=function aH(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function OH(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,Et.of)(!0);const a=i.map(c=>{const f=$v(c,n);return _p(function IH(n){return n&&cI(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))});return(0,Et.of)(a).pipe(Gv(),z1())}(r,e,t).pipe((0,vt.U)(c=>!0===c?a:{...TN}))):(0,Et.of)(a)}function SN(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...TN}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||mj)(t,n,e);if(!i)return{...TN};const a={};Object.entries(i.posParams??{}).forEach(([f,y])=>{a[f]=y.path});const c=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function K1(n,e,t,r){return t.length>0&&function jH(n,e,t){return t.some(r=>sA(n,e,r)&&tc(r)!==Kt)}(n,t,r)?{segmentGroup:new Ln(e,BH(r,new Ln(t,n.children))),slicedSegments:[]}:0===t.length&&function HH(n,e,t){return t.some(r=>sA(n,e,r))}(n,t,r)?{segmentGroup:new Ln(n.segments,UH(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ln(n.segments,n.children),slicedSegments:t}}function UH(n,e,t,r,i){const a={};for(const c of r)if(sA(n,t,c)&&!i[tc(c)]){const f=new Ln([],{});a[tc(c)]=f}return{...i,...a}}function BH(n,e){const t={};t[Kt]=e;for(const r of n)if(""===r.path&&tc(r)!==Kt){const i=new Ln([],{});t[tc(r)]=i}return t}function sA(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class WH{constructor(e,t,r,i,a,c,f){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=a,this.paramsInheritanceStrategy=c,this.urlSerializer=f,this.allowRedirects=!0,this.applyRedirects=new LH(this.urlSerializer,this.urlTree)}noMatchError(e){return new h.vHH(4002,!1)}recognize(){const e=K1(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Kt).pipe(Ym(t=>{if(t instanceof W1)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof iA?this.noMatchError(t):t}),(0,vt.U)(t=>{const r=new eA([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Kt,this.rootComponentType,null,{}),i=new dh(r,t),a=new O1("",i),c=function Fj(n,e,t=null,r=null){return I1(C1(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return c.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(c),this.inheritParamsAndData(a._root),{state:a,tree:c}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Kt).pipe(Ym(r=>{throw r instanceof iA?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=P1(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,_n.D)(i).pipe(hf(a=>{const c=r.children[a],f=function dH(n,e){const t=n.filter(r=>tc(r)===e);return t.push(...n.filter(r=>tc(r)!==e)),t}(t,a);return this.processSegmentGroup(e,f,c,a)}),Ru((a,c)=>(a.push(...c),a)),kS(null),function fj(n,e){const t=arguments.length>=2;return r=>r.pipe(n?To((i,a)=>n(i,a,r)):zC.y,dN(1),t?kS(e):Mk(()=>new OS))}(),(0,Ar.z)(a=>{if(null===a)return zv(r);const c=Z1(a);return function qH(n){n.sort((e,t)=>e.value.outlet===Kt?-1:t.value.outlet===Kt?1:e.value.outlet.localeCompare(t.value.outlet))}(c),(0,Et.of)(c)}))}processSegment(e,t,r,i,a,c){return(0,_n.D)(t).pipe(hf(f=>this.processSegmentAgainstRoute(f._injector??e,t,f,r,i,a,c).pipe(Ym(y=>{if(y instanceof iA)return(0,Et.of)(null);throw y}))),yp(f=>!!f),Ym(f=>{if(G1(f))return function GH(n,e,t){return 0===e.length&&!n.children[t]}(r,i,a)?(0,Et.of)([]):zv(r);throw f}))}processSegmentAgainstRoute(e,t,r,i,a,c,f){return function $H(n,e,t,r){return!!(tc(n)===r||r!==Kt&&sA(e,t,n))&&("**"===n.path||SN(e,n,t).matched)}(r,i,a,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,a,c,f):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,a,c):zv(i):zv(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?q1(a):this.applyRedirects.lineralizeSegments(r,a).pipe((0,Ar.z)(c=>{const f=new Ln(c,{});return this.processSegment(e,t,f,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:f,consumedSegments:y,remainingSegments:w,positionalParamSegments:D}=SN(t,i,a);if(!f)return zv(t);const M=this.applyRedirects.applyRedirectCommands(y,i.redirectTo,D);return i.redirectTo.startsWith("/")?q1(M):this.applyRedirects.lineralizeSegments(i,M).pipe((0,Ar.z)(P=>this.processSegment(e,r,t,P.concat(w),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a,c){let f;if("**"===r.path){const y=i.length>0?d1(i).parameters:{},w=new eA(i,y,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Y1(r),tc(r),r.component??r._loadedComponent??null,r,Q1(r));f=(0,Et.of)({snapshot:w,consumedSegments:[],remainingSegments:[]}),t.children={}}else f=VH(t,r,i,e).pipe((0,vt.U)(({matched:y,consumedSegments:w,remainingSegments:D,parameters:M})=>y?{snapshot:new eA(w,M,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Y1(r),tc(r),r.component??r._loadedComponent??null,r,Q1(r)),consumedSegments:w,remainingSegments:D}:null));return f.pipe((0,Qr.w)(y=>null===y?zv(t):this.getChildConfig(e=r._injector??e,r,i).pipe((0,Qr.w)(({routes:w})=>{const D=r._loadedInjector??e,{snapshot:M,consumedSegments:P,remainingSegments:j}=y,{segmentGroup:K,slicedSegments:ae}=K1(t,P,j,w);if(0===ae.length&&K.hasChildren())return this.processChildren(D,w,K).pipe((0,vt.U)(Qe=>null===Qe?null:[new dh(M,Qe)]));if(0===w.length&&0===ae.length)return(0,Et.of)([new dh(M,[])]);const ye=tc(r)===a;return this.processSegment(D,w,K,ae,ye?Kt:a,!0).pipe((0,vt.U)(Qe=>[new dh(M,Qe)]))}))))}getChildConfig(e,t,r){return t.children?(0,Et.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,Et.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function PH(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,Et.of)(!0);const a=i.map(c=>{const f=$v(c,n);return _p(function vH(n){return n&&cI(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))});return(0,Et.of)(a).pipe(Gv(),z1())}(e,t,r).pipe((0,Ar.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,ro.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function FH(n){return ZC(U1(!1,3))}())):(0,Et.of)({routes:[],injector:e})}}function KH(n){const e=n.value.routeConfig;return e&&""===e.path}function Z1(n){const e=[],t=new Set;for(const r of n){if(!KH(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Z1(r.children);e.push(new dh(r.value,i))}return e.filter(r=>!t.has(r))}function Y1(n){return n.data||{}}function Q1(n){return n.resolve||{}}function J1(n){return"string"==typeof n.title||null===n.title}function AN(n){return(0,Qr.w)(e=>{const t=n(e);return t?(0,_n.D)(t).pipe((0,vt.U)(()=>e)):(0,Et.of)(e)})}const Wv=new h.OlP("ROUTES");let MN=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,h.f3M)(h.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,Et.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=_p(t.loadComponent()).pipe((0,vt.U)(X1),(0,ro.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),pg(()=>{this.componentLoaders.delete(t)})),i=new c1(r,()=>new ms.x).pipe(lN());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,Et.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,vt.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let y,w;return Array.isArray(f)?w=f:(y=f.create(t).injector,w=y.get(Wv,[],h.XFs.Self|h.XFs.Optional).flat()),{routes:w.map(DN),injector:y}}),pg(()=>{this.childrenLoaders.delete(r)})),c=new c1(a,()=>new ms.x).pipe(lN());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return _p(t()).pipe((0,vt.U)(X1),(0,Ar.z)(r=>r instanceof h.YKP||Array.isArray(r)?(0,Et.of)(r):(0,_n.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function X1(n){return function t$(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let oA=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ms.x,this.configLoader=(0,h.f3M)(MN),this.environmentInjector=(0,h.f3M)(h.lqb),this.urlSerializer=(0,h.f3M)(JC),this.rootContexts=(0,h.f3M)(iI),this.inputBindingEnabled=null!==(0,h.f3M)(tA,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Et.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Zj(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Kj(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new jr.X({id:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:nI,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(To(r=>0!==r.id),(0,vt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),(0,Qr.w)(r=>{let i=!1,a=!1;return(0,Et.of)(r).pipe((0,ro.b)(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Qr.w)(c=>{const f=t.browserUrlTree.toString(),y=!t.navigated||c.extractedUrl.toString()!==f||f!==t.currentUrlTree.toString();if(!y&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const D="";return this.events.next(new rI(c.id,t.serializeUrl(r.rawUrl),D,0)),t.rawUrlTree=c.rawUrl,c.resolve(null),mp.E}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return eF(c.source)&&(t.browserUrlTree=c.extractedUrl),(0,Et.of)(c).pipe((0,Qr.w)(D=>{const M=this.transitions?.getValue();return this.events.next(new yN(D.id,this.urlSerializer.serialize(D.extractedUrl),D.source,D.restoredState)),M!==this.transitions?.getValue()?mp.E:Promise.resolve(D)}),function ZH(n,e,t,r,i,a){return(0,Ar.z)(c=>function zH(n,e,t,r,i,a,c="emptyOnly"){return new WH(n,e,t,r,i,c,a).recognize()}(n,e,t,r,c.extractedUrl,i,a).pipe((0,vt.U)(({state:f,tree:y})=>({...c,targetSnapshot:f,urlAfterRedirects:y}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,ro.b)(D=>{if(r.targetSnapshot=D.targetSnapshot,r.urlAfterRedirects=D.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:D.urlAfterRedirects},"eager"===t.urlUpdateStrategy){if(!D.extras.skipLocationChange){const P=t.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);t.setBrowserUrl(P,D)}t.browserUrlTree=D.urlAfterRedirects}const M=new $j(D.id,this.urlSerializer.serialize(D.extractedUrl),this.urlSerializer.serialize(D.urlAfterRedirects),D.targetSnapshot);this.events.next(M)}));if(y&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:D,extractedUrl:M,source:P,restoredState:j,extras:K}=c,ae=new yN(D,this.urlSerializer.serialize(M),P,j);this.events.next(ae);const ye=N1(0,this.rootComponentType).snapshot;return r={...c,targetSnapshot:ye,urlAfterRedirects:M,extras:{...K,skipLocationChange:!1,replaceUrl:!1}},(0,Et.of)(r)}{const D="";return this.events.next(new rI(c.id,t.serializeUrl(r.extractedUrl),D,1)),t.rawUrlTree=c.rawUrl,c.resolve(null),mp.E}}),(0,ro.b)(c=>{const f=new Gj(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(f)}),(0,vt.U)(c=>r={...c,guards:pH(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),function DH(n,e){return(0,Ar.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?(0,Et.of)({...t,guardsResult:!0}):function TH(n,e,t,r){return(0,_n.D)(n).pipe((0,Ar.z)(i=>function NH(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,Et.of)(!0);const c=a.map(f=>{const y=oI(e)??i,w=$v(f,y);return _p(function CH(n){return n&&cI(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):y.runInContext(()=>w(n,e,t,r))).pipe(yp())});return(0,Et.of)(c).pipe(Gv())}(i.component,i.route,t,e,r)),yp(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Ar.z)(f=>f&&function _H(n){return"boolean"==typeof n}(f)?function SH(n,e,t,r){return(0,_n.D)(e).pipe(hf(i=>Pw(function MH(n,e){return null!==n&&e&&e(new Yj(n)),(0,Et.of)(!0)}(i.route.parent,r),function AH(n,e){return null!==n&&e&&e(new Jj(n)),(0,Et.of)(!0)}(i.route,r),function RH(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function gH(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>u1(()=>{const f=c.guards.map(y=>{const w=oI(c.node)??t,D=$v(y,w);return _p(function EH(n){return n&&cI(n.canActivateChild)}(D)?D.canActivateChild(r,n):w.runInContext(()=>D(r,n))).pipe(yp())});return(0,Et.of)(f).pipe(Gv())}));return(0,Et.of)(a).pipe(Gv())}(n,i.path,t),function xH(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Et.of)(!0);const i=r.map(a=>u1(()=>{const c=oI(e)??t,f=$v(a,c);return _p(function wH(n){return n&&cI(n.canActivate)}(f)?f.canActivate(e,n):c.runInContext(()=>f(e,n))).pipe(yp())}));return(0,Et.of)(i).pipe(Gv())}(n,i.route,t))),yp(i=>!0!==i,!0))}(r,a,n,e):(0,Et.of)(f)),(0,vt.U)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,c=>this.events.next(c)),(0,ro.b)(c=>{if(r.guardsResult=c.guardsResult,Jm(c.guardsResult))throw V1(0,c.guardsResult);const f=new zj(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(f)}),To(c=>!!c.guardsResult||(t.restoreHistory(c),this.cancelNavigationTransition(c,"",3),!1)),AN(c=>{if(c.guards.canActivateChecks.length)return(0,Et.of)(c).pipe((0,ro.b)(f=>{const y=new Wj(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(y)}),(0,Qr.w)(f=>{let y=!1;return(0,Et.of)(f).pipe(function YH(n,e){return(0,Ar.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,Et.of)(t);let a=0;return(0,_n.D)(i).pipe(hf(c=>function QH(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!J1(i)&&(a[YC]=i.title),function JH(n,e,t,r){const i=function XH(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,Et.of)({});const a={};return(0,_n.D)(i).pipe((0,Ar.z)(c=>function e$(n,e,t,r){const i=oI(e)??r,a=$v(n,i);return _p(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[c],e,t,r).pipe(yp(),(0,ro.b)(f=>{a[c]=f}))),dN(1),function pj(n){return(0,vt.U)(()=>n)}(a),Ym(c=>G1(c)?mp.E:ZC(c)))}(a,n,e,r).pipe((0,vt.U)(c=>(n._resolvedData=c,n.data=P1(n,t).resolve,i&&J1(i)&&(n.data[YC]=i.title),null)))}(c.route,r,n,e)),(0,ro.b)(()=>a++),dN(1),(0,Ar.z)(c=>a===i.length?(0,Et.of)(t):mp.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,ro.b)({next:()=>y=!0,complete:()=>{y||(t.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),(0,ro.b)(f=>{const y=new qj(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(y)}))}),AN(c=>{const f=y=>{const w=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,ro.b)(D=>{y.component=D}),(0,vt.U)(()=>{})));for(const D of y.children)w.push(...f(D));return w};return cN(f(c.targetSnapshot.root)).pipe(kS(),Lv(1))}),AN(()=>this.afterPreactivation()),(0,vt.U)(c=>{const f=function iH(n,e,t){const r=sI(n,e._root,t?t._root:void 0);return new R1(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return r={...c,targetRouterState:f}}),(0,ro.b)(c=>{t.currentUrlTree=c.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),t.routerState=c.targetRouterState,"deferred"===t.urlUpdateStrategy&&(c.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,c),t.browserUrlTree=c.urlAfterRedirects)}),((n,e,t,r)=>(0,vt.U)(i=>(new fH(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Lv(1),(0,ro.b)({next:c=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Xm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{i=!0}}),pg(()=>{i||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Ym(c=>{if(a=!0,j1(c)){B1(c)||(t.navigated=!0,t.restoreHistory(r,!0));const f=new XS(r.id,this.urlSerializer.serialize(r.extractedUrl),c.message,c.cancellationCode);if(this.events.next(f),B1(c)){const y=t.urlHandlingStrategy.merge(c.url,t.rawUrlTree),w={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||eF(r.source)};t.scheduleNavigation(y,nI,null,w,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const f=new _N(r.id,this.urlSerializer.serialize(r.extractedUrl),c,r.targetSnapshot??void 0);this.events.next(f);try{r.resolve(t.errorHandler(c))}catch(y){r.reject(y)}}return mp.E}))}))}cancelNavigationTransition(t,r,i){const a=new XS(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function eF(n){return n!==nI}let tF=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Kt);return r}getResolvedTitleForRoute(t){return t.data[YC]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(n$)},providedIn:"root"}),n})(),n$=(()=>{class n extends tF{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(gu))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),r$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(s$)},providedIn:"root"}),n})();class i${shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let s$=(()=>{class n extends i${}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const aA=new h.OlP("",{providedIn:"root",factory:()=>({})});let o$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(a$)},providedIn:"root"}),n})(),a$=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var lI=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(lI||{});function nF(n,e){n.events.pipe(To(t=>t instanceof Xm||t instanceof XS||t instanceof _N||t instanceof rI),(0,vt.U)(t=>t instanceof Xm||t instanceof rI?lI.COMPLETE:t instanceof XS&&(0===t.code||1===t.code)?lI.REDIRECTING:lI.FAILED),To(t=>t!==lI.REDIRECTING),Lv(1)).subscribe(()=>{e()})}function u$(n){throw n}function c$(n,e,t){return e.parse("/")}const l$={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},d$={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let qa=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,h.f3M)(h.c2e),this.isNgZoneEnabled=!1,this.options=(0,h.f3M)(aA,{optional:!0})||{},this.pendingTasks=(0,h.f3M)(h.HDt),this.errorHandler=this.options.errorHandler||u$,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||c$,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,h.f3M)(o$),this.routeReuseStrategy=(0,h.f3M)(r$),this.titleStrategy=(0,h.f3M)(tF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,h.f3M)(Wv,{optional:!0})?.flat()??[],this.navigationTransitions=(0,h.f3M)(oA),this.urlSerializer=(0,h.f3M)(JC),this.location=(0,h.f3M)($e),this.componentInputBindingEnabled=!!(0,h.f3M)(tA,{optional:!0}),this.isNgZoneEnabled=(0,h.f3M)(h.R0b)instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Bv,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=N1(0,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),nI,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},c=i?.navigationId?i:null;if(i){const y={...i};delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(a.state=y)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,c,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(DN),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:f,preserveFragment:y}=r,w=y?this.currentUrlTree.fragment:c;let M,D=null;switch(f){case"merge":D={...this.currentUrlTree.queryParams,...a};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=a||null}null!==D&&(D=this.removeEmptyProps(D));try{M=C1(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),M=this.currentUrlTree.root}return I1(M,t,D,w??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Jm(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,nI,null,r)}navigate(t,r={skipLocationChange:!1}){return function h$(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new h.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...l$}:!1===r?{...d$}:r,Jm(t))return f1(this.currentUrlTree,t,i);const a=this.parseUrl(t);return f1(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,c){if(this.disposed)return Promise.resolve(!1);let f,y,w;c?(f=c.resolve,y=c.reject,w=c.promise):w=new Promise((M,P)=>{f=M,y=P});const D=this.pendingTasks.add();return nF(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(D))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:f,reject:y,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(M=>Promise.reject(M))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const c={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",c)}else{const a={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(i,"",a)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-(this.browserPageId??this.currentPageId);0!==a?this.location.historyGo(a):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===a&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class rF{}let g$=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(To(t=>t instanceof Xm),hf(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,h.MMx)(a.providers,t,`Route: ${a.path}`));const c=a._injector??t,f=a._loadedInjector??c;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&i.push(this.preloadConfig(c,a)),(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,_n.D)(i).pipe((0,vf.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,Et.of)(null);const a=i.pipe((0,Ar.z)(c=>null===c?(0,Et.of)(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,_n.D)([a,c]).pipe((0,vf.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(qa),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(rF),h.LFG(MN))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const RN=new h.OlP("");let iF=(()=>{class n{constructor(t,r,i,a,c={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof yN?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Xm?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof rI&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof M1&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new M1(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function hh(n,e){return{\u0275kind:n,\u0275providers:e}}function oF(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(qa),i=n.get(aF);1===n.get(NN)&&r.initialNavigation(),n.get(uF,null,h.XFs.Optional)?.setUpPreloading(),n.get(RN,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const aF=new h.OlP("",{factory:()=>new ms.x}),NN=new h.OlP("",{providedIn:"root",factory:()=>1}),uF=new h.OlP("");function v$(n){return hh(0,[{provide:uF,useExisting:g$},{provide:rF,useExisting:n}])}const cF=new h.OlP("ROUTER_FORROOT_GUARD"),E$=[$e,{provide:JC,useClass:hN},qa,iI,{provide:Hv,useFactory:function sF(n){return n.routerState.root},deps:[qa]},MN,[]];function C$(){return new h.PXZ("Router",qa)}let lF=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[E$,[],{provide:Wv,multi:!0,useValue:t},{provide:cF,useFactory:T$,deps:[[qa,new h.FiY,new h.tp0]]},{provide:aA,useValue:r||{}},r?.useHash?{provide:Be,useClass:Oe}:{provide:Be,useClass:We},{provide:RN,useFactory:()=>{const n=(0,h.f3M)(ls),e=(0,h.f3M)(h.R0b),t=(0,h.f3M)(aA),r=(0,h.f3M)(oA),i=(0,h.f3M)(JC);return t.scrollOffset&&n.setOffset(t.scrollOffset),new iF(i,r,n,e,t)}},r?.preloadingStrategy?v$(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:C$},r?.initialNavigation?S$(r):[],r?.bindToComponentInputs?hh(8,[L1,{provide:tA,useExisting:L1}]).\u0275providers:[],[{provide:dF,useFactory:oF},{provide:h.tb,multi:!0,useExisting:dF}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Wv,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(cF,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function T$(n){return"guarded"}function S$(n){return["disabled"===n.initialNavigation?hh(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(qa);return()=>{e.setUpLocationChangeListener()}}},{provide:NN,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?hh(2,[{provide:NN,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(Se,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(qa),a=e.get(aF);nF(i,()=>{r(!0)}),e.get(oA).afterPreactivation=()=>(r(!0),a.closed?(0,Et.of)(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const dF=new h.OlP(""),M$=[{path:"todo",component:o1},{path:"",redirectTo:"todo",pathMatch:"full"},{path:"**",redirectTo:"todo",pathMatch:"full"}];let x$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Ci,lF.forRoot(M$),lF]}),n})();var R$=O(2381),N$=O(2420);function hF(...n){const e=(0,Di.jO)(n);return(0,Yi.e)((t,r)=>{const i=n.length,a=new Array(i);let c=n.map(()=>!1),f=!1;for(let y=0;y<i;y++)(0,js.Xf)(n[y]).subscribe((0,gn.x)(r,w=>{a[y]=w,!f&&!c[y]&&(c[y]=!0,(f=c.every(zC.y))&&(c=null))},N$.Z));t.subscribe((0,gn.x)(r,y=>{if(f){const w=[y,...a];r.next(e?e(...w):w)}}))})}class F$ extends Error{constructor(e,t){super(function L$(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function _F(n,e){const t=!e?.manualCleanup;t&&!e?.injector&&(0,h.gHi)(_F);const r=t?e?.injector?.get(h.ktI)??(0,h.f3M)(h.ktI):null;let i;i=(0,h.tdS)(e?.requireSync?{kind:0}:{kind:1,value:e?.initialValue});const a=n.subscribe({next:c=>i.set({kind:1,value:c}),error:c=>i.set({kind:2,error:c})});return r?.onDestroy(a.unsubscribe.bind(a)),(0,h.Flj)(()=>{const c=i();switch(c.kind){case 1:return c.value;case 2:throw c.error;case 0:throw new F$(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}const dI={},vF="@ngrx/store/init";let ey=(()=>{class n extends jr.X{constructor(){super({type:vF})}next(t){if("function"==typeof t)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(typeof t>"u")throw new TypeError("Actions must be objects");if(typeof t.type>"u")throw new TypeError("Actions must have a type property");super.next(t)}complete(){}ngOnDestroy(){super.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Z$=[ey],UN=new h.OlP("@ngrx/store Internal Root Guard"),wF=new h.OlP("@ngrx/store Internal Initial State"),BN=new h.OlP("@ngrx/store Initial State"),EF=new h.OlP("@ngrx/store Reducer Factory"),CF=new h.OlP("@ngrx/store Internal Reducer Factory Provider"),IF=new h.OlP("@ngrx/store Initial Reducers"),jN=new h.OlP("@ngrx/store Internal Initial Reducers"),bF=new h.OlP("@ngrx/store Store Features"),DF=new h.OlP("@ngrx/store Internal Store Reducers"),HN=new h.OlP("@ngrx/store Internal Feature Reducers"),TF=new h.OlP("@ngrx/store Internal Feature Configs"),$N=new h.OlP("@ngrx/store Internal Store Features"),SF=new h.OlP("@ngrx/store Internal Feature Reducers Token"),GN=new h.OlP("@ngrx/store Feature Reducers"),AF=new h.OlP("@ngrx/store User Provided Meta Reducers"),dA=new h.OlP("@ngrx/store Meta Reducers"),MF=new h.OlP("@ngrx/store Internal Resolved Meta Reducers"),xF=new h.OlP("@ngrx/store User Runtime Checks Config"),RF=new h.OlP("@ngrx/store Internal User Runtime Checks Config"),hI=new h.OlP("@ngrx/store Internal Runtime Checks"),fI=new h.OlP("@ngrx/store Check if Action types are unique");function WN(n,e={}){const t=Object.keys(n),r={};for(let a=0;a<t.length;a++){const c=t[a];"function"==typeof n[c]&&(r[c]=n[c])}const i=Object.keys(r);return function(c,f){c=void 0===c?e:c;let y=!1;const w={};for(let D=0;D<i.length;D++){const M=i[D],j=c[M],K=(0,r[M])(j,f);w[M]=K,y=y||K!==j}return y?w:c}}function PF(...n){return function(e){if(0===n.length)return e;const t=n[n.length-1];return n.slice(0,-1).reduceRight((i,a)=>a(i),t(e))}}function OF(n,e){return Array.isArray(e)&&e.length>0&&(n=PF.apply(null,[...e,n])),(t,r)=>{const i=n(t);return(a,c)=>i(a=void 0===a?r:a,c)}}new h.OlP("@ngrx/store Root Store Provider"),new h.OlP("@ngrx/store Feature State Provider");class hA extends fr.y{}class kF extends ey{}let pI=(()=>{class n extends jr.X{get currentReducers(){return this.reducers}constructor(t,r,i,a){super(a(i,r)),this.dispatcher=t,this.initialState=r,this.reducers=i,this.reducerFactory=a}addFeature(t){this.addFeatures([t])}addFeatures(t){const r=t.reduce((i,{reducers:a,reducerFactory:c,metaReducers:f,initialState:y,key:w})=>{const D="function"==typeof a?function Q$(n){const e=Array.isArray(n)&&n.length>0?PF(...n):t=>t;return(t,r)=>(t=e(t),(i,a)=>t(i=void 0===i?r:i,a))}(f)(a,y):OF(c,f)(a,y);return i[w]=D,i},{});this.addReducers(r)}removeFeature(t){this.removeFeatures([t])}removeFeatures(t){this.removeReducers(t.map(r=>r.key))}addReducer(t,r){this.addReducers({[t]:r})}addReducers(t){this.reducers={...this.reducers,...t},this.updateReducers(Object.keys(t))}removeReducer(t){this.removeReducers([t])}removeReducers(t){t.forEach(r=>{this.reducers=function Y$(n,e){return Object.keys(n).filter(t=>t!==e).reduce((t,r)=>Object.assign(t,{[r]:n[r]}),{})}(this.reducers,r)}),this.updateReducers(t)}updateReducers(t){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:"@ngrx/store/update-reducers",features:t})}ngOnDestroy(){this.complete()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(kF),h.LFG(BN),h.LFG(IF),h.LFG(EF))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const X$=[pI,{provide:hA,useExisting:pI},{provide:kF,useExisting:ey}];let fA=(()=>{class n extends ms.x{ngOnDestroy(){this.complete()}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const e3=[fA];class FF extends fr.y{}let LF=(()=>{class n extends jr.X{constructor(t,r,i,a){super(a);const w=t.pipe((0,GC.Q)(R$.N)).pipe(hF(r)).pipe(Ru(t3,{state:a}));this.stateSubscription=w.subscribe(({state:D,action:M})=>{this.next(D),i.next(M)}),this.state=_F(this,{manualCleanup:!0,requireSync:!0})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return n.INIT=vF,n.\u0275fac=function(t){return new(t||n)(h.LFG(ey),h.LFG(hA),h.LFG(fA),h.LFG(BN))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function t3(n={state:void 0},[e,t]){const{state:r}=n;return{state:t(r,e),action:e}}const n3=[LF,{provide:FF,useExisting:LF}];let pA=(()=>{class n extends fr.y{constructor(t,r,i){super(),this.actionsObserver=r,this.reducerManager=i,this.source=t,this.state=t.state}select(t,...r){return i3.call(null,t,...r)(this)}selectSignal(t,r){return(0,h.Flj)(()=>t(this.state()),{equal:r?.equal||((i,a)=>i===a)})}lift(t){const r=new n(this,this.actionsObserver,this.reducerManager);return r.operator=t,r}dispatch(t){this.actionsObserver.next(t)}next(t){this.actionsObserver.next(t)}error(t){this.actionsObserver.error(t)}complete(){this.actionsObserver.complete()}addReducer(t,r){this.reducerManager.addReducer(t,r)}removeReducer(t){this.reducerManager.removeReducer(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(FF),h.LFG(ey),h.LFG(pI))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const r3=[pA];function i3(n,e,...t){return function(i){let a;if("string"==typeof n){const c=[e,...t].filter(Boolean);a=i.pipe(function P$(...n){const e=n.length;if(0===e)throw new Error("list of properties cannot be empty.");return(0,vt.U)(t=>{let r=t;for(let i=0;i<e;i++){const a=r?.[n[i]];if(!(typeof a<"u"))return;r=a}return r})}(n,...c))}else{if("function"!=typeof n)throw new TypeError(`Unexpected type '${typeof n}' in select operator, expected 'string' or 'function'`);a=i.pipe((0,vt.U)(c=>n(c,e)))}return a.pipe((0,Cf.x)())}}const qN="https://ngrx.io/guide/store/configuration/runtime-checks";function VF(n){return void 0===n}function UF(n){return null===n}function BF(n){return Array.isArray(n)}function jF(n){return"object"==typeof n&&null!==n}function KN(n){return"function"==typeof n}function w3(n){return n instanceof h.OlP?(0,h.f3M)(n):n}function E3(n,e){return e.map((t,r)=>{if(n[r]instanceof h.OlP){const i=(0,h.f3M)(n[r]);return{key:t.key,reducerFactory:i.reducerFactory?i.reducerFactory:WN,metaReducers:i.metaReducers?i.metaReducers:[],initialState:i.initialState}}return t})}function C3(n){return n.map(e=>e instanceof h.OlP?(0,h.f3M)(e):e)}function QN(n){return"function"==typeof n?n():n}function I3(n,e){return n.concat(e)}function b3(){if((0,h.f3M)(pA,{optional:!0,skipSelf:!0}))throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function JN(n){Object.freeze(n);const e=KN(n);return Object.getOwnPropertyNames(n).forEach(t=>{if(!t.startsWith("\u0275")&&function l3(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(n,t)&&(!e||"caller"!==t&&"callee"!==t&&"arguments"!==t)){const r=n[t];(jF(r)||KN(r))&&!Object.isFrozen(r)&&JN(r)}}),n}function XN(n,e=[]){return(VF(n)||UF(n))&&0===e.length?{path:["root"],value:n}:Object.keys(n).reduce((r,i)=>{if(r)return r;const a=n[i];return function c3(n){return KN(n)&&n.hasOwnProperty("\u0275cmp")}(a)?r:!(VF(a)||UF(a)||function a3(n){return"number"==typeof n}(a)||function o3(n){return"boolean"==typeof n}(a)||function s3(n){return"string"==typeof n}(a)||BF(a))&&(function HF(n){if(!function u3(n){return jF(n)&&!BF(n)}(n))return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||null===e}(a)?XN(a,[...e,i]):{path:[...e,i],value:a})},!1)}function zF(n,e){if(!1===n)return;const t=n.path.join("."),r=new Error(`Detected unserializable ${e} at "${t}". ${qN}#strict${e}serializability`);throw r.value=n.value,r.unserializablePath=t,r}function A3(n){return(0,h.X6Q)()?{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1,...n}:{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function M3({strictActionSerializability:n,strictStateSerializability:e}){return t=>n||e?function T3(n,e){return function(t,r){e.action(r)&&zF(XN(r),"action");const i=n(t,r);return e.state()&&zF(XN(i),"state"),i}}(t,{action:r=>n&&!eP(r),state:()=>e}):t}function x3({strictActionImmutability:n,strictStateImmutability:e}){return t=>n||e?function D3(n,e){return function(t,r){const i=e.action(r)?JN(r):r,a=n(t,i);return e.state()?JN(a):a}}(t,{action:r=>n&&!eP(r),state:()=>e}):t}function eP(n){return n.type.startsWith("@ngrx")}function R3({strictActionWithinNgZone:n}){return e=>n?function S3(n,e){return function(t,r){if(e.action(r)&&!h.R0b.isInAngularZone())throw new Error(`Action '${r.type}' running outside NgZone. ${qN}#strictactionwithinngzone`);return n(t,r)}}(e,{action:t=>n&&!eP(t)}):e}function N3(n){return[{provide:RF,useValue:n},{provide:xF,useFactory:P3,deps:[RF]},{provide:hI,deps:[xF],useFactory:A3},{provide:dA,multi:!0,deps:[hI],useFactory:x3},{provide:dA,multi:!0,deps:[hI],useFactory:M3},{provide:dA,multi:!0,deps:[hI],useFactory:R3}]}function WF(){return[{provide:fI,multi:!0,deps:[hI],useFactory:O3}]}function P3(n){return n}function O3(n){if(!n.strictActionTypeUniqueness)return;const e=Object.entries(dI).filter(([,t])=>t>1).map(([t])=>t);if(e.length)throw new Error(`Action types are registered more than once, ${e.map(t=>`"${t}"`).join(", ")}. ${qN}#strictactiontypeuniqueness`)}function qF(n={},e={}){return[{provide:UN,useFactory:b3},{provide:wF,useValue:e.initialState},{provide:BN,useFactory:QN,deps:[wF]},{provide:jN,useValue:n},{provide:DF,useExisting:n instanceof h.OlP?n:jN},{provide:IF,deps:[jN,[new h.tBr(DF)]],useFactory:w3},{provide:AF,useValue:e.metaReducers?e.metaReducers:[]},{provide:MF,deps:[dA,AF],useFactory:I3},{provide:CF,useValue:e.reducerFactory?e.reducerFactory:WN},{provide:EF,deps:[CF,MF],useFactory:OF},Z$,X$,e3,n3,r3,N3(e.runtimeChecks),WF()]}function KF(n,e,t={}){return[{provide:TF,multi:!0,useValue:n instanceof Object?{}:t},{provide:bF,multi:!0,useValue:{key:n instanceof Object?n.name:n,reducerFactory:t instanceof h.OlP||!t.reducerFactory?WN:t.reducerFactory,metaReducers:t instanceof h.OlP||!t.metaReducers?[]:t.metaReducers,initialState:t instanceof h.OlP||!t.initialState?void 0:t.initialState}},{provide:$N,deps:[TF,bF],useFactory:E3},{provide:HN,multi:!0,useValue:n instanceof Object?n.reducer:e},{provide:SF,multi:!0,useExisting:e instanceof h.OlP?e:HN},{provide:GN,multi:!0,deps:[HN,[new h.tBr(SF)]],useFactory:C3},WF()]}let ZF=(()=>{class n{constructor(t,r,i,a,c,f){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ey),h.LFG(hA),h.LFG(fA),h.LFG(pA),h.LFG(UN,8),h.LFG(fI,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),U3=(()=>{class n{constructor(t,r,i,a,c){this.features=t,this.featureReducers=r,this.reducerManager=i;const f=t.map((y,w)=>{const M=r.shift()[w];return{...y,reducers:M,initialState:QN(y.initialState)}});i.addFeatures(f)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG($N),h.LFG(GN),h.LFG(pI),h.LFG(ZF),h.LFG(fI,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),B3=(()=>{class n{static forRoot(t,r){return{ngModule:ZF,providers:[...qF(t,r)]}}static forFeature(t,r,i={}){return{ngModule:U3,providers:[...KF(t,r,i)]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const YF="@firebase/database";let tP="";function JF(n){tP=n}class H3{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class $3{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const XF=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new H3(e)}}catch{}return new $3},ty=XF("localStorage"),nP=XF("sessionStorage"),Kv=new Vi.Yd("@firebase/database"),eL=function(){let n=1;return function(){return n++}}(),tL=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},gI=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=gI.apply(null,r):e+="object"==typeof r?(0,k.Wl)(r):r,e+=" "}return e};let ny=null,nL=!0;const rL=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Kv.logLevel=Vi.in.VERBOSE,ny=Kv.log.bind(Kv),e&&nP.set("logging_enabled",!0)):"function"==typeof n?ny=n:(ny=null,nP.remove("logging_enabled"))},ji=function(...n){if(!0===nL&&(nL=!1,null===ny&&!0===nP.get("logging_enabled")&&rL(!0)),ny){const e=gI.apply(null,n);ny(e)}},mI=function(n){return function(...e){ji(n,...e)}},rP=function(...n){const e="FIREBASE INTERNAL ERROR: "+gI(...n);Kv.error(e)},yl=function(...n){const e=`FIREBASE FATAL ERROR: ${gI(...n)}`;throw Kv.error(e),new Error(e)},Rs=function(...n){const e="FIREBASE WARNING: "+gI(...n);Kv.warn(e)},gA=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},vp="[MIN_NAME]",fh="[MAX_NAME]",ry=function(n,e){if(n===e)return 0;if(n===vp||e===fh)return-1;if(e===vp||n===fh)return 1;{const t=oL(n),r=oL(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},W3=function(n,e){return n===e?0:n<e?-1:1},yI=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Wl)(e))},iP=function(n){if("object"!=typeof n||null===n)return(0,k.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Wl)(e[r]),t+=":",t+=iP(n[e[r]]);return t+="}",t},iL=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Hi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const sL=function(n){(0,k.hu)(!gA(n),"Invalid JSON number");const r=1023;let i,a,c,f,y;0===n?(a=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,c=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,c=Math.round(n/Math.pow(2,-1074))));const w=[];for(y=52;y;y-=1)w.push(c%2?1:0),c=Math.floor(c/2);for(y=11;y;y-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const D=w.join("");let M="";for(y=0;y<64;y+=8){let P=parseInt(D.substr(y,8),2).toString(16);1===P.length&&(P="0"+P),M+=P}return M.toLowerCase()},Y3=new RegExp("^-?(0*)\\d{1,10}$"),oL=function(n){if(Y3.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Zv=function(n){try{n()}catch(e){setTimeout(()=>{throw Rs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},_I=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class eG{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Rs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class tG{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(ji("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Rs(e)}}let vI=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const dL=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,pL="websocket",gL="long_polling";class oP{constructor(e,t,r,i,a=!1,c="",f=!1,y=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=y,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ty.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ty.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function mL(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===pL)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==gL)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function nG(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Hi(t,(a,c)=>{i.push(a+"="+c)}),r+i.join("&")}class rG{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const aP={},uP={};function cP(n){const e=n.toString();return aP[e]||(aP[e]=new rG),aP[e]}class sG{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Zv(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class wp{constructor(e,t,r,i,a,c,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=c,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=mI(e),this.stats_=cP(t),this.urlFn=y=>(this.appCheckToken&&(y.ac=this.appCheckToken),mL(t,gL,y))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new sG(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new lP((...a)=>{const[c,f,y,w,D]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=f,this.password=y;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[c,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&dL.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){wp.forceAllow_=!0}static forceDisallow(){wp.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!wp.forceAllow_&&(wp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=iL(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class lP{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=eL(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=lP.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(f){ji("frame writing exception"),f.stack&&ji(f.stack),ji(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ji("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{ji("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let yA=null;typeof MozWebSocket<"u"?yA=MozWebSocket:typeof WebSocket<"u"&&(yA=WebSocket);let Yv=(()=>{class n{constructor(t,r,i,a,c,f,y){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=mI(this.connId),this.stats_=cP(r),this.connURL=n.connectionURL_(r,f,y,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,c){const f={v:"5"};return!(0,k.Yr)()&&typeof location<"u"&&location.hostname&&dL.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),a&&(f.ac=a),c&&(f.p=c),mL(t,pL,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ty.set("previous_websocket_failure",!0);try{let i;if((0,k.Yr)()){i={headers:{"User-Agent":`Firebase/5/${tP}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,f=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new yA(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==yA&&!n.forceDisallow_}static previouslyFailed(){return ty.isInMemoryStorage||!0===ty.get("previous_websocket_failure")}markConnectionHealthy(){ty.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=iL(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),IL=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[wp,Yv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Yv&&Yv.isAvailable();let i=r&&!Yv.previouslyFailed();if(t.webSocketOnly&&(r||Rs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Yv];else{const a=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&a.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class xL{constructor(e,t,r,i,a,c,f,y,w,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=c,this.onReady_=f,this.onDisconnect_=y,this.onKill_=w,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=mI("c:"+this.id+":"),this.transportManager_=new IL(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=_I(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=yI("t",e),r=yI("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=yI("t",e),r=yI("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=yI("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?rP("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):rP("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Rs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),_I(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):_I(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ty.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class RL{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class NL{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class _A extends NL{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new _A}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Nn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function bn(){return new Nn("")}function Xt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ep(n){return n.pieces_.length-n.pieceNum_}function Yn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Nn(n.pieces_,e)}function hP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function wI(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function kL(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Nn(e,0)}function vr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Nn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Nn(t,0)}function en(n){return n.pieceNum_>=n.pieces_.length}function io(n,e){const t=Xt(n),r=Xt(e);if(null===t)return e;if(t===r)return io(Yn(n),Yn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function SG(n,e){const t=wI(n,0),r=wI(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=ry(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function fP(n,e){if(Ep(n)!==Ep(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ka(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Ep(n)>Ep(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class AG{constructor(e,t){this.errorPrefix_=t,this.parts_=wI(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);FL(this)}}function FL(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+iy(n))}function iy(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class pP extends NL{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new pP}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const EI=1e3;let wA,sy=(()=>{class n extends RL{constructor(t,r,i,a,c,f,y,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=f,this.appCheckTokenProvider_=y,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=mI("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=EI,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");pP.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&_A.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,c={r:a,a:t,b:r};this.log_((0,k.Wl)(c)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new k.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const y=f.d;"ok"===f.s?r.resolve(y):r.reject(y)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const c=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+c),this.listens.has(f)||this.listens.set(f,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(f).has(c),"listen() called twice for same path/queryId.");const y={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(c,y),this.connected_&&this.sendListen_(y)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,y=>{const w=y.d,D=y.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",y),"ok"!==D&&this.removeListen_(i,a),t.onComplete&&t.onComplete(D,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();Rs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const c=a.s,f=a.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const c={p:t};a&&(c.q=i,c.t=a),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,c){this.initConnection_();const f={p:r,d:i};void 0!==c&&(f.h=c),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):rP("Unrecognized action received from server: "+(0,k.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=EI,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=EI,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=EI),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ve.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let y=!1,w=null;const D=function(){w?w.close():(y=!0,a())};t.realtime_={close:D,sendRequest:function(j){(0,k.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(j)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[j,K]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);y?ji("getToken() completed but was canceled"):(ji("getToken() completed. Creating connection."),t.authToken_=j&&j.accessToken,t.appCheckToken_=K&&K.token,w=new xL(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ae=>{Rs(ae+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(j){t.log_("Failed to get token: "+j),y||(t.repoInfo_.nodeAdmin&&Rs(j),D())}}})()}interrupt(t){ji("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ji("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=EI,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>iP(c)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Nn(t).toString();let a;if(this.listens.has(i)){const c=this.listens.get(i);a=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){ji("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){ji("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+tP.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=_A.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class on{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new on(e,t)}}class vA{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new on(vp,e),i=new on(vp,t);return 0!==this.compare(r,i)}minPost(){return on.MIN}}class UL extends vA{static get __EMPTY_NODE(){return wA}static set __EMPTY_NODE(e){wA=e}compare(e,t){return ry(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return on.MIN}maxPost(){return new on(fh,wA)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new on(e,wA)}toString(){return".key"}}const _l=new UL;class EA{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let mP,nc=(()=>{class n{constructor(t,r,i,a,c){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??Ro.EMPTY_NODE,this.right=c??Ro.EMPTY_NODE}copy(t,r,i,a,c){return new n(t??this.key,r??this.value,i??this.color,a??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const c=i(t,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===c?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ro.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Ro.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ro{constructor(e,t=Ro.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ro(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,nc.BLACK,null,null))}remove(e){return new Ro(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,nc.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new EA(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new EA(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new EA(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new EA(this.root_,null,this.comparator_,!0,e)}}function FG(n,e){return ry(n.name,e.name)}function gP(n,e){return ry(n,e)}Ro.EMPTY_NODE=new class kG{copy(e,t,r,i,a){return this}insert(e,t,r){return new nc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const BL=function(n){return"number"==typeof n?"number:"+sL(n):"string:"+n},jL=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===mP||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===mP||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let HL,$L,GL,Qv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),jL(this.priorityNode_)}static set __childrenNodeConstructor(t){HL=t}static get __childrenNodeConstructor(){return HL}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return en(t)?this:".priority"===Xt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Xt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===Ep(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Yn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+BL(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?sL(this.value_):this.value_,this.lazyHash_=tL(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(a>=0,"Unknown leaf type: "+r),(0,k.hu)(c>=0,"Unknown leaf type: "+i),a===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const nr=new class BG extends vA{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?ry(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return on.MIN}maxPost(){return new on(fh,new Qv("[PRIORITY-POST]",GL))}makePost(e,t){const r=$L(e);return new on(t,new Qv("[PRIORITY-POST]",r))}toString(){return".priority"}},jG=Math.log(2);class HG{constructor(e){this.count=parseInt(Math.log(e+1)/jG,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const CA=function(n,e,t,r){n.sort(e);const i=function(y,w){const D=w-y;let M,P;if(0===D)return null;if(1===D)return M=n[y],P=t?t(M):M,new nc(P,M.node,nc.BLACK,null,null);{const j=parseInt(D/2,10)+y,K=i(y,j),ae=i(j+1,w);return M=n[j],P=t?t(M):M,new nc(P,M.node,nc.BLACK,K,ae)}},f=function(y){let w=null,D=null,M=n.length;const P=function(K,ae){const ye=M-K,Qe=M;M-=K;const dt=i(ye+1,Qe),Xe=n[ye],It=t?t(Xe):Xe;j(new nc(It,Xe.node,ae,null,dt))},j=function(K){w?(w.left=K,w=K):(D=K,w=K)};for(let K=0;K<y.count;++K){const ae=y.nextBitIsOne(),ye=Math.pow(2,y.count-(K+1));ae?P(ye,nc.BLACK):(P(ye,nc.BLACK),P(ye,nc.RED))}return D}(new HG(n.length));return new Ro(r||e,f)};let yP;const Jv={};class ph{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(Jv&&nr,"ChildrenNode.ts has not been loaded"),yP=yP||new ph({".priority":Jv},{".priority":nr}),yP}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ro?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==_l,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(on.Wrap);let f,c=a.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=a.getNext();f=i?CA(r,e.getCompare()):Jv;const y=e.toString(),w=Object.assign({},this.indexSet_);w[y]=e;const D=Object.assign({},this.indexes_);return D[y]=f,new ph(D,w)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,a)=>{const c=(0,k.DV)(this.indexSet_,a);if((0,k.hu)(c,"Missing index implementation for "+a),i===Jv){if(c.isDefinedOn(e.node)){const f=[],y=t.getIterator(on.Wrap);let w=y.getNext();for(;w;)w.name!==e.name&&f.push(w),w=y.getNext();return f.push(e),CA(f,c.getCompare())}return Jv}{const f=t.get(e.name);let y=i;return f&&(y=y.remove(new on(e.name,f))),y.insert(e,e.node)}});return new ph(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===Jv)return i;{const a=t.get(e.name);return a?i.remove(new on(e.name,a)):i}});return new ph(r,this.indexSet_)}}let CI,Wt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&jL(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return CI||(CI=new n(new Ro(gP),null,ph.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||CI}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?CI:r}}getChild(t){const r=Xt(t);return null===r?this:this.getImmediateChild(r).getChild(Yn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new on(t,r);let a,c;r.isEmpty()?(a=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?CI:this.priorityNode_;return new n(a,f,c)}}updateChild(t,r){const i=Xt(t);if(null===i)return r;{(0,k.hu)(".priority"!==Xt(t)||1===Ep(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Yn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,c=!0;if(this.forEachChild(nr,(f,y)=>{r[f]=y.val(t),i++,c&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):c=!1}),!t&&c&&a<2*i){const f=[];for(const y in r)f[y]=r[y];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+BL(this.getPriority().val())+":"),this.forEachChild(nr,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":tL(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const c=a.getPredecessorKey(new on(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new on(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new on(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,on.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,on.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)>0;)a.getNext(),c=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===II?-1:0}withIndex(t){if(t===_l||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===_l||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(nr),a=r.getIterator(nr);let c=i.getNext(),f=a.getNext();for(;c&&f;){if(c.name!==f.name||!c.node.equals(f.node))return!1;c=i.getNext(),f=a.getNext()}return null===c&&null===f}return!1}return!1}}resolveIndex_(t){return t===_l?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const II=new class $G extends Wt{constructor(){super(new Ro(gP),Wt.EMPTY_NODE,ph.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Wt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(on,{MIN:{value:new on(vp,Wt.EMPTY_NODE)},MAX:{value:new on(fh,II)}}),UL.__EMPTY_NODE=Wt.EMPTY_NODE,Qv.__childrenNodeConstructor=Wt,function LG(n){mP=n}(II),function UG(n){GL=n}(II);const GG=!0;function Rr(n,e=null){if(null===n)return Wt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Qv(n,Rr(e));if(n instanceof Array||!GG){let t=Wt.EMPTY_NODE;return Hi(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const a=Rr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Rr(e))}{const t=[];let r=!1;if(Hi(n,(c,f)=>{if("."!==c.substring(0,1)){const y=Rr(f);y.isEmpty()||(r=r||!y.getPriority().isEmpty(),t.push(new on(c,y)))}}),0===t.length)return Wt.EMPTY_NODE;const a=CA(t,FG,c=>c.name,gP);if(r){const c=CA(t,nr.getCompare());return new Wt(a,Rr(e),new ph({".priority":c},{".priority":nr}))}return new Wt(a,Rr(e),ph.Default)}}!function VG(n){$L=n}(Rr);class _P extends vA{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!en(e)&&".priority"!==Xt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?ry(e.name,t.name):a}makePost(e,t){const r=Rr(e),i=Wt.EMPTY_NODE.updateChild(this.indexPath_,r);return new on(t,i)}maxPost(){const e=Wt.EMPTY_NODE.updateChild(this.indexPath_,II);return new on(fh,e)}toString(){return wI(this.indexPath_,0).join("/")}}const vP=new class zG extends vA{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?ry(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return on.MIN}maxPost(){return on.MAX}makePost(e,t){const r=Rr(e);return new on(t,r)}toString(){return".value"}};function zL(n){return{type:"value",snapshotNode:n}}function Xv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function bI(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function DI(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class wP{constructor(e){this.index_=e}updateChild(e,t,r,i,a,c){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(bI(t,f)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?c.trackChildChange(Xv(t,r)):c.trackChildChange(DI(t,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(nr,(i,a)=>{t.hasChild(i)||r.trackChildChange(bI(i,a))}),t.isLeafNode()||t.forEachChild(nr,(i,a)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(a)||r.trackChildChange(DI(i,a,c))}else r.trackChildChange(Xv(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Wt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class TI{constructor(e){this.indexedFilter_=new wP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=TI.getStartPost_(e),this.endPost_=TI.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,a,c){return this.matches(new on(t,r))||(r=Wt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Wt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Wt.EMPTY_NODE);const a=this;return t.forEachChild(nr,(c,f)=>{a.matches(new on(c,f))||(i=i.updateImmediateChild(c,Wt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class qG{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new TI(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,a,c){return this.rangedFilter_.matches(new on(t,r))||(r=Wt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,c):this.fullLimitUpdateChild_(e,t,r,a,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Wt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Wt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const f=a.getNext();if(this.withinDirectionalStart(f)){if(!this.withinDirectionalEnd(f))break;i=i.updateImmediateChild(f.name,f.node),c++}}}else{let a;i=t.withIndex(this.index_),i=i.updatePriority(Wt.EMPTY_NODE),a=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let c=0;for(;a.hasNext();){const f=a.getNext();c<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?c++:i=i.updateImmediateChild(f.name,Wt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let c;if(this.reverse_){const M=this.index_.getCompare();c=(P,j)=>M(j,P)}else c=this.index_.getCompare();const f=e;(0,k.hu)(f.numChildren()===this.limit_,"");const y=new on(t,r),w=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),D=this.rangedFilter_.matches(y);if(f.hasChild(t)){const M=f.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=P&&(P.name===t||f.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const j=null==P?1:c(P,y);if(D&&!r.isEmpty()&&j>=0)return a?.trackChildChange(DI(t,r,M)),f.updateImmediateChild(t,r);{a?.trackChildChange(bI(t,M));const ae=f.updateImmediateChild(t,Wt.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(a?.trackChildChange(Xv(P.name,P.node)),ae.updateImmediateChild(P.name,P.node)):ae}}return r.isEmpty()?e:D&&c(w,y)>=0?(null!=a&&(a.trackChildChange(bI(w.name,w.node)),a.trackChildChange(Xv(t,r))),f.updateImmediateChild(t,r).updateImmediateChild(w.name,Wt.EMPTY_NODE)):e}}class IA{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=nr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vp}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fh}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===nr}copy(){const e=new IA;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function EP(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function CP(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function bA(n,e){const t=n.copy();return t.index_=e,t}function WL(n){const e={};if(n.isDefault())return e;let t;if(n.index_===nr?t="$priority":n.index_===vP?t="$value":n.index_===_l?t="$key":((0,k.hu)(n.index_ instanceof _P,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,k.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,k.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,k.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,k.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function qL(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==nr&&(e.i=n.index_.toString()),e}class DA extends RL{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=mI("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=DA.getListenId_(e,r),f={};this.listens_[c]=f;const y=WL(e._queryParams);this.restRequest_(a+".json",y,(w,D)=>{let M=D;if(404===w&&(M=null,w=null),null===w&&this.onDataUpdate_(a,M,!1,r),(0,k.DV)(this.listens_,c)===f){let P;P=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(P,null)}})}unlisten(e,t){const r=DA.getListenId_(e,t);delete this.listens_[r]}get(e){const t=WL(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(a,c)=>{let f=c;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+c);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+c+" received. status:",f.status,"response:",f.responseText);let y=null;if(f.status>=200&&f.status<300){try{y=(0,k.cI)(f.responseText)}catch{Rs("Failed to parse JSON response for "+c+": "+f.responseText)}r(null,y)}else 401!==f.status&&404!==f.status&&Rs("Got unsuccessful REST response for "+c+" Status: "+f.status),r(f.status);r=null}},f.open("GET",c,!0),f.send()})}}class XG{constructor(){this.rootNode_=Wt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function TA(){return{value:null,children:new Map}}function ew(n,e,t){if(en(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Xt(e);n.children.has(r)||n.children.set(r,TA()),ew(n.children.get(r),e=Yn(e),t)}}function IP(n,e){if(en(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(nr,(r,i)=>{ew(n,new Nn(r),i)}),IP(n,e)}}if(n.children.size>0){const t=Xt(e);return e=Yn(e),n.children.has(t)&&IP(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function bP(n,e,t){null!==n.value?t(e,n.value):function ez(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{bP(i,new Nn(e.toString()+"/"+r),t)})}class tz{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Hi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class iz{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new tz(e);const r=1e4+2e4*Math.random();_I(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Hi(e,(i,a)=>{a>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),_I(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var vl=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(vl||{});function SP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class SA{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=vl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(en(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Nn(e));return new SA(bn(),t,this.revert)}}return(0,k.hu)(Xt(this.path)===e,"operationForChild called for unrelated child."),new SA(Yn(this.path),this.affectedTree,this.revert)}}class SI{constructor(e,t){this.source=e,this.path=t,this.type=vl.LISTEN_COMPLETE}operationForChild(e){return en(this.path)?new SI(this.source,bn()):new SI(this.source,Yn(this.path))}}class oy{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=vl.OVERWRITE}operationForChild(e){return en(this.path)?new oy(this.source,bn(),this.snap.getImmediateChild(e)):new oy(this.source,Yn(this.path),this.snap)}}class tw{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=vl.MERGE}operationForChild(e){if(en(this.path)){const t=this.children.subtree(new Nn(e));return t.isEmpty()?null:t.value?new oy(this.source,bn(),t.value):new tw(this.source,bn(),t)}return(0,k.hu)(Xt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new tw(this.source,Yn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Cp{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(en(e))return this.isFullyInitialized()&&!this.filtered_;const t=Xt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class sz{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function AI(n,e,t,r,i,a){const c=r.filter(f=>f.type===t);c.sort((f,y)=>function uz(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new on(e.childName,e.snapshotNode),i=new on(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,y)),c.forEach(f=>{const y=function az(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(w=>{w.respondsTo(f.type)&&e.push(w.createEvent(y,n.query_))})})}function AA(n,e){return{eventCache:n,serverCache:e}}function MI(n,e,t,r){return AA(new Cp(e,t,r),n.serverCache)}function ZL(n,e,t,r){return AA(n.eventCache,new Cp(e,t,r))}function MA(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ay(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let AP;class rr{constructor(e,t=(()=>(AP||(AP=new Ro(W3)),AP))()){this.value=e,this.children=t}static fromObject(e){let t=new rr(null);return Hi(e,(r,i)=>{t=t.set(new Nn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:bn(),value:this.value};if(en(e))return null;{const r=Xt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Yn(e),t);return null!=a?{path:vr(new Nn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(en(e))return this;{const t=Xt(e),r=this.children.get(t);return null!==r?r.subtree(Yn(e)):new rr(null)}}set(e,t){if(en(e))return new rr(t,this.children);{const r=Xt(e),a=(this.children.get(r)||new rr(null)).set(Yn(e),t),c=this.children.insert(r,a);return new rr(this.value,c)}}remove(e){if(en(e))return this.children.isEmpty()?new rr(null):new rr(null,this.children);{const t=Xt(e),r=this.children.get(t);if(r){const i=r.remove(Yn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new rr(null):new rr(this.value,a)}return this}}get(e){if(en(e))return this.value;{const t=Xt(e),r=this.children.get(t);return r?r.get(Yn(e)):null}}setTree(e,t){if(en(e))return t;{const r=Xt(e),a=(this.children.get(r)||new rr(null)).setTree(Yn(e),t);let c;return c=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new rr(this.value,c)}}fold(e){return this.fold_(bn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(vr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,bn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(en(e))return null;{const a=Xt(e),c=this.children.get(a);return c?c.findOnPath_(Yn(e),vr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,bn(),t)}foreachOnPath_(e,t,r){if(en(e))return this;{this.value&&r(t,this.value);const i=Xt(e),a=this.children.get(i);return a?a.foreachOnPath_(Yn(e),vr(t,i),r):new rr(null)}}foreach(e){this.foreach_(bn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(vr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class rc{constructor(e){this.writeTree_=e}static empty(){return new rc(new rr(null))}}function xI(n,e,t){if(en(e))return new rc(new rr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const c=io(i,e);return a=a.updateChild(c,t),new rc(n.writeTree_.set(i,a))}{const i=new rr(t),a=n.writeTree_.setTree(e,i);return new rc(a)}}}function MP(n,e,t){let r=n;return Hi(t,(i,a)=>{r=xI(r,vr(e,i),a)}),r}function YL(n,e){if(en(e))return rc.empty();{const t=n.writeTree_.setTree(e,new rr(null));return new rc(t)}}function xP(n,e){return null!=uy(n,e)}function uy(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(io(t.path,e)):null}function QL(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(nr,(r,i)=>{e.push(new on(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new on(r,i.value))}),e}function Ip(n,e){if(en(e))return n;{const t=uy(n,e);return new rc(null!=t?new rr(t):n.writeTree_.subtree(e))}}function RP(n){return n.writeTree_.isEmpty()}function nw(n,e){return JL(bn(),n.writeTree_,e)}function JL(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,k.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=JL(vr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(vr(n,".priority"),r)),t}}function xA(n,e){return rV(e,n)}function pz(n,e){if(n.snap)return Ka(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ka(vr(n.path,t),e))return!0;return!1}function mz(n){return n.visible}function XL(n,e,t){let r=rc.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const c=a.path;let f;if(a.snap)Ka(t,c)?(f=io(t,c),r=xI(r,f,a.snap)):Ka(c,t)&&(f=io(c,t),r=xI(r,bn(),a.snap.getChild(f)));else{if(!a.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(Ka(t,c))f=io(t,c),r=MP(r,f,a.children);else if(Ka(c,t))if(f=io(c,t),en(f))r=MP(r,bn(),a.children);else{const y=(0,k.DV)(a.children,Xt(f));if(y){const w=y.getChild(Yn(f));r=xI(r,bn(),w)}}}}}return r}function eV(n,e,t,r,i){if(r||i){const a=Ip(n.visibleWrites,e);return!i&&RP(a)?t:i||null!=t||xP(a,bn())?nw(XL(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(Ka(w.path,e)||Ka(e,w.path))},e),t||Wt.EMPTY_NODE):null}{const a=uy(n.visibleWrites,e);if(null!=a)return a;{const c=Ip(n.visibleWrites,e);return RP(c)?t:null!=t||xP(c,bn())?nw(c,t||Wt.EMPTY_NODE):null}}}function RA(n,e,t,r){return eV(n.writeTree,n.treePath,e,t,r)}function NP(n,e){return function yz(n,e,t){let r=Wt.EMPTY_NODE;const i=uy(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(nr,(a,c)=>{r=r.updateImmediateChild(a,c)}),r;if(t){const a=Ip(n.visibleWrites,e);return t.forEachChild(nr,(c,f)=>{const y=nw(Ip(a,new Nn(c)),f);r=r.updateImmediateChild(c,y)}),QL(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return QL(Ip(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function tV(n,e,t,r){return function _z(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=vr(e,t);if(xP(n.visibleWrites,a))return null;{const c=Ip(n.visibleWrites,a);return RP(c)?i.getChild(t):nw(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function NA(n,e){return function wz(n,e){return uy(n.visibleWrites,e)}(n.writeTree,vr(n.treePath,e))}function PP(n,e,t){return function vz(n,e,t,r){const i=vr(e,t),a=uy(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?nw(Ip(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function nV(n,e){return rV(vr(n.treePath,e),n.writeTree)}function rV(n,e){return{treePath:n,writeTree:e}}class bz{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,DI(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,bI(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Xv(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,DI(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const iV=new class Dz{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class OP{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Cp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return PP(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ay(this.viewCache_),a=function Iz(n,e,t,r,i,a){return function Ez(n,e,t,r,i,a,c){let f;const y=Ip(n.visibleWrites,e),w=uy(y,bn());if(null!=w)f=w;else{if(null==t)return[];f=nw(y,t)}if(f=f.withIndex(c),f.isEmpty()||f.isLeafNode())return[];{const D=[],M=c.getCompare(),P=a?f.getReverseIteratorFrom(r,c):f.getIteratorFrom(r,c);let j=P.getNext();for(;j&&D.length<i;)0!==M(j,r)&&D.push(j),j=P.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function sV(n,e,t,r,i,a){const c=e.eventCache;if(null!=NA(r,t))return e;{let f,y;if(en(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=ay(e),M=NP(r,w instanceof Wt?w:Wt.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),M,a)}else{const w=RA(r,ay(e));f=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=Xt(t);if(".priority"===w){(0,k.hu)(1===Ep(t),"Can't have a priority with additional path components");const D=c.getNode();y=e.serverCache.getNode();const M=tV(r,t,D,y);f=null!=M?n.filter.updatePriority(D,M):c.getNode()}else{const D=Yn(t);let M;if(c.isCompleteForChild(w)){y=e.serverCache.getNode();const P=tV(r,t,c.getNode(),y);M=null!=P?c.getNode().getImmediateChild(w).updateChild(D,P):c.getNode().getImmediateChild(w)}else M=PP(r,w,e.serverCache);f=null!=M?n.filter.updateChild(c.getNode(),w,M,D,i,a):c.getNode()}}return MI(e,f,c.isFullyInitialized()||en(t),n.filter.filtersNodes())}}function PA(n,e,t,r,i,a,c,f){const y=e.serverCache;let w;const D=c?n.filter:n.filter.getIndexedFilter();if(en(t))w=D.updateFullNode(y.getNode(),r,null);else if(D.filtersNodes()&&!y.isFiltered()){const j=y.getNode().updateChild(t,r);w=D.updateFullNode(y.getNode(),j,null)}else{const j=Xt(t);if(!y.isCompleteForPath(t)&&Ep(t)>1)return e;const K=Yn(t),ye=y.getNode().getImmediateChild(j).updateChild(K,r);w=".priority"===j?D.updatePriority(y.getNode(),ye):D.updateChild(y.getNode(),j,ye,K,iV,null)}const M=ZL(e,w,y.isFullyInitialized()||en(t),D.filtersNodes());return sV(n,M,t,i,new OP(i,M,a),f)}function kP(n,e,t,r,i,a,c){const f=e.eventCache;let y,w;const D=new OP(i,e,a);if(en(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,c),y=MI(e,w,!0,n.filter.filtersNodes());else{const M=Xt(t);if(".priority"===M)w=n.filter.updatePriority(e.eventCache.getNode(),r),y=MI(e,w,f.isFullyInitialized(),f.isFiltered());else{const P=Yn(t),j=f.getNode().getImmediateChild(M);let K;if(en(P))K=r;else{const ae=D.getCompleteChild(M);K=null!=ae?".priority"===hP(P)&&ae.getChild(kL(P)).isEmpty()?ae:ae.updateChild(P,r):Wt.EMPTY_NODE}y=j.equals(K)?e:MI(e,n.filter.updateChild(f.getNode(),M,K,P,D,c),f.isFullyInitialized(),n.filter.filtersNodes())}}return y}function oV(n,e){return n.eventCache.isCompleteForChild(e)}function aV(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function FP(n,e,t,r,i,a,c,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,y=e;w=en(t)?r:new rr(null).setTree(t,r);const D=e.serverCache.getNode();return w.children.inorderTraversal((M,P)=>{if(D.hasChild(M)){const K=aV(0,e.serverCache.getNode().getImmediateChild(M),P);y=PA(n,y,new Nn(M),K,i,a,c,f)}}),w.children.inorderTraversal((M,P)=>{const j=!e.serverCache.isCompleteForChild(M)&&null===P.value;if(!D.hasChild(M)&&!j){const ae=aV(0,e.serverCache.getNode().getImmediateChild(M),P);y=PA(n,y,new Nn(M),ae,i,a,c,f)}}),y}class Oz{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new wP(r.getIndex()),a=function KG(n){return n.loadsAllData()?new wP(n.getIndex()):n.hasLimit()?new qG(n):new TI(n)}(r);this.processor_=function Tz(n){return{filter:n}}(a);const c=t.serverCache,f=t.eventCache,y=i.updateFullNode(Wt.EMPTY_NODE,c.getNode(),null),w=a.updateFullNode(Wt.EMPTY_NODE,f.getNode(),null),D=new Cp(y,c.isFullyInitialized(),i.filtersNodes()),M=new Cp(w,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=AA(M,D),this.eventGenerator_=new sz(this.query_)}get query(){return this.query_}}function Lz(n,e){const t=ay(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!en(e)&&!t.getImmediateChild(Xt(e)).isEmpty())?t.getChild(e):null}function uV(n){return 0===n.eventRegistrations_.length}function cV(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const c=n.eventRegistrations_[a];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function lV(n,e,t,r){e.type===vl.MERGE&&null!==e.source.queryId&&((0,k.hu)(ay(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(MA(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function Az(n,e,t,r,i){const a=new bz;let c,f;if(t.type===vl.OVERWRITE){const w=t;w.source.fromUser?c=kP(n,e,w.path,w.snap,r,i,a):((0,k.hu)(w.source.fromServer,"Unknown source."),f=w.source.tagged||e.serverCache.isFiltered()&&!en(w.path),c=PA(n,e,w.path,w.snap,r,i,f,a))}else if(t.type===vl.MERGE){const w=t;w.source.fromUser?c=function xz(n,e,t,r,i,a,c){let f=e;return r.foreach((y,w)=>{const D=vr(t,y);oV(e,Xt(D))&&(f=kP(n,f,D,w,i,a,c))}),r.foreach((y,w)=>{const D=vr(t,y);oV(e,Xt(D))||(f=kP(n,f,D,w,i,a,c))}),f}(n,e,w.path,w.children,r,i,a):((0,k.hu)(w.source.fromServer,"Unknown source."),f=w.source.tagged||e.serverCache.isFiltered(),c=FP(n,e,w.path,w.children,r,i,f,a))}else if(t.type===vl.ACK_USER_WRITE){const w=t;c=w.revert?function Pz(n,e,t,r,i,a){let c;if(null!=NA(r,t))return e;{const f=new OP(r,e,i),y=e.eventCache.getNode();let w;if(en(t)||".priority"===Xt(t)){let D;if(e.serverCache.isFullyInitialized())D=RA(r,ay(e));else{const M=e.serverCache.getNode();(0,k.hu)(M instanceof Wt,"serverChildren would be complete if leaf node"),D=NP(r,M)}w=n.filter.updateFullNode(y,D,a)}else{const D=Xt(t);let M=PP(r,D,e.serverCache);null==M&&e.serverCache.isCompleteForChild(D)&&(M=y.getImmediateChild(D)),w=null!=M?n.filter.updateChild(y,D,M,Yn(t),f,a):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(y,D,Wt.EMPTY_NODE,Yn(t),f,a):y,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=RA(r,ay(e)),c.isLeafNode()&&(w=n.filter.updateFullNode(w,c,a)))}return c=e.serverCache.isFullyInitialized()||null!=NA(r,bn()),MI(e,w,c,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function Rz(n,e,t,r,i,a,c){if(null!=NA(i,t))return e;const f=e.serverCache.isFiltered(),y=e.serverCache;if(null!=r.value){if(en(t)&&y.isFullyInitialized()||y.isCompleteForPath(t))return PA(n,e,t,y.getNode().getChild(t),i,a,f,c);if(en(t)){let w=new rr(null);return y.getNode().forEachChild(_l,(D,M)=>{w=w.set(new Nn(D),M)}),FP(n,e,t,w,i,a,f,c)}return e}{let w=new rr(null);return r.foreach((D,M)=>{const P=vr(t,D);y.isCompleteForPath(P)&&(w=w.set(D,y.getNode().getChild(P)))}),FP(n,e,t,w,i,a,f,c)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==vl.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);c=function Nz(n,e,t,r,i){const a=e.serverCache;return sV(n,ZL(e,a.getNode(),a.isFullyInitialized()||en(t),a.isFiltered()),t,r,iV,i)}(n,e,t.path,r,a)}const y=a.getChanges();return function Mz(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=MA(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(zL(MA(e)))}}(e,c,y),{viewCache:c,changes:y}}(n.processor_,i,e,t,r);return function Sz(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,k.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,dV(n,a.changes,a.viewCache.eventCache.getNode(),null)}function dV(n,e,t,r){return function oz(n,e,t,r){const i=[],a=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(function WG(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),AI(n,i,"child_removed",e,r,t),AI(n,i,"child_added",e,r,t),AI(n,i,"child_moved",a,r,t),AI(n,i,"child_changed",e,r,t),AI(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let OA,FA;class hV{constructor(){this.views=new Map}}function LP(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,k.hu)(null!=a,"SyncTree gave us an op for an invalid query."),lV(a,e,t,r)}{let a=[];for(const c of n.views.values())a=a.concat(lV(c,e,t,r));return a}}function fV(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let f=RA(t,i?r:null),y=!1;f?y=!0:r instanceof Wt?(f=NP(t,r),y=!1):(f=Wt.EMPTY_NODE,y=!1);const w=AA(new Cp(f,y,!1),new Cp(r,i,!1));return new Oz(e,w)}return c}function pV(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function bp(n,e){let t=null;for(const r of n.views.values())t=t||Lz(r,e);return t}function gV(n,e){return e._queryParams.loadsAllData()?kA(n):n.views.get(e._queryIdentifier)}function mV(n,e){return null!=gV(n,e)}function Dp(n){return null!=kA(n)}function kA(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let qz=1;class yV{constructor(e){this.listenProvider_=e,this.syncPointTree_=new rr(null),this.pendingWriteTree_=function Cz(){return{visibleWrites:rc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function VP(n,e,t,r,i){return function lz(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=xI(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?rw(n,new oy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Tp(n,e,t=!1){const r=function hz(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function fz(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const f=n.allWrites[c];f.visible&&(c>=t&&pz(f,r.path)?i=!1:Ka(r.path,f.path)&&(a=!0)),c--}return!!i&&(a?(function gz(n){n.visibleWrites=XL(n.allWrites,mz,bn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=YL(n.visibleWrites,r.path):Hi(r.children,y=>{n.visibleWrites=YL(n.visibleWrites,vr(r.path,y))}),!0))}(n.pendingWriteTree_,e)){let a=new rr(null);return null!=r.snap?a=a.set(bn(),!0):Hi(r.children,c=>{a=a.set(new Nn(c),!0)}),rw(n,new SA(r.path,a,t))}return[]}function RI(n,e,t){return rw(n,new oy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function LA(n,e,t,r,i=!1){const a=e._path,c=n.syncPointTree_.get(a);let f=[];if(c&&("default"===e._queryIdentifier||mV(c,e))){const y=function Gz(n,e,t,r){const i=e._queryIdentifier,a=[];let c=[];const f=Dp(n);if("default"===i)for(const[y,w]of n.views.entries())c=c.concat(cV(w,t,r)),uV(w)&&(n.views.delete(y),w.query._queryParams.loadsAllData()||a.push(w.query));else{const y=n.views.get(i);y&&(c=c.concat(cV(y,t,r)),uV(y)&&(n.views.delete(i),y.query._queryParams.loadsAllData()||a.push(y.query)))}return f&&!Dp(n)&&a.push(new(function jz(){return(0,k.hu)(OA,"Reference.ts has not been loaded"),OA}())(e._repo,e._path)),{removed:a,events:c}}(c,e,t,r);(function Hz(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const w=y.removed;if(f=y.events,!i){const D=-1!==w.findIndex(P=>P._queryParams.loadsAllData()),M=n.syncPointTree_.findOnPath(a,(P,j)=>Dp(j));if(D&&!M){const P=n.syncPointTree_.subtree(a);if(!P.isEmpty()){const j=function e4(n){return n.fold((e,t,r)=>{if(t&&Dp(t))return[kA(t)];{let i=[];return t&&(i=pV(t)),Hi(r,(a,c)=>{i=i.concat(c)}),i}})}(P);for(let K=0;K<j.length;++K){const ae=j[K],ye=ae.query,Qe=EV(n,ae);n.listenProvider_.startListening(PI(ye),NI(n,ye),Qe.hashFn,Qe.onComplete)}}}!M&&w.length>0&&!r&&(D?n.listenProvider_.stopListening(PI(e),null):w.forEach(P=>{const j=n.queryToTagMap.get(UA(P));n.listenProvider_.stopListening(PI(P),j)}))}!function t4(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=UA(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,w)}return f}function _V(n,e,t,r){const i=BP(n,r);if(null!=i){const a=jP(i),c=a.path,f=a.queryId,y=io(c,e);return HP(n,c,new oy(SP(f),y,t))}return[]}function UP(n,e,t,r=!1){const i=e._path;let a=null,c=!1;n.syncPointTree_.foreachOnPath(i,(P,j)=>{const K=io(P,i);a=a||bp(j,K),c=c||Dp(j)});let y,f=n.syncPointTree_.get(i);f?(c=c||Dp(f),a=a||bp(f,bn())):(f=new hV,n.syncPointTree_=n.syncPointTree_.set(i,f)),null!=a?y=!0:(y=!1,a=Wt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((j,K)=>{const ae=bp(K,bn());ae&&(a=a.updateImmediateChild(j,ae))}));const w=mV(f,e);if(!w&&!e._queryParams.loadsAllData()){const P=UA(e);(0,k.hu)(!n.queryToTagMap.has(P),"View does not exist, but we have a tag");const j=function n4(){return qz++}();n.queryToTagMap.set(P,j),n.tagToQueryMap.set(j,P)}let M=function $z(n,e,t,r,i,a){const c=fV(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function Vz(n,e){n.eventRegistrations_.push(e)}(c,t),function Uz(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(nr,(a,c)=>{r.push(Xv(a,c))}),t.isFullyInitialized()&&r.push(zL(t.getNode())),dV(n,r,t.getNode(),e)}(c,t)}(f,e,t,xA(n.pendingWriteTree_,i),a,y);if(!w&&!c&&!r){const P=gV(f,e);M=M.concat(function r4(n,e,t){const r=e._path,i=NI(n,e),a=EV(n,t),c=n.listenProvider_.startListening(PI(e),i,a.hashFn,a.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!Dp(f.value),"If we're adding a query, it shouldn't be shadowed");else{const y=f.fold((w,D,M)=>{if(!en(w)&&D&&Dp(D))return[kA(D).query];{let P=[];return D&&(P=P.concat(pV(D).map(j=>j.query))),Hi(M,(j,K)=>{P=P.concat(K)}),P}});for(let w=0;w<y.length;++w){const D=y[w];n.listenProvider_.stopListening(PI(D),NI(n,D))}}return c}(n,e,P))}return M}function VA(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(c,f)=>{const w=bp(f,io(c,e));if(w)return w});return eV(i,e,a,t,!0)}function rw(n,e){return vV(e,n.syncPointTree_,null,xA(n.pendingWriteTree_,bn()))}function vV(n,e,t,r){if(en(n.path))return wV(n,e,t,r);{const i=e.get(bn());null==t&&null!=i&&(t=bp(i,bn()));let a=[];const c=Xt(n.path),f=n.operationForChild(c),y=e.children.get(c);if(y&&f){const w=t?t.getImmediateChild(c):null,D=nV(r,c);a=a.concat(vV(f,y,w,D))}return i&&(a=a.concat(LP(i,n,r,t))),a}}function wV(n,e,t,r){const i=e.get(bn());null==t&&null!=i&&(t=bp(i,bn()));let a=[];return e.children.inorderTraversal((c,f)=>{const y=t?t.getImmediateChild(c):null,w=nV(r,c),D=n.operationForChild(c);D&&(a=a.concat(wV(D,f,y,w)))}),i&&(a=a.concat(LP(i,n,r,t))),a}function EV(n,e){const t=e.query,r=NI(n,t);return{hashFn:()=>(function kz(n){return n.viewCache_.serverCache.getNode()}(e)||Wt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Qz(n,e,t){const r=BP(n,t);if(r){const i=jP(r),a=i.path,c=i.queryId,f=io(a,e);return HP(n,a,new SI(SP(c),f))}return[]}(n,t._path,r):function Yz(n,e){return rw(n,new SI({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function Z3(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return LA(n,t,null,a)}}}}function NI(n,e){const t=UA(e);return n.queryToTagMap.get(t)}function UA(n){return n._path.toString()+"$"+n._queryIdentifier}function BP(n,e){return n.tagToQueryMap.get(e)}function jP(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Nn(n.substr(0,e))}}function HP(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),LP(r,t,xA(n.pendingWriteTree_,e),null)}function PI(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Wz(){return(0,k.hu)(FA,"Reference.ts has not been loaded"),FA}())(n._repo,n._path):n}class $P{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new $P(t)}node(){return this.node_}}class GP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=vr(this.path_,e);return new GP(this.syncTree_,t)}node(){return VA(this.syncTree_,this.path_)}}const i4=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},CV=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?s4(n[".sv"],e,t):"object"==typeof n[".sv"]?o4(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},s4=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},o4=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},IV=function(n,e,t,r){return WP(e,new GP(t,n),r)},zP=function(n,e,t){return WP(n,new $P(e),t)};function WP(n,e,t){const r=n.getPriority().val(),i=CV(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const c=n,f=CV(c.getValue(),e,t);return f!==c.getValue()||i!==c.getPriority().val()?new Qv(f,Rr(i)):n}{const c=n;return a=c,i!==c.getPriority().val()&&(a=a.updatePriority(new Qv(i))),c.forEachChild(nr,(f,y)=>{const w=WP(y,e.getImmediateChild(f),t);w!==y&&(a=a.updateImmediateChild(f,w))}),a}}class qP{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function BA(n,e){let t=e instanceof Nn?e:new Nn(e),r=n,i=Xt(t);for(;null!==i;){const a=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new qP(i,r,a),t=Yn(t),i=Xt(t)}return r}function cy(n){return n.node.value}function KP(n,e){n.node.value=e,ZP(n)}function bV(n){return n.node.childCount>0}function jA(n,e){Hi(n.node.children,(t,r)=>{e(new qP(t,n,r))})}function DV(n,e,t,r){t&&!r&&e(n),jA(n,i=>{DV(i,e,!0,r)}),t&&r&&e(n)}function OI(n){return new Nn(null===n.parent?n.name:OI(n.parent)+"/"+n.name)}function ZP(n){null!==n.parent&&function c4(n,e,t){const r=function a4(n){return void 0===cy(n)&&!bV(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,ZP(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,ZP(n))}(n.parent,n.name,n)}const l4=/[\[\].#$\/\u0000-\u001F\u007F]/,d4=/[\[\].#$\u0000-\u001F\u007F]/,YP=10485760,HA=function(n){return"string"==typeof n&&0!==n.length&&!l4.test(n)},TV=function(n){return"string"==typeof n&&0!==n.length&&!d4.test(n)},kI=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!gA(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},wl=function(n,e,t,r){r&&void 0===e||FI((0,k.gK)(n,"value"),e,t)},FI=function(n,e,t){const r=t instanceof Nn?new AG(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+iy(r));if("function"==typeof e)throw new Error(n+"contains a function "+iy(r)+" with contents = "+e.toString());if(gA(e))throw new Error(n+"contains "+e.toString()+" "+iy(r));if("string"==typeof e&&e.length>YP/3&&(0,k.ug)(e)>YP)throw new Error(n+"contains a string greater than "+YP+" utf8 bytes "+iy(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Hi(e,(c,f)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(a=!0,!HA(c)))throw new Error(n+" contains an invalid key ("+c+") "+iy(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function MG(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),FL(n)})(r,c),FI(n,f,r),function xG(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+iy(r)+" in addition to actual children.")}},SV=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Hi(e,(c,f)=>{const y=new Nn(c);if(FI(i,f,vr(t,y)),".priority"===hP(y)&&!kI(f))throw new Error(i+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(y)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=wI(r);for(let c=0;c<a.length;c++)if((".priority"!==a[c]||c!==a.length-1)&&!HA(a[c]))throw new Error(n+"contains an invalid key ("+a[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(SG);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Ka(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},QP=function(n,e,t){if(!t||void 0!==e){if(gA(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!kI(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},LI=function(n,e,t,r){if(!(r&&void 0===t||HA(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},VI=function(n,e,t,r){if(!(r&&void 0===t||TV(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},p4=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),VI(n,e,t,r)},Za=function(n,e){if(".info"===Xt(e))throw new Error(n+" failed = Can't modify data under /.info/")},AV=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!HA(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),TV(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class g4{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function $A(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!fP(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function MV(n,e,t){$A(n,t),xV(n,r=>fP(r,e))}function sa(n,e,t){$A(n,t),xV(n,r=>Ka(r,e)||Ka(e,r))}function xV(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(m4(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function m4(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();ny&&ji("event: "+t.toString()),Zv(r)}}}const RV="repo_interrupt",y4=25;class _4{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new g4,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=TA(),this.transactionQueueTree_=new qP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function NV(n){const t=n.infoData_.getNode(new Nn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function UI(n){return i4({timestamp:NV(n)})}function PV(n,e,t,r,i){n.dataUpdateCount++;const a=new Nn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const y=(0,k.UI)(t,w=>Rr(w));c=function Jz(n,e,t,r){const i=BP(n,r);if(i){const a=jP(i),c=a.path,f=a.queryId,y=io(c,e),w=rr.fromObject(t);return HP(n,c,new tw(SP(f),y,w))}return[]}(n.serverSyncTree_,a,y,i)}else{const y=Rr(t);c=_V(n.serverSyncTree_,a,y,i)}else if(r){const y=(0,k.UI)(t,w=>Rr(w));c=function Zz(n,e,t){const r=rr.fromObject(t);return rw(n,new tw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,y)}else{const y=Rr(t);c=RI(n.serverSyncTree_,a,y)}let f=a;c.length>0&&(f=sw(n,a)),sa(n.eventQueue_,f,c)}function OV(n,e){JP(n,"connected",e),!1===e&&function I4(n){iw(n,"onDisconnectEvents");const e=UI(n),t=TA();bP(n.onDisconnect_,bn(),(i,a)=>{const c=IV(i,a,n.serverSyncTree_,e);ew(t,i,c)});let r=[];bP(t,bn(),(i,a)=>{r=r.concat(RI(n.serverSyncTree_,i,a));const c=nO(n,i);sw(n,c)}),n.onDisconnect_=TA(),sa(n.eventQueue_,bn(),r)}(n)}function JP(n,e,t){const r=new Nn("/.info/"+e),i=Rr(t);n.infoData_.updateSnapshot(r,i);const a=RI(n.infoSyncTree_,r,i);sa(n.eventQueue_,r,a)}function GA(n){return n.nextWriteId_++}function XP(n,e,t,r,i){iw(n,"set",{path:e.toString(),value:t,priority:r});const a=UI(n),c=Rr(t,r),f=VA(n.serverSyncTree_,e),y=zP(c,f,a),w=GA(n),D=VP(n.serverSyncTree_,e,y,w,!0);$A(n.eventQueue_,D),n.server_.put(e.toString(),c.val(!0),(P,j)=>{const K="ok"===P;K||Rs("set at "+e+" failed: "+P);const ae=Tp(n.serverSyncTree_,w,!K);sa(n.eventQueue_,e,ae),Sp(0,i,P,j)});const M=nO(n,e);sw(n,M),sa(n.eventQueue_,M,[])}function b4(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&IP(n.onDisconnect_,e),Sp(0,t,r,i)})}function kV(n,e,t,r){const i=Rr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,c)=>{"ok"===a&&ew(n.onDisconnect_,e,i),Sp(0,r,a,c)})}function eO(n,e,t){let r;r=".info"===Xt(e._path)?LA(n.infoSyncTree_,e,t):LA(n.serverSyncTree_,e,t),MV(n.eventQueue_,e._path,r)}function FV(n){n.persistentConnection_&&n.persistentConnection_.interrupt(RV)}function iw(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),ji(t,...e)}function Sp(n,e,t,r){e&&Zv(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const c=new Error(a);c.code=i,e(c)}})}function tO(n,e,t){return VA(n.serverSyncTree_,e,t)||Wt.EMPTY_NODE}function zA(n,e=n.transactionQueueTree_){if(e||WA(n,e),cy(e)){const t=VV(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function x4(n,e,t){const r=t.map(w=>w.currentWriteId),i=tO(n,e,r);let a=i;const c=i.hash();for(let w=0;w<t.length;w++){const D=t[w];(0,k.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const M=io(e,D.path);a=a.updateChild(M,D.currentOutputSnapshotRaw)}const f=a.val(!0),y=e;n.server_.put(y.toString(),f,w=>{iw(n,"transaction put response",{path:y.toString(),status:w});let D=[];if("ok"===w){const M=[];for(let P=0;P<t.length;P++)t[P].status=2,D=D.concat(Tp(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&M.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();WA(n,BA(n.transactionQueueTree_,e)),zA(n,n.transactionQueueTree_),sa(n.eventQueue_,e,D);for(let P=0;P<M.length;P++)Zv(M[P])}else{if("datastale"===w)for(let M=0;M<t.length;M++)t[M].status=3===t[M].status?4:0;else{Rs("transaction at "+y.toString()+" failed: "+w);for(let M=0;M<t.length;M++)t[M].status=4,t[M].abortReason=w}sw(n,e)}},c)}(n,OI(e),t)}else bV(e)&&jA(e,t=>{zA(n,t)})}function sw(n,e){const t=LV(n,e),r=OI(t);return function R4(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const y=e[f],w=io(t,y.path);let M,D=!1;if((0,k.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===y.status)D=!0,M=y.abortReason,i=i.concat(Tp(n.serverSyncTree_,y.currentWriteId,!0));else if(0===y.status)if(y.retryCount>=y4)D=!0,M="maxretry",i=i.concat(Tp(n.serverSyncTree_,y.currentWriteId,!0));else{const P=tO(n,y.path,c);y.currentInputSnapshot=P;const j=e[f].update(P.val());if(void 0!==j){FI("transaction failed: Data returned ",j,y.path);let K=Rr(j);"object"==typeof j&&null!=j&&(0,k.r3)(j,".priority")||(K=K.updatePriority(P.getPriority()));const ye=y.currentWriteId,Qe=UI(n),dt=zP(K,P,Qe);y.currentOutputSnapshotRaw=K,y.currentOutputSnapshotResolved=dt,y.currentWriteId=GA(n),c.splice(c.indexOf(ye),1),i=i.concat(VP(n.serverSyncTree_,y.path,dt,y.currentWriteId,y.applyLocally)),i=i.concat(Tp(n.serverSyncTree_,ye,!0))}else D=!0,M="nodata",i=i.concat(Tp(n.serverSyncTree_,y.currentWriteId,!0))}sa(n.eventQueue_,t,i),i=[],D&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===M?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(M),!1,null)))}WA(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)Zv(r[f]);zA(n,n.transactionQueueTree_)}(n,VV(n,t),r),r}function LV(n,e){let t,r=n.transactionQueueTree_;for(t=Xt(e);null!==t&&void 0===cy(r);)r=BA(r,t),t=Xt(e=Yn(e));return r}function VV(n,e){const t=[];return UV(n,e,t),t.sort((r,i)=>r.order-i.order),t}function UV(n,e,t){const r=cy(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);jA(e,i=>{UV(n,i,t)})}function WA(n,e){const t=cy(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,KP(e,t.length>0?t:void 0)}jA(e,r=>{WA(n,r)})}function nO(n,e){const t=OI(LV(n,e)),r=BA(n.transactionQueueTree_,e);return function u4(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{rO(n,i)}),rO(n,r),DV(r,i=>{rO(n,i)}),t}function rO(n,e){const t=cy(e);if(t){const r=[];let i=[],a=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,k.hu)(a===c-1,"All SENT items should be at beginning of queue."),a=c,t[c].status=3,t[c].abortReason="set"):((0,k.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(Tp(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===a?KP(e,void 0):t.length=a+1,sa(n.eventQueue_,OI(e),i);for(let c=0;c<r.length;c++)Zv(r[c])}}const iO=function(n,e){const t=O4(n),r=t.namespace;return"firebase.com"===t.domain&&yl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&yl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Rs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new oP(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Nn(t.pathString)}},O4=function(n){let e="",t="",r="",i="",a="",c=!0,f="https",y=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(f=n.substring(0,w-1),n=n.substring(w+2));let D=n.indexOf("/");-1===D&&(D=n.length);let M=n.indexOf("?");-1===M&&(M=n.length),e=n.substring(0,Math.min(D,M)),D<M&&(i=function N4(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(D,M)));const P=function P4(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Rs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,M)));w=e.indexOf(":"),w>=0?(c="https"===f||"wss"===f,y=parseInt(e.substring(w+1),10)):w=e.length;const j=e.slice(0,w);if("localhost"===j.toLowerCase())t="localhost";else if(j.split(".").length<=2)t=j;else{const K=e.indexOf(".");r=e.substring(0,K).toLowerCase(),t=e.substring(K+1),a=r}"ns"in P&&(a=P.ns)}return{host:e,port:y,domain:t,subdomain:r,secure:c,scheme:f,pathString:i,namespace:a}},BV="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",k4=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=BV.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let c=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=BV.charAt(e[i]);return(0,k.hu)(20===c.length,"nextPushId: Length should be 20."),c}}();class jV{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Wl)(this.snapshot.exportVal())}}class HV{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class sO{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class $V{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return b4(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Za("OnDisconnect.remove",this._path);const e=new k.BH;return kV(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Za("OnDisconnect.set",this._path),wl("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return kV(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Za("OnDisconnect.setWithPriority",this._path),wl("OnDisconnect.setWithPriority",e,this._path,!1),QP("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function D4(n,e,t,r,i){const a=Rr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(c,f)=>{"ok"===c&&ew(n.onDisconnect_,e,a),Sp(0,i,c,f)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Za("OnDisconnect.update",this._path),SV("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function T4(n,e,t,r){if((0,k.xb)(t))return ji("onDisconnect().update() called with empty data.  Don't do anything."),void Sp(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Hi(t,(c,f)=>{const y=Rr(f);ew(n.onDisconnect_,vr(e,c),y)}),Sp(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class No{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return en(this._path)?null:hP(this._path)}get ref(){return new Ya(this._repo,this._path)}get _queryIdentifier(){const e=qL(this._queryParams),t=iP(e);return"{}"===t?"default":t}get _queryObject(){return qL(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof No))return!1;const t=this._repo===e._repo,r=fP(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function TG(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function qA(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ap(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===_l){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==vp)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==fh)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===nr){if(null!=e&&!kI(e)||null!=t&&!kI(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof _P||n.getIndex()===vP,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function KA(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ya extends No{constructor(e,t){super(e,t,new IA,!1)}get parent(){const e=kL(this._path);return null===e?null:new Ya(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class ly{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Nn(e),r=dy(this.ref,e);return new ly(this._node.getChild(t),r,nr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new ly(i,dy(this.ref,r),nr)))}hasChild(e){const t=new Nn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function GV(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?dy(n._root,e):n._root}function zV(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=iO(e,n._repo.repoInfo_.nodeAdmin);AV("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&yl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),GV(n,t.path.toString())}function dy(n,e){return null===Xt((n=(0,k.m9)(n))._path)?p4("child","path",e,!1):VI("child","path",e,!1),new Ya(n._repo,vr(n._path,e))}function oO(n,e){n=(0,k.m9)(n),Za("set",n._path),wl("set",e,n._path,!1);const t=new k.BH;return XP(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function B4(n,e){SV("update",e,n._path,!1);const t=new k.BH;return function C4(n,e,t,r){iw(n,"update",{path:e.toString(),value:t});let i=!0;const a=UI(n),c={};if(Hi(t,(f,y)=>{i=!1,c[f]=IV(vr(e,f),Rr(y),n.serverSyncTree_,a)}),i)ji("update() called with empty data.  Don't do anything."),Sp(0,r,"ok",void 0);else{const f=GA(n),y=function Kz(n,e,t,r){!function dz(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=MP(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=rr.fromObject(t);return rw(n,new tw({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,f);$A(n.eventQueue_,y),n.server_.merge(e.toString(),t,(w,D)=>{const M="ok"===w;M||Rs("update at "+e+" failed: "+w);const P=Tp(n.serverSyncTree_,f,!M),j=P.length>0?sw(n,e):e;sa(n.eventQueue_,j,P),Sp(0,r,w,D)}),Hi(t,w=>{const D=nO(n,vr(e,w));sw(n,D)}),sa(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function j4(n){n=(0,k.m9)(n);const e=new sO(()=>{}),t=new BI(e);return function E4(n,e,t){const r=function Xz(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,D)=>{const M=io(w,t);r=r||bp(D,M)});let i=n.syncPointTree_.get(t);i?r=r||bp(i,bn()):(i=new hV,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,c=a?new Cp(r,!0,!1):null;return function Fz(n){return MA(n.viewCache_)}(fV(i,e,xA(n.pendingWriteTree_,e._path),a?c.getNode():Wt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Rr(i).withIndex(e._queryParams.getIndex());let c;if(UP(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())c=RI(n.serverSyncTree_,e._path,a);else{const f=NI(n.serverSyncTree_,e);c=_V(n.serverSyncTree_,e._path,a,f)}return sa(n.eventQueue_,e._path,c),LA(n.serverSyncTree_,e,t,null,!0),a},i=>(iw(n,"get for query "+(0,k.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new ly(r,new Ya(n._repo,n._path),n._queryParams.getIndex()))}class BI{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new jV("value",this,new ly(e.snapshotNode,new Ya(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new HV(this,e,t):null}matches(e){return e instanceof BI&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class ZA{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new HV(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=dy(new Ya(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new jV(e.type,this,new ly(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof ZA&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function jI(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const y=t,w=(D,M)=>{eO(n._repo,n,f),y(D,M)};w.userCallback=t.userCallback,w.context=t.context,t=w}const c=new sO(t,a||void 0),f="value"===e?new BI(c):new ZA(e,c);return function S4(n,e,t){let r;r=".info"===Xt(e._path)?UP(n.infoSyncTree_,e,t):UP(n.serverSyncTree_,e,t),MV(n.eventQueue_,e._path,r)}(n._repo,n,f),()=>eO(n._repo,n,f)}function aO(n,e,t,r){return jI(n,"value",e,t,r)}function WV(n,e,t,r){return jI(n,"child_added",e,t,r)}function qV(n,e,t,r){return jI(n,"child_changed",e,t,r)}function KV(n,e,t,r){return jI(n,"child_moved",e,t,r)}function ZV(n,e,t,r){return jI(n,"child_removed",e,t,r)}function YV(n,e,t){let r=null;const i=t?new sO(t):null;"value"===e?r=new BI(i):e&&(r=new ZA(e,i)),eO(n._repo,n,r)}class ic{}class QV extends ic{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wl("endAt",this._value,e._path,!0);const t=CP(e._queryParams,this._value,this._key);if(KA(t),Ap(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new No(e._repo,e._path,t,e._orderByCalled)}}class $4 extends ic{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wl("endBefore",this._value,e._path,!1);const t=function JG(n,e,t){let r;return r=CP(n,e,n.index_===_l||t?t:vp),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(KA(t),Ap(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new No(e._repo,e._path,t,e._orderByCalled)}}class JV extends ic{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wl("startAt",this._value,e._path,!0);const t=EP(e._queryParams,this._value,this._key);if(KA(t),Ap(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new No(e._repo,e._path,t,e._orderByCalled)}}class W4 extends ic{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){wl("startAfter",this._value,e._path,!1);const t=function QG(n,e,t){let r;return r=EP(n,e,n.index_===_l||t?t:fh),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(KA(t),Ap(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new No(e._repo,e._path,t,e._orderByCalled)}}class K4 extends ic{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new No(e._repo,e._path,function ZG(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class Y4 extends ic{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new No(e._repo,e._path,function YG(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class J4 extends ic{constructor(e){super(),this._path=e}_apply(e){qA(e,"orderByChild");const t=new Nn(this._path);if(en(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new _P(t),i=bA(e._queryParams,r);return Ap(i),new No(e._repo,e._path,i,!0)}}class e6 extends ic{_apply(e){qA(e,"orderByKey");const t=bA(e._queryParams,_l);return Ap(t),new No(e._repo,e._path,t,!0)}}class n6 extends ic{_apply(e){qA(e,"orderByPriority");const t=bA(e._queryParams,nr);return Ap(t),new No(e._repo,e._path,t,!0)}}class i6 extends ic{_apply(e){qA(e,"orderByValue");const t=bA(e._queryParams,vP);return Ap(t),new No(e._repo,e._path,t,!0)}}class o6 extends ic{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(wl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new QV(this._value,this._key)._apply(new JV(this._value,this._key)._apply(e))}}function sc(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function Bz(n){(0,k.hu)(!OA,"__referenceConstructor has already been defined"),OA=n})(Ya),function zz(n){(0,k.hu)(!FA,"__referenceConstructor has already been defined"),FA=n}(Ya);const uO={};function e2(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||yl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ji("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let y,w,c=iO(a,i),f=c.repoInfo;typeof process<"u"&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(y=!0,a=`http://${w}?ns=${f.namespace}`,c=iO(a,i),f=c.repoInfo):y=!c.repoInfo.secure;const D=i&&y?new vI(vI.OWNER):new tG(n.name,n.options,e);AV("Invalid Firebase Database URL",c),en(c.path)||yl("Database URL must point to the root of a Firebase Database (not including a child path).");const M=function d6(n,e,t,r){let i=uO[e.name];i||(i={},uO[e.name]=i);let a=i[n.toURLString()];return a&&yl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new _4(n,false,t,r),i[n.toURLString()]=a,a}(f,n,D,new eG(n.name,t));return new f6(M,n)}class f6{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function v4(n,e,t){if(n.stats_=cP(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new DA(n.repoInfo_,(r,i,a,c)=>{PV(n,r,i,a,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>OV(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new sy(n.repoInfo_,e,(r,i,a,c)=>{PV(n,r,i,a,c)},r=>{OV(n,r)},r=>{!function w4(n,e){Hi(e,(t,r)=>{JP(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function iG(n,e){const t=n.toString();return uP[t]||(uP[t]=e()),uP[t]}(n.repoInfo_,()=>new iz(n.stats_,n.server_)),n.infoData_=new XG,n.infoSyncTree_=new yV({startListening:(r,i,a,c)=>{let f=[];const y=n.infoData_.getNode(r._path);return y.isEmpty()||(f=RI(n.infoSyncTree_,r._path,y),setTimeout(()=>{c("ok")},0)),f},stopListening:()=>{}}),JP(n,"connected",!1),n.serverSyncTree_=new yV({startListening:(r,i,a,c)=>(n.server_.listen(r,a,i,(f,y)=>{const w=c(f,y);sa(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ya(this._repo,bn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function l6(n,e){const t=uO[e];(!t||t[n.key]!==n)&&yl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),FV(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&yl("Cannot call "+e+" on a deleted database.")}}function t2(){IL.IS_TRANSPORT_INITIALIZED&&Rs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function p6(){t2(),wp.forceDisallow()}function g6(){t2(),Yv.forceDisallow(),wp.forceAllow()}function _6(n,e){rL(n,e)}const w6={".sv":"timestamp"};class I6{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}sy.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},sy.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function v6(n){JF(Qo.SDK_VERSION),(0,Qo._registerComponent)(new Oa.wA("database",(e,{instanceIdentifier:t})=>e2(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Qo.registerVersion)(YF,"0.14.4",n),(0,Qo.registerVersion)(YF,"0.14.4","esm2017")}();const S6=new Vi.Yd("@firebase/database-compat"),r2=function(n){S6.warn("FIREBASE WARNING: "+n)};class x6{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,r2("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class R6{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Mp{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),VI("DataSnapshot.child","path",e,!1),new Mp(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),VI("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Mp(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new oa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ns{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const c=ns.getCancelAndContextArgs_("Query.on",r,i),f=(w,D)=>{t.call(c.context,new Mp(this.database,w),D)};f.userCallback=t,f.context=c.context;const y=null===(a=c.cancel)||void 0===a?void 0:a.bind(c.context);switch(e){case"value":return aO(this._delegate,f,y),t;case"child_added":return WV(this._delegate,f,y),t;case"child_removed":return ZV(this._delegate,f,y),t;case"child_changed":return qV(this._delegate,f,y),t;case"child_moved":return KV(this._delegate,f,y),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,YV(this._delegate,e,i)}else YV(this._delegate,e)}get(){return j4(this._delegate).then(e=>new Mp(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const a=ns.getCancelAndContextArgs_("Query.once",r,i),c=new k.BH,f=(w,D)=>{const M=new Mp(this.database,w);t&&t.call(a.context,M,D),c.resolve(M)};f.userCallback=t,f.context=a.context;const y=w=>{a.cancel&&a.cancel.call(a.context,w),c.reject(w)};switch(e){case"value":aO(this._delegate,f,y,{onlyOnce:!0});break;case"child_added":WV(this._delegate,f,y,{onlyOnce:!0});break;case"child_removed":ZV(this._delegate,f,y,{onlyOnce:!0});break;case"child_changed":qV(this._delegate,f,y,{onlyOnce:!0});break;case"child_moved":KV(this._delegate,f,y,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new ns(this.database,sc(this._delegate,function Z4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new K4(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new ns(this.database,sc(this._delegate,function Q4(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Y4(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new ns(this.database,sc(this._delegate,function X4(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return VI("orderByChild","path",n,!1),new J4(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new ns(this.database,sc(this._delegate,function t6(){return new e6}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new ns(this.database,sc(this._delegate,function r6(){return new n6}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new ns(this.database,sc(this._delegate,function s6(){return new i6}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new ns(this.database,sc(this._delegate,function z4(n=null,e){return LI("startAt","key",e,!0),new JV(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new ns(this.database,sc(this._delegate,function q4(n,e){return LI("startAfter","key",e,!0),new W4(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new ns(this.database,sc(this._delegate,function H4(n,e){return LI("endAt","key",e,!0),new QV(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new ns(this.database,sc(this._delegate,function G4(n,e){return LI("endBefore","key",e,!0),new $4(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new ns(this.database,sc(this._delegate,function a6(n,e){return LI("equalTo","key",e,!0),new o6(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ns))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new oa(this.database,new Ya(this._delegate._repo,this._delegate._path))}}class oa extends ns{constructor(e,t){super(e,new No(t._repo,t._path,new IA,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new oa(this.database,dy(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new oa(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new oa(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=oO(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,r2("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Za("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=B4(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function U4(n,e,t){if(Za("setWithPriority",n._path),wl("setWithPriority",e,n._path,!1),QP("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return XP(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function L4(n){return Za("remove",n._path),oO(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function b6(n,e,t){var r;if(n=(0,k.m9)(n),Za("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new k.BH,f=aO(n,()=>{});return function M4(n,e,t,r,i,a){iw(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:eL(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=tO(n,e,void 0);c.currentInputSnapshot=f;const y=c.update(f.val());if(void 0===y)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{FI("transaction failed: Data returned ",y,c.path),c.status=0;const w=BA(n.transactionQueueTree_,e),D=cy(w)||[];let M;D.push(c),KP(w,D),"object"==typeof y&&null!==y&&(0,k.r3)(y,".priority")?(M=(0,k.DV)(y,".priority"),(0,k.hu)(kI(M),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):M=(VA(n.serverSyncTree_,e)||Wt.EMPTY_NODE).getPriority().val();const P=UI(n),j=Rr(y,M),K=zP(j,f,P);c.currentOutputSnapshotRaw=j,c.currentOutputSnapshotResolved=K,c.currentWriteId=GA(n);const ae=VP(n.serverSyncTree_,e,K,c.currentWriteId,c.applyLocally);sa(n.eventQueue_,e,ae),zA(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(y,w,D)=>{let M=null;y?a.reject(y):(M=new ly(D,new Ya(n._repo,n._path),nr),a.resolve(new I6(w,M)))},f,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new R6(a.committed,new Mp(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function V4(n,e){n=(0,k.m9)(n),Za("setPriority",n._path),QP("setPriority",e,!1);const t=new k.BH;return XP(n._repo,vr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function F4(n,e){n=(0,k.m9)(n),Za("push",n._path),wl("push",e,n._path,!0);const t=NV(n._repo),r=k4(t),i=dy(n,r),a=dy(n,r);let c;return c=null!=e?oO(a,e).then(()=>a):Promise.resolve(a),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new oa(this.database,c));t&&i.then(()=>t(null),c=>t(c));const a=new oa(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Za("Reference.onDisconnect",this._delegate._path),new x6(new $V(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class HI{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:p6,forceLongPolling:g6}}useEmulator(e,t,r={}){!function n2(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&yl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&yl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new vI(vI.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);a=new vI(c)}!function c6(n,e,t,r){n.repoInfo_=new oP(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof oa){const t=zV(this._delegate,e.toString());return new oa(this,t)}{const t=GV(this._delegate,e);return new oa(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=zV(this._delegate,e);return new oa(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function m6(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),FV(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function y6(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function A4(n){n.persistentConnection_&&n.persistentConnection_.resume(RV)}(n._repo)}(this._delegate)}}HI.ServerValue={TIMESTAMP:function E6(){return w6}(),increment:n=>function C6(n){return{".sv":{increment:n}}}(n)};var P6=Object.freeze({__proto__:null,initStandalone:function N6({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){JF(t);const c=new Oa.zt("auth-internal",new Oa.H0("database-standalone"));return c.setComponent(new Oa.wA("auth-internal",()=>r,"PRIVATE")),{instance:new HI(e2(n,c,void 0,e,a),n),namespace:i}}});const O6=HI.ServerValue;function i2(n){return null==n}function s2(n){return"function"==typeof n.set}function o2(n,e){return s2(e)?e:n.ref(e)}function a2(n,e){if(function F6(n){return"string"==typeof n}(n))return e.stringCase();if(s2(n))return e.firebaseCase();if(function L6(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function $I(n,e,t="on",r=zy.z){return new fr.y(i=>{let a=null;return a=n[t](e,(c,f)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:f})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,vt.U)(i=>{const{snapshot:a,prevKey:c}=i;let f=null;return a.exists()&&(f=a.key),{type:e,payload:a,prevKey:c,key:f}}),(0,Sk.B)())}function u2(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function B6(n,e){const{payload:t,prevKey:r,key:i}=e,a=u2(n,i),c=function U6(n,e){if(i2(e))return 0;{const t=u2(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(y=>{const w={payload:y,type:"value",prevKey:f,key:y.key};return f=y.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const f=n[a-1];(f&&f.key||null)!==r&&(n=n.filter(y=>y.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===i?e:f);case"child_moved":if(a>-1){const f=n.splice(a,1)[0];return(n=n.slice()).splice(c,0,f),n}return n;default:return n}}function c2(n){return(i2(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function l2(n,e,t){return function V6(n,e,t){return $I(n,"value","once",t).pipe((0,Qr.w)(r=>{const i=[(0,Et.of)(r)];return e.forEach(a=>i.push($I(n,a,"on",t))),(0,AR.T)(...i).pipe(Ru(B6,[]))}),(0,Cf.x)())}(n,e=c2(e),t)}function d2(n,e,t){const r=(e=c2(e)).map(i=>$I(n,i,"on",t));return(0,AR.T)(...r)}function h2(n,e){return function(r,i){return a2(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function G6(n){return function(t){return t?a2(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function f2(n,e){return function(){return $I(n,"value","on",e)}}!function k6(n){n.INTERNAL.registerComponent(new Oa.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new HI(i,r)},"PUBLIC").setServiceProps({Reference:oa,Query:ns,Database:HI,DataSnapshot:Mp,enableLogging:_6,INTERNAL:P6,ServerValue:O6}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(Wy.Z);const q6=new h.OlP("angularfire2.realtimeDatabaseURL"),K6=new h.OlP("angularfire2.database.use-emulator");let Z6=(()=>{class n{constructor(t,r,i,a,c,f,y,w,D,M,P,j,K,ae,ye){this.schedulers=f;const Qe=y,dt=(0,Mr.on)(t,c,r);w&&iN(dt,c,D,P,j,K,M,ae),this.database=(0,Mr.cc)(`${dt.name}.database.${i}`,"AngularFireDatabase",dt.name,()=>{const Xe=c.runOutsideAngular(()=>dt.database(i||void 0));return Qe&&Xe.useEmulator(...Qe),Xe},[Qe])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>o2(this.database,t));let a=i;return r&&(a=r(i)),function z6(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:h2(r,"update"),set:h2(r,"set"),push:i=>r.push(i),remove:G6(r),snapshotChanges:i=>l2(n,i,t).pipe(Kn.iC),stateChanges:i=>d2(n,i,t).pipe(Kn.iC),auditTrail:i=>function j6(n,e,t){return function $6(n,e,t){return function H6(n,e){return $I(n,"value","on",e).pipe((0,vt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(hF(e),(0,vt.U)(([i,a])=>{const c=i.lastKeyToLoad,f=a.map(y=>y.key);return{actions:a,lastKeyToLoad:c,loadedKeys:f}}),function j3(n){return(0,Yi.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,gn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,vt.U)(i=>i.actions))}(n,d2(n,e).pipe(Ru((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Kn.iC),valueChanges:(i,a)=>l2(n,i,t).pipe((0,vt.U)(f=>f.map(y=>a&&a.idField?Object.assign(Object.assign({},y.payload.val()),{[a.idField]:y.key}):y.payload.val())),Kn.iC)}}(a,this)}object(t){return function W6(n,e){return{query:n,snapshotChanges:()=>f2(n,e.schedulers.outsideAngular)().pipe(Kn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>f2(n,e.schedulers.outsideAngular)().pipe(Kn.iC,(0,vt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>o2(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Mr.Dh),h.LFG(Mr.xv,8),h.LFG(q6,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Kn.HU),h.LFG(K6,8),h.LFG(sN,8),h.LFG(JR,8),h.LFG(XR,8),h.LFG(eN,8),h.LFG(tN,8),h.LFG(nN,8),h.LFG(rN,8),h.LFG(GS,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Y6=(()=>{class n{constructor(){bB.Z.registerVersion("angularfire",Kn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Z6]}),n})();const Q6_firebaseConfig={apiKey:"AIzaSyAcxRwg_2tR7RjoyR459OIgmtm5EZS2i9E",authDomain:"mybase-9c733.firebaseapp.com",projectId:"mybase-9c733",storageBucket:"mybase-9c733.appspot.com",messagingSenderId:"669232975797",appId:"1:669232975797:web:23a20dfd01b32db3d053fc",measurementId:"G-KQ5P85YXMN"};let J6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[o1]}),n.\u0275inj=h.cJS({providers:[KC,ai,ys,uN],imports:[hu,Cd,Id,ib,x$,B3.forRoot({},{}),Mr.hO.initializeApp(Q6_firebaseConfig),Y6]}),n})();mc().bootstrapModule(J6).catch(n=>console.error(n))},5619:(at,be,O)=>{O.d(be,{X:()=>J});var h=O(8645);class J extends h.x{constructor(ee){super(),this._value=ee}get value(){return this.getValue()}_subscribe(ee){const ne=super._subscribe(ee);return!ne.closed&&ee.next(this._value),ne}getValue(){const{hasError:ee,thrownError:ne,_value:ge}=this;if(ee)throw ne;return this._throwIfClosed(),ge}next(ee){super.next(this._value=ee)}}},5592:(at,be,O)=>{O.d(be,{y:()=>Se});var h=O(305),J=O(7394),F=O(4850),ee=O(8407),ne=O(2653),ge=O(4674),me=O(1441);let Se=(()=>{class X{constructor(Re){Re&&(this._subscribe=Re)}lift(Re){const We=new X;return We.source=this,We.operator=Re,We}subscribe(Re,We,Oe){const $e=function G(X){return X&&X instanceof h.Lv||function U(X){return X&&(0,ge.m)(X.next)&&(0,ge.m)(X.error)&&(0,ge.m)(X.complete)}(X)&&(0,J.Nn)(X)}(Re)?Re:new h.Hp(Re,We,Oe);return(0,me.x)(()=>{const{operator:Le,source:_t}=this;$e.add(Le?Le.call($e,_t):_t?this._subscribe($e):this._trySubscribe($e))}),$e}_trySubscribe(Re){try{return this._subscribe(Re)}catch(We){Re.error(We)}}forEach(Re,We){return new(We=ue(We))((Oe,$e)=>{const Le=new h.Hp({next:_t=>{try{Re(_t)}catch(ht){$e(ht),Le.unsubscribe()}},error:$e,complete:Oe});this.subscribe(Le)})}_subscribe(Re){var We;return null===(We=this.source)||void 0===We?void 0:We.subscribe(Re)}[F.L](){return this}pipe(...Re){return(0,ee.U)(Re)(this)}toPromise(Re){return new(Re=ue(Re))((We,Oe)=>{let $e;this.subscribe(Le=>$e=Le,Le=>Oe(Le),()=>We($e))})}}return X.create=Be=>new X(Be),X})();function ue(X){var Be;return null!==(Be=X??ne.config.Promise)&&void 0!==Be?Be:Promise}},8645:(at,be,O)=>{O.d(be,{x:()=>me});var h=O(5592),J=O(7394);const ee=(0,O(2306).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=O(9039),ge=O(1441);let me=(()=>{class ue extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const X=new Se(this,this);return X.operator=G,X}_throwIfClosed(){if(this.closed)throw new ee}next(G){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(G)}})}error(G){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:X}=this;for(;X.length;)X.shift().error(G)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:X,isStopped:Be,observers:Re}=this;return X||Be?J.Lc:(this.currentObservers=null,Re.push(G),new J.w0(()=>{this.currentObservers=null,(0,ne.P)(Re,G)}))}_checkFinalizedStatuses(G){const{hasError:X,thrownError:Be,isStopped:Re}=this;X?G.error(Be):Re&&G.complete()}asObservable(){const G=new h.y;return G.source=this,G}}return ue.create=(U,G)=>new Se(U,G),ue})();class Se extends me{constructor(U,G){super(),this.destination=U,this.source=G}next(U){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===X||X.call(G,U)}error(U){var G,X;null===(X=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===X||X.call(G,U)}complete(){var U,G;null===(G=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===G||G.call(U)}_subscribe(U){var G,X;return null!==(X=null===(G=this.source)||void 0===G?void 0:G.subscribe(U))&&void 0!==X?X:J.Lc}}},305:(at,be,O)=>{O.d(be,{Hp:()=>Oe,Lv:()=>X});var h=O(4674),J=O(7394),F=O(2653),ee=O(3894),ne=O(2420);const ge=ue("C",void 0,void 0);function ue(ie,_e,te){return{kind:ie,value:_e,error:te}}var U=O(7599),G=O(1441);class X extends J.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,J.Nn)(_e)&&_e.add(this)):this.destination=ht}static create(_e,te,Te){return new Oe(_e,te,Te)}next(_e){this.isStopped?_t(function Se(ie){return ue("N",ie,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?_t(function me(ie){return ue("E",void 0,ie)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?_t(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Be=Function.prototype.bind;function Re(ie,_e){return Be.call(ie,_e)}class We{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:te}=this;if(te.next)try{te.next(_e)}catch(Te){$e(Te)}}error(_e){const{partialObserver:te}=this;if(te.error)try{te.error(_e)}catch(Te){$e(Te)}else $e(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(te){$e(te)}}}class Oe extends X{constructor(_e,te,Te){let Fe;if(super(),(0,h.m)(_e)||!_e)Fe={next:_e??void 0,error:te??void 0,complete:Te??void 0};else{let Ge;this&&F.config.useDeprecatedNextContext?(Ge=Object.create(_e),Ge.unsubscribe=()=>this.unsubscribe(),Fe={next:_e.next&&Re(_e.next,Ge),error:_e.error&&Re(_e.error,Ge),complete:_e.complete&&Re(_e.complete,Ge)}):Fe=_e}this.destination=new We(Fe)}}function $e(ie){F.config.useDeprecatedSynchronousErrorHandling?(0,G.O)(ie):(0,ee.h)(ie)}function _t(ie,_e){const{onStoppedNotification:te}=F.config;te&&U.z.setTimeout(()=>te(ie,_e))}const ht={closed:!0,next:ne.Z,error:function Le(ie){throw ie},complete:ne.Z}},7394:(at,be,O)=>{O.d(be,{Lc:()=>ge,w0:()=>ne,Nn:()=>me});var h=O(4674);const F=(0,O(2306).d)(ue=>function(G){ue(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((X,Be)=>`${Be+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var ee=O(9039);class ne{constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Re of G)Re.remove(this);else G.remove(this);const{initialTeardown:X}=this;if((0,h.m)(X))try{X()}catch(Re){U=Re instanceof F?Re.errors:[Re]}const{_finalizers:Be}=this;if(Be){this._finalizers=null;for(const Re of Be)try{Se(Re)}catch(We){U=U??[],We instanceof F?U=[...U,...We.errors]:U.push(We)}}if(U)throw new F(U)}}add(U){var G;if(U&&U!==this)if(this.closed)Se(U);else{if(U instanceof ne){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(U)}}_hasParent(U){const{_parentage:G}=this;return G===U||Array.isArray(G)&&G.includes(U)}_addParent(U){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(U),G):G?[G,U]:U}_removeParent(U){const{_parentage:G}=this;G===U?this._parentage=null:Array.isArray(G)&&(0,ee.P)(G,U)}remove(U){const{_finalizers:G}=this;G&&(0,ee.P)(G,U),U instanceof ne&&U._removeParent(this)}}ne.EMPTY=(()=>{const ue=new ne;return ue.closed=!0,ue})();const ge=ne.EMPTY;function me(ue){return ue instanceof ne||ue&&"closed"in ue&&(0,h.m)(ue.remove)&&(0,h.m)(ue.add)&&(0,h.m)(ue.unsubscribe)}function Se(ue){(0,h.m)(ue)?ue():ue.unsubscribe()}},2653:(at,be,O)=>{O.d(be,{config:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(at,be,O)=>{O.d(be,{E:()=>J});const J=new(O(5592).y)(ne=>ne.complete())},2459:(at,be,O)=>{O.d(be,{D:()=>_e});var h=O(4829),J=O(3093),F=O(5137),ge=O(5592),Se=O(4971),ue=O(4674),U=O(7103);function X(te,Te){if(!te)throw new Error("Iterable cannot be null");return new ge.y(Fe=>{(0,U.f)(Fe,Te,()=>{const Ge=te[Symbol.asyncIterator]();(0,U.f)(Fe,Te,()=>{Ge.next().then(le=>{le.done?Fe.complete():Fe.next(le.value)})},0,!0)})})}var Be=O(8382),Re=O(4026),We=O(4266),Oe=O(3664),$e=O(5726),Le=O(9853),_t=O(541);function _e(te,Te){return Te?function ie(te,Te){if(null!=te){if((0,Be.c)(te))return function ee(te,Te){return(0,h.Xf)(te).pipe((0,F.R)(Te),(0,J.Q)(Te))}(te,Te);if((0,We.z)(te))return function me(te,Te){return new ge.y(Fe=>{let Ge=0;return Te.schedule(function(){Ge===te.length?Fe.complete():(Fe.next(te[Ge++]),Fe.closed||this.schedule())})})}(te,Te);if((0,Re.t)(te))return function ne(te,Te){return(0,h.Xf)(te).pipe((0,F.R)(Te),(0,J.Q)(Te))}(te,Te);if((0,$e.D)(te))return X(te,Te);if((0,Oe.T)(te))return function G(te,Te){return new ge.y(Fe=>{let Ge;return(0,U.f)(Fe,Te,()=>{Ge=te[Se.h](),(0,U.f)(Fe,Te,()=>{let le,wt;try{({value:le,done:wt}=Ge.next())}catch(jt){return void Fe.error(jt)}wt?Fe.complete():Fe.next(le)},0,!0)}),()=>(0,ue.m)(Ge?.return)&&Ge.return()})}(te,Te);if((0,_t.L)(te))return function ht(te,Te){return X((0,_t.Q)(te),Te)}(te,Te)}throw(0,Le.z)(te)}(te,Te):(0,h.Xf)(te)}},4829:(at,be,O)=>{O.d(be,{Xf:()=>Be});var h=O(7582),J=O(4266),F=O(4026),ee=O(5592),ne=O(8382),ge=O(5726),me=O(9853),Se=O(3664),ue=O(541),U=O(4674),G=O(3894),X=O(4850);function Be(ie){if(ie instanceof ee.y)return ie;if(null!=ie){if((0,ne.c)(ie))return function Re(ie){return new ee.y(_e=>{const te=ie[X.L]();if((0,U.m)(te.subscribe))return te.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ie);if((0,J.z)(ie))return function We(ie){return new ee.y(_e=>{for(let te=0;te<ie.length&&!_e.closed;te++)_e.next(ie[te]);_e.complete()})}(ie);if((0,F.t)(ie))return function Oe(ie){return new ee.y(_e=>{ie.then(te=>{_e.closed||(_e.next(te),_e.complete())},te=>_e.error(te)).then(null,G.h)})}(ie);if((0,ge.D)(ie))return Le(ie);if((0,Se.T)(ie))return function $e(ie){return new ee.y(_e=>{for(const te of ie)if(_e.next(te),_e.closed)return;_e.complete()})}(ie);if((0,ue.L)(ie))return function _t(ie){return Le((0,ue.Q)(ie))}(ie)}throw(0,me.z)(ie)}function Le(ie){return new ee.y(_e=>{(function ht(ie,_e){var te,Te,Fe,Ge;return(0,h.mG)(this,void 0,void 0,function*(){try{for(te=(0,h.KL)(ie);!(Te=yield te.next()).done;)if(_e.next(Te.value),_e.closed)return}catch(le){Fe={error:le}}finally{try{Te&&!Te.done&&(Ge=te.return)&&(yield Ge.call(te))}finally{if(Fe)throw Fe.error}}_e.complete()})})(ie,_e).catch(te=>_e.error(te))})}},3019:(at,be,O)=>{O.d(be,{T:()=>ge});var h=O(7537),J=O(4829),F=O(6232),ee=O(4564),ne=O(2459);function ge(...me){const Se=(0,ee.yG)(me),ue=(0,ee._6)(me,1/0),U=me;return U.length?1===U.length?(0,J.Xf)(U[0]):(0,h.J)(ue)((0,ne.D)(U,Se)):F.E}},2096:(at,be,O)=>{O.d(be,{of:()=>F});var h=O(4564),J=O(2459);function F(...ee){const ne=(0,h.yG)(ee);return(0,J.D)(ee,ne)}},8251:(at,be,O)=>{O.d(be,{x:()=>J});var h=O(305);function J(ee,ne,ge,me,Se){return new F(ee,ne,ge,me,Se)}class F extends h.Lv{constructor(ne,ge,me,Se,ue,U){super(ne),this.onFinalize=ue,this.shouldUnsubscribe=U,this._next=ge?function(G){try{ge(G)}catch(X){ne.error(X)}}:super._next,this._error=Se?function(G){try{Se(G)}catch(X){ne.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(G){ne.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(ne=this.onFinalize)||void 0===ne||ne.call(this))}}}},3997:(at,be,O)=>{O.d(be,{x:()=>ee});var h=O(2737),J=O(9360),F=O(8251);function ee(ge,me=h.y){return ge=ge??ne,(0,J.e)((Se,ue)=>{let U,G=!0;Se.subscribe((0,F.x)(ue,X=>{const Be=me(X);(G||!ge(U,Be))&&(G=!1,U=Be,ue.next(X))}))})}function ne(ge,me){return ge===me}},7398:(at,be,O)=>{O.d(be,{U:()=>F});var h=O(9360),J=O(8251);function F(ee,ne){return(0,h.e)((ge,me)=>{let Se=0;ge.subscribe((0,J.x)(me,ue=>{me.next(ee.call(ne,ue,Se++))}))})}},7537:(at,be,O)=>{O.d(be,{J:()=>F});var h=O(1631),J=O(2737);function F(ee=1/0){return(0,h.z)(J.y,ee)}},1631:(at,be,O)=>{O.d(be,{z:()=>Se});var h=O(7398),J=O(4829),F=O(9360),ee=O(7103),ne=O(8251),me=O(4674);function Se(ue,U,G=1/0){return(0,me.m)(U)?Se((X,Be)=>(0,h.U)((Re,We)=>U(X,Re,Be,We))((0,J.Xf)(ue(X,Be))),G):("number"==typeof U&&(G=U),(0,F.e)((X,Be)=>function ge(ue,U,G,X,Be,Re,We,Oe){const $e=[];let Le=0,_t=0,ht=!1;const ie=()=>{ht&&!$e.length&&!Le&&U.complete()},_e=Te=>Le<X?te(Te):$e.push(Te),te=Te=>{Re&&U.next(Te),Le++;let Fe=!1;(0,J.Xf)(G(Te,_t++)).subscribe((0,ne.x)(U,Ge=>{Be?.(Ge),Re?_e(Ge):U.next(Ge)},()=>{Fe=!0},void 0,()=>{if(Fe)try{for(Le--;$e.length&&Le<X;){const Ge=$e.shift();We?(0,ee.f)(U,We,()=>te(Ge)):te(Ge)}ie()}catch(Ge){U.error(Ge)}}))};return ue.subscribe((0,ne.x)(U,_e,()=>{ht=!0,ie()})),()=>{Oe?.()}}(X,Be,ue,G)))}},3093:(at,be,O)=>{O.d(be,{Q:()=>ee});var h=O(7103),J=O(9360),F=O(8251);function ee(ne,ge=0){return(0,J.e)((me,Se)=>{me.subscribe((0,F.x)(Se,ue=>(0,h.f)(Se,ne,()=>Se.next(ue),ge),()=>(0,h.f)(Se,ne,()=>Se.complete(),ge),ue=>(0,h.f)(Se,ne,()=>Se.error(ue),ge)))})}},3020:(at,be,O)=>{O.d(be,{B:()=>ne});var h=O(4829),J=O(8645),F=O(305),ee=O(9360);function ne(me={}){const{connector:Se=(()=>new J.x),resetOnError:ue=!0,resetOnComplete:U=!0,resetOnRefCountZero:G=!0}=me;return X=>{let Be,Re,We,Oe=0,$e=!1,Le=!1;const _t=()=>{Re?.unsubscribe(),Re=void 0},ht=()=>{_t(),Be=We=void 0,$e=Le=!1},ie=()=>{const _e=Be;ht(),_e?.unsubscribe()};return(0,ee.e)((_e,te)=>{Oe++,!Le&&!$e&&_t();const Te=We=We??Se();te.add(()=>{Oe--,0===Oe&&!Le&&!$e&&(Re=ge(ie,G))}),Te.subscribe(te),!Be&&Oe>0&&(Be=new F.Hp({next:Fe=>Te.next(Fe),error:Fe=>{Le=!0,_t(),Re=ge(ht,ue,Fe),Te.error(Fe)},complete:()=>{$e=!0,_t(),Re=ge(ht,U),Te.complete()}}),(0,h.Xf)(_e).subscribe(Be))})(X)}}function ge(me,Se,...ue){if(!0===Se)return void me();if(!1===Se)return;const U=new F.Hp({next:()=>{U.unsubscribe(),me()}});return(0,h.Xf)(Se(...ue)).subscribe(U)}},5137:(at,be,O)=>{O.d(be,{R:()=>J});var h=O(9360);function J(F,ee=0){return(0,h.e)((ne,ge)=>{ge.add(F.schedule(()=>ne.subscribe(ge),ee))})}},4664:(at,be,O)=>{O.d(be,{w:()=>ee});var h=O(4829),J=O(9360),F=O(8251);function ee(ne,ge){return(0,J.e)((me,Se)=>{let ue=null,U=0,G=!1;const X=()=>G&&!ue&&Se.complete();me.subscribe((0,F.x)(Se,Be=>{ue?.unsubscribe();let Re=0;const We=U++;(0,h.Xf)(ne(Be,We)).subscribe(ue=(0,F.x)(Se,Oe=>Se.next(ge?ge(Be,Oe,We,Re++):Oe),()=>{ue=null,X()}))},()=>{G=!0,X()}))})}},9397:(at,be,O)=>{O.d(be,{b:()=>ne});var h=O(4674),J=O(9360),F=O(8251),ee=O(2737);function ne(ge,me,Se){const ue=(0,h.m)(ge)||me||Se?{next:ge,error:me,complete:Se}:ge;return ue?(0,J.e)((U,G)=>{var X;null===(X=ue.subscribe)||void 0===X||X.call(ue);let Be=!0;U.subscribe((0,F.x)(G,Re=>{var We;null===(We=ue.next)||void 0===We||We.call(ue,Re),G.next(Re)},()=>{var Re;Be=!1,null===(Re=ue.complete)||void 0===Re||Re.call(ue),G.complete()},Re=>{var We;Be=!1,null===(We=ue.error)||void 0===We||We.call(ue,Re),G.error(Re)},()=>{var Re,We;Be&&(null===(Re=ue.unsubscribe)||void 0===Re||Re.call(ue)),null===(We=ue.finalize)||void 0===We||We.call(ue)}))}):ee.y}},1954:(at,be,O)=>{O.d(be,{o:()=>ne});var h=O(7394);class J extends h.w0{constructor(me,Se){super()}schedule(me,Se=0){return this}}const F={setInterval(ge,me,...Se){const{delegate:ue}=F;return ue?.setInterval?ue.setInterval(ge,me,...Se):setInterval(ge,me,...Se)},clearInterval(ge){const{delegate:me}=F;return(me?.clearInterval||clearInterval)(ge)},delegate:void 0};var ee=O(9039);class ne extends J{constructor(me,Se){super(me,Se),this.scheduler=me,this.work=Se,this.pending=!1}schedule(me,Se=0){var ue;if(this.closed)return this;this.state=me;const U=this.id,G=this.scheduler;return null!=U&&(this.id=this.recycleAsyncId(G,U,Se)),this.pending=!0,this.delay=Se,this.id=null!==(ue=this.id)&&void 0!==ue?ue:this.requestAsyncId(G,this.id,Se),this}requestAsyncId(me,Se,ue=0){return F.setInterval(me.flush.bind(me,this),ue)}recycleAsyncId(me,Se,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return Se;null!=Se&&F.clearInterval(Se)}execute(me,Se){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(me,Se);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,Se){let U,ue=!1;try{this.work(me)}catch(G){ue=!0,U=G||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),U}unsubscribe(){if(!this.closed){const{id:me,scheduler:Se}=this,{actions:ue}=Se;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ee.P)(ue,this),null!=me&&(this.id=this.recycleAsyncId(Se,me,null)),this.delay=null,super.unsubscribe()}}}},2631:(at,be,O)=>{O.d(be,{v:()=>F});var h=O(4552);class J{constructor(ne,ge=J.now){this.schedulerActionCtor=ne,this.now=ge}schedule(ne,ge=0,me){return new this.schedulerActionCtor(this,ne).schedule(me,ge)}}J.now=h.l.now;class F extends J{constructor(ne,ge=J.now){super(ne,ge),this.actions=[],this._active=!1}flush(ne){const{actions:ge}=this;if(this._active)return void ge.push(ne);let me;this._active=!0;do{if(me=ne.execute(ne.state,ne.delay))break}while(ne=ge.shift());if(this._active=!1,me){for(;ne=ge.shift();)ne.unsubscribe();throw me}}}},6321:(at,be,O)=>{O.d(be,{z:()=>F});var h=O(1954);const F=new(O(2631).v)(h.o)},4552:(at,be,O)=>{O.d(be,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},2381:(at,be,O)=>{O.d(be,{N:()=>ne});var h=O(1954),F=O(2631);const ne=new class ee extends F.v{}(class J extends h.o{constructor(Se,ue){super(Se,ue),this.scheduler=Se,this.work=ue}schedule(Se,ue=0){return ue>0?super.schedule(Se,ue):(this.delay=ue,this.state=Se,this.scheduler.flush(this),this)}execute(Se,ue){return ue>0||this.closed?super.execute(Se,ue):this._execute(Se,ue)}requestAsyncId(Se,ue,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(Se,ue,U):(Se.flush(this),0)}})},7599:(at,be,O)=>{O.d(be,{z:()=>h});const h={setTimeout(J,F,...ee){const{delegate:ne}=h;return ne?.setTimeout?ne.setTimeout(J,F,...ee):setTimeout(J,F,...ee)},clearTimeout(J){const{delegate:F}=h;return(F?.clearTimeout||clearTimeout)(J)},delegate:void 0}},4971:(at,be,O)=>{O.d(be,{h:()=>J});const J=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(at,be,O)=>{O.d(be,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(at,be,O)=>{O.d(be,{_6:()=>ge,jO:()=>ee,yG:()=>ne});var h=O(4674);function F(me){return me[me.length-1]}function ee(me){return(0,h.m)(F(me))?me.pop():void 0}function ne(me){return function J(me){return me&&(0,h.m)(me.schedule)}(F(me))?me.pop():void 0}function ge(me,Se){return"number"==typeof F(me)?me.pop():Se}},9039:(at,be,O)=>{function h(J,F){if(J){const ee=J.indexOf(F);0<=ee&&J.splice(ee,1)}}O.d(be,{P:()=>h})},2306:(at,be,O)=>{function h(J){const ee=J(ne=>{Error.call(ne),ne.stack=(new Error).stack});return ee.prototype=Object.create(Error.prototype),ee.prototype.constructor=ee,ee}O.d(be,{d:()=>h})},1441:(at,be,O)=>{O.d(be,{O:()=>ee,x:()=>F});var h=O(2653);let J=null;function F(ne){if(h.config.useDeprecatedSynchronousErrorHandling){const ge=!J;if(ge&&(J={errorThrown:!1,error:null}),ne(),ge){const{errorThrown:me,error:Se}=J;if(J=null,me)throw Se}}else ne()}function ee(ne){h.config.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=ne)}},7103:(at,be,O)=>{function h(J,F,ee,ne=0,ge=!1){const me=F.schedule(function(){ee(),ge?J.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(J.add(me),!ge)return me}O.d(be,{f:()=>h})},2737:(at,be,O)=>{function h(J){return J}O.d(be,{y:()=>h})},4266:(at,be,O)=>{O.d(be,{z:()=>h});const h=J=>J&&"number"==typeof J.length&&"function"!=typeof J},5726:(at,be,O)=>{O.d(be,{D:()=>J});var h=O(4674);function J(F){return Symbol.asyncIterator&&(0,h.m)(F?.[Symbol.asyncIterator])}},4674:(at,be,O)=>{function h(J){return"function"==typeof J}O.d(be,{m:()=>h})},8382:(at,be,O)=>{O.d(be,{c:()=>F});var h=O(4850),J=O(4674);function F(ee){return(0,J.m)(ee[h.L])}},3664:(at,be,O)=>{O.d(be,{T:()=>F});var h=O(4971),J=O(4674);function F(ee){return(0,J.m)(ee?.[h.h])}},4026:(at,be,O)=>{O.d(be,{t:()=>J});var h=O(4674);function J(F){return(0,h.m)(F?.then)}},541:(at,be,O)=>{O.d(be,{L:()=>ee,Q:()=>F});var h=O(7582),J=O(4674);function F(ne){return(0,h.FC)(this,arguments,function*(){const me=ne.getReader();try{for(;;){const{value:Se,done:ue}=yield(0,h.qq)(me.read());if(ue)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(Se)}}finally{me.releaseLock()}})}function ee(ne){return(0,J.m)(ne?.getReader)}},9360:(at,be,O)=>{O.d(be,{A:()=>J,e:()=>F});var h=O(4674);function J(ee){return(0,h.m)(ee?.lift)}function F(ee){return ne=>{if(J(ne))return ne.lift(function(ge){try{return ee(ge,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(at,be,O)=>{function h(){}O.d(be,{Z:()=>h})},8407:(at,be,O)=>{O.d(be,{U:()=>F,z:()=>J});var h=O(2737);function J(...ee){return F(ee)}function F(ee){return 0===ee.length?h.y:1===ee.length?ee[0]:function(ge){return ee.reduce((me,Se)=>Se(me),ge)}}},3894:(at,be,O)=>{O.d(be,{h:()=>F});var h=O(2653),J=O(7599);function F(ee){J.z.setTimeout(()=>{const{onUnhandledError:ne}=h.config;if(!ne)throw ee;ne(ee)})}},9853:(at,be,O)=>{function h(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(be,{z:()=>h})},5879:(at,be,O)=>{O.d(be,{$8M:()=>vo,$WT:()=>uo,$Z:()=>o_,AFp:()=>qy,AaK:()=>X,BQk:()=>Kg,CHM:()=>zp,CRH:()=>wT,DdM:()=>TE,EJc:()=>rC,EpF:()=>Ao,F4k:()=>Uf,FYo:()=>Xy,FiY:()=>ef,Flj:()=>Rl,GfV:()=>_b,Gpc:()=>We,HDt:()=>ec,JOm:()=>sg,KtG:()=>ho,LFG:()=>Jt,Lbi:()=>Ad,Lck:()=>Tx,MMx:()=>JD,MR2:()=>sb,NdJ:()=>Ba,Ojb:()=>_M,OlP:()=>In,Oqu:()=>P_,P3R:()=>xw,PXZ:()=>hC,Q6J:()=>Wg,QGY:()=>R0,Qsj:()=>Gw,R0b:()=>Xi,RDi:()=>Vc,Rgc:()=>ep,SBq:()=>Rd,Sil:()=>zx,Suo:()=>ti,TTD:()=>Ca,TgZ:()=>Wd,Tol:()=>Gu,VKq:()=>SE,VuI:()=>aR,WLB:()=>rT,X6Q:()=>Yx,XFs:()=>gt,Xpm:()=>Oo,Xq5:()=>Is,Xts:()=>$y,Y36:()=>kd,YKP:()=>H_,YNc:()=>yt,Yjl:()=>Il,Yz7:()=>Rt,Z0I:()=>fn,ZZ4:()=>Vm,_Bn:()=>QD,_UZ:()=>qd,_c5:()=>cp,_uU:()=>W0,aQg:()=>xC,c2e:()=>lv,cJS:()=>An,cg1:()=>im,dDg:()=>lC,dqk:()=>an,eFA:()=>KT,eJc:()=>Mm,ekj:()=>G0,eoX:()=>yv,f3M:()=>qt,g9A:()=>_g,gHi:()=>Pd,h0i:()=>Ga,hGG:()=>gS,hij:()=>O_,iGM:()=>vT,ifc:()=>Mn,ip1:()=>cv,jDz:()=>XD,kEZ:()=>AE,kL8:()=>F_,ktI:()=>g0,lG2:()=>Cl,lqb:()=>Mr,lri:()=>mv,n5z:()=>rd,oAB:()=>ks,oxw:()=>aD,q4F:()=>zw,qFp:()=>CS,qLn:()=>Hc,qOj:()=>Bd,qZA:()=>I_,rWj:()=>cC,rg0:()=>Oh,s9C:()=>S_,sBO:()=>Jx,s_b:()=>Z_,soG:()=>cl,tBr:()=>Ko,tb:()=>hl,tdS:()=>Ph,tp0:()=>tf,uIk:()=>zc,vHH:()=>ie,vpe:()=>xo,wAp:()=>el,xp6:()=>Dg,ynx:()=>qg,z2F:()=>op,zSh:()=>wf,zs3:()=>Xo});var h=O(8645),J=O(7394),F=O(5619),ee=O(5592),ne=O(3019),ge=O(2096),me=O(3020),Se=O(4664),ue=O(3997);function U(s){for(let o in s)if(s[o]===U)return o;throw Error("Could not find renamed property on target object.")}function G(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function X(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(X).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function Be(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const Re=U({__forward_ref__:U});function We(s){return s.__forward_ref__=We,s.toString=function(){return X(this())},s}function Oe(s){return $e(s)?s():s}function $e(s){return"function"==typeof s&&s.hasOwnProperty(Re)&&s.__forward_ref__===We}function Le(s){return s&&!!s.\u0275providers}const ht="https://g.co/ng/security#xss";class ie extends Error{constructor(o,u){super(function _e(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function te(s){return"string"==typeof s?s:null==s?"":String(s)}function wt(s,o){throw new ie(-201,!1)}function et(s,o){null==s&&function st(s,o,u,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${u} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function Rt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function An(s){return{providers:s.providers||[],imports:s.imports||[]}}function lr(s){return Nr(s,yi)||Nr(s,so)}function fn(s){return null!==lr(s)}function Nr(s,o){return s.hasOwnProperty(o)?s[o]:null}function aa(s){return s&&(s.hasOwnProperty(_i)||s.hasOwnProperty(Qa))?s[_i]:null}const yi=U({\u0275prov:U}),_i=U({\u0275inj:U}),so=U({ngInjectableDef:U}),Qa=U({ngInjectorDef:U});var gt=function(s){return s[s.Default=0]="Default",s[s.Host=1]="Host",s[s.Self=2]="Self",s[s.SkipSelf=4]="SkipSelf",s[s.Optional=8]="Optional",s}(gt||{});let Ht;function St(){return Ht}function yn(s){const o=Ht;return Ht=s,o}function Pn(s,o,u){const l=lr(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:u&gt.Optional?null:void 0!==o?o:void wt(X(s))}const an=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Pr={},Ft="__NG_DI_FLAG__",$i="ngTempTokenPath",ca=/\n/gm,is="__source";let Cr;function En(s){const o=Cr;return Cr=s,o}function ss(s,o=gt.Default){if(void 0===Cr)throw new ie(-203,!1);return null===Cr?Pn(s,void 0,o):Cr.get(s,o&gt.Optional?null:void 0,o)}function Jt(s,o=gt.Default){return(St()||ss)(Oe(s),o)}function qt(s,o=gt.Default){return Jt(s,H(o))}function H(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function B(s){const o=[];for(let u=0;u<s.length;u++){const l=Oe(s[u]);if(Array.isArray(l)){if(0===l.length)throw new ie(900,!1);let d,g=gt.Default;for(let _=0;_<l.length;_++){const C=l[_],b=De(C);"number"==typeof b?-1===b?d=C.token:g|=b:d=C}o.push(Jt(d,g))}else o.push(Jt(l))}return o}function q(s,o){return s[Ft]=o,s.prototype[Ft]=o,s}function De(s){return s[Ft]}function mt(s){return{toString:s}.toString()}var $t=function(s){return s[s.OnPush=0]="OnPush",s[s.Default=1]="Default",s}($t||{}),Mn=function(s){return s[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",s}(Mn||{});const mn={},bt=[],Gt=U({\u0275cmp:U}),Ir=U({\u0275dir:U}),xi=U({\u0275pipe:U}),as=U({\u0275mod:U}),wi=U({\u0275fac:U}),pe=U({__NG_ELEMENT_ID__:U}),re=U({__NG_ENV_ID__:U});function ke(s,o,u){let l=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===l||s.charCodeAt(d+g)<=32)return d}u=d+1}}function ut(s,o,u){let l=0;for(;l<u.length;){const d=u[l];if("number"==typeof d){if(0!==d)break;l++;const g=u[l++],_=u[l++],C=u[l++];s.setAttribute(o,_,C,g)}else{const g=d,_=u[++l];Nt(g)?s.setProperty(o,g,_):s.setAttribute(o,g,_),l++}}return l}function Dt(s){return 3===s||4===s||6===s}function Nt(s){return 64===s.charCodeAt(0)}function Zt(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?u=d:0===u||sr(s,u,d,null,-1===u||2===u?o[++l]:null)}}return s}function sr(s,o,u,l,d){let g=0,_=s.length;if(-1===o)_=-1;else for(;g<s.length;){const C=s[g++];if("number"==typeof C){if(C===o){_=-1;break}if(C>o){_=g-1;break}}}for(;g<s.length;){const C=s[g];if("number"==typeof C)break;if(C===u){if(null===l)return void(null!==d&&(s[g+1]=d));if(l===s[g+1])return void(s[g+2]=d)}g++,null!==l&&g++,null!==d&&g++}-1!==_&&(s.splice(_,0,o),g=_+1),s.splice(g++,0,u),null!==l&&s.splice(g++,0,l),null!==d&&s.splice(g++,0,d)}const Jn="ng-template";function Os(s,o,u){let l=0,d=!0;for(;l<s.length;){let g=s[l++];if("string"==typeof g&&d){const _=s[l++];if(u&&"class"===g&&-1!==ke(_.toLowerCase(),o,0))return!0}else{if(1===g){for(;l<s.length&&"string"==typeof(g=s[l++]);)if(g.toLowerCase()===o)return!0;return!1}"number"==typeof g&&(d=!1)}}return!1}function ao(s){return 4===s.type&&s.value!==Jn}function Ja(s,o,u){return o===(4!==s.type||u?s.value:Jn)}function gh(s,o,u){let l=4;const d=s.attrs||[],g=function la(s){for(let o=0;o<s.length;o++)if(Dt(s[o]))return o;return s.length}(d);let _=!1;for(let C=0;C<o.length;C++){const b=o[C];if("number"!=typeof b){if(!_)if(4&l){if(l=2|1&l,""!==b&&!Ja(s,b,u)||""===b&&1===o.length){if(br(l))return!1;_=!0}}else{const A=8&l?b:o[++C];if(8&l&&null!==s.attrs){if(!Os(s.attrs,A,u)){if(br(l))return!1;_=!0}continue}const L=mh(8&l?"class":b,d,ao(s),u);if(-1===L){if(br(l))return!1;_=!0;continue}if(""!==A){let W;W=L>g?"":d[L+1].toLowerCase();const Q=8&l?W:null;if(Q&&-1!==ke(Q,A,0)||2&l&&A!==W){if(br(l))return!1;_=!0}}}}else{if(!_&&!br(l)&&!br(b))return!1;if(_&&br(b))continue;_=!1,l=b|1&l}}return br(l)||_}function br(s){return 0==(1&s)}function mh(s,o,u,l){if(null===o)return-1;let d=0;if(l||!u){let g=!1;for(;d<o.length;){const _=o[d];if(_===s)return d;if(3===_||6===_)g=!0;else{if(1===_||2===_){let C=o[++d];for(;"string"==typeof C;)C=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=g?1:2}return-1}return function yh(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const l=s[u];if("number"==typeof l)return-1;if(l===o)return u;u++}return-1}(o,s)}function Ri(s,o,u=!1){for(let l=0;l<o.length;l++)if(gh(s,o[l],u))return!0;return!1}function us(s,o){return s?":not("+o.trim()+")":o}function hy(s){let o=s[0],u=1,l=2,d="",g=!1;for(;u<s.length;){let _=s[u];if("string"==typeof _)if(2&l){const C=s[++u];d+="["+_+(C.length>0?'="'+C+'"':"")+"]"}else 8&l?d+="."+_:4&l&&(d+=" "+_);else""!==d&&!br(_)&&(o+=us(g,d),d=""),l=_,g=g||!br(l);u++}return""!==d&&(o+=us(g,d)),o}function Oo(s){return mt(()=>{const o=ac(s),u={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===$t.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,signals:s.signals??!1,data:s.data||{},encapsulation:s.encapsulation||Mn.Emulated,styles:s.styles||bt,_:null,schemas:s.schemas||null,tView:null,id:""};bl(u);const l=s.dependencies;return u.directiveDefs=da(l,!1),u.pipeDefs=da(l,!0),u.id=function wh(s){let o=0;const u=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.signals,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const d of u)o=Math.imul(31,o)+d.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(u),u})}function vh(s){return Pt(s)||dr(s)}function fy(s){return null!==s}function ks(s){return mt(()=>({type:s.type,bootstrap:s.bootstrap||bt,declarations:s.declarations||bt,imports:s.imports||bt,exports:s.exports||bt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Xa(s,o){if(null==s)return mn;const u={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),u[d]=l,o&&(o[d]=g)}return u}function Cl(s){return mt(()=>{const o=ac(s);return bl(o),o})}function Il(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Pt(s){return s[Gt]||null}function dr(s){return s[Ir]||null}function pn(s){return s[xi]||null}function uo(s){const o=Pt(s)||dr(s)||pn(s);return null!==o&&o.standalone}function Or(s,o){const u=s[as]||null;if(!u&&!0===o)throw new Error(`Type ${X(s)} does not have '\u0275mod' property.`);return u}function ac(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:s.inputs||mn,exportAs:s.exportAs||null,standalone:!0===s.standalone,signals:!0===s.signals,selectors:s.selectors||bt,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Xa(s.inputs,o),outputs:Xa(s.outputs)}}function bl(s){s.features?.forEach(o=>o(s))}function da(s,o){if(!s)return null;const u=o?pn:vh;return()=>("function"==typeof s?s():s).map(l=>u(l)).filter(fy)}const $n=0,Ye=1,Mt=2,Dn=3,Ei=4,ha=5,Zr=6,ko=7,xn=8,Dr=9,Fs=10,xt=11,ii=12,Eh=13,cs=14,On=15,fa=16,tu=17,Ci=18,pa=19,Ch=20,Ii=21,Gn=22,Dl=23,Fo=24,Ut=25,uc=1,ls=2,si=7,Lo=9,hr=11;function zn(s){return Array.isArray(s)&&"object"==typeof s[uc]}function bi(s){return Array.isArray(s)&&!0===s[uc]}function ga(s){return 0!=(4&s.flags)}function Ls(s){return s.componentOffset>-1}function Vs(s){return 1==(1&s.flags)}function Tr(s){return!!s.template}function kr(s){return 0!=(512&s[Mt])}function ma(s,o){return s.hasOwnProperty(wi)?s[wi]:null}const xl=Symbol("SIGNAL");function Pi(s,o,u={}){return o[xl]=s,Object.assign(o,u)}function su(s,o){return(null===s||"object"!=typeof s)&&Object.is(s,o)}let xh=an.WeakRef??class ou{constructor(o){this.ref=o}deref(){return this.ref}},_a=0,hs=null,va=!1;function er(s){const o=hs;return hs=s,o}class Fr{constructor(){this.id=_a++,this.ref=function ya(s){return new xh(s)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[o,u]of this.producers){const l=u.producerNode.deref();if(null!=l&&u.atTrackingVersion===this.trackingVersion){if(l.producerPollStatus(u.seenValueVersion))return!0}else this.producers.delete(o),l?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const o=va;va=!0;try{for(const[u,l]of this.consumers){const d=l.consumerNode.deref();null!=d&&d.trackingVersion===l.atTrackingVersion?d.onConsumerDependencyMayHaveChanged():(this.consumers.delete(u),d?.producers.delete(this.id))}}finally{va=o}}producerAccessed(){if(va)throw new Error("");if(null===hs)return;let o=hs.producers.get(this.id);void 0===o?(o={consumerNode:hs.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:hs.trackingVersion},hs.producers.set(this.id,o),this.consumers.set(hs.id,o)):(o.seenValueVersion=this.valueVersion,o.atTrackingVersion=hs.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==hs?.consumerAllowSignalWrites}producerPollStatus(o){return this.valueVersion!==o||(this.onProducerUpdateValueVersion(),this.valueVersion!==o)}}function Rl(s,o){const u=new Rh(s,o?.equal??su);return Pi(u,u.signal.bind(u))}const wa=Symbol("UNSET"),au=Symbol("COMPUTING"),Us=Symbol("ERRORED");class Rh extends Fr{constructor(o,u){super(),this.computation=o,this.equal=u,this.value=wa,this.error=null,this.stale=!0,this.consumerAllowSignalWrites=!1}onConsumerDependencyMayHaveChanged(){this.stale||(this.stale=!0,this.producerMayHaveChanged())}onProducerUpdateValueVersion(){if(this.stale){if(this.value!==wa&&this.value!==au&&!this.consumerPollProducersForChange())return void(this.stale=!1);this.recomputeValue()}}recomputeValue(){if(this.value===au)throw new Error("Detected cycle in computations.");const o=this.value;this.value=au,this.trackingVersion++;const u=er(this);let l;try{l=this.computation()}catch(d){l=Us,this.error=d}finally{er(u)}this.stale=!1,o!==wa&&o!==Us&&l!==Us&&this.equal(o,l)?this.value=o:(this.value=l,this.valueVersion++)}signal(){if(this.onProducerUpdateValueVersion(),this.producerAccessed(),this.value===Us)throw this.error;return this.value}}let Nh=function cc(){throw new Error};function Ea(){Nh()}class Lr extends Fr{constructor(o,u){super(),this.value=o,this.equal=u,this.consumerAllowSignalWrites=!1}onConsumerDependencyMayHaveChanged(){}onProducerUpdateValueVersion(){}set(o){this.producerUpdatesAllowed||Ea(),this.equal(this.value,o)||(this.value=o,this.valueVersion++,this.producerMayHaveChanged())}update(o){this.producerUpdatesAllowed||Ea(),this.set(o(this.value))}mutate(o){this.producerUpdatesAllowed||Ea(),o(this.value),this.valueVersion++,this.producerMayHaveChanged()}asReadonly(){return void 0===this.readonlySignal&&(this.readonlySignal=Pi(this,()=>this.signal())),this.readonlySignal}signal(){return this.producerAccessed(),this.value}}function Ph(s,o){const u=new Lr(s,o?.equal??su);return Pi(u,u.signal.bind(u),{set:u.set.bind(u),update:u.update.bind(u),mutate:u.mutate.bind(u),asReadonly:u.asReadonly.bind(u)})}function Oh(s){const o=er(null);try{return s()}finally{er(o)}}const Pl=()=>{};class Ol extends Fr{constructor(o,u,l){super(),this.watch=o,this.schedule=u,this.dirty=!1,this.cleanupFn=Pl,this.registerOnCleanup=d=>{this.cleanupFn=d},this.consumerAllowSignalWrites=l}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const o=er(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Pl,this.watch(this.registerOnCleanup)}finally{er(o)}}cleanup(){this.cleanupFn()}}class kl{constructor(o,u,l){this.previousValue=o,this.currentValue=u,this.firstChange=l}isFirstChange(){return this.firstChange}}function Ca(){return dc}function dc(s){return s.type.prototype.ngOnChanges&&(s.setInput=Bp),uu}function uu(){const s=jp(this),o=s?.current;if(o){const u=s.previous;if(u===mn)s.previous=o;else for(let l in o)u[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Bp(s,o,u,l){const d=this.declaredInputs[u],g=jp(s)||function hc(s,o){return s[Fl]=o}(s,{previous:mn,current:null}),_=g.current||(g.current={}),C=g.previous,b=C[d];_[d]=new kl(b&&b.currentValue,o,C===mn),s[l]=o}Ca.ngInherit=!0;const Fl="__ngSimpleChanges__";function jp(s){return s[Fl]||null}const fs=function(s,o,u){};function un(s){for(;Array.isArray(s);)s=s[$n];return s}function Ia(s,o){return un(o[s])}function Vr(s,o){return un(o[s.index])}function Lh(s,o){return s.data[o]}function Oi(s,o){const u=o[s];return zn(u)?u:u[$n]}function ps(s,o){return null==o?null:s[o]}function Uh(s){s[tu]=0}function Ul(s){1024&s[Mt]||(s[Mt]|=1024,Bl(s,1))}function fc(s){1024&s[Mt]&&(s[Mt]&=-1025,Bl(s,-1))}function Bl(s,o){let u=s[Dn];if(null===u)return;u[ha]+=o;let l=u;for(u=u[Dn];null!==u&&(1===o&&1===l[ha]||-1===o&&0===l[ha]);)u[ha]+=o,l=u,u=u[Dn]}function co(s,o){if(256==(256&s[Mt]))throw new ie(911,!1);null===s[Ii]&&(s[Ii]=[]),s[Ii].push(o)}const Ct={lFrame:ql(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Hl(){return Ct.bindingsEnabled}function Me(){return Ct.lFrame.lView}function zt(){return Ct.lFrame.tView}function zp(s){return Ct.lFrame.contextLView=s,s[xn]}function ho(s){return Ct.lFrame.contextLView=null,s}function Ur(){let s=fo();for(;null!==s&&64===s.type;)s=s.parent;return s}function fo(){return Ct.lFrame.currentTNode}function zi(s,o){const u=Ct.lFrame;u.currentTNode=s,u.isParent=o}function du(){return Ct.lFrame.isParent}function zl(){Ct.lFrame.isParent=!1}function Yr(){const s=Ct.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function kn(){return Ct.lFrame.bindingIndex++}function Wi(s){const o=Ct.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}function $h(s,o){const u=Ct.lFrame;u.bindingIndex=u.bindingRootIndex=s,pu(o)}function pu(s){Ct.lFrame.currentDirectiveIndex=s}function gu(){return Ct.lFrame.currentQueryIndex}function Uo(s){Ct.lFrame.currentQueryIndex=s}function gs(s){const o=s[Ye];return 2===o.type?o.declTNode:1===o.type?s[Zr]:null}function yc(s,o,u){if(u&gt.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||u&gt.Host||(d=gs(g),null===d||(g=g[cs],10&d.type))););if(null===d)return!1;o=d,s=g}const l=Ct.lFrame=yu();return l.currentTNode=o,l.lView=s,!0}function mu(s){const o=yu(),u=s[Ye];Ct.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function yu(){const s=Ct.lFrame,o=null===s?null:s.child;return null===o?ql(s):o}function ql(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Wp(){const s=Ct.lFrame;return Ct.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const _y=Wp;function Bo(){const s=Wp();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function oi(){return Ct.lFrame.selectedIndex}function po(s){Ct.lFrame.selectedIndex=s}function Bn(){const s=Ct.lFrame;return Lh(s.tView,s.selectedIndex)}let Kl=!0;function vu(){return Kl}function jo(s){Kl=s}function Zl(s,o){for(let u=o.directiveStart,l=o.directiveEnd;u<l;u++){const g=s.data[u].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:C,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:N}=g;_&&(s.contentHooks??=[]).push(-u,_),C&&((s.contentHooks??=[]).push(u,C),(s.contentCheckHooks??=[]).push(u,C)),b&&(s.viewHooks??=[]).push(-u,b),A&&((s.viewHooks??=[]).push(u,A),(s.viewCheckHooks??=[]).push(u,A)),null!=N&&(s.destroyHooks??=[]).push(u,N)}}function Ta(s,o,u){ms(s,o,3,u)}function Yl(s,o,u,l){(3&s[Mt])===u&&ms(s,o,u,l)}function vc(s,o){let u=s[Mt];(3&u)===o&&(u&=8191,u+=1,s[Mt]=u)}function ms(s,o,u,l){const g=l??-1,_=o.length-1;let C=0;for(let b=void 0!==l?65535&s[tu]:0;b<_;b++)if("number"==typeof o[b+1]){if(C=o[b],null!=l&&C>=l)break}else o[b]<0&&(s[tu]+=65536),(C<g||-1==g)&&(jr(s,u,o,b),s[tu]=(4294901760&s[tu])+b+2),b++}function ys(s,o){fs(4,s,o);const u=er(null);try{o.call(s)}finally{er(u),fs(5,s,o)}}function jr(s,o,u,l){const d=u[l]<0,g=u[l+1],C=s[d?-u[l]:u[l]];d?s[Mt]>>13<s[tu]>>16&&(3&s[Mt])===o&&(s[Mt]+=8192,ys(C,g)):ys(C,g)}const ai=-1;class _n{constructor(o,u,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=l}}function Di(s){return s!==ai}function gn(s){return 32767&s}function wu(s,o){let u=function vt(s){return s>>16}(s),l=o;for(;u>0;)l=l[cs],u--;return l}let Aa=!0;function go(s){const o=Aa;return Aa=s,o}const qi=255,Eu=5;let mo=0;const or={};function Cc(s,o){const u=Ic(s,o);if(-1!==u)return u;const l=o[Ye];l.firstCreatePass&&(s.injectorIndex=o.length,Cu(l.data,s),Cu(o,null),Cu(l.blueprint,null));const d=Iu(s,o),g=s.injectorIndex;if(Di(d)){const _=gn(d),C=wu(d,o),b=C[Ye].data;for(let A=0;A<8;A++)o[g+A]=C[_+A]|b[_+A]}return o[g+8]=d,g}function Cu(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Ic(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Iu(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,l=null,d=o;for(;null!==d;){if(l=id(d),null===l)return ai;if(u++,d=d[cs],-1!==l.injectorIndex)return l.injectorIndex|u<<16}return ai}function Hs(s,o,u){!function Xl(s,o,u){let l;"string"==typeof u?l=u.charCodeAt(0)||0:u.hasOwnProperty(pe)&&(l=u[pe]),null==l&&(l=u[pe]=mo++);const d=l&qi;o.data[s+(d>>Eu)]|=1<<d}(s,o,u)}function bu(s,o,u){if(u&gt.Optional||void 0!==s)return s;wt()}function pr(s,o,u,l){if(u&gt.Optional&&void 0===l&&(l=null),!(u&(gt.Self|gt.Host))){const d=s[Dr],g=yn(void 0);try{return d?d.get(o,l,u&gt.Optional):Pn(o,l,u&gt.Optional)}finally{yn(g)}}return bu(l,0,u)}function _s(s,o,u,l=gt.Default,d){if(null!==s){if(2048&o[Mt]&&!(l&gt.Self)){const _=function Yh(s,o,u,l,d){let g=s,_=o;for(;null!==g&&null!==_&&2048&_[Mt]&&!(512&_[Mt]);){const C=ed(g,_,u,l|gt.Self,or);if(C!==or)return C;let b=g.parent;if(!b){const A=_[Ch];if(A){const N=A.get(u,or,l);if(N!==or)return N}b=id(_),_=_[cs]}g=b}return d}(s,o,u,l,or);if(_!==or)return _}const g=ed(s,o,u,l,or);if(g!==or)return g}return pr(o,u,l,d)}function ed(s,o,u,l,d){const g=function bc(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(pe)?s[pe]:void 0;return"number"==typeof o?o>=0?o&qi:Zh:o}(u);if("function"==typeof g){if(!yc(o,s,l))return l&gt.Host?bu(d,0,l):pr(o,u,l,d);try{const _=g(l);if(null!=_||l&gt.Optional)return _;wt()}finally{_y()}}else if("number"==typeof g){let _=null,C=Ic(s,o),b=ai,A=l&gt.Host?o[On][Zr]:null;for((-1===C||l&gt.SkipSelf)&&(b=-1===C?Iu(s,o):o[C+8],b!==ai&&nd(l,!1)?(_=o[Ye],C=gn(b),o=wu(b,o)):C=-1);-1!==C;){const N=o[Ye];if(Dc(g,C,N.data)){const L=td(C,o,u,_,l,A);if(L!==or)return L}b=o[C+8],b!==ai&&nd(l,o[Ye].data[C+8]===A)&&Dc(g,C,o)?(_=N,C=gn(b),o=wu(b,o)):C=-1}}return d}function td(s,o,u,l,d,g){const _=o[Ye],C=_.data[s+8],N=$o(C,_,u,null==l?Ls(C)&&Aa:l!=_&&0!=(3&C.type),d&gt.Host&&g===C);return null!==N?yo(o,_,N,C):or}function $o(s,o,u,l,d){const g=s.providerIndexes,_=o.data,C=1048575&g,b=s.directiveStart,N=g>>20,W=d?C+N:s.directiveEnd;for(let Q=l?C:C+N;Q<W;Q++){const Ce=_[Q];if(Q<b&&u===Ce||Q>=b&&Ce.type===u)return Q}if(d){const Q=_[b];if(Q&&Tr(Q)&&Q.type===u)return b}return null}function yo(s,o,u,l){let d=s[u];const g=o.data;if(function fr(s){return s instanceof _n}(d)){const _=d;_.resolving&&function Fe(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new ie(-200,`Circular dependency in DI detected for ${s}${u}`)}(function Te(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():te(s)}(g[u]));const C=go(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?yn(_.injectImpl):null;yc(s,l,gt.Default);try{d=s[u]=_.factory(void 0,g,s,l),o.firstCreatePass&&u>=l.directiveStart&&function Wh(s,o,u){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(l){const _=dc(o);(u.preOrderHooks??=[]).push(s,_),(u.preOrderCheckHooks??=[]).push(s,_)}d&&(u.preOrderHooks??=[]).push(0-s,d),g&&((u.preOrderHooks??=[]).push(s,g),(u.preOrderCheckHooks??=[]).push(s,g))}(u,g[u],o)}finally{null!==b&&yn(b),go(C),_.resolving=!1,_y()}}return d}function Dc(s,o,u){return!!(u[o+(s>>Eu)]&1<<s)}function nd(s,o){return!(s&gt.Self||s&gt.Host&&o)}class $s{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,l){return _s(this._tNode,this._lView,o,H(l),u)}}function Zh(){return new $s(Ur(),Me())}function rd(s){return mt(()=>{const o=s.prototype.constructor,u=o[wi]||_o(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const g=d[wi]||_o(d);if(g&&g!==u)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function _o(s){return $e(s)?()=>{const o=_o(Oe(s));return o&&o()}:ma(s)}function id(s){const o=s[Ye],u=o.type;return 2===u?o.declTNode:1===u?s[Zr]:null}function vo(s){return function Ho(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const l=u.length;let d=0;for(;d<l;){const g=u[d];if(Dt(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<l&&"string"==typeof u[d];)d++;else{if(g===o)return u[d+1];d+=2}}}return null}(Ur(),s)}const vs="__parameters__";function Ki(s,o,u){return mt(()=>{const l=function wo(s){return function(...u){if(s){const l=s(...u);for(const d in l)this[d]=l[d]}}}(o);function d(...g){if(this instanceof d)return l.apply(this,g),this;const _=new d(...g);return C.annotation=_,C;function C(b,A,N){const L=b.hasOwnProperty(vs)?b[vs]:Object.defineProperty(b,vs,{value:[]})[vs];for(;L.length<=N;)L.push(null);return(L[N]=L[N]||[]).push(_),b}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}function Wo(s,o){s.forEach(u=>Array.isArray(u)?Wo(u,o):o(u))}function Ac(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function I(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function ce(s,o,u){let l=je(s,o);return l>=0?s[1|l]=u:(l=~l,function z(s,o,u,l){let d=s.length;if(d==o)s.push(u,l);else if(1===d)s.push(l,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=l}}(s,l,o,u)),l}function ze(s,o){const u=je(s,o);if(u>=0)return s[1|u]}function je(s,o){return function Tt(s,o,u){let l=0,d=s.length>>u;for(;d!==l;){const g=l+(d-l>>1),_=s[g<<u];if(o===_)return g<<u;_>o?d=g:l=g+1}return~(d<<u)}(s,o,1)}const Ko=q(Ki("Inject",s=>({token:s})),-1),ef=q(Ki("Optional"),8),tf=q(Ki("SkipSelf"),4);function rg(s){return 128==(128&s.flags)}var sg=function(s){return s[s.Important=1]="Important",s[s.DashCase=2]="DashCase",s}(sg||{});const hw=/^>|^->|<!--|-->|--!>|<!-$/g,fw=/(<|>)/,Ay="\u200b$1\u200b";const sf=new Map;let Pc=0;const md="__ngContext__";function Gr(s,o){zn(o)?(s[md]=o[pa],function Ry(s){sf.set(s[pa],s)}(o)):s[md]=o}let yd;function bo(s,o){return yd(s,o)}function _d(s){const o=s[Dn];return bi(o)?o[Dn]:o}function dg(s){return lf(s[ii])}function ui(s){return lf(s[Ei])}function lf(s){for(;null!==s&&!bi(s);)s=s[Ei];return s}function Mu(s,o,u,l,d){if(null!=l){let g,_=!1;bi(l)?g=l:zn(l)&&(_=!0,l=l[$n]);const C=un(l);0===s&&null!==u?null==d?Pe(o,u,C):Y(o,u,C,d||null,!0):1===s&&null!==u?Y(o,u,C,d||null,!0):2===s?function Id(s,o,u){const l=Fn(s,o);l&&function nt(s,o,u,l){s.removeChild(o,u,l)}(s,l,o,u)}(o,C,_):3===s&&o.destroyNode(C),null!=g&&function To(s,o,u,l,d){const g=u[si];g!==un(u)&&Mu(o,s,l,g,d);for(let C=hr;C<u.length;C++){const b=u[C];Yo(b[Ye],b,s,o,l,g)}}(o,s,g,u,d)}}function Na(s,o){return s.createComment(function My(s){return s.replace(hw,o=>o.replace(fw,Ay))}(o))}function Fc(s,o,u){return s.createElement(o,u)}function Fy(s,o){const u=s[Lo],l=u.indexOf(o);fc(o),u.splice(l,1)}function v(s,o){if(s.length<=hr)return;const u=hr+o,l=s[u];if(l){const d=l[fa];null!==d&&d!==s&&Fy(d,l),o>0&&(s[u-1][Ei]=l[Ei]);const g=I(s,hr+o);!function Pa(s,o){Yo(s,o,o[xt],2,null,null),o[$n]=null,o[Zr]=null}(l[Ye],l);const _=g[Ci];null!==_&&_.detachView(g[Ye]),l[Dn]=null,l[Ei]=null,l[Mt]&=-129}return l}function p(s,o){if(!(256&o[Mt])){const u=o[xt];o[Dl]?.destroy(),o[Fo]?.destroy(),u.destroyNode&&Yo(s,o,u,3,null,null),function yw(s){let o=s[ii];if(!o)return m(s[Ye],s);for(;o;){let u=null;if(zn(o))u=o[ii];else{const l=o[hr];l&&(u=l)}if(!u){for(;o&&!o[Ei]&&o!==s;)zn(o)&&m(o[Ye],o),o=o[Dn];null===o&&(o=s),zn(o)&&m(o[Ye],o),u=o&&o[Ei]}o=u}}(o)}}function m(s,o){if(!(256&o[Mt])){o[Mt]&=-129,o[Mt]|=256,function S(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let l=0;l<u.length;l+=2){const d=o[u[l]];if(!(d instanceof _n)){const g=u[l+1];if(Array.isArray(g))for(let _=0;_<g.length;_+=2){const C=d[g[_]],b=g[_+1];fs(4,C,b);try{b.call(C)}finally{fs(5,C,b)}}else{fs(4,d,g);try{g.call(d)}finally{fs(5,d,g)}}}}}(s,o),function E(s,o){const u=s.cleanup,l=o[ko];if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const _=u[g+3];_>=0?l[_]():l[-_].unsubscribe(),g+=2}else u[g].call(l[u[g+1]]);null!==l&&(o[ko]=null);const d=o[Ii];if(null!==d){o[Ii]=null;for(let g=0;g<d.length;g++)(0,d[g])()}}(s,o),1===o[Ye].type&&o[xt].destroy();const u=o[fa];if(null!==u&&bi(o[Dn])){u!==o[Dn]&&Fy(u,o);const l=o[Ci];null!==l&&l.detachView(s)}!function pw(s){sf.delete(s[pa])}(o)}}function R(s,o,u){return function $(s,o,u){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return u[$n];{const{componentOffset:d}=l;if(d>-1){const{encapsulation:g}=s.data[l.directiveStart+d];if(g===Mn.None||g===Mn.Emulated)return null}return Vr(l,u)}}(s,o.parent,u)}function Y(s,o,u,l,d){s.insertBefore(o,u,l,d)}function Pe(s,o,u){s.appendChild(o,u)}function He(s,o,u,l,d){null!==l?Y(s,o,u,l,d):Pe(s,o,u)}function Fn(s,o){return s.parentNode(o)}let vd,pf,By,hg=function Ly(s,o,u){return 40&s.type?Vr(s,u):null};function wd(s,o,u,l){const d=R(s,l,o),g=o[xt],C=function Lc(s,o,u){return hg(s,o,u)}(l.parent||o[Zr],l,o);if(null!=d)if(Array.isArray(u))for(let b=0;b<u.length;b++)He(g,d,u[b],C,!1);else He(g,d,u,C,!1);void 0!==vd&&vd(g,l,o,u,d)}function Ed(s,o){if(null!==o){const u=o.type;if(3&u)return Vr(o,s);if(4&u)return Cd(-1,s[o.index]);if(8&u){const l=o.child;if(null!==l)return Ed(s,l);{const d=s[o.index];return bi(d)?Cd(-1,d):un(d)}}if(32&u)return bo(o,s)()||un(s[o.index]);{const l=Vy(s,o);return null!==l?Array.isArray(l)?l[0]:Ed(_d(s[On]),l):Ed(s,o.next)}}return null}function Vy(s,o){return null!==o?s[On][Zr].projection[o.projection]:null}function Cd(s,o){const u=hr+s+1;if(u<o.length){const l=o[u],d=l[Ye].firstChild;if(null!==d)return Ed(l,d)}return o[si]}function Ar(s,o,u,l,d,g,_){for(;null!=u;){const C=l[u.index],b=u.type;if(_&&0===o&&(C&&Gr(un(C),l),u.flags|=2),32!=(32&u.flags))if(8&b)Ar(s,o,u.child,l,d,g,!1),Mu(o,s,d,C,g);else if(32&b){const A=bo(u,l);let N;for(;N=A();)Mu(o,s,d,N,g);Mu(o,s,d,C,g)}else 16&b?Yi(s,o,l,u,d,g):Mu(o,s,d,C,g);u=_?u.projectionNext:u.next}}function Yo(s,o,u,l,d,g){Ar(u,l,s.firstChild,o,d,g,!1)}function Yi(s,o,u,l,d,g){const _=u[On],b=_[Zr].projection[l.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)Mu(o,s,d,b[A],g);else{let A=b;const N=_[Dn];rg(l)&&(A.flags|=128),Ar(s,o,A,N,d,g,!0)}}function gg(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function mg(s,o,u){const{mergedAttrs:l,classes:d,styles:g}=u;null!==l&&ut(s,o,l),null!==d&&gg(s,o,d),null!==g&&function Qr(s,o,u){s.setAttribute(o,"style",u)}(s,o,g)}function Vc(s){pf=s}function Cw(s){return function vw(){if(void 0===By&&(By=null,an.trustedTypes))try{By=an.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return By}()?.createScriptURL(s)||s}class QI{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ht})`}}function xu(s){return s instanceof QI?s.changingThisBreaksApplicationSecurity:s}function bd(s,o){const u=function tM(s){return s instanceof QI&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${ht})`)}return u===o}const iM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Dd=function(s){return s[s.NONE=0]="NONE",s[s.HTML=1]="HTML",s[s.STYLE=2]="STYLE",s[s.SCRIPT=3]="SCRIPT",s[s.URL=4]="URL",s[s.RESOURCE_URL=5]="RESOURCE_URL",s}(Dd||{});function rb(s){const o=Hy();return o?o.sanitize(Dd.URL,s)||"":bd(s,"URL")?xu(s):function Tw(s){return(s=String(s)).match(iM)?s:"unsafe:"+s}(te(s))}function hM(s){const o=Hy();if(o)return Cw(o.sanitize(Dd.RESOURCE_URL,s)||"");if(bd(s,"ResourceURL"))return Cw(xu(s));throw new ie(904,!1)}function xw(s,o,u){return function gO(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?hM:rb}(o,u)(s)}function Hy(){const s=Me();return s&&s[Fs].sanitizer}class In{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Rt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const $y=new In("ENVIRONMENT_INITIALIZER"),pM=new In("INJECTOR",-1),gM=new In("INJECTOR_DEF_TYPES");class ib{get(o,u=Pr){if(u===Pr){const l=new Error(`NullInjectorError: No provider for ${X(o)}!`);throw l.name="NullInjectorError",l}return u}}function sb(s){return{\u0275providers:s}}function Gy(...s){return{\u0275providers:ob(0,s),\u0275fromNgModule:!0}}function ob(s,...o){const u=[],l=new Set;let d;return Wo(o,g=>{const _=g;Rw(_,u,[],l)&&(d||=[],d.push(_))}),void 0!==d&&ab(d,u),u}function ab(s,o){for(let u=0;u<s.length;u++){const{providers:d}=s[u];Nw(d,g=>{o.push(g)})}}function Rw(s,o,u,l){if(!(s=Oe(s)))return!1;let d=null,g=aa(s);const _=!g&&Pt(s);if(g||_){if(_&&!_.standalone)return!1;d=s}else{const b=s.ngModule;if(g=aa(b),!g)return!1;d=b}const C=l.has(d);if(_){if(C)return!1;if(l.add(d),_.dependencies){const b="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const A of b)Rw(A,o,u,l)}}else{if(!g)return!1;{if(null!=g.imports&&!C){let A;l.add(d);try{Wo(g.imports,N=>{Rw(N,o,u,l)&&(A||=[],A.push(N))})}finally{}void 0!==A&&ab(A,o)}if(!C){const A=ma(d)||(()=>new d);o.push({provide:d,useFactory:A,deps:bt},{provide:gM,useValue:d,multi:!0},{provide:$y,useValue:()=>Jt(d),multi:!0})}const b=g.providers;null==b||C||Nw(b,N=>{o.push(N)})}}return d!==s&&void 0!==s.providers}function Nw(s,o){for(let u of s)Le(u)&&(u=u.\u0275providers),Array.isArray(u)?Nw(u,o):o(u)}const _O=U({provide:String,useValue:U});function zy(s){return null!==s&&"object"==typeof s&&_O in s}function Sd(s){return"function"==typeof s}const wf=new In("Set Injector scope."),Ef={},mM={};let Ru;function Cf(){return void 0===Ru&&(Ru=new ib),Ru}class Mr{}class ub extends Mr{get destroyed(){return this._destroyed}constructor(o,u,l,d){super(),this.parent=u,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Je(o,_=>this.processProvider(_)),this.records.set(pM,Vi(void 0,this)),d.has("environment")&&this.records.set(Mr,Vi(void 0,this));const g=this.records.get(wf);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(gM.multi,bt,gt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const u of o)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const u=En(this),l=yn(void 0);try{return o()}finally{En(u),yn(l)}}get(o,u=Pr,l=gt.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(re))return o[re](this);l=H(l);const d=En(this),g=yn(void 0);try{if(!(l&gt.SkipSelf)){let C=this.records.get(o);if(void 0===C){const b=function Jo(s){return"function"==typeof s||"object"==typeof s&&s instanceof In}(o)&&lr(o);C=b&&this.injectableDefInScope(b)?Vi(Wy(o),Ef):null,this.records.set(o,C)}if(null!=C)return this.hydrate(o,C)}return(l&gt.Self?Cf():this.parent).get(o,u=l&gt.Optional&&u===Pr?null:u)}catch(_){if("NullInjectorError"===_.name){if((_[$i]=_[$i]||[]).unshift(X(o)),d)throw _;return function oe(s,o,u,l){const d=s[$i];throw o[is]&&d.unshift(o[is]),s.message=function tt(s,o,u,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=X(o);if(Array.isArray(o))d=o.map(X).join(" -> ");else if("object"==typeof o){let g=[];for(let _ in o)if(o.hasOwnProperty(_)){let C=o[_];g.push(_+":"+("string"==typeof C?JSON.stringify(C):X(C)))}d=`{${g.join(", ")}}`}return`${u}${l?"("+l+")":""}[${d}]: ${s.replace(ca,"\n  ")}`}("\n"+s.message,d,u,l),s.ngTokenPath=d,s[$i]=null,s}(_,o,"R3InjectorError",this.source)}throw _}finally{yn(g),En(d)}}resolveInjectorInitializers(){const o=En(this),u=yn(void 0);try{const l=this.get($y.multi,bt,gt.Self);for(const d of l)d()}finally{En(o),yn(u)}}toString(){const o=[],u=this.records;for(const l of u.keys())o.push(X(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ie(205,!1)}processProvider(o){let u=Sd(o=Oe(o))?o:Oe(o&&o.provide);const l=function Qo(s){return zy(s)?Vi(void 0,s.useValue):Vi(Oa(s),Ef)}(o);if(Sd(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=Vi(void 0,Ef,!0),d.factory=()=>B(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,l)}hydrate(o,u){return u.value===Ef&&(u.value=mM,u.value=u.factory()),"object"==typeof u.value&&u.value&&function yM(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Oe(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}removeOnDestroy(o){const u=this._onDestroyHooks.indexOf(o);-1!==u&&this._onDestroyHooks.splice(u,1)}}function Wy(s){const o=lr(s),u=null!==o?o.factory:ma(s);if(null!==u)return u;if(s instanceof In)throw new ie(204,!1);if(s instanceof Function)return function ve(s){const o=s.length;if(o>0)throw function T(s,o){const u=[];for(let l=0;l<s;l++)u.push(o);return u}(o,"?"),new ie(204,!1);const u=function mi(s){return s&&(s[yi]||s[so])||null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new ie(204,!1)}function Oa(s,o,u){let l;if(Sd(s)){const d=Oe(s);return ma(d)||Wy(d)}if(zy(s))l=()=>Oe(s.useValue);else if(function vf(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...B(s.deps||[]));else if(function Kn(s){return!(!s||!s.useExisting)}(s))l=()=>Jt(Oe(s.useExisting));else{const d=Oe(s&&(s.useClass||s.provide));if(!function k(s){return!!s.deps}(s))return ma(d)||Wy(d);l=()=>new d(...B(s.deps))}return l}function Vi(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function Je(s,o){for(const u of s)Array.isArray(u)?Je(u,o):u&&Le(u)?Je(u.\u0275providers,o):o(u)}const qy=new In("AppId",{providedIn:"root",factory:()=>Lt}),Lt="ng",_g=new In("Platform Initializer"),Ad=new In("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),_M=new In("CSP nonce",{providedIn:"root",factory:()=>function Uy(){if(void 0!==pf)return pf;if(typeof document<"u")return document;throw new ie(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Fw=(s,o)=>null;function db(s,o){return Fw(s,o)}class EM{}class fb{}class pb{resolveComponentFactory(o){throw function Qy(s){const o=Error(`No component factory found for ${X(s)}.`);return o.ngComponent=s,o}(o)}}let Cg=(()=>{class s{}return s.NULL=new pb,s})();function gb(){return Pu(Ur(),Me())}function Pu(s,o){return new Rd(Vr(s,o))}let Rd=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=gb,s})();function $w(s){return s instanceof Rd?s.nativeElement:s}class Xy{}let Gw=(()=>{class s{constructor(){this.destroyNode=null}}return s.__NG_ELEMENT_ID__=()=>function mb(){const s=Me(),u=Oi(Ur().index,s);return(zn(u)?u:s)[xt]}(),s})(),yb=(()=>{class s{}return s.\u0275prov=Rt({token:s,providedIn:"root",factory:()=>null}),s})();class _b{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const zw=new _b("16.1.7"),e_={};function Nd(s){for(;s;){s[Mt]|=64;const o=_d(s);if(kr(s)&&!o)return s;s=o}return null}function Ig(s){return s.ngOriginalError}class Hc{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Ig(o);for(;u&&Ig(u);)u=Ig(u);return u||null}}const li=new In("",{providedIn:"root",factory:()=>!1});function Ou(s){return s instanceof Function?s():s}class Zw extends Fr{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(o){this._lView=o}onConsumerDependencyMayHaveChanged(){Nd(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(o,u,l){const d=er(this);this.trackingVersion++;try{o(u,l)}finally{er(d)}}destroy(){this.trackingVersion++}}let i_=null;function Af(){return i_??=new Zw,i_}function Yw(s,o){return s[o]??Af()}function Qw(s,o){const u=Af();u.hasReadASignal&&(s[o]=i_,u.lView=s,i_=new Zw)}const Vt={};function Dg(s){Cb(zt(),Me(),oi()+s,!1)}function Cb(s,o,u,l){if(!l)if(3==(3&o[Mt])){const g=s.preOrderCheckHooks;null!==g&&Ta(o,g,u)}else{const g=s.preOrderHooks;null!==g&&Yl(o,g,0,u)}po(u)}function Pd(s){if(!St()&&!function ir(){return Cr}())throw new ie(-203,!1)}function e0(s,o=null,u=null,l){const d=Mf(s,o,u,l);return d.resolveInjectorInitializers(),d}function Mf(s,o=null,u=null,l,d=new Set){const g=[u||bt,Gy(s)];return l=l||("object"==typeof s?void 0:X(s)),new ub(g,o||Cf(),l||null,d)}let Xo=(()=>{class s{static create(u,l){if(Array.isArray(u))return e0({name:""},l,u,"");{const d=u.name??"";return e0({name:d},u.parent,u.providers,d)}}}return s.THROW_IF_NOT_FOUND=Pr,s.NULL=new ib,s.\u0275prov=Rt({token:s,providedIn:"any",factory:()=>Jt(pM)}),s.__NG_ELEMENT_ID__=-1,s})();function kd(s,o=gt.Default){const u=Me();return null===u?Jt(s,o):_s(Ur(),u,Oe(s),o)}function o_(){throw new Error("invalid")}function Sg(s,o,u,l,d,g,_,C,b,A,N){const L=o.blueprint.slice();return L[$n]=d,L[Mt]=140|l,(null!==A||s&&2048&s[Mt])&&(L[Mt]|=2048),Uh(L),L[Dn]=L[cs]=s,L[xn]=u,L[Fs]=_||s&&s[Fs],L[xt]=C||s&&s[xt],L[Dr]=b||s&&s[Dr]||null,L[Zr]=g,L[pa]=function xy(){return Pc++}(),L[Gn]=N,L[Ch]=A,L[On]=2==o.type?s[On]:L,L}function Fa(s,o,u,l,d){let g=s.data[o];if(null===g)g=function Ag(s,o,u,l,d){const g=fo(),_=du(),b=s.data[o]=function Mb(s,o,u,l,d,g){let _=o?o.injectorIndex:-1,C=0;return function Gi(){return null!==Ct.skipHydrationRootTNode}()&&(C|=128),{type:u,index:l,insertBeforeIndex:null,injectorIndex:_,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:C,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?g:g&&g.parent,u,o,l,d);return null===s.firstChild&&(s.firstChild=b),null!==g&&(_?null==g.child&&null!==b.parent&&(g.child=b):null===g.next&&(g.next=b,b.prev=g)),b}(s,o,u,l,d),function Br(){return Ct.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=u,g.value=l,g.attrs=d;const _=function pc(){const s=Ct.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===_?-1:_.injectorIndex}return zi(g,!0),g}function Fd(s,o,u,l){if(0===u)return-1;const d=o.length;for(let g=0;g<u;g++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function a_(s,o,u,l,d){const g=Yw(o,Dl),_=oi(),C=2&l;try{if(po(-1),C&&o.length>Ut&&Cb(s,o,Ut,!1),fs(C?2:0,d),C)g.runInContext(u,l,d);else{const A=er(null);try{u(l,d)}finally{er(A)}}}finally{C&&null===o[Dl]&&Qw(o,Dl),po(_),fs(C?3:1,d)}}function xf(s,o,u){if(ga(o)){const l=er(null);try{const g=o.directiveEnd;for(let _=o.directiveStart;_<g;_++){const C=s.data[_];C.contentQueries&&C.contentQueries(1,u[_],_)}}finally{er(l)}}}function Ld(s,o,u){Hl()&&(function d_(s,o,u,l){const d=u.directiveStart,g=u.directiveEnd;Ls(u)&&function NM(s,o,u){const l=Vr(o,s),d=Tb(u);let _=16;u.signals?_=4096:u.onPush&&(_=64);const C=Lu(s,Sg(s,d,null,_,l,o,null,s[Fs].rendererFactory.createRenderer(l,u),null,null,null));s[o.index]=C}(o,u,s.data[d+u.componentOffset]),s.firstCreatePass||Cc(u,o),Gr(l,o);const _=u.initialInputs;for(let C=d;C<g;C++){const b=s.data[C],A=yo(o,s,C,u);Gr(A,o),null!==_&&Pg(0,C-d,A,b,0,_),Tr(b)&&(Oi(u.index,o)[xn]=yo(o,s,C,u))}}(s,o,u,Vr(u,o)),64==(64&u.flags)&&o0(s,o,u))}function u_(s,o,u=Vr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let g=0;g<l.length;g+=2){const _=l[g+1],C=-1===_?u(o,s):s[_];s[d++]=C}}}function Tb(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Mg(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):o}function Mg(s,o,u,l,d,g,_,C,b,A,N){const L=Ut+l,W=L+d,Q=function c_(s,o){const u=[];for(let l=0;l<o;l++)u.push(l<s?null:Vt);return u}(L,W),Ce="function"==typeof A?A():A;return Q[Ye]={type:s,blueprint:Q,template:u,queries:null,viewQuery:C,declTNode:o,data:Q.slice().fill(null,L),bindingStartIndex:L,expandoStartIndex:W,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:Ce,incompleteFirstPass:!1,ssrId:N}}let n0=s=>null;function Rg(s,o,u,l){for(let d in s)if(s.hasOwnProperty(d)){u=null===u?{}:u;const g=s[d];null===l?Rf(u,o,d,g):l.hasOwnProperty(d)&&Rf(u,o,l[d],g)}return u}function Rf(s,o,u,l){s.hasOwnProperty(u)?s[u].push(o,l):s[u]=[o,l]}function Ks(s,o,u,l,d,g,_,C){const b=Vr(o,u);let N,A=o.inputs;!C&&null!=A&&(N=A[l])?(Og(s,u,N,l,d),Ls(o)&&function AM(s,o){const u=Oi(o,s);16&u[Mt]||(u[Mt]|=64)}(u,o.index)):3&o.type&&(l=function r0(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=_?_(d,o.value||"",l):d,g.setProperty(b,l,d))}function s0(s,o,u,l){if(Hl()){const d=null===l?null:{"":-1},g=function h_(s,o){const u=s.directiveRegistry;let l=null,d=null;if(u)for(let g=0;g<u.length;g++){const _=u[g];if(Ri(o,_.selectors,!1))if(l||(l=[]),Tr(_))if(null!==_.findHostDirectiveDefs){const C=[];d=d||new Map,_.findHostDirectiveDefs(_,C,d),l.unshift(...C,_),Ud(s,o,C.length)}else l.unshift(_),Ud(s,o,0);else d=d||new Map,_.findHostDirectiveDefs?.(_,l,d),l.push(_)}return null===l?null:[l,d]}(s,u);let _,C;null===g?_=C=null:[_,C]=g,null!==_&&$c(s,o,u,_,d,C),d&&function Ng(s,o,u){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=u[o[d+1]];if(null==g)throw new ie(-301,!1);l.push(o[d],g)}}}(u,l,d)}u.mergedAttrs=Zt(u.mergedAttrs,u.attrs)}function $c(s,o,u,l,d,g){for(let A=0;A<l.length;A++)Hs(Cc(u,o),s,l[A].type);!function Rb(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}(u,s.data.length,l.length);for(let A=0;A<l.length;A++){const N=l[A];N.providersResolver&&N.providersResolver(N)}let _=!1,C=!1,b=Fd(s,o,l.length,null);for(let A=0;A<l.length;A++){const N=l[A];u.mergedAttrs=Zt(u.mergedAttrs,N.hostAttrs),RM(s,u,o,b,N),xM(b,N,d),null!==N.contentQueries&&(u.flags|=4),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(u.flags|=64);const L=N.type.prototype;!_&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((s.preOrderHooks??=[]).push(u.index),_=!0),!C&&(L.ngOnChanges||L.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(u.index),C=!0),b++}!function Vd(s,o,u){const d=o.directiveEnd,g=s.data,_=o.attrs,C=[];let b=null,A=null;for(let N=o.directiveStart;N<d;N++){const L=g[N],W=u?u.get(L):null,Ce=W?W.outputs:null;b=Rg(L.inputs,N,b,W?W.inputs:null),A=Rg(L.outputs,N,A,Ce);const Ue=null===b||null===_||ao(o)?null:Nb(b,N,_);C.push(Ue)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=8),b.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=C,o.inputs=b,o.outputs=A}(s,u,g)}function o0(s,o,u){const l=u.directiveStart,d=u.directiveEnd,g=u.index,_=function fu(){return Ct.lFrame.currentDirectiveIndex}();try{po(g);for(let C=l;C<d;C++){const b=s.data[C],A=o[C];pu(C),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&Zn(b,A)}}finally{po(-1),pu(_)}}function Zn(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Ud(s,o,u){o.componentOffset=u,(s.components??=[]).push(o.index)}function xM(s,o,u){if(u){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)u[o.exportAs[l]]=s;Tr(o)&&(u[""]=s)}}function RM(s,o,u,l,d){s.data[l]=d;const g=d.factory||(d.factory=ma(d.type)),_=new _n(g,Tr(d),kd);s.blueprint[l]=_,u[l]=_,function ku(s,o,u,l,d){const g=d.hostBindings;if(g){let _=s.hostBindingOpCodes;null===_&&(_=s.hostBindingOpCodes=[]);const C=~o.index;(function l_(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(_)!=C&&_.push(C),_.push(u,l,g)}}(s,o,l,Fd(s,u,d.hostVars,Vt),d)}function La(s,o,u,l,d,g){const _=Vr(s,o);!function a0(s,o,u,l,d,g,_){if(null==g)s.removeAttribute(o,d,u);else{const C=null==_?te(g):_(g,l||"",d);s.setAttribute(o,d,C,u)}}(o[xt],_,g,s.value,u,l,d)}function Pg(s,o,u,l,d,g){const _=g[o];if(null!==_)for(let C=0;C<_.length;)Fu(l,u,_[C++],_[C++],_[C++])}function Fu(s,o,u,l,d){const g=er(null);try{const _=s.inputTransforms;null!==_&&_.hasOwnProperty(l)&&(d=_[l].call(o,d)),null!==s.setInput?s.setInput(o,d,u,l):o[l]=d}finally{er(g)}}function Nb(s,o,u){let l=null,d=0;for(;d<u.length;){const g=u[d];if(0!==g)if(5!==g){if("number"==typeof g)break;if(s.hasOwnProperty(g)){null===l&&(l=[]);const _=s[g];for(let C=0;C<_.length;C+=2)if(_[C]===o){l.push(g,_[C+1],u[d+1]);break}}d+=2}else d+=2;else d+=4}return l}function u0(s,o,u,l){return[s,!0,!1,o,null,0,l,u,null,null,null]}function c0(s,o){const u=s.contentQueries;if(null!==u)for(let l=0;l<u.length;l+=2){const g=u[l+1];if(-1!==g){const _=s.data[g];Uo(u[l]),_.contentQueries(2,o[g],g)}}}function Lu(s,o){return s[ii]?s[Eh][Ei]=o:s[ii]=o,s[Eh]=o,o}function l0(s,o,u){Uo(0);const l=er(null);try{o(s,u)}finally{er(l)}}function d0(s){return s[ko]||(s[ko]=[])}function Pb(s){return s.cleanup||(s.cleanup=[])}function f0(s,o){const u=s[Dr],l=u?u.get(Hc,null):null;l&&l.handleError(o)}function Og(s,o,u,l,d){for(let g=0;g<u.length;){const _=u[g++],C=u[g++];Fu(s.data[_],o[_],l,C,d)}}function Ob(s,o){const u=Oi(o,s),l=u[Ye];!function kb(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])}(l,u);const d=u[$n];null!==d&&null===u[Gn]&&(u[Gn]=db(d,u[Dr])),p0(l,u,u[xn])}function p0(s,o,u){mu(o);try{const l=s.viewQuery;null!==l&&l0(1,l,u);const d=s.template;null!==d&&a_(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&c0(s,o),s.staticViewQueries&&l0(2,s.viewQuery,u);const g=s.components;null!==g&&function PM(s,o){for(let u=0;u<o.length;u++)Ob(s,o[u])}(o,g)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[Mt]&=-5,Bo()}}let g0=(()=>{class s{}return s.__NG_ELEMENT_ID__=f_,s.__NG_ENV_ID__=o=>o,s})();class OM extends g0{constructor(o){super(),this._lView=o}onDestroy(o){return co(this._lView,o),()=>function lo(s,o){if(null===s[Ii])return;const u=s[Ii].indexOf(o);-1!==u&&s[Ii].splice(u,1)}(this._lView,o)}}function f_(){return new OM(Me())}let Nf=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(u,l,d){const g=typeof Zone>"u"?null:Zone.current,_=new Ol(u,A=>{this.all.has(A)&&this.queue.set(A,g)},d);let C;this.all.add(_),_.notify();const b=()=>{_.cleanup(),C?.(),this.all.delete(_),this.queue.delete(_)};return C=l?.onDestroy(b),{destroy:b}}flush(){if(0!==this.queue.size)for(const[u,l]of this.queue)this.queue.delete(u),l?l.run(()=>u.run()):u.run()}get isQueueEmpty(){return 0===this.queue.size}}return s.\u0275prov=Rt({token:s,providedIn:"root",factory:()=>new s}),s})();function Pf(s,o,u){let l=u?s.styles:null,d=u?s.classes:null,g=0;if(null!==o)for(let _=0;_<o.length;_++){const C=o[_];"number"==typeof C?g=C:1==g?d=Be(d,C):2==g&&(l=Be(l,C+": "+o[++_]+";"))}u?s.styles=l:s.stylesWithoutHost=l,u?s.classes=d:s.classesWithoutHost=d}function Of(s,o,u,l,d=!1){for(;null!==u;){const g=o[u.index];if(null!==g&&l.push(un(g)),bi(g)){for(let C=hr;C<g.length;C++){const b=g[C],A=b[Ye].firstChild;null!==A&&Of(b[Ye],b,A,l)}g[si]!==g[$n]&&l.push(g[si])}const _=u.type;if(8&_)Of(s,o,u.child,l);else if(32&_){const C=bo(u,o);let b;for(;b=C();)l.push(b)}else if(16&_){const C=Vy(o,u);if(Array.isArray(C))l.push(...C);else{const b=_d(o[On]);Of(b[Ye],b,C,l,!0)}}u=d?u.projectionNext:u.next}return l}function Gc(s,o,u,l=!0){const d=o[Fs].rendererFactory;d.begin&&d.begin();try{ar(s,o,s.template,u)}catch(_){throw l&&f0(o,_),_}finally{d.end&&d.end(),o[Fs].effectManager?.flush()}}function ar(s,o,u,l){const d=o[Mt];if(256!=(256&d)){o[Fs].effectManager?.flush(),mu(o);try{Uh(o),function mc(s){return Ct.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&a_(s,o,u,2,l);const _=3==(3&d);if(_){const A=s.preOrderCheckHooks;null!==A&&Ta(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Yl(o,A,0,null),vc(o,0)}if(function FM(s){for(let o=dg(s);null!==o;o=ui(o)){if(!o[ls])continue;const u=o[Lo];for(let l=0;l<u.length;l++){Ul(u[l])}}}(o),m0(o,2),null!==s.contentQueries&&c0(s,o),_){const A=s.contentCheckHooks;null!==A&&Ta(o,A)}else{const A=s.contentHooks;null!==A&&Yl(o,A,1),vc(o,1)}!function Db(s,o){const u=s.hostBindingOpCodes;if(null===u)return;const l=Yw(o,Fo);try{for(let d=0;d<u.length;d++){const g=u[d];if(g<0)po(~g);else{const _=g,C=u[++d],b=u[++d];$h(C,_),l.runInContext(b,2,o[_])}}}finally{null===o[Fo]&&Qw(o,Fo),po(-1)}}(s,o);const C=s.components;null!==C&&y0(o,C,0);const b=s.viewQuery;if(null!==b&&l0(2,b,l),_){const A=s.viewCheckHooks;null!==A&&Ta(o,A)}else{const A=s.viewHooks;null!==A&&Yl(o,A,2),vc(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[Mt]&=-73,fc(o)}finally{Bo()}}}function m0(s,o){for(let u=dg(s);null!==u;u=ui(u))for(let l=hr;l<u.length;l++)Fb(u[l],o)}function LM(s,o,u){Fb(Oi(o,s),u)}function Fb(s,o){if(!function Vh(s){return 128==(128&s[Mt])}(s))return;const u=s[Ye];if(80&s[Mt]&&0===o||1024&s[Mt]||2===o)ar(u,s,u.template,s[xn]);else if(s[ha]>0){m0(s,1);const d=s[Ye].components;null!==d&&y0(s,d,1)}}function y0(s,o,u){for(let l=0;l<o.length;l++)LM(s,o[l],u)}class kf{get rootNodes(){const o=this._lView,u=o[Ye];return Of(u,o,u.firstChild,[])}constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[xn]}set context(o){this._lView[xn]=o}get destroyed(){return 256==(256&this._lView[Mt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[Dn];if(bi(o)){const u=o[8],l=u?u.indexOf(this):-1;l>-1&&(v(o,l),I(u,l))}this._attachedToViewContainer=!1}p(this._lView[Ye],this._lView)}onDestroy(o){co(this._lView,o)}markForCheck(){Nd(this._cdRefInjectingView||this._lView)}detach(){this._lView[Mt]&=-129}reattach(){this._lView[Mt]|=128}detectChanges(){Gc(this._lView[Ye],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function df(s,o){Yo(s,o,o[xt],2,null,null)}(this._lView[Ye],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ie(902,!1);this._appRef=o}}class Lb extends kf{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Gc(o[Ye],o,o[xn],!1)}checkNoChanges(){}get context(){return null}}class kg extends Cg{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=Pt(o);return new Fg(u,this.ngModule)}}function _0(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class Vb{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,l){l=H(l);const d=this.injector.get(o,e_,l);return d!==e_||u===e_?d:this.parentInjector.get(o,u,l)}}class Fg extends fb{get inputs(){const o=this.componentDef,u=o.inputTransforms,l=_0(o.inputs);if(null!==u)for(const d of l)u.hasOwnProperty(d.propName)&&(d.transform=u[d.propName]);return l}get outputs(){return _0(this.componentDef.outputs)}constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function Rp(s){return s.map(hy).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}create(o,u,l,d){let g=(d=d||this.ngModule)instanceof Mr?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const _=g?new Vb(o,g):o,C=_.get(Xy,null);if(null===C)throw new ie(407,!1);const N={rendererFactory:C,sanitizer:_.get(yb,null),effectManager:_.get(Nf,null)},L=C.createRenderer(null,this.componentDef),W=this.componentDef.selectors[0][0]||"div",Q=l?function t0(s,o,u,l){const g=l.get(li,!1)||u===Mn.ShadowDom,_=s.selectRootElement(o,g);return function Sb(s){n0(s)}(_),_}(L,l,this.componentDef.encapsulation,_):Fc(L,W,function Va(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(W)),Ze=this.componentDef.signals?4608:this.componentDef.onPush?576:528,ft=Mg(0,null,null,1,0,null,null,null,null,null,null),xe=Sg(null,ft,null,Ze,null,null,N,L,_,null,null);let it,rn;mu(xe);try{const hn=this.componentDef;let sn,Hm=null;hn.findHostDirectiveDefs?(sn=[],Hm=new Map,hn.findHostDirectiveDefs(hn,sn,Hm),sn.push(hn)):sn=[hn];const pR=function Lg(s,o){const u=s[Ye],l=Ut;return s[l]=o,Fa(u,l,2,"#host",null)}(xe,Q),gR=function jb(s,o,u,l,d,g,_){const C=d[Ye];!function v0(s,o,u,l){for(const d of s)o.mergedAttrs=Zt(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(Pf(o,o.mergedAttrs,!0),null!==u&&mg(l,u,o))}(l,s,o,_);let b=null;null!==o&&(b=db(o,d[Dr]));const A=g.rendererFactory.createRenderer(o,u);let N=16;u.signals?N=4096:u.onPush&&(N=64);const L=Sg(d,Tb(u),null,N,d[s.index],s,g,A,null,null,b);return C.firstCreatePass&&Ud(C,s,l.length-1),Lu(d,L),d[s.index]=L}(pR,Q,hn,sn,xe,N,L);rn=Lh(ft,Ut),Q&&function Hb(s,o,u,l){if(l)ut(s,u,["ng-version",zw.full]);else{const{attrs:d,classes:g}=function oc(s){const o=[],u=[];let l=1,d=2;for(;l<s.length;){let g=s[l];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++l]):8===d&&u.push(g);else{if(!br(d))break;d=g}l++}return{attrs:o,classes:u}}(o.selectors[0]);d&&ut(s,u,d),g&&g.length>0&&gg(s,u,g.join(" "))}}(L,hn,Q,l),void 0!==u&&function y_(s,o,u){const l=s.projection=[];for(let d=0;d<o.length;d++){const g=u[d];l.push(null!=g?Array.from(g):null)}}(rn,this.ngContentSelectors,u),it=function m_(s,o,u,l,d,g){const _=Ur(),C=d[Ye],b=Vr(_,d);$c(C,d,_,u,null,l);for(let N=0;N<u.length;N++)Gr(yo(d,C,_.directiveStart+N,_),d);o0(C,d,_),b&&Gr(b,d);const A=yo(d,C,_.directiveStart+_.componentOffset,_);if(s[xn]=d[xn]=A,null!==g)for(const N of g)N(A,o);return xf(C,_,s),A}(gR,hn,sn,Hm,xe,[VM]),p0(ft,xe,null)}finally{Bo()}return new Ub(this.componentType,it,Pu(rn,xe),xe,rn)}}class Ub extends EM{constructor(o,u,l,d,g){super(),this.location=l,this._rootLView=d,this._tNode=g,this.previousInputValues=null,this.instance=u,this.hostView=this.changeDetectorRef=new Lb(d),this.componentType=o}setInput(o,u){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),u))return;const g=this._rootLView;Og(g[Ye],g,d,o,u),this.previousInputValues.set(o,u),Nd(Oi(this._tNode.index,g))}}get injector(){return new $s(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function VM(){const s=Ur();Zl(Me()[Ye],s)}function Bd(s){let o=function w0(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const l=[s];for(;o;){let d;if(Tr(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ie(903,!1);d=o.\u0275dir}if(d){if(u){l.push(d);const _=s;_.inputs=Vg(s.inputs),_.inputTransforms=Vg(s.inputTransforms),_.declaredInputs=Vg(s.declaredInputs),_.outputs=Vg(s.outputs);const C=d.hostBindings;C&&Gb(s,C);const b=d.viewQuery,A=d.contentQueries;if(b&&E0(s,b),A&&C0(s,A),G(s.inputs,d.inputs),G(s.declaredInputs,d.declaredInputs),G(s.outputs,d.outputs),null!==d.inputTransforms&&(null===_.inputTransforms&&(_.inputTransforms={}),G(_.inputTransforms,d.inputTransforms)),Tr(d)&&d.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let _=0;_<g.length;_++){const C=g[_];C&&C.ngInherit&&C(s),C===Bd&&(u=!1)}}o=Object.getPrototypeOf(o)}!function $b(s){let o=0,u=null;for(let l=s.length-1;l>=0;l--){const d=s[l];d.hostVars=o+=d.hostVars,d.hostAttrs=Zt(d.hostAttrs,u=Zt(u,d.hostAttrs))}}(l)}function Vg(s){return s===mn?{}:s===bt?[]:s}function E0(s,o){const u=s.viewQuery;s.viewQuery=u?(l,d)=>{o(l,d),u(l,d)}:o}function C0(s,o){const u=s.contentQueries;s.contentQueries=u?(l,d,g)=>{o(l,d,g),u(l,d,g)}:o}function Gb(s,o){const u=s.hostBindings;s.hostBindings=u?(l,d)=>{o(l,d),u(l,d)}:o}function Is(s){const o=s.inputConfig,u={};for(const l in o)if(o.hasOwnProperty(l)){const d=o[l];Array.isArray(d)&&d[2]&&(u[l]=d[2])}s.inputTransforms=u}function Bg(s){return!!Zs(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function Zs(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Yt(s,o,u){return s[o]=u}function di(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Ui(s,o,u,l){const d=di(s,o,u);return di(s,o+1,l)||d}function zc(s,o,u,l){const d=Me();return di(d,kn(),o)&&(zt(),La(Bn(),d,s,o,u,l)),zc}function Hd(s,o,u,l){return di(s,kn(),u)?o+te(u)+l:Vt}function yt(s,o,u,l,d,g,_,C){const b=Me(),A=zt(),N=s+Ut,L=A.firstCreatePass?function tr(s,o,u,l,d,g,_,C,b){const A=o.consts,N=Fa(o,s,4,_||null,ps(A,C));s0(o,u,N,ps(A,b)),Zl(o,N);const L=N.tView=Mg(2,N,l,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A,null);return null!==o.queries&&(o.queries.template(o,N),L.queries=o.queries.embeddedTView(N)),N}(N,A,b,o,u,l,d,g,_):A.data[N];zi(L,!1);const W=Vf(A,b,L,s);vu()&&wd(A,b,W,L),Gr(W,b),Lu(b,b[N]=u0(W,b,W,L)),Vs(L)&&Ld(A,b,L),null!=_&&u_(b,L,C)}let Vf=function cn(s,o,u,l){return jo(!0),o[xt].createComment("")};function Wg(s,o,u){const l=Me();return di(l,kn(),o)&&Ks(zt(),Bn(),l,s,o,l[xt],u,!1),Wg}function ju(s,o,u,l,d){const _=d?"class":"style";Og(s,u,o.inputs[_],_,l)}function Wd(s,o,u,l){const d=Me(),g=zt(),_=Ut+s,C=d[xt],b=g.firstCreatePass?function ZM(s,o,u,l,d,g){const _=o.consts,b=Fa(o,s,2,l,ps(_,d));return s0(o,u,b,ps(_,g)),null!==b.attrs&&Pf(b,b.attrs,!1),null!==b.mergedAttrs&&Pf(b,b.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,b),b}(_,g,d,o,u,l):g.data[_],A=M0(g,d,b,C,o,s);d[_]=A;const N=Vs(b);return zi(b,!0),mg(C,A,b),32!=(32&b.flags)&&vu()&&wd(g,d,A,b),0===function Hp(){return Ct.lFrame.elementDepthCount}()&&Gr(A,d),function jh(){Ct.lFrame.elementDepthCount++}(),N&&(Ld(g,d,b),xf(g,b,d)),null!==l&&u_(d,b),Wd}function I_(){let s=Ur();du()?zl():(s=s.parent,zi(s,!1));const o=s;(function Da(s){return Ct.skipHydrationRootTNode===s})(o)&&function Gp(){Ct.skipHydrationRootTNode=null}(),function $p(){Ct.lFrame.elementDepthCount--}();const u=zt();return u.firstCreatePass&&(Zl(u,s),ga(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Ql(s){return 0!=(8&s.flags)}(o)&&ju(u,o,Me(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Ec(s){return 0!=(16&s.flags)}(o)&&ju(u,o,Me(),o.stylesWithoutHost,!1),I_}function qd(s,o,u,l){return Wd(s,o,u,l),I_(),qd}let M0=(s,o,u,l,d,g)=>(jo(!0),Fc(l,d,function _c(){return Ct.lFrame.currentNamespace}()));function qg(s,o,u){const l=Me(),d=zt(),g=s+Ut,_=d.firstCreatePass?function x0(s,o,u,l,d){const g=o.consts,_=ps(g,l),C=Fa(o,s,8,"ng-container",_);return null!==_&&Pf(C,_,!0),s0(o,u,C,ps(g,d)),null!==o.queries&&o.queries.elementStart(o,C),C}(g,d,l,o,u):d.data[g];zi(_,!0);const C=b_(d,l,_,s);return l[g]=C,vu()&&wd(d,l,C,_),Gr(C,l),Vs(_)&&(Ld(d,l,_),xf(d,_,l)),null!=u&&u_(l,_),qg}function Kg(){let s=Ur();const o=zt();return du()?zl():(s=s.parent,zi(s,!1)),o.firstCreatePass&&(Zl(o,s),ga(s)&&o.queries.elementEnd(s)),Kg}let b_=(s,o,u,l)=>(jo(!0),Na(o[xt],""));function Ao(){return Me()}function R0(s){return!!s&&"function"==typeof s.then}function Uf(s){return!!s&&"function"==typeof s.subscribe}function Ba(s,o,u,l){const d=Me(),g=zt(),_=Ur();return function N0(s,o,u,l,d,g,_){const C=Vs(l),A=s.firstCreatePass&&Pb(s),N=o[xn],L=d0(o);let W=!0;if(3&l.type||_){const Ue=Vr(l,o),Ze=_?_(Ue):Ue,ft=L.length,xe=_?rn=>_(un(rn[l.index])):l.index;let it=null;if(!_&&C&&(it=function Kd(s,o,u,l){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const _=d[g];if(_===u&&d[g+1]===l){const C=o[ko],b=d[g+2];return C.length>b?C[b]:null}"string"==typeof _&&(g+=2)}return null}(s,o,d,l.index)),null!==it)(it.__ngLastListenerFn__||it).__ngNextListenerFn__=g,it.__ngLastListenerFn__=g,W=!1;else{g=oD(l,o,N,g,!1);const rn=u.listen(Ze,d,g);L.push(g,rn),A&&A.push(d,xe,ft,ft+1)}}else g=oD(l,o,N,g,!1);const Q=l.outputs;let Ce;if(W&&null!==Q&&(Ce=Q[d])){const Ue=Ce.length;if(Ue)for(let Ze=0;Ze<Ue;Ze+=2){const hn=o[Ce[Ze]][Ce[Ze+1]].subscribe(g),sn=L.length;L.push(g,hn),A&&A.push(d,l.index,sn,-(sn+1))}}}(g,d,d[xt],_,s,o,l),Ba}function T_(s,o,u,l){try{return fs(6,o,u),!1!==u(l)}catch(d){return f0(s,d),!1}finally{fs(7,o,u)}}function oD(s,o,u,l,d){return function g(_){if(_===Function)return l;Nd(s.componentOffset>-1?Oi(s.index,o):o);let b=T_(o,u,l,_),A=g.__ngNextListenerFn__;for(;A;)b=T_(o,u,A,_)&&b,A=A.__ngNextListenerFn__;return d&&!1===b&&_.preventDefault(),b}}function aD(s=1){return function Gh(s){return(Ct.lFrame.contextLView=function vy(s,o){for(;s>0;)o=o[cs],s--;return o}(s,Ct.lFrame.contextLView))[xn]}(s)}function S_(s,o,u){return fi(s,"",o,"",u),S_}function fi(s,o,u,l,d){const g=Me(),_=Hd(g,o,u,l);return _!==Vt&&Ks(zt(),Bn(),g,s,_,g[xt],d,!1),fi}function A_(s,o){return s<<17|o<<2}function Kc(s){return s>>17&32767}function F0(s){return 2|s}function Zd(s){return(131068&s)>>2}function L0(s,o){return-131069&s|o<<2}function V0(s){return 1|s}function U0(s,o,u,l,d){const g=s[u+1],_=null===o;let C=l?Kc(g):Zd(g),b=!1;for(;0!==C&&(!1===b||_);){const N=s[C+1];tx(s[C],o)&&(b=!0,s[C+1]=l?V0(N):F0(N)),C=l?Kc(N):Zd(N)}b&&(s[u+1]=l?F0(g):V0(g))}function tx(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&je(s,o)>=0}const Wr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function B0(s){return s.substring(Wr.key,Wr.keyEnd)}function Xr(s,o){const u=Wr.textEnd;return u===o?-1:(o=Wr.keyEnd=function M_(s,o,u){for(;o<u&&s.charCodeAt(o)>32;)o++;return o}(s,Wr.key=o,u),vn(s,o,u))}function vn(s,o,u){for(;o<u&&s.charCodeAt(o)<=32;)o++;return o}function G0(s,o){return function ei(s,o,u,l){const d=Me(),g=zt(),_=Wi(2);g.firstUpdatePass&&Bf(g,s,_,l),o!==Vt&&di(d,_,o)&&R_(g,g.data[oi()],d,d[xt],s,d[_+1]=function z0(s,o){return null==s||""===s||("string"==typeof o?s+=o:"object"==typeof s&&(s=X(xu(s)))),s}(o,u),l,_)}(s,o,null,!0),G0}function Gu(s){!function Ss(s,o,u,l){const d=zt(),g=Wi(2);d.firstUpdatePass&&Bf(d,null,g,l);const _=Me();if(u!==Vt&&di(_,g,u)){const C=d.data[oi()];if(Hf(C,l)&&!Jg(d,g)){let b=l?C.classesWithoutHost:C.stylesWithoutHost;null!==b&&(u=Be(b,u||"")),ju(d,C,_,u,l)}else!function jf(s,o,u,l,d,g,_,C){d===Vt&&(d=bt);let b=0,A=0,N=0<d.length?d[0]:null,L=0<g.length?g[0]:null;for(;null!==N||null!==L;){const W=b<d.length?d[b+1]:void 0,Q=A<g.length?g[A+1]:void 0;let Ue,Ce=null;N===L?(b+=2,A+=2,W!==Q&&(Ce=L,Ue=Q)):null===L||null!==N&&N<L?(b+=2,Ce=N):(A+=2,Ce=L,Ue=Q),null!==Ce&&R_(s,o,u,l,Ce,Ue,_,C),N=b<d.length?d[b]:null,L=A<g.length?g[A]:null}}(d,C,_,_[xt],_[g+1],_[g+1]=function Xg(s,o,u){if(null==u||""===u)return bt;const l=[],d=xu(u);if(Array.isArray(d))for(let g=0;g<d.length;g++)s(l,d[g],!0);else if("object"==typeof d)for(const g in d)d.hasOwnProperty(g)&&s(l,g,d[g]);else"string"==typeof d&&o(l,d);return l}(s,o,u),l,g)}}(fD,wn,s,!0)}function wn(s,o){for(let u=function j0(s){return function H0(s){Wr.key=0,Wr.keyEnd=0,Wr.value=0,Wr.valueEnd=0,Wr.textEnd=s.length}(s),Xr(s,vn(s,0,Wr.textEnd))}(o);u>=0;u=Xr(o,u))ce(s,B0(o),!0)}function Jg(s,o){return o>=s.expandoStartIndex}function Bf(s,o,u,l){const d=s.data;if(null===d[u+1]){const g=d[oi()],_=Jg(s,u);Hf(g,l)&&null===o&&!_&&(o=!1),o=function ix(s,o,u,l){const d=function Wl(s){const o=Ct.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(u=As(u=ja(null,s,o,u,l),o.attrs,l),g=null);else{const _=o.directiveStylingLast;if(-1===_||s[_]!==d)if(u=ja(d,s,o,u,l),null===g){let b=function Zc(s,o,u){const l=u?o.classBindings:o.styleBindings;if(0!==Zd(l))return s[Kc(l)]}(s,o,l);void 0!==b&&Array.isArray(b)&&(b=ja(null,s,o,b[1],l),b=As(b,o.attrs,l),function Yc(s,o,u,l){s[Kc(u?o.classBindings:o.styleBindings)]=l}(s,o,l,b))}else g=function x_(s,o,u){let l;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)l=As(l,s[g].hostAttrs,u);return As(l,o.attrs,u)}(s,o,l)}return void 0!==g&&(l?o.residualClasses=g:o.residualStyles=g),u}(d,g,o,l),function XM(s,o,u,l,d,g){let _=g?o.classBindings:o.styleBindings,C=Kc(_),b=Zd(_);s[l]=u;let N,A=!1;if(Array.isArray(u)?(N=u[1],(null===N||je(u,N)>0)&&(A=!0)):N=u,d)if(0!==b){const W=Kc(s[C+1]);s[l+1]=A_(W,C),0!==W&&(s[W+1]=L0(s[W+1],l)),s[C+1]=function QM(s,o){return 131071&s|o<<17}(s[C+1],l)}else s[l+1]=A_(C,0),0!==C&&(s[C+1]=L0(s[C+1],l)),C=l;else s[l+1]=A_(b,0),0===C?C=l:s[b+1]=L0(s[b+1],l),b=l;A&&(s[l+1]=F0(s[l+1])),U0(s,N,l,!0),U0(s,N,l,!1),function ex(s,o,u,l,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&je(g,o)>=0&&(u[l+1]=V0(u[l+1]))}(o,N,s,l,g),_=A_(C,b),g?o.classBindings=_:o.styleBindings=_}(d,g,o,u,_,l)}}function ja(s,o,u,l,d){let g=null;const _=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<_&&(g=o[C],l=As(l,g.hostAttrs,d),g!==s);)C++;return null!==s&&(u.directiveStylingLast=C),l}function As(s,o,u){const l=u?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const _=o[g];"number"==typeof _?d=_:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),ce(s,_,!!u||o[++g]))}return void 0===s?null:s}function fD(s,o,u){const l=String(o);""!==l&&!l.includes(" ")&&ce(s,l,u)}function R_(s,o,u,l,d,g,_,C){if(!(3&o.type))return;const b=s.data,A=b[C+1],N=function JM(s){return 1==(1&s)}(A)?em(b,o,u,d,Zd(A),_):void 0;Ha(N)||(Ha(g)||function YM(s){return 2==(2&s)}(A)&&(g=em(b,null,u,d,C,_)),function pg(s,o,u,l,d){if(o)d?s.addClass(u,l):s.removeClass(u,l);else{let g=-1===l.indexOf("-")?void 0:sg.DashCase;null==d?s.removeStyle(u,l,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=sg.Important),s.setStyle(u,l,d,g))}}(l,_,Ia(oi(),u),d,g))}function em(s,o,u,l,d,g){const _=null===o;let C;for(;d>0;){const b=s[d],A=Array.isArray(b),N=A?b[1]:b,L=null===N;let W=u[d+1];W===Vt&&(W=L?bt:void 0);let Q=L?ze(W,l):N===l?W:void 0;if(A&&!Ha(Q)&&(Q=ze(b,l)),Ha(Q)&&(C=Q,_))return C;const Ce=s[d+1];d=_?Kc(Ce):Zd(Ce)}if(null!==o){let b=g?o.residualClasses:o.residualStyles;null!=b&&(C=ze(b,l))}return C}function Ha(s){return void 0!==s}function Hf(s,o){return 0!=(s.flags&(o?8:16))}function W0(s,o=""){const u=Me(),l=zt(),d=s+Ut,g=l.firstCreatePass?Fa(l,d,1,o,null):l.data[d],_=q0(l,u,g,o,s);u[d]=_,vu()&&wd(l,u,_,g),zi(g,!1)}let q0=(s,o,u,l,d)=>(jo(!0),function kc(s,o){return s.createText(o)}(o[xt],l));function P_(s){return O_("",s,""),P_}function O_(s,o,u){const l=Me(),d=Hd(l,s,o,u);return d!==Vt&&function ea(s,o,u){const l=Ia(o,s);!function Do(s,o,u){s.setValue(o,u)}(s[xt],l,u)}(l,oi(),d),O_}const Jc=void 0;var TD=["en",[["a","p"],["AM","PM"],Jc],[["AM","PM"],Jc,Jc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Jc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Jc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Jc,"{1} 'at' {0}",Jc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function qu(s){const u=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===l?1:5}];let na={};function im(s){const o=function L_(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=Xc(o);if(u)return u;const l=o.split("-")[0];if(u=Xc(l),u)return u;if("en"===l)return TD;throw new ie(701,!1)}function F_(s){return im(s)[el.PluralCase]}function Xc(s){return s in na||(na[s]=an.ng&&an.ng.common&&an.ng.common.locales&&an.ng.common.locales[s]),na[s]}var el=function(s){return s[s.LocaleId=0]="LocaleId",s[s.DayPeriodsFormat=1]="DayPeriodsFormat",s[s.DayPeriodsStandalone=2]="DayPeriodsStandalone",s[s.DaysFormat=3]="DaysFormat",s[s.DaysStandalone=4]="DaysStandalone",s[s.MonthsFormat=5]="MonthsFormat",s[s.MonthsStandalone=6]="MonthsStandalone",s[s.Eras=7]="Eras",s[s.FirstDayOfWeek=8]="FirstDayOfWeek",s[s.WeekendRange=9]="WeekendRange",s[s.DateFormat=10]="DateFormat",s[s.TimeFormat=11]="TimeFormat",s[s.DateTimeFormat=12]="DateTimeFormat",s[s.NumberSymbols=13]="NumberSymbols",s[s.NumberFormats=14]="NumberFormats",s[s.CurrencyCode=15]="CurrencyCode",s[s.CurrencySymbol=16]="CurrencySymbol",s[s.CurrencyName=17]="CurrencyName",s[s.Currencies=18]="Currencies",s[s.Directionality=19]="Directionality",s[s.PluralCase=20]="PluralCase",s[s.ExtraData=21]="ExtraData",s}(el||{});const tl="en-US";let AD=tl;function Mo(s,o,u,l,d){if(s=Oe(s),Array.isArray(s))for(let g=0;g<s.length;g++)Mo(s[g],o,u,l,d);else{const g=zt(),_=Me();let C=Sd(s)?s:Oe(s.provide),b=Oa(s);const A=Ur(),N=1048575&A.providerIndexes,L=A.directiveStart,W=A.providerIndexes>>20;if(Sd(s)||!s.multi){const Q=new _n(b,d,kd),Ce=nh(C,o,d?N:N+W,L);-1===Ce?(Hs(Cc(A,_),g,C),_m(g,s,o.length),o.push(C),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(Q),_.push(Q)):(u[Ce]=Q,_[Ce]=Q)}else{const Q=nh(C,o,N+W,L),Ce=nh(C,o,N,N+W),Ze=Ce>=0&&u[Ce];if(d&&!Ze||!d&&!(Q>=0&&u[Q])){Hs(Cc(A,_),g,C);const ft=function Dx(s,o,u,l,d){const g=new _n(s,u,kd);return g.multi=[],g.index=o,g.componentProviders=0,wE(g,d,l&&!u),g}(d?YD:ZD,u.length,d,l,b);!d&&Ze&&(u[Ce].providerFactory=ft),_m(g,s,o.length,0),o.push(C),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(ft),_.push(ft)}else _m(g,s,Q>-1?Q:Ce,wE(u[d?Ce:Q],b,!d&&l));!d&&l&&Ze&&u[Ce].componentProviders++}}}function _m(s,o,u,l){const d=Sd(o),g=function Pw(s){return!!s.useClass}(o);if(d||g){const b=(g?Oe(o.useClass):o).prototype.ngOnDestroy;if(b){const A=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const N=A.indexOf(u);-1===N?A.push(u,[l,b]):A[N+1].push(l,b)}else A.push(u,b)}}}function wE(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function nh(s,o,u,l){for(let d=u;d<l;d++)if(o[d]===s)return d;return-1}function ZD(s,o,u,l){return j_(this.multi,[])}function YD(s,o,u,l){const d=this.multi;let g;if(this.providerFactory){const _=this.providerFactory.componentProviders,C=yo(u,u[Ye],this.providerFactory.index,l);g=C.slice(0,_),j_(d,g);for(let b=_;b<C.length;b++)g.push(C[b])}else g=[],j_(d,g);return g}function j_(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function QD(s,o=[]){return u=>{u.providersResolver=(l,d)=>function ym(s,o,u){const l=zt();if(l.firstCreatePass){const d=Tr(s);Mo(u,l.data,l.blueprint,d,!0),Mo(o,l.data,l.blueprint,d,!1)}}(l,d?d(s):s,o)}}class Ga{}class H_{}function Tx(s,o){return new vm(s,o??null,[])}class vm extends Ga{constructor(o,u,l){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kg(this);const d=Or(o);this._bootstrapComponents=Ou(d.bootstrap),this._r3Injector=Mf(o,u,[{provide:Ga,useValue:this},{provide:Cg,useValue:this.componentFactoryResolver},...l],X(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class $_ extends H_{constructor(o){super(),this.moduleType=o}create(o){return new vm(this.moduleType,o,[])}}class EE extends Ga{constructor(o){super(),this.componentFactoryResolver=new kg(this),this.instance=null;const u=new ub([...o.providers,{provide:Ga,useValue:this},{provide:Cg,useValue:this.componentFactoryResolver}],o.parent||Cf(),o.debugName,new Set(["environment"]));this.injector=u,o.runEnvironmentInitializers&&u.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function JD(s,o,u=null){return new EE({providers:s,parent:o,debugName:u,runEnvironmentInitializers:!0}).injector}let Mx=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u)){const l=ob(0,u.type),d=l.length>0?JD([l],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u,d)}return this.cachedInjectors.get(u)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Rt({token:s,providedIn:"environment",factory:()=>new s(Jt(Mr))}),s})();function XD(s){s.getStandaloneInjector=o=>o.get(Mx).getOrCreateStandaloneInjector(s)}function TE(s,o,u){const l=Yr()+s,d=Me();return d[l]===Vt?Yt(d,l,u?o.call(u):o()):function jg(s,o){return s[o]}(d,l)}function SE(s,o,u,l){return function oT(s,o,u,l,d,g){const _=o+u;return di(s,_,d)?Yt(s,_+1,g?l.call(g,d):l(d)):Im(s,_+1)}(Me(),Yr(),s,o,u,l)}function rT(s,o,u,l,d){return function aT(s,o,u,l,d,g,_){const C=o+u;return Ui(s,C,d,g)?Yt(s,C+2,_?l.call(_,d,g):l(d,g)):Im(s,C+2)}(Me(),Yr(),s,o,u,l,d)}function AE(s,o,u,l,d,g){return function Jf(s,o,u,l,d,g,_,C){const b=o+u;return function Hg(s,o,u,l,d){const g=Ui(s,o,u,l);return di(s,o+2,d)||g}(s,b,d,g,_)?Yt(s,b+3,C?l.call(C,d,g,_):l(d,g,_)):Im(s,b+3)}(Me(),Yr(),s,o,u,l,d,g)}function Im(s,o){const u=s[o];return u===Vt?void 0:u}function PE(s){return o=>{setTimeout(s,void 0,o)}}const xo=class z_ extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,l){let d=o,g=u||(()=>null),_=l;if(o&&"object"==typeof o){const b=o;d=b.next?.bind(b),g=b.error?.bind(b),_=b.complete?.bind(b)}this.__isAsync&&(g=PE(g),d&&(d=PE(d)),_&&(_=PE(_)));const C=super.subscribe({next:d,error:g,complete:_});return o instanceof J.w0&&o.add(C),C}};function W_(){return this._results[Symbol.iterator]()}class OE{get changes(){return this._changes||(this._changes=new xo)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=OE.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=W_)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const l=this;l.dirty=!1;const d=function Hr(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function sd(s,o,u){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],g=o[l];if(u&&(d=u(d),g=u(g)),g!==d)return!1}return!0}(l._results,d,u))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ep=(()=>{class s{}return s.__NG_ELEMENT_ID__=Dm,s})();const bm=ep,q_=class extends bm{constructor(o,u,l){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=l}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,u){return this.createEmbeddedViewImpl(o,u,null)}createEmbeddedViewImpl(o,u,l){const _=this._declarationTContainer.tView,C=Sg(this._declarationLView,_,o,4096&this._declarationLView[Mt]?4096:16,null,_.declTNode,null,null,null,u||null,l||null);C[fa]=this._declarationLView[this._declarationTContainer.index];const A=this._declarationLView[Ci];return null!==A&&(C[Ci]=A.createEmbeddedView(_)),p0(_,C,o),new kf(C)}};function Dm(){return Tm(Ur(),Me())}function Tm(s,o){return 4&s.type?new q_(o,s,Pu(s,o)):null}let Z_=(()=>{class s{}return s.__NG_ELEMENT_ID__=rp,s})();function rp(){return VE(Ur(),Me())}const fT=Z_,Qu=class extends fT{constructor(o,u,l){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=l}get element(){return Pu(this._hostTNode,this._hostLView)}get injector(){return new $s(this._hostTNode,this._hostLView)}get parentInjector(){const o=Iu(this._hostTNode,this._hostLView);if(Di(o)){const u=wu(o,this._hostLView),l=gn(o);return new $s(u[Ye].data[l+8],u)}return new $s(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=FE(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-hr}createEmbeddedView(o,u,l){let d,g;"number"==typeof l?d=l:null!=l&&(d=l.index,g=l.injector);const C=o.createEmbeddedViewImpl(u||{},g,null);return this.insertImpl(C,d,false),C}createComponent(o,u,l,d,g){const _=o&&!function Sc(s){return"function"==typeof s}(o);let C;if(_)C=u;else{const Ue=u||{};C=Ue.index,l=Ue.injector,d=Ue.projectableNodes,g=Ue.environmentInjector||Ue.ngModuleRef}const b=_?o:new Fg(Pt(o)),A=l||this.parentInjector;if(!g&&null==b.ngModule){const Ze=(_?A:this.parentInjector).get(Mr,null);Ze&&(g=Ze)}Pt(b.componentType??{});const Q=b.create(A,d,null,g);return this.insertImpl(Q.hostView,C,false),Q}insert(o,u){return this.insertImpl(o,u,!1)}insertImpl(o,u,l){const d=o._lView,g=d[Ye];if(function Vl(s){return bi(s[Dn])}(d)){const b=this.indexOf(o);if(-1!==b)this.detach(b);else{const A=d[Dn],N=new Qu(A,A[Zr],A[Dn]);N.detach(N.indexOf(o))}}const _=this._adjustIndex(u),C=this._lContainer;if(function ky(s,o,u,l){const d=hr+l,g=u.length;l>0&&(u[d-1][Ei]=o),l<g-hr?(o[Ei]=u[d],Ac(u,hr+l,o)):(u.push(o),o[Ei]=null),o[Dn]=u;const _=o[fa];null!==_&&u!==_&&function _w(s,o){const u=s[Lo];o[On]!==o[Dn][Dn][On]&&(s[ls]=!0),null===u?s[Lo]=[o]:u.push(o)}(_,o);const C=o[Ci];null!==C&&C.insertView(s),o[Mt]|=128}(g,d,C,_),!l){const b=Cd(_,C),A=d[xt],N=Fn(A,C[si]);null!==N&&function mw(s,o,u,l,d,g){l[$n]=d,l[Zr]=o,Yo(s,l,u,1,d,g)}(g,C[Zr],A,d,N,b)}return o.attachToViewContainerRef(),Ac(LE(C),_,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=FE(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),l=v(this._lContainer,u);l&&(I(LE(this._lContainer),u),p(l[Ye],l))}detach(o){const u=this._adjustIndex(o,-1),l=v(this._lContainer,u);return l&&null!=I(LE(this._lContainer),u)?new kf(l):null}_adjustIndex(o,u=0){return o??this.length+u}};function FE(s){return s[8]}function LE(s){return s[8]||(s[8]=[])}function VE(s,o){let u;const l=o[s.index];return bi(l)?u=l:(u=u0(l,o,null,s),o[s.index]=u,Lu(o,u)),UE(u,o,s,l),new Qu(u,s,o)}let UE=function pT(s,o,u,l){if(s[si])return;let d;d=8&u.type?un(l):function kx(s,o){const u=s[xt],l=u.createComment(""),d=Vr(o,s);return Y(u,Fn(u,d),l,function Es(s,o){return s.nextSibling(o)}(u,d),!1),l}(o,u),s[si]=d};class BE{constructor(o){this.queryList=o,this.matches=null}clone(){return new BE(this.queryList)}setDirty(){this.queryList.setDirty()}}class Q_{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const l=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let g=0;g<l;g++){const _=u.getByIndex(g);d.push(this.queries[_.indexInDeclarationView].clone())}return new Q_(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==IT(o,u).matches&&this.queries[u].setDirty()}}class mT{constructor(o,u,l=null){this.predicate=o,this.flags=u,this.read=l}}class J_{constructor(o=[]){this.queries=o}elementStart(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let l=0;l<this.length;l++){const d=null!==u?u.length:0,g=this.getByIndex(l).embeddedTView(o,d);g&&(g.indexInDeclarationView=l,null!==u?u.push(g):u=[g])}return null!==u?new J_(u):null}template(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Ju{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new Ju(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==u;)l=l.parent;return u===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const g=l[d];this.matchTNodeWithReadOption(o,u,Sm(u,g)),this.matchTNodeWithReadOption(o,u,$o(u,o,g,!1,!1))}else l===ep?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,$o(u,o,l,!1,!1))}matchTNodeWithReadOption(o,u,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Rd||d===Z_||d===ep&&4&u.type)this.addMatch(u.index,-2);else{const g=$o(u,o,d,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,l)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function Sm(s,o){const u=s.localNames;if(null!==u)for(let l=0;l<u.length;l+=2)if(u[l]===o)return u[l+1];return null}function _T(s,o,u,l){return-1===u?function yT(s,o){return 11&s.type?Pu(s,o):4&s.type?Tm(s,o):null}(o,s):-2===u?function Fx(s,o,u){return u===Rd?Pu(o,s):u===ep?Tm(o,s):u===Z_?VE(o,s):void 0}(s,o,l):yo(s,s[Ye],u,o)}function jE(s,o,u,l){const d=o[Ci].queries[l];if(null===d.matches){const g=s.data,_=u.matches,C=[];for(let b=0;b<_.length;b+=2){const A=_[b];C.push(A<0?null:_T(o,g[A],_[b+1],u.metadata.read))}d.matches=C}return d.matches}function HE(s,o,u,l){const d=s.queries.getByIndex(u),g=d.matches;if(null!==g){const _=jE(s,o,d,u);for(let C=0;C<g.length;C+=2){const b=g[C];if(b>0)l.push(_[C/2]);else{const A=g[C+1],N=o[-b];for(let L=hr;L<N.length;L++){const W=N[L];W[fa]===W[Dn]&&HE(W[Ye],W,A,l)}if(null!==N[Lo]){const L=N[Lo];for(let W=0;W<L.length;W++){const Q=L[W];HE(Q[Ye],Q,A,l)}}}}}return l}function vT(s){const o=Me(),u=zt(),l=gu();Uo(l+1);const d=IT(u,l);if(s.dirty&&function my(s){return 4==(4&s[Mt])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?HE(u,o,l,[]):jE(u,o,d,l);s.reset(g,$w),s.notifyOnChanges()}return!0}return!1}function ti(s,o,u,l){const d=zt();if(d.firstCreatePass){const g=Ur();(function CT(s,o,u){null===s.queries&&(s.queries=new J_),s.queries.track(new Ju(o,u))})(d,new mT(o,u,l),g.index),function GE(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function ET(s,o,u){const l=new OE(4==(4&u));(function xg(s,o,u,l){const d=d0(o);d.push(u),s.firstCreatePass&&Pb(s).push(l,d.length-1)})(s,o,l,l.destroy),null===o[Ci]&&(o[Ci]=new Q_),o[Ci].queries.push(new BE(l))}(d,Me(),u)}function wT(){return function Lx(s,o){return s[Ci].queries[o].queryList}(Me(),gu())}function IT(s,o){return s.queries.getByIndex(o)}function Mm(s){return!!Or(s)}const cv=new In("Application Initializer");let ul=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l}),this.appInits=qt(cv,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const u=[];for(const d of this.appInits){const g=d();if(R0(g))u.push(g);else if(Uf(g)){const _=new Promise((C,b)=>{g.subscribe({complete:C,error:b})});u.push(_)}}const l=()=>{this.done=!0,this.resolve()};Promise.all(u).then(()=>{l()}).catch(d=>{this.reject(d)}),0===u.length&&l(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Rt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),lv=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Rt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const cl=new In("LocaleId",{providedIn:"root",factory:()=>qt(cl,gt.Optional|gt.SkipSelf)||function dv(){return typeof $localize<"u"&&$localize.locale||tl}()}),rC=new In("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let ec=(()=>{class s{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new F.X(!1)}add(){this.hasPendingTasks.next(!0);const u=this.taskId++;return this.pendingTasks.add(u),u}remove(u){this.pendingTasks.delete(u),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Rt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();class BT{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let zx=(()=>{class s{compileModuleSync(u){return new $_(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const l=this.compileModuleSync(u),g=Ou(Or(u).declarations).reduce((_,C)=>{const b=Pt(C);return b&&_.push(new Fg(b)),_},[]);return new BT(l,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Rt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function uC(...s){}class Xi{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xo(!1),this.onMicrotaskEmpty=new xo(!1),this.onStable=new xo(!1),this.onError=new xo(!1),typeof Zone>"u")throw new ie(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&u,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function sp(){const s="function"==typeof an.requestAnimationFrame;let o=an[s?"requestAnimationFrame":"setTimeout"],u=an[s?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&u){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const d=u[Zone.__symbol__("OriginalDelegate")];d&&(u=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function qx(s){const o=()=>{!function $T(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(an,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Om(s),s.isCheckStableRunning=!0,fv(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Om(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,l,d,g,_,C)=>{try{return GT(s),u.invokeTask(d,g,_,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),pv(s)}},onInvoke:(u,l,d,g,_,C,b)=>{try{return GT(s),u.invoke(d,g,_,C,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),pv(s)}},onHasTask:(u,l,d,g)=>{u.hasTask(d,g),l===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,Om(s),fv(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,l,d,g)=>(u.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xi.isInAngularZone())throw new ie(909,!1)}static assertNotInAngularZone(){if(Xi.isInAngularZone())throw new ie(909,!1)}run(o,u,l){return this._inner.run(o,u,l)}runTask(o,u,l,d){const g=this._inner,_=g.scheduleEventTask("NgZoneEvent: "+d,o,Wx,uC,uC);try{return g.runTask(_,u,l)}finally{g.cancelTask(_)}}runGuarded(o,u,l){return this._inner.runGuarded(o,u,l)}runOutsideAngular(o){return this._outer.run(o)}}const Wx={};function fv(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Om(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function GT(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function pv(s){s._nesting--,fv(s)}class Kx{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xo,this.onMicrotaskEmpty=new xo,this.onStable=new xo,this.onError=new xo}run(o,u,l){return o.apply(u,l)}runGuarded(o,u,l){return o.apply(u,l)}runOutsideAngular(o){return o()}runTask(o,u,l,d){return o.apply(u,l)}}const gv=new In("",{providedIn:"root",factory:zT});function zT(){const s=qt(Xi);let o=!0;const u=new ee.y(d=>{o=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{d.next(o),d.complete()})}),l=new ee.y(d=>{let g;s.runOutsideAngular(()=>{g=s.onStable.subscribe(()=>{Xi.assertNotInAngularZone(),queueMicrotask(()=>{!o&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(o=!0,d.next(!0))})})});const _=s.onUnstable.subscribe(()=>{Xi.assertInAngularZone(),o&&(o=!1,s.runOutsideAngular(()=>{d.next(!1)}))});return()=>{g.unsubscribe(),_.unsubscribe()}});return(0,ne.T)(u,l.pipe((0,me.B)()))}const mv=new In(""),cC=new In("");let ll,lC=(()=>{class s{constructor(u,l,d){this._ngZone=u,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ll||(function dC(s){ll=s}(d),d.addToWindow(l)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xi.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(u)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,l,d){let g=-1;l&&l>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==g),u(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:d})}whenStable(u,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,l,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(Jt(Xi),Jt(yv),Jt(cC))},s.\u0275prov=Rt({token:s,factory:s.\u0275fac}),s})(),yv=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,l){this._applications.set(u,l)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,l=!0){return ll?.findTestabilityInTree(this,u,l)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Rt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),es=null;const _v=new In("AllowMultipleToken"),dl=new In("PlatformDestroyListeners"),hl=new In("appBootstrapListener");class hC{constructor(o,u){this.name=o,this.token=u}}function KT(s,o,u=[]){const l=`Platform: ${o}`,d=new In(l);return(g=[])=>{let _=Ev();if(!_||_.injector.get(_v,!1)){const C=[...u,...g,{provide:d,useValue:!0}];s?s(C):function fC(s){if(es&&!es.get(_v,!1))throw new ie(400,!1);(function qT(){!function lc(s){Nh=s}(()=>{throw new ie(600,!1)})})(),es=s;const o=s.get(ZT);(function vv(s){s.get(_g,null)?.forEach(u=>u())})(s)}(function wv(s=[],o){return Xo.create({name:o,providers:[{provide:wf,useValue:"platform"},{provide:dl,useValue:new Set([()=>es=null])},...s]})}(C,l))}return function gC(s){const o=Ev();if(!o)throw new ie(401,!1);return o}()}}function Ev(){return es?.get(ZT)??null}let ZT=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,l){const d=function YT(s="zone.js",o){return"noop"===s?new Kx:"zone.js"===s?new Xi(o):s}(l?.ngZone,function mC(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:l?.ngZoneEventCoalescing,runCoalescing:l?.ngZoneRunCoalescing}));return d.run(()=>{const g=function Ax(s,o,u){return new vm(s,o,u)}(u.moduleType,this.injector,function eS(s){return[{provide:Xi,useFactory:s},{provide:$y,multi:!0,useFactory:()=>{const o=qt(wC,{optional:!0});return()=>o.initialize()}},{provide:JT,useFactory:vC},{provide:gv,useFactory:zT}]}(()=>d)),_=g.injector.get(Hc,null);return d.runOutsideAngular(()=>{const C=d.onError.subscribe({next:b=>{_.handleError(b)}});g.onDestroy(()=>{Cv(this._modules,g),C.unsubscribe()})}),function yC(s,o,u){try{const l=u();return R0(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(_,d,()=>{const C=g.injector.get(ul);return C.runInitializers(),C.donePromise.then(()=>(function Ji(s){et(s,"Expected localeId to be defined"),"string"==typeof s&&(AD=s.toLowerCase().replace(/_/g,"-"))}(g.injector.get(cl,tl)||tl),this._moduleDoBootstrap(g),g))})})}bootstrapModule(u,l=[]){const d=_C({},l);return function WT(s,o,u){const l=new $_(u);return Promise.resolve(l)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(u){const l=u.injector.get(op);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new ie(-403,!1);u.instance.ngDoBootstrap(l)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ie(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const u=this._injector.get(dl,null);u&&(u.forEach(l=>l()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(Jt(Xo))},s.\u0275prov=Rt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function _C(s,o){return Array.isArray(o)?o.reduce(_C,s):{...s,...o}}let op=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=qt(JT),this.zoneIsStable=qt(gv),this.componentTypes=[],this.components=[],this.isStable=qt(ec).hasPendingTasks.pipe((0,Se.w)(u=>u?(0,ge.of)(!1):this.zoneIsStable),(0,ue.x)(),(0,me.B)()),this._injector=qt(Mr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,l){const d=u instanceof fb;if(!this._injector.get(ul).done)throw!d&&uo(u),new ie(405,!1);let _;_=d?u:this._injector.get(Cg).resolveComponentFactory(u),this.componentTypes.push(_.componentType);const C=function Zx(s){return s.isBoundToModule}(_)?void 0:this._injector.get(Ga),A=_.create(Xo.NULL,[],l||_.selector,C),N=A.location.nativeElement,L=A.injector.get(mv,null);return L?.registerApplication(N),A.onDestroy(()=>{this.detachView(A.hostView),Cv(this.components,A),L?.unregisterApplication(N)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new ie(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this.internalErrorHandler(u)}finally{this._runningTick=!1}}attachView(u){const l=u;this._views.push(l),l.attachToAppRef(this)}detachView(u){const l=u;Cv(this._views,l),l.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const l=this._injector.get(hl,[]);l.push(...this._bootstrapListeners),l.forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Cv(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new ie(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Rt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Cv(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}const JT=new In("",{providedIn:"root",factory:()=>qt(Hc).handleError.bind(void 0)});function vC(){const s=qt(Xi),o=qt(Hc);return u=>s.runOutsideAngular(()=>o.handleError(u))}let wC=(()=>{class s{constructor(){this.zone=qt(Xi),this.applicationRef=qt(op)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Rt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Yx(){return!1}let Jx=(()=>{class s{}return s.__NG_ELEMENT_ID__=IC,s})();function IC(s){return function Xx(s,o,u){if(Ls(s)&&!u){const l=Oi(s.index,o);return new kf(l,l)}return 47&s.type?new kf(o[On],o):null}(Ur(),Me(),16==(16&s))}class cS{constructor(){}supports(o){return Bg(o)}create(o){return new tR(o)}}const TC=(s,o)=>o;class tR{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||TC}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,l=this._removalsHead,d=0,g=null;for(;u||l;){const _=!l||u&&u.currentIndex<AC(l,d,g)?u:l,C=AC(_,d,g),b=_.currentIndex;if(_===l)d--,l=l._nextRemoved;else if(u=u._next,null==_.previousIndex)d++;else{g||(g=[]);const A=C-d,N=b-d;if(A!=N){for(let W=0;W<A;W++){const Q=W<g.length?g[W]:g[W]=0,Ce=Q+W;N<=Ce&&Ce<A&&(g[W]=Q+1)}g[_.previousIndex]=N-A}}C!==b&&o(_,C,b)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Bg(o))throw new ie(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,_,u=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let C=0;C<this.length;C++)g=o[C],_=this._trackByFn(C,g),null!==u&&Object.is(u.trackById,_)?(l&&(u=this._verifyReinsertion(u,g,_,C)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,_,C),l=!0),u=u._next}else d=0,function jM(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Symbol.iterator]();let l;for(;!(l=u.next()).done;)o(l.value)}}(o,C=>{_=this._trackByFn(d,C),null!==u&&Object.is(u.trackById,_)?(l&&(u=this._verifyReinsertion(u,C,_,d)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,_,d),l=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,l,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,g,d)):o=this._addAfter(new SC(u,l),g,d),o}_verifyReinsertion(o,u,l,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,u,l),this._addToMoves(o,l),o}_moveAfter(o,u,l){return this._unlink(o),this._insertAfter(o,u,l),this._addToMoves(o,l),o}_addAfter(o,u,l){return this._insertAfter(o,u,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,l){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new Tv),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,l=o._next;return null===u?this._itHead=l:u._next=l,null===l?this._itTail=u:l._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Tv),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class SC{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class lS{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===u||u<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const u=o._prevDup,l=o._nextDup;return null===u?this._head=l:u._nextDup=l,null===l?this._tail=u:l._prevDup=u,null===this._head}}class Tv{constructor(){this.map=new Map}put(o){const u=o.trackById;let l=this.map.get(u);l||(l=new lS,this.map.set(u,l)),l.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function AC(s,o,u){const l=s.previousIndex;if(null===l)return l;let d=0;return u&&l<u.length&&(d=u[l]),l+o+d}class dS{constructor(){}supports(o){return o instanceof Map||Zs(o)}create(){return new nR}}class nR{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Zs(o)))throw new ie(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,l),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(d,l);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let l=u;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const l=o._prev;return u._next=o,u._prev=l,o._prev=u,l&&(l._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const g=d._prev,_=d._next;return g&&(g._next=_),_&&(_._prev=g),d._next=null,d._prev=null,d}const l=new MC(o);return this._records.set(o,l),l.currentValue=u,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(l=>u(o[l],l))}}class MC{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function hS(){return new Vm([new cS])}let Vm=(()=>{class s{constructor(u){this.factories=u}static create(u,l){if(null!=l){const d=l.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||hS()),deps:[[s,new tf,new ef]]}}find(u){const l=this.factories.find(d=>d.supports(u));if(null!=l)return l;throw new ie(901,!1)}}return s.\u0275prov=Rt({token:s,providedIn:"root",factory:hS}),s})();function Sv(){return new xC([new dS])}let xC=(()=>{class s{constructor(u){this.factories=u}static create(u,l){if(l){const d=l.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||Sv()),deps:[[s,new tf,new ef]]}}find(u){const l=this.factories.find(d=>d.supports(u));if(l)return l;throw new ie(901,!1)}}return s.\u0275prov=Rt({token:s,providedIn:"root",factory:Sv}),s})();const cp=KT(null,"core",[]);let gS=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(Jt(op))},s.\u0275mod=ks({type:s}),s.\u0275inj=An({}),s})();function aR(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function CS(s){const o=Pt(s);if(!o)return null;const u=new Fg(o);return{get selector(){return u.selector},get type(){return u.componentType},get inputs(){return u.inputs},get outputs(){return u.outputs},get ngContentSelectors(){return u.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},3106:(at,be,O)=>{O.d(be,{Z:()=>We});var h=O(9058),J=O(4537),F=O(534),ee=O(7879);class ne{constructor($e,Le){this._delegate=$e,this.firebase=Le,(0,F._addComponent)($e,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=$e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled($e){this._delegate.automaticDataCollectionEnabled=$e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise($e=>{this._delegate.checkDestroyed(),$e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService($e,Le=F._DEFAULT_ENTRY_NAME){var _t;this._delegate.checkDestroyed();const ht=this._delegate.container.getProvider($e);return!ht.isInitialized()&&"EXPLICIT"===(null===(_t=ht.getComponent())||void 0===_t?void 0:_t.instantiationMode)&&ht.initialize(),ht.getImmediate({identifier:Le})}_removeServiceInstance($e,Le=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider($e).clearInstance(Le)}_addComponent($e){(0,F._addComponent)(this._delegate,$e)}_addOrOverwriteComponent($e){(0,F._addOrOverwriteComponent)(this._delegate,$e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function ue(){const Oe=function Se(Oe){const $e={},Le={__esModule:!0,initializeApp:function ie(Fe,Ge={}){const le=F.initializeApp(Fe,Ge);if((0,h.r3)($e,le.name))return $e[le.name];const wt=new Oe(le,Le);return $e[le.name]=wt,wt},app:ht,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function te(Fe){const Ge=Fe.name,le=Ge.replace("-compat","");if(F._registerComponent(Fe)&&"PUBLIC"===Fe.type){const wt=(jt=ht())=>{if("function"!=typeof jt[le])throw me.create("invalid-app-argument",{appName:Ge});return jt[le]()};void 0!==Fe.serviceProps&&(0,h.ZB)(wt,Fe.serviceProps),Le[le]=wt,Oe.prototype[le]=function(...jt){return this._getService.bind(this,Ge).apply(this,Fe.multipleInstances?jt:[])}}return"PUBLIC"===Fe.type?Le[le]:null},removeApp:function _t(Fe){delete $e[Fe]},useAsService:function Te(Fe,Ge){return"serverAuth"===Ge?null:Ge},modularAPIs:F}};function ht(Fe){if(!(0,h.r3)($e,Fe=Fe||F._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:Fe});return $e[Fe]}return Le.default=Le,Object.defineProperty(Le,"apps",{get:function _e(){return Object.keys($e).map(Fe=>$e[Fe])}}),ht.App=Oe,Le}(ne);return Oe.INTERNAL=Object.assign(Object.assign({},Oe.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function $e(Le){(0,h.ZB)(Oe,Le)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Oe}(),G=new ee.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Oe=self.firebase.SDK_VERSION;Oe&&Oe.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const We=U;!function Re(Oe){(0,F.registerVersion)("@firebase/app-compat","0.2.13",Oe)}()},534:(at,be,O)=>{O.r(be),O.d(be,{FirebaseError:()=>ee.ZR,SDK_VERSION:()=>oo,_DEFAULT_ENTRY_NAME:()=>gt,_addComponent:()=>Pn,_addOrOverwriteComponent:()=>ri,_apps:()=>St,_clearComponents:()=>dn,_components:()=>yn,_getProvider:()=>Er,_registerComponent:()=>an,_removeServiceInstance:()=>ua,deleteApp:()=>Cr,getApp:()=>vi,getApps:()=>is,initializeApp:()=>ca,onLog:()=>ss,registerVersion:()=>En,setLogLevel:()=>Jt});var h=O(5861),J=O(4537),F=O(7879),ee=O(9058);const ne=(pe,re)=>re.some(ke=>pe instanceof ke);let ge,me;const U=new WeakMap,G=new WeakMap,X=new WeakMap,Be=new WeakMap,Re=new WeakMap;let $e={get(pe,re,ke){if(pe instanceof IDBTransaction){if("done"===re)return G.get(pe);if("objectStoreNames"===re)return pe.objectStoreNames||X.get(pe);if("store"===re)return ke.objectStoreNames[1]?void 0:ke.objectStore(ke.objectStoreNames[0])}return ie(pe[re])},set:(pe,re,ke)=>(pe[re]=ke,!0),has:(pe,re)=>pe instanceof IDBTransaction&&("done"===re||"store"===re)||re in pe};function ht(pe){return"function"==typeof pe?function _t(pe){return pe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ue(){return me||(me=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(pe)?function(...re){return pe.apply(_e(this),re),ie(U.get(this))}:function(...re){return ie(pe.apply(_e(this),re))}:function(re,...ke){const ut=pe.call(_e(this),re,...ke);return X.set(ut,re.sort?re.sort():[re]),ie(ut)}}(pe):(pe instanceof IDBTransaction&&function Oe(pe){if(G.has(pe))return;const re=new Promise((ke,ut)=>{const Dt=()=>{pe.removeEventListener("complete",Nt),pe.removeEventListener("error",Zt),pe.removeEventListener("abort",Zt)},Nt=()=>{ke(),Dt()},Zt=()=>{ut(pe.error||new DOMException("AbortError","AbortError")),Dt()};pe.addEventListener("complete",Nt),pe.addEventListener("error",Zt),pe.addEventListener("abort",Zt)});G.set(pe,re)}(pe),ne(pe,function Se(){return ge||(ge=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(pe,$e):pe)}function ie(pe){if(pe instanceof IDBRequest)return function We(pe){const re=new Promise((ke,ut)=>{const Dt=()=>{pe.removeEventListener("success",Nt),pe.removeEventListener("error",Zt)},Nt=()=>{ke(ie(pe.result)),Dt()},Zt=()=>{ut(pe.error),Dt()};pe.addEventListener("success",Nt),pe.addEventListener("error",Zt)});return re.then(ke=>{ke instanceof IDBCursor&&U.set(ke,pe)}).catch(()=>{}),Re.set(re,pe),re}(pe);if(Be.has(pe))return Be.get(pe);const re=ht(pe);return re!==pe&&(Be.set(pe,re),Re.set(re,pe)),re}const _e=pe=>Re.get(pe),Fe=["get","getKey","getAll","getAllKeys","count"],Ge=["put","add","delete","clear"],le=new Map;function wt(pe,re){if(!(pe instanceof IDBDatabase)||re in pe||"string"!=typeof re)return;if(le.get(re))return le.get(re);const ke=re.replace(/FromIndex$/,""),ut=re!==ke,Dt=Ge.includes(ke);if(!(ke in(ut?IDBIndex:IDBObjectStore).prototype)||!Dt&&!Fe.includes(ke))return;const Nt=function(){var Zt=(0,h.Z)(function*(sr,...Jn){const Os=this.transaction(sr,Dt?"readwrite":"readonly");let ao=Os.store;return ut&&(ao=ao.index(Jn.shift())),(yield Promise.all([ao[ke](...Jn),Dt&&Os.done]))[0]});return function(Jn){return Zt.apply(this,arguments)}}();return le.set(re,Nt),Nt}!function Le(pe){$e=pe($e)}(pe=>({...pe,get:(re,ke,ut)=>wt(re,ke)||pe.get(re,ke,ut),has:(re,ke)=>!!wt(re,ke)||pe.has(re,ke)}));class jt{constructor(re){this.container=re}getPlatformInfoString(){return this.container.getProviders().map(ke=>{if(function wr(pe){const re=pe.getComponent();return"VERSION"===re?.type}(ke)){const ut=ke.getImmediate();return`${ut.library}/${ut.version}`}return null}).filter(ke=>ke).join(" ")}}const ni="@firebase/app",Qn=new F.Yd("@firebase/app"),gt="[DEFAULT]",Ht={[ni]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},St=new Map,yn=new Map;function Pn(pe,re){try{pe.container.addComponent(re)}catch(ke){Qn.debug(`Component ${re.name} failed to register with FirebaseApp ${pe.name}`,ke)}}function ri(pe,re){pe.container.addOrOverwriteComponent(re)}function an(pe){const re=pe.name;if(yn.has(re))return Qn.debug(`There were multiple attempts to register component ${re}.`),!1;yn.set(re,pe);for(const ke of St.values())Pn(ke,pe);return!0}function Er(pe,re){const ke=pe.container.getProvider("heartbeat").getImmediate({optional:!0});return ke&&ke.triggerHeartbeat(),pe.container.getProvider(re)}function ua(pe,re,ke=gt){Er(pe,re).clearInstance(ke)}function dn(){yn.clear()}const Ft=new ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class $i{constructor(re,ke,ut){this._isDeleted=!1,this._options=Object.assign({},re),this._config=Object.assign({},ke),this._name=ke.name,this._automaticDataCollectionEnabled=ke.automaticDataCollectionEnabled,this._container=ut,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(re){this.checkDestroyed(),this._automaticDataCollectionEnabled=re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(re){this._isDeleted=re}checkDestroyed(){if(this.isDeleted)throw Ft.create("app-deleted",{appName:this._name})}}const oo="9.23.0";function ca(pe,re={}){let ke=pe;"object"!=typeof re&&(re={name:re});const ut=Object.assign({name:gt,automaticDataCollectionEnabled:!1},re),Dt=ut.name;if("string"!=typeof Dt||!Dt)throw Ft.create("bad-app-name",{appName:String(Dt)});if(ke||(ke=(0,ee.aH)()),!ke)throw Ft.create("no-options");const Nt=St.get(Dt);if(Nt){if((0,ee.vZ)(ke,Nt.options)&&(0,ee.vZ)(ut,Nt.config))return Nt;throw Ft.create("duplicate-app",{appName:Dt})}const Zt=new J.H0(Dt);for(const Jn of yn.values())Zt.addComponent(Jn);const sr=new $i(ke,ut,Zt);return St.set(Dt,sr),sr}function vi(pe=gt){const re=St.get(pe);if(!re&&pe===gt&&(0,ee.aH)())return ca();if(!re)throw Ft.create("no-app",{appName:pe});return re}function is(){return Array.from(St.values())}function Cr(pe){return ir.apply(this,arguments)}function ir(){return(ir=(0,h.Z)(function*(pe){const re=pe.name;St.has(re)&&(St.delete(re),yield Promise.all(pe.container.getProviders().map(ke=>ke.delete())),pe.isDeleted=!0)})).apply(this,arguments)}function En(pe,re,ke){var ut;let Dt=null!==(ut=Ht[pe])&&void 0!==ut?ut:pe;ke&&(Dt+=`-${ke}`);const Nt=Dt.match(/\s|\//),Zt=re.match(/\s|\//);if(Nt||Zt){const sr=[`Unable to register library "${Dt}" with version "${re}":`];return Nt&&sr.push(`library name "${Dt}" contains illegal characters (whitespace or "/")`),Nt&&Zt&&sr.push("and"),Zt&&sr.push(`version name "${re}" contains illegal characters (whitespace or "/")`),void Qn.warn(sr.join(" "))}an(new J.wA(`${Dt}-version`,()=>({library:Dt,version:re}),"VERSION"))}function ss(pe,re){if(null!==pe&&"function"!=typeof pe)throw Ft.create("invalid-log-argument");(0,F.Am)(pe,re)}function Jt(pe){(0,F.Ub)(pe)}const os="firebase-heartbeat-database",qt=1,H="firebase-heartbeat-store";let B=null;function q(){return B||(B=function te(pe,re,{blocked:ke,upgrade:ut,blocking:Dt,terminated:Nt}={}){const Zt=indexedDB.open(pe,re),sr=ie(Zt);return ut&&Zt.addEventListener("upgradeneeded",Jn=>{ut(ie(Zt.result),Jn.oldVersion,Jn.newVersion,ie(Zt.transaction),Jn)}),ke&&Zt.addEventListener("blocked",Jn=>ke(Jn.oldVersion,Jn.newVersion,Jn)),sr.then(Jn=>{Nt&&Jn.addEventListener("close",()=>Nt()),Dt&&Jn.addEventListener("versionchange",Os=>Dt(Os.oldVersion,Os.newVersion,Os))}).catch(()=>{}),sr}(os,qt,{upgrade:(pe,re)=>{0===re&&pe.createObjectStore(H)}}).catch(pe=>{throw Ft.create("idb-open",{originalErrorMessage:pe.message})})),B}function oe(){return(oe=(0,h.Z)(function*(pe){try{return yield(yield q()).transaction(H).objectStore(H).get($t(pe))}catch(re){if(re instanceof ee.ZR)Qn.warn(re.message);else{const ke=Ft.create("idb-get",{originalErrorMessage:re?.message});Qn.warn(ke.message)}}})).apply(this,arguments)}function tt(pe,re){return mt.apply(this,arguments)}function mt(){return(mt=(0,h.Z)(function*(pe,re){try{const ut=(yield q()).transaction(H,"readwrite");yield ut.objectStore(H).put(re,$t(pe)),yield ut.done}catch(ke){if(ke instanceof ee.ZR)Qn.warn(ke.message);else{const ut=Ft.create("idb-set",{originalErrorMessage:ke?.message});Qn.warn(ut.message)}}})).apply(this,arguments)}function $t(pe){return`${pe.name}!${pe.options.appId}`}class bt{constructor(re){this.container=re,this._heartbeatsCache=null;const ke=this.container.getProvider("app").getImmediate();this._storage=new xi(ke),this._heartbeatsCachePromise=this._storage.read().then(ut=>(this._heartbeatsCache=ut,ut))}triggerHeartbeat(){var re=this;return(0,h.Z)(function*(){const ut=re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Dt=Gt();if(null===re._heartbeatsCache&&(re._heartbeatsCache=yield re._heartbeatsCachePromise),re._heartbeatsCache.lastSentHeartbeatDate!==Dt&&!re._heartbeatsCache.heartbeats.some(Nt=>Nt.date===Dt))return re._heartbeatsCache.heartbeats.push({date:Dt,agent:ut}),re._heartbeatsCache.heartbeats=re._heartbeatsCache.heartbeats.filter(Nt=>{const Zt=new Date(Nt.date).valueOf();return Date.now()-Zt<=2592e6}),re._storage.overwrite(re._heartbeatsCache)})()}getHeartbeatsHeader(){var re=this;return(0,h.Z)(function*(){if(null===re._heartbeatsCache&&(yield re._heartbeatsCachePromise),null===re._heartbeatsCache||0===re._heartbeatsCache.heartbeats.length)return"";const ke=Gt(),{heartbeatsToSend:ut,unsentEntries:Dt}=function Ir(pe,re=1024){const ke=[];let ut=pe.slice();for(const Dt of pe){const Nt=ke.find(Zt=>Zt.agent===Dt.agent);if(Nt){if(Nt.dates.push(Dt.date),as(ke)>re){Nt.dates.pop();break}}else if(ke.push({agent:Dt.agent,dates:[Dt.date]}),as(ke)>re){ke.pop();break}ut=ut.slice(1)}return{heartbeatsToSend:ke,unsentEntries:ut}}(re._heartbeatsCache.heartbeats),Nt=(0,ee.L)(JSON.stringify({version:2,heartbeats:ut}));return re._heartbeatsCache.lastSentHeartbeatDate=ke,Dt.length>0?(re._heartbeatsCache.heartbeats=Dt,yield re._storage.overwrite(re._heartbeatsCache)):(re._heartbeatsCache.heartbeats=[],re._storage.overwrite(re._heartbeatsCache)),Nt})()}}function Gt(){return(new Date).toISOString().substring(0,10)}class xi{constructor(re){this.app=re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ee.hl)()&&(0,ee.eu)().then(()=>!0).catch(()=>!1)})()}read(){var re=this;return(0,h.Z)(function*(){return(yield re._canUseIndexedDBPromise)&&(yield function De(pe){return oe.apply(this,arguments)}(re.app))||{heartbeats:[]}})()}overwrite(re){var ke=this;return(0,h.Z)(function*(){var ut;if(yield ke._canUseIndexedDBPromise){const Nt=yield ke.read();return tt(ke.app,{lastSentHeartbeatDate:null!==(ut=re.lastSentHeartbeatDate)&&void 0!==ut?ut:Nt.lastSentHeartbeatDate,heartbeats:re.heartbeats})}})()}add(re){var ke=this;return(0,h.Z)(function*(){var ut;if(yield ke._canUseIndexedDBPromise){const Nt=yield ke.read();return tt(ke.app,{lastSentHeartbeatDate:null!==(ut=re.lastSentHeartbeatDate)&&void 0!==ut?ut:Nt.lastSentHeartbeatDate,heartbeats:[...Nt.heartbeats,...re.heartbeats]})}})()}}function as(pe){return(0,ee.L)(JSON.stringify({version:2,heartbeats:pe})).length}!function wi(pe){an(new J.wA("platform-logger",re=>new jt(re),"PRIVATE")),an(new J.wA("heartbeat",re=>new bt(re),"PRIVATE")),En(ni,"0.9.13",pe),En(ni,"0.9.13","esm2017"),En("fire-js","")}("")},4537:(at,be,O)=>{O.d(be,{H0:()=>Se,wA:()=>F,zt:()=>ne});var h=O(5861),J=O(9058);class F{constructor(U,G,X){this.name=U,this.instanceFactory=G,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const ee="[DEFAULT]";class ne{constructor(U,G){this.name=U,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const G=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(G)){const X=new J.BH;if(this.instancesDeferred.set(G,X),this.isInitialized(G)||this.shouldAutoInitialize())try{const Be=this.getOrInitializeService({instanceIdentifier:G});Be&&X.resolve(Be)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(U){var G;const X=this.normalizeInstanceIdentifier(U?.identifier),Be=null!==(G=U?.optional)&&void 0!==G&&G;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Re){if(Be)return null;throw Re}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function me(ue){return"EAGER"===ue.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[G,X]of this.instancesDeferred.entries()){const Be=this.normalizeInstanceIdentifier(G);try{const Re=this.getOrInitializeService({instanceIdentifier:Be});X.resolve(Re)}catch{}}}}clearInstance(U=ee){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,h.Z)(function*(){const G=Array.from(U.instances.values());yield Promise.all([...G.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...G.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=ee){return this.instances.has(U)}getOptions(U=ee){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:G={}}=U,X=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Be=this.getOrInitializeService({instanceIdentifier:X,options:G});for(const[Re,We]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Re)&&We.resolve(Be);return Be}onInit(U,G){var X;const Be=this.normalizeInstanceIdentifier(G),Re=null!==(X=this.onInitCallbacks.get(Be))&&void 0!==X?X:new Set;Re.add(U),this.onInitCallbacks.set(Be,Re);const We=this.instances.get(Be);return We&&U(We,Be),()=>{Re.delete(U)}}invokeOnInitCallbacks(U,G){const X=this.onInitCallbacks.get(G);if(X)for(const Be of X)try{Be(U,G)}catch{}}getOrInitializeService({instanceIdentifier:U,options:G={}}){let X=this.instances.get(U);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=U,ue===ee?void 0:ue),options:G}),this.instances.set(U,X),this.instancesOptions.set(U,G),this.invokeOnInitCallbacks(X,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,X)}catch{}var ue;return X||null}normalizeInstanceIdentifier(U=ee){return this.component?this.component.multipleInstances?U:ee:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Se{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const G=this.getProvider(U.name);if(G.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);G.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const G=new ne(U,this);return this.providers.set(U,G),G}getProviders(){return Array.from(this.providers.values())}}},7879:(at,be,O)=>{O.d(be,{Am:()=>ue,Ub:()=>Se,Yd:()=>me,in:()=>J});const h=[];var J=function(U){return U[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",U}(J||{});const F={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},ee=J.INFO,ne={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},ge=(U,G,...X)=>{if(G<U.logLevel)return;const Be=(new Date).toISOString(),Re=ne[G];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Re](`[${Be}]  ${U.name}:`,...X)};class me{constructor(G){this.name=G,this._logLevel=ee,this._logHandler=ge,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in J))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?F[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...G),this._logHandler(this,J.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...G),this._logHandler(this,J.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,J.INFO,...G),this._logHandler(this,J.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,J.WARN,...G),this._logHandler(this,J.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...G),this._logHandler(this,J.ERROR,...G)}}function Se(U){h.forEach(G=>{G.setLogLevel(U)})}function ue(U,G){for(const X of h){let Be=null;G&&G.level&&(Be=F[G.level]),X.userLogHandler=null===U?null:(Re,We,...Oe)=>{const $e=Oe.map(Le=>{if(null==Le)return null;if("string"==typeof Le)return Le;if("number"==typeof Le||"boolean"==typeof Le)return Le.toString();if(Le instanceof Error)return Le.message;try{return JSON.stringify(Le)}catch{return null}}).filter(Le=>Le).join(" ");We>=(Be??Re.logLevel)&&U({level:J[We].toLowerCase(),message:$e,args:Oe,type:Re.name})}}}},3182:(at,be,O)=>{O.d(be,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=O(534);(0,h.registerVersion)("firebase","9.23.0","app")},7142:(at,be,O)=>{O.d(be,{Z:()=>h.Z});var h=O(3106);h.Z.registerVersion("firebase","9.23.0","app-compat")},5967:(at,be,O)=>{O.r(be);var h=O(5861),J=O(3106),F=O(9058),ee=O(534),ne=O(7582),ge=O(7879),me=O(4537);const ue={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const We=function Be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Oe=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},$e=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_t=new ge.Yd("@firebase/auth");function ie(v,...p){_t.logLevel<=ge.in.ERROR&&_t.error(`Auth (${ee.SDK_VERSION}): ${v}`,...p)}function _e(v,...p){throw Ge(v,...p)}function te(v,...p){return Ge(v,...p)}function Te(v,p,m){const E=Object.assign(Object.assign({},Oe()),{[p]:m});return new F.LL("auth","Firebase",E).create(p,{appName:v.name})}function Fe(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&_e(v,"argument-error"),Te(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ge(v,...p){if("string"!=typeof v){const m=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(m,...E)}return $e.create(v,...p)}function le(v,p,...m){if(!v)throw Ge(p,...m)}function wt(v){const p="INTERNAL ASSERTION FAILED: "+v;throw ie(p),new Error(p)}function jt(v,p){v||wt(p)}function wr(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function ni(){return"http:"===Ns()||"https:"===Ns()}function Ns(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Ps{constructor(p,m){this.shortDelay=p,this.longDelay=m,jt(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function Qn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ni()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function he(v,p){jt(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class fe{static initialize(p,m,E){this.fetchImpl=p,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void wt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void wt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void wt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const we={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ee=new Ps(3e4,6e4);function Ie(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function Ae(v,p,m,E){return et.apply(this,arguments)}function et(){return(et=(0,h.Z)(function*(v,p,m,E,S={}){return st(v,S,(0,h.Z)(function*(){let R={},$={};E&&("GET"===p?$=E:R={body:JSON.stringify(E)});const Y=(0,F.xO)(Object.assign({key:v.config.apiKey},$)).slice(1),Pe=yield v._getAdditionalHeaders();return Pe["Content-Type"]="application/json",v.languageCode&&(Pe["X-Firebase-Locale"]=v.languageCode),fe.fetch()(Rt(v,v.config.apiHost,m,Y),Object.assign({method:p,headers:Pe,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function st(v,p,m){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,h.Z)(function*(v,p,m){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},we),p);try{const S=new Sn(v),R=yield Promise.race([m(),S.promise]);S.clearNetworkTimeout();const $=yield R.json();if("needConfirmation"in $)throw An(v,"account-exists-with-different-credential",$);if(R.ok&&!("errorMessage"in $))return $;{const Y=R.ok?$.errorMessage:$.error.message,[Pe,He]=Y.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Pe)throw An(v,"credential-already-in-use",$);if("EMAIL_EXISTS"===Pe)throw An(v,"email-already-in-use",$);if("USER_DISABLED"===Pe)throw An(v,"user-disabled",$);const nt=E[Pe]||Pe.toLowerCase().replace(/[_\s]+/g,"-");if(He)throw Te(v,nt,He);_e(v,nt)}}catch(S){if(S instanceof F.ZR)throw S;_e(v,"network-request-failed",{message:String(S)})}})).apply(this,arguments)}function pt(v,p,m,E){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,h.Z)(function*(v,p,m,E,S={}){const R=yield Ae(v,p,m,E,S);return"mfaPendingCredential"in R&&_e(v,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Rt(v,p,m,E){const S=`${p}${m}?${E}`;return v.config.emulator?he(v.config,S):`${v.config.apiScheme}://${S}`}class Sn{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(te(this.auth,"network-request-failed")),Ee.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function An(v,p,m){const E={appName:v.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const S=te(v,p,E);return S.customData._tokenResponse=m,S}function fn(){return(fn=(0,h.Z)(function*(v,p){return Ae(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function mi(){return(mi=(0,h.Z)(function*(v,p){return Ae(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function yi(){return(yi=(0,h.Z)(function*(v,p){return Ae(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function _i(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function gt(){return(gt=(0,h.Z)(function*(v,p=!1){const m=(0,F.m9)(v),E=yield m.getIdToken(p),S=St(E);le(S&&S.exp&&S.auth_time&&S.iat,m.auth,"internal-error");const R="object"==typeof S.firebase?S.firebase:void 0,$=R?.sign_in_provider;return{claims:S,token:E,authTime:_i(Ht(S.auth_time)),issuedAtTime:_i(Ht(S.iat)),expirationTime:_i(Ht(S.exp)),signInProvider:$||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function Ht(v){return 1e3*Number(v)}function St(v){const[p,m,E]=v.split(".");if(void 0===p||void 0===m||void 0===E)return ie("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,F.tV)(m);return S?JSON.parse(S):(ie("Failed to decode base64 JWT payload"),null)}catch(S){return ie("Caught error parsing JWT payload as JSON",S?.toString()),null}}function Pn(v,p){return ri.apply(this,arguments)}function ri(){return(ri=(0,h.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(E){throw E instanceof F.ZR&&function an({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}class Er{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const S=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,h.Z)(function*(){yield m.iteration()}),E)}iteration(){var p=this;return(0,h.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&p.schedule(!0))}p.schedule()})()}}class ua{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=_i(this.lastLoginAt),this.creationTime=_i(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function dn(v){return Pr.apply(this,arguments)}function Pr(){return Pr=(0,h.Z)(function*(v){var p;const m=v.auth,E=yield v.getIdToken(),S=yield Pn(v,function aa(v,p){return yi.apply(this,arguments)}(m,{idToken:E}));le(S?.users.length,m,"internal-error");const R=S.users[0];v._notifyReloadListener(R);const $=null!==(p=R.providerUserInfo)&&void 0!==p&&p.length?function ca(v){return v.map(p=>{var{providerId:m}=p,E=(0,ne._T)(p,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(R.providerUserInfo):[],Y=function oo(v,p){return[...v.filter(E=>!p.some(S=>S.providerId===E.providerId)),...p]}(v.providerData,$),nt=!!v.isAnonymous&&!(v.email&&R.passwordHash||Y?.length),ot={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:Y,metadata:new ua(R.createdAt,R.lastLoginAt),isAnonymous:nt};Object.assign(v,ot)}),Pr.apply(this,arguments)}function $i(){return($i=(0,h.Z)(function*(v){const p=(0,F.m9)(v);yield dn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function is(){return(is=(0,h.Z)(function*(v,p){const m=yield st(v,{},(0,h.Z)(function*(){const E=(0,F.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:S,apiKey:R}=v.config,$=Rt(v,S,"/v1/token",`key=${R}`),Y=yield v._getAdditionalHeaders();return Y["Content-Type"]="application/x-www-form-urlencoded",fe.fetch()($,{method:"POST",headers:Y,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Cr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){le(p.idToken,"internal-error"),le(typeof p.idToken<"u","internal-error"),le(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function yn(v){const p=St(v);return le(p,"internal-error"),le(typeof p.exp<"u","internal-error"),le(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var E=this;return(0,h.Z)(function*(){return le(!E.accessToken||E.refreshToken,p,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var E=this;return(0,h.Z)(function*(){const{accessToken:S,refreshToken:R,expiresIn:$}=yield function vi(v,p){return is.apply(this,arguments)}(p,m);E.updateTokensAndExpiration(S,R,Number($))})()}updateTokensAndExpiration(p,m,E){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,m){const{refreshToken:E,accessToken:S,expirationTime:R}=m,$=new Cr;return E&&(le("string"==typeof E,"internal-error",{appName:p}),$.refreshToken=E),S&&(le("string"==typeof S,"internal-error",{appName:p}),$.accessToken=S),R&&(le("number"==typeof R,"internal-error",{appName:p}),$.expirationTime=R),$}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Cr,this.toJSON())}_performRefresh(){return wt("not implemented")}}function ir(v,p){le("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class En{constructor(p){var{uid:m,auth:E,stsTokenManager:S}=p,R=(0,ne._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Er(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new ua(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,h.Z)(function*(){const E=yield Pn(m,m.stsTokenManager.getToken(m.auth,p));return le(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(p){return function Qa(v){return gt.apply(this,arguments)}(this,p)}reload(){return function Ft(v){return $i.apply(this,arguments)}(this)}_assign(p){this!==p&&(le(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const m=new En(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(p){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var E=this;return(0,h.Z)(function*(){let S=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),S=!0),m&&(yield dn(E)),yield E.auth._persistUserIfCurrent(E),S&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,h.Z)(function*(){const m=yield p.getIdToken();return yield Pn(p,function lr(v,p){return fn.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var E,S,R,$,Y,Pe,He,nt;const ot=null!==(E=m.displayName)&&void 0!==E?E:void 0,Fn=null!==(S=m.email)&&void 0!==S?S:void 0,Es=null!==(R=m.phoneNumber)&&void 0!==R?R:void 0,Lc=null!==($=m.photoURL)&&void 0!==$?$:void 0,Ly=null!==(Y=m.tenantId)&&void 0!==Y?Y:void 0,hg=null!==(Pe=m._redirectEventId)&&void 0!==Pe?Pe:void 0,vd=null!==(He=m.createdAt)&&void 0!==He?He:void 0,fg=null!==(nt=m.lastLoginAt)&&void 0!==nt?nt:void 0,{uid:wd,emailVerified:Ed,isAnonymous:Vy,providerData:Cd,stsTokenManager:Id}=m;le(wd&&Id,p,"internal-error");const Et=Cr.fromJSON(this.name,Id);le("string"==typeof wd,p,"internal-error"),ir(ot,p.name),ir(Fn,p.name),le("boolean"==typeof Ed,p,"internal-error"),le("boolean"==typeof Vy,p,"internal-error"),ir(Es,p.name),ir(Lc,p.name),ir(Ly,p.name),ir(hg,p.name),ir(vd,p.name),ir(fg,p.name);const Ar=new En({uid:wd,auth:p,email:Fn,emailVerified:Ed,displayName:ot,isAnonymous:Vy,photoURL:Lc,phoneNumber:Es,tenantId:Ly,stsTokenManager:Et,createdAt:vd,lastLoginAt:fg});return Cd&&Array.isArray(Cd)&&(Ar.providerData=Cd.map(Yo=>Object.assign({},Yo))),hg&&(Ar._redirectEventId=hg),Ar}static _fromIdTokenResponse(p,m,E=!1){return(0,h.Z)(function*(){const S=new Cr;S.updateFromServerResponse(m);const R=new En({uid:m.localId,auth:p,stsTokenManager:S,isAnonymous:E});return yield dn(R),R})()}}const ss=new Map;function Jt(v){jt(v instanceof Function,"Expected a class definition");let p=ss.get(v);return p?(jt(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,ss.set(v,p),p)}const qt=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(m,E){var S=this;return(0,h.Z)(function*(){S.storage[m]=E})()}_get(m){var E=this;return(0,h.Z)(function*(){const S=E.storage[m];return void 0===S?null:S})()}_remove(m){var E=this;return(0,h.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return v.type="NONE",v})();function H(v,p,m){return`firebase:${v}:${p}:${m}`}class B{constructor(p,m,E){this.persistence=p,this.auth=m,this.userKey=E;const{config:S,name:R}=this.auth;this.fullUserKey=H(this.userKey,S.apiKey,R),this.fullPersistenceKey=H("persistence",S.apiKey,R),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,h.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?En._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,h.Z)(function*(){if(m.persistence===p)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,E="authUser"){return(0,h.Z)(function*(){if(!m.length)return new B(Jt(qt),p,E);const S=(yield Promise.all(m.map(function(){var He=(0,h.Z)(function*(nt){if(yield nt._isAvailable())return nt});return function(nt){return He.apply(this,arguments)}}()))).filter(He=>He);let R=S[0]||Jt(qt);const $=H(E,p.config.apiKey,p.name);let Y=null;for(const He of m)try{const nt=yield He._get($);if(nt){const ot=En._fromJSON(p,nt);He!==R&&(Y=ot),R=He;break}}catch{}const Pe=S.filter(He=>He._shouldAllowMigration);return R._shouldAllowMigration&&Pe.length?(R=Pe[0],Y&&(yield R._set($,Y.toJSON())),yield Promise.all(m.map(function(){var He=(0,h.Z)(function*(nt){if(nt!==R)try{yield nt._remove($)}catch{}});return function(nt){return He.apply(this,arguments)}}())),new B(R,p,E)):new B(R,p,E)})()}}function q(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(mt(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(De(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Mn(p))return"Blackberry";if(mn(p))return"Webos";if(oe(p))return"Safari";if((p.includes("chrome/")||tt(p))&&!p.includes("edge/"))return"Chrome";if($t(p))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function De(v=(0,F.z$)()){return/firefox\//i.test(v)}function oe(v=(0,F.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function tt(v=(0,F.z$)()){return/crios\//i.test(v)}function mt(v=(0,F.z$)()){return/iemobile/i.test(v)}function $t(v=(0,F.z$)()){return/android/i.test(v)}function Mn(v=(0,F.z$)()){return/blackberry/i.test(v)}function mn(v=(0,F.z$)()){return/webos/i.test(v)}function bt(v=(0,F.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function as(v=(0,F.z$)()){return bt(v)||$t(v)||mn(v)||Mn(v)||/windows phone/i.test(v)||mt(v)}function pe(v,p=[]){let m;switch(v){case"Browser":m=q((0,F.z$)());break;case"Worker":m=`${q((0,F.z$)())}-${v}`;break;default:m=v}const E=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${ee.SDK_VERSION}/${E}`}function ke(){return(ke=(0,h.Z)(function*(v){return(yield Ae(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ut(v,p){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,h.Z)(function*(v,p){return Ae(v,"GET","/v2/recaptchaConfig",Ie(v,p))})).apply(this,arguments)}function Nt(v){return void 0!==v&&void 0!==v.getResponse}function Zt(v){return void 0!==v&&void 0!==v.enterprise}class sr{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function Os(v){return new Promise((p,m)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=p,E.onerror=S=>{const R=te("internal-error");R.customData=S,m(R)},E.type="text/javascript",E.charset="UTF-8",function Jn(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(E)})}function ao(v){return`__${v}${Math.floor(1e6*Math.random())}`}class mh{constructor(p){this.type="recaptcha-enterprise",this.auth=Xn(p)}verify(p="verify",m=!1){var E=this;return(0,h.Z)(function*(){function R(){return R=(0,h.Z)(function*(Y){if(!m){if(null==Y.tenantId&&null!=Y._agentRecaptchaConfig)return Y._agentRecaptchaConfig.siteKey;if(null!=Y.tenantId&&void 0!==Y._tenantRecaptchaConfigs[Y.tenantId])return Y._tenantRecaptchaConfigs[Y.tenantId].siteKey}return new Promise(function(){var Pe=(0,h.Z)(function*(He,nt){ut(Y,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ot=>{if(void 0!==ot.recaptchaKey){const Fn=new sr(ot);return null==Y.tenantId?Y._agentRecaptchaConfig=Fn:Y._tenantRecaptchaConfigs[Y.tenantId]=Fn,He(Fn.siteKey)}nt(new Error("recaptcha Enterprise site key undefined"))}).catch(ot=>{nt(ot)})});return function(He,nt){return Pe.apply(this,arguments)}}())}),R.apply(this,arguments)}function $(Y,Pe,He){const nt=window.grecaptcha;Zt(nt)?nt.enterprise.ready(()=>{nt.enterprise.execute(Y,{action:p}).then(ot=>{Pe(ot)}).catch(()=>{Pe("NO_RECAPTCHA")})}):He(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Y,Pe)=>{(function S(Y){return R.apply(this,arguments)})(E.auth).then(He=>{if(!m&&Zt(window.grecaptcha))$(He,Y,Pe);else{if(typeof window>"u")return void Pe(new Error("RecaptchaVerifier is only supported in browser"));Os("https://www.google.com/recaptcha/enterprise.js?render="+He).then(()=>{$(He,Y,Pe)}).catch(nt=>{Pe(nt)})}}).catch(He=>{Pe(He)})})})()}}function Ri(v,p,m){return El.apply(this,arguments)}function El(){return(El=(0,h.Z)(function*(v,p,m,E=!1){const S=new mh(v);let R;try{R=yield S.verify(m)}catch{R=yield S.verify(m,!0)}const $=Object.assign({},p);return Object.assign($,E?{captchaResp:R}:{captchaResponse:R}),Object.assign($,{clientType:"CLIENT_TYPE_WEB"}),Object.assign($,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),$})).apply(this,arguments)}class la{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const E=R=>new Promise(($,Y)=>{try{$(p(R))}catch(Pe){Y(Pe)}});E.onAbort=m,this.queue.push(E);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,h.Z)(function*(){if(m.auth.currentUser===p)return;const E=[];try{for(const S of m.queue)yield S(p),S.onAbort&&E.push(S.onAbort)}catch(S){E.reverse();for(const R of E)try{R()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class yh{constructor(p,m,E,S){this.app=p,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=E,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new us(this),this.idTokenSubscription=new us(this),this.beforeStateQueue=new la(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$e,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(p,m){var E=this;return m&&(this._popupRedirectResolver=Jt(m)),this._initializationPromise=this.queue((0,h.Z)(function*(){var S,R;if(!E._deleted&&(E.persistenceManager=yield B.create(E,p),!E._deleted)){if(null!==(S=E._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(R=E.currentUser)||void 0===R?void 0:R.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,h.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,h.Z)(function*(){var E;const S=yield m.assertedPersistence.getCurrentUser();let R=S,$=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Y=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,Pe=R?._redirectEventId,He=yield m.tryRedirectSignIn(p);(!Y||Y===Pe)&&He?.user&&(R=He.user,$=!0)}if(!R)return m.directlySetCurrentUser(null);if(!R._redirectEventId){if($)try{yield m.beforeStateQueue.runMiddleware(R)}catch(Y){R=S,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Y))}return R?m.reloadAndSetCurrentUserOrClear(R):m.directlySetCurrentUser(null)}return le(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===R._redirectEventId?m.directlySetCurrentUser(R):m.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(p){var m=this;return(0,h.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,h.Z)(function*(){try{yield dn(p)}catch(E){if("auth/network-request-failed"!==E?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Po(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,h.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,h.Z)(function*(){const E=p?(0,F.m9)(p):null;return E&&le(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(p,m=!1){var E=this;return(0,h.Z)(function*(){if(!E._deleted)return p&&le(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,h.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,h.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,h.Z)(function*(){yield m.assertedPersistence.setPersistence(Jt(p))}))}initializeRecaptchaConfig(){var p=this;return(0,h.Z)(function*(){const m=yield ut(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new sr(m);null==p.tenantId?p._agentRecaptchaConfig=E:p._tenantRecaptchaConfigs[p.tenantId]=E,E.emailPasswordEnabled&&new mh(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new F.LL("auth","Firebase",p())}onAuthStateChanged(p,m,E){return this.registerStateListener(this.authStateSubscription,p,m,E)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,E){return this.registerStateListener(this.idTokenSubscription,p,m,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var E=this;return(0,h.Z)(function*(){const S=yield E.getOrInitRedirectPersistenceManager(m);return null===p?S.removeCurrentUser():S.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,h.Z)(function*(){if(!m.redirectPersistenceManager){const E=p&&Jt(p)||m._popupRedirectResolver;le(E,m,"argument-error"),m.redirectPersistenceManager=yield B.create(m,[Jt(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,h.Z)(function*(){var E,S;return m._isInitialized&&(yield m.queue((0,h.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===p?m._currentUser:(null===(S=m.redirectUser)||void 0===S?void 0:S._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,h.Z)(function*(){if(p===m.currentUser)return m.queue((0,h.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,E,S){if(this._deleted)return()=>{};const R="function"==typeof m?m:m.next.bind(m),$=this._isInitialized?Promise.resolve():this._initializationPromise;return le($,this,"internal-error"),$.then(()=>R(this.currentUser)),"function"==typeof m?p.addObserver(m,E,S):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,h.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=pe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,h.Z)(function*(){var m;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const S=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();S&&(E["X-Firebase-Client"]=S);const R=yield p._getAppCheckToken();return R&&(E["X-Firebase-AppCheck"]=R),E})()}_getAppCheckToken(){var p=this;return(0,h.Z)(function*(){var m;const E=yield null===(m=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return E?.error&&function ht(v,...p){_t.logLevel<=ge.in.WARN&&_t.warn(`Auth (${ee.SDK_VERSION}): ${v}`,...p)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function Xn(v){return(0,F.m9)(v)}class us{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,F.ne)(m=>this.observer=m)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Oo(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function vh(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class ks{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return wt("not implemented")}_getIdTokenResponse(p){return wt("not implemented")}_linkToIdToken(p,m){return wt("not implemented")}_getReauthenticationResolver(p){return wt("not implemented")}}function Np(v,p){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,h.Z)(function*(v,p){return Ae(v,"POST","/v1/accounts:resetPassword",Ie(v,p))})).apply(this,arguments)}function Cl(v,p){return Il.apply(this,arguments)}function Il(){return(Il=(0,h.Z)(function*(v,p){return Ae(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function dr(){return(dr=(0,h.Z)(function*(v,p){return Ae(v,"POST","/v1/accounts:update",Ie(v,p))})).apply(this,arguments)}function pn(v,p){return uo.apply(this,arguments)}function uo(){return(uo=(0,h.Z)(function*(v,p){return pt(v,"POST","/v1/accounts:signInWithPassword",Ie(v,p))})).apply(this,arguments)}function Or(v,p){return ac.apply(this,arguments)}function ac(){return(ac=(0,h.Z)(function*(v,p){return Ae(v,"POST","/v1/accounts:sendOobCode",Ie(v,p))})).apply(this,arguments)}function da(){return(da=(0,h.Z)(function*(v,p){return Or(v,p)})).apply(this,arguments)}function eu(v,p){return wh.apply(this,arguments)}function wh(){return(wh=(0,h.Z)(function*(v,p){return Or(v,p)})).apply(this,arguments)}function $n(v,p){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,h.Z)(function*(v,p){return Or(v,p)})).apply(this,arguments)}function Dn(){return(Dn=(0,h.Z)(function*(v,p){return Or(v,p)})).apply(this,arguments)}function ha(){return(ha=(0,h.Z)(function*(v,p){return pt(v,"POST","/v1/accounts:signInWithEmailLink",Ie(v,p))})).apply(this,arguments)}function ko(){return(ko=(0,h.Z)(function*(v,p){return pt(v,"POST","/v1/accounts:signInWithEmailLink",Ie(v,p))})).apply(this,arguments)}class xn extends ks{constructor(p,m,E,S=null){super("password",E),this._email=p,this._password=m,this._tenantId=S}static _fromEmailAndPassword(p,m){return new xn(p,m,"password")}static _fromEmailAndCode(p,m,E=null){return new xn(p,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,h.Z)(function*(){var E;switch(m.signInMethod){case"password":const S={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=p._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const R=yield Ri(p,S,"signInWithPassword");return pn(p,R)}return pn(p,S).catch(function(){var R=(0,h.Z)(function*($){if("auth/missing-recaptcha-token"===$.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Y=yield Ri(p,S,"signInWithPassword");return pn(p,Y)}return Promise.reject($)});return function($){return R.apply(this,arguments)}}());case"emailLink":return function Ei(v,p){return ha.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:_e(p,"internal-error")}})()}_linkToIdToken(p,m){var E=this;return(0,h.Z)(function*(){switch(E.signInMethod){case"password":return Cl(p,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Zr(v,p){return ko.apply(this,arguments)}(p,{idToken:m,email:E._email,oobCode:E._password});default:_e(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Dr(v,p){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,h.Z)(function*(v,p){return pt(v,"POST","/v1/accounts:signInWithIdp",Ie(v,p))})).apply(this,arguments)}class ii extends ks{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new ii(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):_e("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:S}=m,R=(0,ne._T)(m,["providerId","signInMethod"]);if(!E||!S)return null;const $=new ii(E,S);return $.idToken=R.idToken||void 0,$.accessToken=R.accessToken||void 0,$.secret=R.secret,$.nonce=R.nonce,$.pendingToken=R.pendingToken||null,$}_getIdTokenResponse(p){return Dr(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,Dr(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Dr(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,F.xO)(m)}return p}}function cs(){return(cs=(0,h.Z)(function*(v,p){return Ae(v,"POST","/v1/accounts:sendVerificationCode",Ie(v,p))})).apply(this,arguments)}function fa(){return(fa=(0,h.Z)(function*(v,p){return pt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ie(v,p))})).apply(this,arguments)}function Ci(){return(Ci=(0,h.Z)(function*(v,p){const m=yield pt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ie(v,p));if(m.temporaryProof)throw An(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const pa={USER_NOT_FOUND:"user-not-found"};function Ii(){return(Ii=(0,h.Z)(function*(v,p){return pt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ie(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),pa)})).apply(this,arguments)}class Gn extends ks{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new Gn({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new Gn({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function On(v,p){return fa.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function tu(v,p){return Ci.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Ch(v,p){return Ii.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:E,verificationCode:S}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:E,code:S}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:E,phoneNumber:S,temporaryProof:R}=p;return E||m||S||R?new Gn({verificationId:m,verificationCode:E,phoneNumber:S,temporaryProof:R}):null}}class Ut{constructor(p){var m,E,S,R,$,Y;const Pe=(0,F.zd)((0,F.pd)(p)),He=null!==(m=Pe.apiKey)&&void 0!==m?m:null,nt=null!==(E=Pe.oobCode)&&void 0!==E?E:null,ot=function Dl(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Pe.mode)&&void 0!==S?S:null);le(He&&nt&&ot,"argument-error"),this.apiKey=He,this.operation=ot,this.code=nt,this.continueUrl=null!==(R=Pe.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==($=Pe.languageCode)&&void 0!==$?$:null,this.tenantId=null!==(Y=Pe.tenantId)&&void 0!==Y?Y:null}static parseLink(p){const m=function Fo(v){const p=(0,F.zd)((0,F.pd)(v)).link,m=p?(0,F.zd)((0,F.pd)(p)).deep_link_id:null,E=(0,F.zd)((0,F.pd)(v)).deep_link_id;return(E?(0,F.zd)((0,F.pd)(E)).link:null)||E||m||p||v}(p);try{return new Ut(m)}catch{return null}}}let uc=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,E){return xn._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const S=Ut.parseLink(E);return le(S,"argument-error"),xn._fromEmailAndCode(m,S.code,S.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class ls{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class si extends ls{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Ni extends si{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return le("providerId"in m&&"signInMethod"in m,"argument-error"),ii._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return le(p.idToken||p.accessToken,"argument-error"),ii._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Ni.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Ni.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:S,pendingToken:R,nonce:$,providerId:Y}=p;if(!E&&!S&&!m&&!R||!Y)return null;try{return new Ni(Y)._credential({idToken:m,accessToken:E,nonce:$,pendingToken:R})}catch{return null}}}let Lo=(()=>{class v extends si{constructor(){super("facebook.com")}static credential(m){return ii._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Vo=(()=>{class v extends si{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return ii._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:S}=m;if(!E&&!S)return null;try{return v.credential(E,S)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),hr=(()=>{class v extends si{constructor(){super("github.com")}static credential(m){return ii._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class zn extends ks{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return Dr(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,Dr(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Dr(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:S,pendingToken:R}=m;return E&&S&&R&&E===S?new zn(E,R):null}static _create(p,m){return new zn(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ga extends ls{constructor(p){le(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return ga.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return ga.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=zn.fromJSON(p);return le(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:E}=p;if(!m||!E)return null;try{return zn._create(E,m)}catch{return null}}}let Ls=(()=>{class v extends si{constructor(){super("twitter.com")}static credential(m,E){return ii._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:S}=m;if(!E||!S)return null;try{return v.credential(E,S)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Vs(v,p){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,h.Z)(function*(v,p){return pt(v,"POST","/v1/accounts:signUp",Ie(v,p))})).apply(this,arguments)}class kr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,E,S=!1){return(0,h.Z)(function*(){const R=yield En._fromIdTokenResponse(p,E,S),$=Tl(E);return new kr({user:R,providerId:$,_tokenResponse:E,operationType:m})})()}static _forOperation(p,m,E){return(0,h.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const S=Tl(E);return new kr({user:p,providerId:S,_tokenResponse:E,operationType:m})})()}}function Tl(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Ih(){return(Ih=(0,h.Z)(function*(v){var p;const m=Xn(v);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new kr({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Vs(m,{returnSecureToken:!0}),S=yield kr._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class nu extends F.ZR{constructor(p,m,E,S){var R;super(m.code,m.message),this.operationType=E,this.user=S,Object.setPrototypeOf(this,nu.prototype),this.customData={appName:p.name,tenantId:null!==(R=p.tenantId)&&void 0!==R?R:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,m,E,S){return new nu(p,m,E,S)}}function Op(v,p,m,E){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?nu._fromErrorAndOperation(v,R,p,E):R})}function kp(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function ds(){return ds=(0,h.Z)(function*(v,p){const m=(0,F.m9)(v);yield ru(!0,m,p);const{providerUserInfo:E}=yield function Nr(v,p){return mi.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),S=kp(E||[]);return m.providerData=m.providerData.filter(R=>S.has(R.providerId)),S.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),ds.apply(this,arguments)}function Sl(v,p){return bh.apply(this,arguments)}function bh(){return(bh=(0,h.Z)(function*(v,p,m=!1){const E=yield Pn(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return kr._forOperation(v,"link",E)})).apply(this,arguments)}function ru(v,p,m){return Dh.apply(this,arguments)}function Dh(){return(Dh=(0,h.Z)(function*(v,p,m){yield dn(p);const S=!1===v?"provider-already-linked":"no-such-provider";le(kp(p.providerData).has(m)===v,p.auth,S)})).apply(this,arguments)}function Fp(v,p){return Al.apply(this,arguments)}function Al(){return(Al=(0,h.Z)(function*(v,p,m=!1){const{auth:E}=v,S="reauthenticate";try{const R=yield Pn(v,Op(E,S,p,v),m);le(R.idToken,E,"internal-error");const $=St(R.idToken);le($,E,"internal-error");const{sub:Y}=$;return le(v.uid===Y,E,"user-mismatch"),kr._forOperation(v,S,R)}catch(R){throw"auth/user-not-found"===R?.code&&_e(E,"user-mismatch"),R}})).apply(this,arguments)}function Lp(v,p){return Th.apply(this,arguments)}function Th(){return(Th=(0,h.Z)(function*(v,p,m=!1){const E="signIn",S=yield Op(v,E,p),R=yield kr._fromIdTokenResponse(v,E,S);return m||(yield v._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Ml(v,p){return iu.apply(this,arguments)}function iu(){return(iu=(0,h.Z)(function*(v,p){return Lp(Xn(v),p)})).apply(this,arguments)}function Sh(v,p){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,h.Z)(function*(v,p){const m=(0,F.m9)(v);return yield ru(!1,m,p.providerId),Sl(m,p)})).apply(this,arguments)}function Wn(v,p){return Vp.apply(this,arguments)}function Vp(){return(Vp=(0,h.Z)(function*(v,p){return Fp((0,F.m9)(v),p)})).apply(this,arguments)}function xl(){return(xl=(0,h.Z)(function*(v,p){return pt(v,"POST","/v1/accounts:signInWithCustomToken",Ie(v,p))})).apply(this,arguments)}function Pi(){return Pi=(0,h.Z)(function*(v,p){const m=Xn(v),E=yield function ma(v,p){return xl.apply(this,arguments)}(m,{token:p,returnSecureToken:!0}),S=yield kr._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(S.user),S}),Pi.apply(this,arguments)}class su{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?ou._fromServerResponse(p,m):"totpInfo"in m?xh._fromServerResponse(p,m):_e(p,"internal-error")}}class ou extends su{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new ou(m)}}class xh extends su{constructor(p){super("totp",p)}static _fromServerResponse(p,m){return new xh(m)}}function ya(v,p,m){var E;le((null===(E=m.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),le(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(le(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(le(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function _a(){return _a=(0,h.Z)(function*(v,p,m){var E;const S=Xn(v),R={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=S._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const $=yield Ri(S,R,"getOobCode",!0);m&&ya(S,$,m),yield eu(S,$)}else m&&ya(S,R,m),yield eu(S,R).catch(function(){var $=(0,h.Z)(function*(Y){if("auth/missing-recaptcha-token"!==Y.code)return Promise.reject(Y);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Pe=yield Ri(S,R,"getOobCode",!0);m&&ya(S,Pe,m),yield eu(S,Pe)}});return function(Y){return $.apply(this,arguments)}}())}),_a.apply(this,arguments)}function va(){return(va=(0,h.Z)(function*(v,p,m){yield Np((0,F.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Fr(){return Fr=(0,h.Z)(function*(v,p){yield function Pt(v,p){return dr.apply(this,arguments)}((0,F.m9)(v),{oobCode:p})}),Fr.apply(this,arguments)}function Rl(v,p){return wa.apply(this,arguments)}function wa(){return(wa=(0,h.Z)(function*(v,p){const m=(0,F.m9)(v),E=yield Np(m,{oobCode:p}),S=E.requestType;switch(le(S,m,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":le(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":le(E.mfaInfo,m,"internal-error");default:le(E.email,m,"internal-error")}let R=null;return E.mfaInfo&&(R=su._fromServerResponse(Xn(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:R},operation:S}})).apply(this,arguments)}function Us(){return(Us=(0,h.Z)(function*(v,p){const{data:m}=yield Rl((0,F.m9)(v),p);return m.email})).apply(this,arguments)}function cc(){return cc=(0,h.Z)(function*(v,p,m){var E;const S=Xn(v),R={returnSecureToken:!0,email:p,password:m,clientType:"CLIENT_TYPE_WEB"};let $;if(null!==(E=S._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const He=yield Ri(S,R,"signUpPassword");$=Vs(S,He)}else $=Vs(S,R).catch(function(){var He=(0,h.Z)(function*(nt){if("auth/missing-recaptcha-token"===nt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const ot=yield Ri(S,R,"signUpPassword");return Vs(S,ot)}return Promise.reject(nt)});return function(nt){return He.apply(this,arguments)}}());const Y=yield $.catch(He=>Promise.reject(He)),Pe=yield kr._fromIdTokenResponse(S,"signIn",Y);return yield S._updateCurrentUser(Pe.user),Pe}),cc.apply(this,arguments)}function lc(){return lc=(0,h.Z)(function*(v,p,m){var E;const S=Xn(v),R={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function $(Y,Pe){le(Pe.handleCodeInApp,S,"argument-error"),Pe&&ya(S,Y,Pe)}if(null!==(E=S._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Y=yield Ri(S,R,"getOobCode",!0);$(Y,m),yield $n(S,Y)}else $(R,m),yield $n(S,R).catch(function(){var Y=(0,h.Z)(function*(Pe){if("auth/missing-recaptcha-token"!==Pe.code)return Promise.reject(Pe);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const He=yield Ri(S,R,"getOobCode",!0);$(He,m),yield $n(S,He)}});return function(Pe){return Y.apply(this,arguments)}}())}),lc.apply(this,arguments)}function Ph(){return(Ph=(0,h.Z)(function*(v,p,m){const E=(0,F.m9)(v),S=uc.credentialWithLink(p,m||wr());return le(S._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Ml(E,S)})).apply(this,arguments)}function Oh(){return(Oh=(0,h.Z)(function*(v,p){return Ae(v,"POST","/v1/accounts:createAuthUri",Ie(v,p))})).apply(this,arguments)}function Ol(){return Ol=(0,h.Z)(function*(v,p){const E={identifier:p,continueUri:ni()?wr():"http://localhost"},{signinMethods:S}=yield function Up(v,p){return Oh.apply(this,arguments)}((0,F.m9)(v),E);return S||[]}),Ol.apply(this,arguments)}function Ca(){return Ca=(0,h.Z)(function*(v,p){const m=(0,F.m9)(v),S={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&ya(m.auth,S,p);const{email:R}=yield function bl(v,p){return da.apply(this,arguments)}(m.auth,S);R!==v.email&&(yield v.reload())}),Ca.apply(this,arguments)}function uu(){return uu=(0,h.Z)(function*(v,p,m){const E=(0,F.m9)(v),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&ya(E.auth,R,m);const{email:$}=yield function Mt(v,p){return Dn.apply(this,arguments)}(E.auth,R);$!==v.email&&(yield v.reload())}),uu.apply(this,arguments)}function Fl(){return(Fl=(0,h.Z)(function*(v,p){return Ae(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function hc(){return hc=(0,h.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const E=(0,F.m9)(v),R={idToken:yield E.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},$=yield Pn(E,function Bp(v,p){return Fl.apply(this,arguments)}(E.auth,R));E.displayName=$.displayName||null,E.photoURL=$.photoUrl||null;const Y=E.providerData.find(({providerId:Pe})=>"password"===Pe);Y&&(Y.displayName=E.displayName,Y.photoURL=E.photoURL),yield E._updateTokensIfNecessary($)}),hc.apply(this,arguments)}function fs(v,p,m){return cu.apply(this,arguments)}function cu(){return(cu=(0,h.Z)(function*(v,p,m){const{auth:E}=v,R={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(R.email=p),m&&(R.password=m);const $=yield Pn(v,Cl(E,R));yield v._updateTokensIfNecessary($,!0)})).apply(this,arguments)}class un{constructor(p,m,E={}){this.isNewUser=p,this.providerId=m,this.profile=E}}class lu extends un{constructor(p,m,E,S){super(p,m,E),this.username=S}}class Ia extends un{constructor(p,m){super(p,"facebook.com",m)}}class Vr extends lu{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class ba extends un{constructor(p,m){super(p,"google.com",m)}}class Lh extends lu{constructor(p,m,E){super(p,"twitter.com",m,E)}}function Bs(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Fh(v){var p,m;if(!v)return null;const{providerId:E}=v,S=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},R=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&v?.idToken){const $=null===(m=null===(p=St(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if($)return new un(R,"anonymous"!==$&&"custom"!==$?$:null)}if(!E)return null;switch(E){case"facebook.com":return new Ia(R,S);case"github.com":return new Vr(R,S);case"google.com":return new ba(R,S);case"twitter.com":return new Lh(R,S,v.screenName||null);case"custom":case"anonymous":return new un(R,null);default:return new un(R,E,S)}}(m)}class lo{constructor(p,m,E){this.type=p,this.credential=m,this.auth=E}static _fromIdtoken(p,m){return new lo("enroll",p,m)}static _fromMfaPendingCredential(p){return new lo("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,E;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return lo._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(E=p.multiFactorSession)&&void 0!==E&&E.idToken)return lo._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Ct{constructor(p,m,E){this.session=p,this.hints=m,this.signInResolver=E}static _fromError(p,m){const E=Xn(p),S=m.customData._serverResponse,R=(S.mfaInfo||[]).map(Y=>su._fromServerResponse(E,Y));le(S.mfaPendingCredential,E,"internal-error");const $=lo._fromMfaPendingCredential(S.mfaPendingCredential);return new Ct($,R,function(){var Y=(0,h.Z)(function*(Pe){const He=yield Pe._process(E,$);delete S.mfaInfo,delete S.mfaPendingCredential;const nt=Object.assign(Object.assign({},S),{idToken:He.idToken,refreshToken:He.refreshToken});switch(m.operationType){case"signIn":const ot=yield kr._fromIdTokenResponse(E,m.operationType,nt);return yield E._updateCurrentUser(ot.user),ot;case"reauthenticate":return le(m.user,E,"internal-error"),kr._forOperation(m.user,m.operationType,nt);default:_e(E,"internal-error")}});return function(Pe){return Y.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,h.Z)(function*(){return m.signInResolver(p)})()}}class Gi{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>su._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new Gi(p)}getSession(){var p=this;return(0,h.Z)(function*(){return lo._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var E=this;return(0,h.Z)(function*(){const S=p,R=yield E.getSession(),$=yield Pn(E.user,S._process(E.user.auth,R,m));return yield E.user._updateTokensIfNecessary($),E.user.reload()})()}unenroll(p){var m=this;return(0,h.Z)(function*(){const E="string"==typeof p?p:p.uid,S=yield m.user.getIdToken();try{const R=yield Pn(m.user,function Hl(v,p){return Ae(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Ie(v,p))}(m.user.auth,{idToken:S,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:$})=>$!==E),yield m.user._updateTokensIfNecessary(R),yield m.user.reload()}catch(R){throw R}})()}}const Da=new WeakMap,$l="__sak";class Gl{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem($l,"1"),this.storage.removeItem($l),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const ho=(()=>{class v extends Gl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Gp(){const v=(0,F.z$)();return oe(v)||bt(v)}()&&function wi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=as(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const S=this.storage.getItem(E),R=this.localCache[E];S!==R&&m(E,R,S)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((Y,Pe,He)=>{this.notifyListeners(Y,He)});const S=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Y=this.storage.getItem(S);if(m.newValue!==Y)null!==m.newValue?this.storage.setItem(S,m.newValue):this.storage.removeItem(S);else if(this.localCache[S]===m.newValue&&!E)return}const R=()=>{const Y=this.storage.getItem(S);!E&&this.localCache[S]===Y||this.notifyListeners(S,Y)},$=this.storage.getItem(S);!function xi(){return(0,F.w1)()&&10===document.documentMode}()||$===m.newValue||m.newValue===m.oldValue?R():setTimeout(R,10)}notifyListeners(m,E){this.localCache[m]=E;const S=this.listeners[m];if(S)for(const R of Array.from(S))R(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var S=()=>super._set,R=this;return(0,h.Z)(function*(){yield S().call(R,m,E),R.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,S=this;return(0,h.Z)(function*(){const R=yield E().call(S,m);return S.localCache[m]=JSON.stringify(R),R})()}_remove(m){var E=()=>super._remove,S=this;return(0,h.Z)(function*(){yield E().call(S,m),delete S.localCache[m]})()}}return v.type="LOCAL",v})(),fo=(()=>{class v extends Gl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return v.type="SESSION",v})();let zi=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(R=>R.isListeningto(m));if(E)return E;const S=new v(m);return this.receivers.push(S),S}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,h.Z)(function*(){const S=m,{eventId:R,eventType:$,data:Y}=S.data,Pe=E.handlersMap[$];if(!Pe?.size)return;S.ports[0].postMessage({status:"ack",eventId:R,eventType:$});const He=Array.from(Pe).map(function(){var ot=(0,h.Z)(function*(Fn){return Fn(S.origin,Y)});return function(Fn){return ot.apply(this,arguments)}}()),nt=yield function pc(v){return Promise.all(v.map(function(){var p=(0,h.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return p.apply(this,arguments)}}()))}(He);S.ports[0].postMessage({status:"done",eventId:R,eventType:$,response:nt})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function du(v="",p=10){let m="";for(let E=0;E<p;E++)m+=Math.floor(10*Math.random());return v+m}class zl{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,E=50){var S=this;return(0,h.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let $,Y;return new Promise((Pe,He)=>{const nt=du("",20);R.port1.start();const ot=setTimeout(()=>{He(new Error("unsupported_event"))},E);Y={messageChannel:R,onMessage(Fn){const Es=Fn;if(Es.data.eventId===nt)switch(Es.data.status){case"ack":clearTimeout(ot),$=setTimeout(()=>{He(new Error("timeout"))},3e3);break;case"done":clearTimeout($),Pe(Es.data.response);break;default:clearTimeout(ot),clearTimeout($),He(new Error("invalid_response"))}}},S.handlers.add(Y),R.port1.addEventListener("message",Y.onMessage),S.target.postMessage({eventType:p,eventId:nt,data:m},[R.port2])}).finally(()=>{Y&&S.removeMessageHandler(Y)})})()}}function Un(){return window}function gc(){return typeof Un().WorkerGlobalScope<"u"&&"function"==typeof Un().importScripts}function ki(){return(ki=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Wi="firebaseLocalStorageDb",hu="firebaseLocalStorage",$h="fbase_key";class fu{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function pu(v,p){return v.transaction([hu],p?"readwrite":"readonly").objectStore(hu)}function gu(){const v=indexedDB.open(Wi,1);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(hu,{keyPath:$h})}catch(S){m(S)}}),v.addEventListener("success",(0,h.Z)(function*(){const E=v.result;E.objectStoreNames.contains(hu)?p(E):(E.close(),yield function Wl(){const v=indexedDB.deleteDatabase(Wi);return new fu(v).toPromise()}(),p(yield gu()))}))})}function Uo(v,p,m){return gs.apply(this,arguments)}function gs(){return(gs=(0,h.Z)(function*(v,p,m){const E=pu(v,!0).put({[$h]:p,value:m});return new fu(E).toPromise()})).apply(this,arguments)}function mu(){return(mu=(0,h.Z)(function*(v,p){const m=pu(v,!1).get(p),E=yield new fu(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function yu(v,p){const m=pu(v,!0).delete(p);return new fu(m).toPromise()}const Bo=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.Z)(function*(){return m.db||(m.db=yield gu()),m.db})()}_withRetries(m){var E=this;return(0,h.Z)(function*(){let S=0;for(;;)try{const R=yield E._openDb();return yield m(R)}catch(R){if(S++>3)throw R;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.Z)(function*(){return gc()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.Z)(function*(){m.receiver=zi._getInstance(function kn(){return gc()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,h.Z)(function*(S,R){return{keyProcessed:(yield m._poll()).includes(R.key)}});return function(S,R){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,h.Z)(function*(S,R){return["keyChanged"]});return function(S,R){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.Z)(function*(){var E,S;if(m.activeServiceWorker=yield function Yr(){return ki.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new zl(m.activeServiceWorker);const R=yield m.sender._send("ping",{},800);R&&null!==(E=R[0])&&void 0!==E&&E.fulfilled&&null!==(S=R[0])&&void 0!==S&&S.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,h.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function mc(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const m=yield gu();return yield Uo(m,$l,"1"),yield yu(m,$l),!0}catch{}return!1})()}_withPendingWrite(m){var E=this;return(0,h.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var S=this;return(0,h.Z)(function*(){return S._withPendingWrite((0,h.Z)(function*(){return yield S._withRetries(R=>Uo(R,m,E)),S.localCache[m]=E,S.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,h.Z)(function*(){const S=yield E._withRetries(R=>function yc(v,p){return mu.apply(this,arguments)}(R,m));return E.localCache[m]=S,S})()}_remove(m){var E=this;return(0,h.Z)(function*(){return E._withPendingWrite((0,h.Z)(function*(){return yield E._withRetries(S=>yu(S,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.Z)(function*(){const E=yield m._withRetries($=>{const Y=pu($,!1).getAll();return new fu(Y).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const S=[],R=new Set;for(const{fbase_key:$,value:Y}of E)R.add($),JSON.stringify(m.localCache[$])!==JSON.stringify(Y)&&(m.notifyListeners($,Y),S.push($));for(const $ of Object.keys(m.localCache))m.localCache[$]&&!R.has($)&&(m.notifyListeners($,null),S.push($));return S})()}notifyListeners(m,E){this.localCache[m]=E;const S=this.listeners[m];if(S)for(const R of Array.from(S))R(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),_u=1e12;class qp{constructor(p){this.auth=p,this.counter=_u,this._widgets=new Map}render(p,m){const E=this.counter;return this._widgets.set(E,new zh(p,this.auth.name,m||{})),this.counter++,E}reset(p){var m;const E=p||_u;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(p){var m;return(null===(m=this._widgets.get(p||_u))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,h.Z)(function*(){var E;return null===(E=m._widgets.get(p||_u))||void 0===E||E.execute(),""})()}}class zh{constructor(p,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof p?document.getElementById(p):p;le(S,"argument-error",{appName:m}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function wy(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)p.push(m.charAt(Math.floor(62*Math.random())));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const _c=ao("rcb"),Kl=new Ps(3e4,6e4);class jo{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Un().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return le(function Wh(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),p,"argument-error"),this.shouldResolveImmediately(m)&&Nt(Un().grecaptcha)?Promise.resolve(Un().grecaptcha):new Promise((E,S)=>{const R=Un().setTimeout(()=>{S(te(p,"network-request-failed"))},Kl.get());Un()[_c]=()=>{Un().clearTimeout(R),delete Un()[_c];const Y=Un().grecaptcha;if(!Y||!Nt(Y))return void S(te(p,"internal-error"));const Pe=Y.render;Y.render=(He,nt)=>{const ot=Pe(He,nt);return this.counter++,ot},this.hostLanguage=m,E(Y)},Os(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:_c,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(R),S(te(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=Un().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Zl{load(p){return(0,h.Z)(function*(){return new qp(p)})()}clearedOneInstance(){}}const Ta="recaptcha",Yl={theme:"light",type:"image"};class vc{constructor(p,m=Object.assign({},Yl),E){this.parameters=m,this.type=Ta,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Xn(E),this.isInvisible="invisible"===this.parameters.size,le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof p?document.getElementById(p):p;le(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Zl:new jo,this.validateStartingState()}verify(){var p=this;return(0,h.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(m)||new Promise(R=>{const $=Y=>{Y&&(p.tokenChangeListeners.delete($),R(Y))};p.tokenChangeListeners.add($),p.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){le(!this.parameters.sitekey,this.auth,"argument-error"),le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof p)p(m);else if("string"==typeof p){const E=Un()[p];"function"==typeof E&&E(m)}}}assertNotDestroyed(){le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,h.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,h.Z)(function*(){le(ni()&&!gc(),p.auth,"internal-error"),yield function ms(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function re(v){return ke.apply(this,arguments)}(p.auth);le(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ys{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=Gn._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function ai(){return(ai=(0,h.Z)(function*(v,p,m){const E=Xn(v),S=yield wc(E,p,(0,F.m9)(m));return new ys(S,R=>Ml(E,R))})).apply(this,arguments)}function fr(){return(fr=(0,h.Z)(function*(v,p,m){const E=(0,F.m9)(v);yield ru(!1,E,"phone");const S=yield wc(E.auth,p,(0,F.m9)(m));return new ys(S,R=>Sh(E,R))})).apply(this,arguments)}function Sa(){return(Sa=(0,h.Z)(function*(v,p,m){const E=(0,F.m9)(v),S=yield wc(E.auth,p,(0,F.m9)(m));return new ys(S,R=>Wn(E,R))})).apply(this,arguments)}function wc(v,p,m){return Ql.apply(this,arguments)}function Ql(){return Ql=(0,h.Z)(function*(v,p,m){var E;const S=yield m.verify();try{let R;if(le("string"==typeof S,v,"argument-error"),le(m.type===Ta,v,"argument-error"),R="string"==typeof p?{phoneNumber:p}:p,"session"in R){const $=R.session;if("phoneNumber"in R)return le("enroll"===$.type,v,"internal-error"),(yield function Bh(v,p){return Ae(v,"POST","/v2/accounts/mfaEnrollment:start",Ie(v,p))}(v,{idToken:$.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{le("signin"===$.type,v,"internal-error");const Y=(null===(E=R.multiFactorHint)||void 0===E?void 0:E.uid)||R.multiFactorUid;return le(Y,v,"missing-multi-factor-info"),(yield function Gh(v,p){return Ae(v,"POST","/v2/accounts/mfaSignIn:start",Ie(v,p))}(v,{mfaPendingCredential:$.credential,mfaEnrollmentId:Y,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:$}=yield function Eh(v,p){return cs.apply(this,arguments)}(v,{phoneNumber:R.phoneNumber,recaptchaToken:S});return $}}finally{m._reset()}}),Ql.apply(this,arguments)}function Kh(){return(Kh=(0,h.Z)(function*(v,p){yield Sl((0,F.m9)(v),p)})).apply(this,arguments)}let js=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=Xn(m)}verifyPhoneNumber(m,E){return wc(this.auth,m,(0,F.m9)(E))}static credential(m,E){return Gn._fromVerification(m,E)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:S}=m;return E&&S?Gn._fromTokenResponse(E,S):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Di(v,p){return p?Jt(p):(le(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class gn extends ks{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Dr(p,this._buildIdpRequest())}_linkToIdToken(p,m){return Dr(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return Dr(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function vt(v){return Lp(v.auth,new gn(v),v.bypassAuthState)}function wu(v){const{auth:p,user:m}=v;return le(m,p,"internal-error"),Fp(m,new gn(v),v.bypassAuthState)}function Aa(v){return go.apply(this,arguments)}function go(){return(go=(0,h.Z)(function*(v){const{auth:p,user:m}=v;return le(m,p,"internal-error"),Sl(m,new gn(v),v.bypassAuthState)})).apply(this,arguments)}class Jl{constructor(p,m,E,S,R=!1){this.auth=p,this.resolver=E,this.user=S,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,h.Z)(function*(E,S){p.pendingPromise={resolve:E,reject:S};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(R){p.reject(R)}});return function(E,S){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,h.Z)(function*(){const{urlResponse:E,sessionId:S,postBody:R,tenantId:$,error:Y,type:Pe}=p;if(Y)return void m.reject(Y);const He={auth:m.auth,requestUri:E,sessionId:S,tenantId:$||void 0,postBody:R||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Pe)(He))}catch(nt){m.reject(nt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return vt;case"linkViaPopup":case"linkViaRedirect":return Aa;case"reauthViaPopup":case"reauthViaRedirect":return wu;default:_e(this.auth,"internal-error")}}resolve(p){jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qi=new Ps(2e3,1e4);function mo(){return(mo=(0,h.Z)(function*(v,p,m){const E=Xn(v);Fe(v,p,ls);const S=Di(E,m);return new Ic(E,"signInViaPopup",p,S).executeNotNull()})).apply(this,arguments)}function Xl(){return(Xl=(0,h.Z)(function*(v,p,m){const E=(0,F.m9)(v);Fe(E.auth,p,ls);const S=Di(E.auth,m);return new Ic(E.auth,"reauthViaPopup",p,S,E).executeNotNull()})).apply(this,arguments)}function Cu(){return(Cu=(0,h.Z)(function*(v,p,m){const E=(0,F.m9)(v);Fe(E.auth,p,ls);const S=Di(E.auth,m);return new Ic(E.auth,"linkViaPopup",p,S,E).executeNotNull()})).apply(this,arguments)}let Ic=(()=>{class v extends Jl{constructor(m,E,S,R,$){super(m,E,R,$),this.provider=S,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.Z)(function*(){const E=yield m.execute();return le(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,h.Z)(function*(){jt(1===m.filter.length,"Popup operations only handle one event");const E=du();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(S=>{m.reject(S)}),m.resolver._isIframeWebStorageSupported(m.auth,S=>{S||m.reject(te(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(te(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,S;this.pollId=null!==(S=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(te(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,qi.get())};m()}}return v.currentPopupAction=null,v})();const Iu="pendingRedirect",Hs=new Map;class Ho extends Jl{constructor(p,m,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,h.Z)(function*(){let E=Hs.get(m.auth._key());if(!E){try{const R=(yield function bu(v,p){return pr.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;E=()=>Promise.resolve(R)}catch(S){E=()=>Promise.reject(S)}Hs.set(m.auth._key(),E)}return m.bypassAuthState||Hs.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,E=this;return(0,h.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(E,p);if("unknown"!==p.type){if(p.eventId){const S=yield E.auth._redirectUserForId(p.eventId);if(S)return E.user=S,m().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function pr(){return(pr=(0,h.Z)(function*(v,p){const m=bc(p),E=yo(v);if(!(yield E._isAvailable()))return!1;const S="true"===(yield E._get(m));return yield E._remove(m),S})).apply(this,arguments)}function _s(v,p){return ed.apply(this,arguments)}function ed(){return(ed=(0,h.Z)(function*(v,p){return yo(v)._set(bc(p),"true")})).apply(this,arguments)}function $o(v,p){Hs.set(v._key(),p)}function yo(v){return Jt(v._redirectPersistence)}function bc(v){return H(Iu,v.config.apiKey,v.name)}function Dc(v,p,m){return function nd(v,p,m){return $s.apply(this,arguments)}(v,p,m)}function $s(){return($s=(0,h.Z)(function*(v,p,m){const E=Xn(v);Fe(v,p,ls),yield E._initializationPromise;const S=Di(E,m);return yield _s(S,E),S._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function Zh(v,p,m){return function rd(v,p,m){return _o.apply(this,arguments)}(v,p,m)}function _o(){return(_o=(0,h.Z)(function*(v,p,m){const E=(0,F.m9)(v);Fe(E.auth,p,ls),yield E.auth._initializationPromise;const S=Di(E.auth,m);yield _s(S,E.auth);const R=yield wo(E);return S._openRedirect(E.auth,p,"reauthViaRedirect",R)})).apply(this,arguments)}function Yh(v,p,m){return function id(v,p,m){return vo.apply(this,arguments)}(v,p,m)}function vo(){return(vo=(0,h.Z)(function*(v,p,m){const E=(0,F.m9)(v);Fe(E.auth,p,ls),yield E.auth._initializationPromise;const S=Di(E.auth,m);yield ru(!1,E,p.providerId),yield _s(S,E.auth);const R=yield wo(E);return S._openRedirect(E.auth,p,"linkViaRedirect",R)})).apply(this,arguments)}function vs(){return(vs=(0,h.Z)(function*(v,p){return yield Xn(v)._initializationPromise,Fi(v,p,!1)})).apply(this,arguments)}function Fi(v,p){return Go.apply(this,arguments)}function Go(){return(Go=(0,h.Z)(function*(v,p,m=!1){const E=Xn(v),S=Di(E,p),$=yield new Ho(E,S,m).execute();return $&&!m&&(delete $.user._redirectEventId,yield E._persistUserIfCurrent($.user),yield E._setRedirectUser(null,p)),$})).apply(this,arguments)}function wo(v){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,h.Z)(function*(v){const p=du(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class Qh{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(m=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Xh(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jh(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var E;if(p.error&&!Jh(p)){const S=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(te(this.auth,S))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const E=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zp(p))}saveEventToCache(p){this.cachedEventUids.add(Zp(p)),this.lastProcessedEventTime=Date.now()}}function Zp(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function Jh({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function zs(v){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,h.Z)(function*(v,p={}){return Ae(v,"GET","/v1/projects",p)})).apply(this,arguments)}const Yp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zo=/^https?/;function ws(){return(ws=(0,h.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield zs(v);for(const m of p)try{if(Cn(m))return}catch{}_e(v,"unauthorized-domain")})).apply(this,arguments)}function Cn(v){const p=wr(),{protocol:m,hostname:E}=new URL(p);if(v.startsWith("chrome-extension://")){const $=new URL(v);return""===$.hostname&&""===E?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&$.hostname===E}if(!zo.test(m))return!1;if(Yp.test(v))return E===v;const S=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(E)}const aw=new Ps(3e4,6e4);function Sc(){const v=Un().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let Hr=null;const Ac=new Ps(5e3,15e3),I="__/auth/iframe",T="emulator/auth/iframe",x={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},V=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function z(v){const p=v.config;le(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?he(p,T):`https://${v.config.authDomain}/${I}`,E={apiKey:p.apiKey,appName:v.name,v:ee.SDK_VERSION},S=V.get(v.config.apiHost);S&&(E.eid=S);const R=v._getFrameworks();return R.length&&(E.fw=R.join(",")),`${m}?${(0,F.xO)(E).slice(1)}`}function ce(){return ce=(0,h.Z)(function*(v){const p=yield function Wo(v){return Hr=Hr||function sd(v){return new Promise((p,m)=>{var E,S,R;function $(){Sc(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Sc(),m(te(v,"network-request-failed"))},timeout:aw.get()})}if(null!==(S=null===(E=Un().gapi)||void 0===E?void 0:E.iframes)&&void 0!==S&&S.Iframe)p(gapi.iframes.getContext());else{if(null===(R=Un().gapi)||void 0===R||!R.load){const Y=ao("iframefcb");return Un()[Y]=()=>{gapi.load?$():m(te(v,"network-request-failed"))},Os(`https://apis.google.com/js/api.js?onload=${Y}`).catch(Pe=>m(Pe))}$()}}).catch(p=>{throw Hr=null,p})}(v),Hr}(v),m=Un().gapi;return le(m,v,"internal-error"),p.open({where:document.body,url:z(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:x,dontclear:!0},E=>new Promise(function(){var S=(0,h.Z)(function*(R,$){yield E.restyle({setHideOnLeave:!1});const Y=te(v,"network-request-failed"),Pe=Un().setTimeout(()=>{$(Y)},Ac.get());function He(){Un().clearTimeout(Pe),R(E)}E.ping(He).then(He,()=>{$(Y)})});return function(R,$){return S.apply(this,arguments)}}()))}),ce.apply(this,arguments)}const ze={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Li{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const qo="__/auth/handler",Eo="emulator/auth/handler",gr=encodeURIComponent("fac");function Sr(v,p,m,E,S,R){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,h.Z)(function*(v,p,m,E,S,R){le(v.config.authDomain,v,"auth-domain-config-required"),le(v.config.apiKey,v,"invalid-api-key");const $={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:E,v:ee.SDK_VERSION,eventId:S};if(p instanceof ls){p.setDefaultLanguage(v.languageCode),$.providerId=p.providerId||"",(0,F.xb)(p.getCustomParameters())||($.customParameters=JSON.stringify(p.getCustomParameters()));for(const[nt,ot]of Object.entries(R||{}))$[nt]=ot}if(p instanceof si){const nt=p.getScopes().filter(ot=>""!==ot);nt.length>0&&($.scopes=nt.join(","))}v.tenantId&&($.tid=v.tenantId);const Y=$;for(const nt of Object.keys(Y))void 0===Y[nt]&&delete Y[nt];const Pe=yield v._getAppCheckToken(),He=Pe?`#${gr}=${encodeURIComponent(Pe)}`:"";return`${function ef({config:v}){return v.emulator?he(v,Eo):`https://${v.authDomain}/${qo}`}(v)}?${(0,F.xO)(Y).slice(1)}${He}`})).apply(this,arguments)}const ad="webStorageSupport",ud=class tf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fo,this._completeRedirectFn=Fi,this._overrideRedirectResult=$o}_openPopup(p,m,E,S){var R=this;return(0,h.Z)(function*(){var $;jt(null===($=R.eventManagers[p._key()])||void 0===$?void 0:$.manager,"_initialize() not called before _openPopup()");const Y=yield Sr(p,m,E,wr(),S);return function $r(v,p,m,E=500,S=600){const R=Math.max((window.screen.availHeight-S)/2,0).toString(),$=Math.max((window.screen.availWidth-E)/2,0).toString();let Y="";const Pe=Object.assign(Object.assign({},ze),{width:E.toString(),height:S.toString(),top:R,left:$}),He=(0,F.z$)().toLowerCase();m&&(Y=tt(He)?"_blank":m),De(He)&&(p=p||"http://localhost",Pe.scrollbars="yes");const nt=Object.entries(Pe).reduce((Fn,[Es,Lc])=>`${Fn}${Es}=${Lc},`,"");if(function Ir(v=(0,F.z$)()){var p;return bt(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(He)&&"_self"!==Y)return function od(v,p){const m=document.createElement("a");m.href=v,m.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(p||"",Y),new Li(null);const ot=window.open(p||"",Y,nt);le(ot,v,"popup-blocked");try{ot.focus()}catch{}return new Li(ot)}(p,Y,du())})()}_openRedirect(p,m,E,S){var R=this;return(0,h.Z)(function*(){return yield R._originValidation(p),function yy(v){Un().location.href=v}(yield Sr(p,m,E,wr(),S)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:S,promise:R}=this.eventManagers[m];return S?Promise.resolve(S):(jt(R,"If manager is not set, promise should be"),R)}const E=this.initAndGetManager(p);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(p){var m=this;return(0,h.Z)(function*(){const E=yield function Z(v){return ce.apply(this,arguments)}(p),S=new Qh(p);return E.register("authEvent",R=>(le(R?.authEvent,p,"invalid-auth-event"),{status:S.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:S},m.iframes[p._key()]=E,S})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(ad,{type:ad},S=>{var R;const $=null===(R=S?.[0])||void 0===R?void 0:R[ad];void 0!==$&&m(!!$),_e(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function qn(v){return ws.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return as()||oe()||bt()}};class Qp{constructor(p){this.factorId=p}_process(p,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,E);case"signin":return this._finalizeSignIn(p,m.credential);default:return wt("unexpected MultiFactorSessionType")}}}class Mc extends Qp{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Mc(p)}_finalizeEnroll(p,m,E){return function Hp(v,p){return Ae(v,"POST","/v2/accounts/mfaEnrollment:finalize",Ie(v,p))}(p,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function vy(v,p){return Ae(v,"POST","/v2/accounts/mfaSignIn:finalize",Ie(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Du=(()=>{class v{constructor(){}static assertion(m){return Mc._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var ld="@firebase/auth";class nf{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,h.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(E=>{p(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);m&&(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function xa(){return window}(0,F.Pz)("authIdTokenMaxAge"),function hd(v){(0,ee._registerComponent)(new me.wA("auth",(p,{options:m})=>{const E=p.getProvider("app").getImmediate(),S=p.getProvider("heartbeat"),R=p.getProvider("app-check-internal"),{apiKey:$,authDomain:Y}=E.options;le($&&!$.includes(":"),"invalid-api-key",{appName:E.name});const Pe={apiKey:$,authDomain:Y,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pe(v)},He=new yh(E,S,R,Pe);return function Rp(v,p){const m=p?.persistence||[],E=(Array.isArray(m)?m:[m]).map(Jt);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(E,p?.popupRedirectResolver)}(He,m),He},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,E)=>{p.getProvider("auth-internal").initialize()})),(0,ee._registerComponent)(new me.wA("auth-internal",p=>{const m=Xn(p.getProvider("auth").getImmediate());return new nf(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ee.registerVersion)(ld,"0.23.2",function dd(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,ee.registerVersion)(ld,"0.23.2","esm2017")}("Browser");function Iy(){return Iy=(0,h.Z)(function*(v,p,m){var E;const{BuildInfo:S}=xa();jt(p.sessionId,"AuthEvent did not contain a session ID");const R=yield function QA(v){return Su.apply(this,arguments)}(p.sessionId),$={};return bt()?$.ibi=S.packageName:$t()?$.apn=S.packageName:_e(v,"operation-not-supported-in-this-environment"),S.displayName&&($.appDisplayName=S.displayName),$.sessionId=R,Sr(v,m,p.type,void 0,null!==(E=p.eventId)&&void 0!==E?E:void 0,$)}),Iy.apply(this,arguments)}function by(){return(by=(0,h.Z)(function*(v){const{BuildInfo:p}=xa(),m={};bt()?m.iosBundleId=p.packageName:$t()?m.androidPackageName=p.packageName:_e(v,"operation-not-supported-in-this-environment"),yield zs(v,m)})).apply(this,arguments)}function Tu(){return(Tu=(0,h.Z)(function*(v,p,m){const{cordova:E}=xa();let S=()=>{};try{yield new Promise((R,$)=>{let Y=null;function Pe(){var ot;R();const Fn=null===(ot=E.plugins.browsertab)||void 0===ot?void 0:ot.close;"function"==typeof Fn&&Fn(),"function"==typeof m?.close&&m.close()}function He(){Y||(Y=window.setTimeout(()=>{$(te(v,"redirect-cancelled-by-user"))},2e3))}function nt(){"visible"===document?.visibilityState&&He()}p.addPassiveListener(Pe),document.addEventListener("resume",He,!1),$t()&&document.addEventListener("visibilitychange",nt,!1),S=()=>{p.removePassiveListener(Pe),document.removeEventListener("resume",He,!1),document.removeEventListener("visibilitychange",nt,!1),Y&&window.clearTimeout(Y)}})}finally{S()}})).apply(this,arguments)}function Su(){return(Su=(0,h.Z)(function*(v){const p=function WI(v){if(jt(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const p=new ArrayBuffer(v.length),m=new Uint8Array(p);for(let E=0;E<v.length;E++)m[E]=v.charCodeAt(E);return m}(v),m=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(m)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Dy extends Qh{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(p)),super.onEvent(p)}initialized(){var p=this;return(0,h.Z)(function*(){yield p.initPromise})()}}function Ty(v){return Io.apply(this,arguments)}function Io(){return(Io=(0,h.Z)(function*(v){const p=yield fd()._get(Ra(v));return p&&(yield fd()._remove(Ra(v))),p})).apply(this,arguments)}function ng(){const v=[];for(let m=0;m<20;m++){const E=Math.floor(62*Math.random());v.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(E))}return v.join("")}function fd(){return Jt(ho)}function Ra(v){return H("authEvent",v.config.apiKey,v.name)}function Nc(v){if(!v?.includes("?"))return{};const[p,...m]=v.split("?");return(0,F.zd)(m.join("?"))}const sg=class ig{constructor(){this._redirectPersistence=fo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Fi,this._overrideRedirectResult=$o}_initialize(p){var m=this;return(0,h.Z)(function*(){const E=p._key();let S=m.eventManagers.get(E);return S||(S=new Dy(p),m.eventManagers.set(E,S),m.attachCallbackListeners(p,S)),S})()}_openPopup(p){_e(p,"operation-not-supported-in-this-environment")}_openRedirect(p,m,E,S){var R=this;return(0,h.Z)(function*(){!function YA(v){var p,m,E,S,R,$,Y,Pe,He,nt;const ot=xa();le("function"==typeof(null===(p=ot?.universalLinks)||void 0===p?void 0:p.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),le(typeof(null===(m=ot?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),le("function"==typeof(null===(R=null===(S=null===(E=ot?.cordova)||void 0===E?void 0:E.plugins)||void 0===S?void 0:S.browsertab)||void 0===R?void 0:R.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(Pe=null===(Y=null===($=ot?.cordova)||void 0===$?void 0:$.plugins)||void 0===Y?void 0:Y.browsertab)||void 0===Pe?void 0:Pe.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(nt=null===(He=ot?.cordova)||void 0===He?void 0:He.InAppBrowser)||void 0===nt?void 0:nt.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const $=yield R._initialize(p);yield $.initialized(),$.resetRedirect(),function td(){Hs.clear()}(),yield R._originValidation(p);const Y=function qI(v,p,m=null){return{type:p,eventId:m,urlResponse:null,sessionId:ng(),postBody:null,tenantId:v.tenantId,error:te(v,"no-auth-event")}}(p,E,S);yield function JA(v,p){return fd()._set(Ra(v),p)}(p,Y);const Pe=yield function eg(v,p,m){return Iy.apply(this,arguments)}(p,Y,m),He=yield function zI(v){const{cordova:p}=xa();return new Promise(m=>{p.plugins.browsertab.isAvailable(E=>{let S=null;E?p.plugins.browsertab.openUrl(v):S=p.InAppBrowser.open(v,function Gt(v=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),m(S)})})}(Pe);return function lw(v,p,m){return Tu.apply(this,arguments)}(p,$,He)})()}_isIframeWebStorageSupported(p,m){throw new Error("Method not implemented.")}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function tg(v){return by.apply(this,arguments)}(p)),this.originValidationPromises[m]}attachCallbackListeners(p,m){const{universalLinks:E,handleOpenURL:S,BuildInfo:R}=xa(),$=setTimeout((0,h.Z)(function*(){yield Ty(p),m.onEvent(hw())}),500),Y=function(){var nt=(0,h.Z)(function*(ot){clearTimeout($);const Fn=yield Ty(p);let Es=null;Fn&&ot?.url&&(Es=function Rc(v,p){var m,E;const S=function Sy(v){const p=Nc(v),m=p.link?decodeURIComponent(p.link):void 0,E=Nc(m).link,S=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Nc(S).link||S||E||m||v}(p);if(S.includes("/__/auth/callback")){const R=Nc(S),$=R.firebaseError?function pd(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,Y=null===(E=null===(m=$?.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],Pe=Y?te(Y):null;return Pe?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Pe,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:S,postBody:null}}return null}(Fn,ot.url)),m.onEvent(Es||hw())});return function(Fn){return nt.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,Y);const Pe=S,He=`${R.packageName.toLowerCase()}://`;xa().handleOpenURL=function(){var nt=(0,h.Z)(function*(ot){if(ot.toLowerCase().startsWith(He)&&Y({url:ot}),"function"==typeof Pe)try{Pe(ot)}catch(Fn){console.error(Fn)}});return function(ot){return nt.apply(this,arguments)}}()}};function hw(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:te("no-auth-event")}}function Pc(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function Ry(v=(0,F.z$)()){return!("file:"!==Pc()&&"ionic:"!==Pc()&&"capacitor:"!==Pc()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function af(){try{const v=self.localStorage,p=du();if(v)return v.setItem(p,"1"),v.removeItem(p),!function Ti(v=(0,F.z$)()){return function pw(){return(0,F.w1)()&&11===document?.documentMode}()||function KI(v=(0,F.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,F.hl)()}catch{return gd()&&(0,F.hl)()}return!1}function gd(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function md(){return(function xy(){return"http:"===Pc()||"https:"===Pc()}()||(0,F.ru)()||Ry())&&!function og(){return(0,F.b$)()||(0,F.UG)()}()&&af()&&!gd()}function Gr(){return Ry()&&typeof document<"u"}function uf(){return(uf=(0,h.Z)(function*(){return!!Gr()&&new Promise(v=>{const p=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),v(!0)})})})).apply(this,arguments)}const Zi={LOCAL:"local",NONE:"none",SESSION:"session"},Zo=le,Ny="persistence";function ug(v){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,h.Z)(function*(v){yield v._initializationPromise;const p=Oy(),m=H(Ny,v.config.apiKey,v.name);p&&p.setItem(m,v._getPersistence())})).apply(this,arguments)}function Oy(){var v;try{return(null===(v=function ag(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const yd=le;class bo{constructor(){this.browserResolver=Jt(ud),this.cordovaResolver=Jt(sg),this.underlyingResolver=null,this._redirectPersistence=fo,this._completeRedirectFn=Fi,this._overrideRedirectResult=$o}_initialize(p){var m=this;return(0,h.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,m,E,S){var R=this;return(0,h.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(p,m,E,S)})()}_openRedirect(p,m,E,S){var R=this;return(0,h.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(p,m,E,S)})()}_isIframeWebStorageSupported(p,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,m)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Gr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,h.Z)(function*(){if(p.underlyingResolver)return;const m=yield function Au(){return uf.apply(this,arguments)}();p.underlyingResolver=m?p.cordovaResolver:p.browserResolver})()}}function cg(v){return v.unwrap()}function lg(v){return dg(v)}function dg(v){const{_tokenResponse:p}=v instanceof F.ZR?v.customData:v;if(!p)return null;if(!(v instanceof F.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return js.credentialFromResult(v);const m=p.providerId;if(!m||m===ue.PASSWORD)return null;let E;switch(m){case ue.GOOGLE:E=Vo;break;case ue.FACEBOOK:E=Lo;break;case ue.GITHUB:E=hr;break;case ue.TWITTER:E=Ls;break;default:const{oauthIdToken:S,oauthAccessToken:R,oauthTokenSecret:$,pendingToken:Y,nonce:Pe}=p;return R||$||S||Y?Y?m.startsWith("saml.")?zn._create(m,Y):ii._fromParams({providerId:m,signInMethod:m,pendingToken:Y,idToken:S,accessToken:R}):new Ni(m).credential({idToken:S,accessToken:R,rawNonce:Pe}):null}return v instanceof F.ZR?E.credentialFromError(v):E.credentialFromResult(v)}function ui(v,p){return p.catch(m=>{throw m instanceof F.ZR&&function gw(v,p){var m;const E=null===(m=p.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===p?.code)p.resolver=new kc(v,function jl(v,p){var m;const E=(0,F.m9)(v),S=p;return le(p.customData.operationType,E,"argument-error"),le(null===(m=S.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),Ct._fromError(E,S)}(v,p));else if(E){const S=dg(p),R=p;S&&(R.credential=S,R.tenantId=E.tenantId||void 0,R.email=E.email||void 0,R.phoneNumber=E.phoneNumber||void 0)}}(v,m),m}).then(m=>{const S=m.user;return{operationType:m.operationType,credential:lg(m),additionalUserInfo:Bs(m),user:Do.getOrCreate(S)}})}function lf(v,p){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,h.Z)(function*(v,p){const m=yield p;return{verificationId:m.verificationId,confirm:E=>ui(v,m.confirm(E))}})).apply(this,arguments)}class kc{constructor(p,m){this.resolver=m,this.auth=function _d(v){return v.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return ui(cg(this.auth),this.resolver.resolveSignIn(p))}}class Do{constructor(p){this._delegate=p,this.multiFactor=function Hh(v){const p=(0,F.m9)(v);return Da.has(p)||Da.set(p,Gi._fromUser(p)),Da.get(p)}(p)}static getOrCreate(p){return Do.USER_MAP.has(p)||Do.USER_MAP.set(p,new Do(p)),Do.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var m=this;return(0,h.Z)(function*(){return ui(m.auth,Sh(m._delegate,p))})()}linkWithPhoneNumber(p,m){var E=this;return(0,h.Z)(function*(){return lf(E.auth,function _n(v,p,m){return fr.apply(this,arguments)}(E._delegate,p,m))})()}linkWithPopup(p){var m=this;return(0,h.Z)(function*(){return ui(m.auth,function Cc(v,p,m){return Cu.apply(this,arguments)}(m._delegate,p,bo))})()}linkWithRedirect(p){var m=this;return(0,h.Z)(function*(){return yield ug(Xn(m.auth)),Yh(m._delegate,p,bo)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var m=this;return(0,h.Z)(function*(){return ui(m.auth,Wn(m._delegate,p))})()}reauthenticateWithPhoneNumber(p,m){return lf(this.auth,function qh(v,p,m){return Sa.apply(this,arguments)}(this._delegate,p,m))}reauthenticateWithPopup(p){return ui(this.auth,function or(v,p,m){return Xl.apply(this,arguments)}(this._delegate,p,bo))}reauthenticateWithRedirect(p){var m=this;return(0,h.Z)(function*(){return yield ug(Xn(m.auth)),Zh(m._delegate,p,bo)})()}sendEmailVerification(p){return function kl(v,p){return Ca.apply(this,arguments)}(this._delegate,p)}unlink(p){var m=this;return(0,h.Z)(function*(){return yield function gy(v,p){return ds.apply(this,arguments)}(m._delegate,p),m})()}updateEmail(p){return function Ll(v,p){return fs((0,F.m9)(v),p,null)}(this._delegate,p)}updatePassword(p){return function kh(v,p){return fs((0,F.m9)(v),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function Ec(v,p){return Kh.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function jp(v,p){return hc.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,m){return function dc(v,p,m){return uu.apply(this,arguments)}(this._delegate,p,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Do.USER_MAP=new WeakMap;const Na=le;let Fc=(()=>{class v{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=m.options;Na(S,"invalid-api-key",{appName:m.name}),Na(S,"invalid-api-key",{appName:m.name});const R=typeof window<"u"?bo:void 0;this._delegate=E.initialize({options:{persistence:mw(S,m.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(We),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Do.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function oc(v,p,m){const E=Xn(v);le(E._canInitEmulator,E,"emulator-config-failed"),le(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const S=!!m?.disableWarnings,R=Oo(p),{host:$,port:Y}=function _h(v){const p=Oo(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(E);if(S){const R=S[1];return{host:R,port:vh(E.substr(R.length+1))}}{const[R,$]=E.split(":");return{host:R,port:vh($)}}}(p);E.config.emulator={url:`${R}//${$}${null===Y?"":`:${Y}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:$,port:Y,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function fy(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,m,E)}applyActionCode(m){return function er(v,p){return Fr.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Rl(this._delegate,m)}confirmPasswordReset(m,E){return function hs(v,p,m){return va.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var S=this;return(0,h.Z)(function*(){return ui(S._delegate,function Rh(v,p,m){return cc.apply(this,arguments)}(S._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Pl(v,p){return Ol.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Nl(v,p){const m=Ut.parseLink(p);return"EMAIL_SIGNIN"===m?.operation}(0,m)}getRedirectResult(){var m=this;return(0,h.Z)(function*(){Na(md(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function Gs(v,p){return vs.apply(this,arguments)}(m._delegate,bo);return E?ui(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function fw(v,p){Xn(v)._logFramework(p)}(this._delegate,m)}onAuthStateChanged(m,E,S){const{next:R,error:$,complete:Y}=Pa(m,E,S);return this._delegate.onAuthStateChanged(R,$,Y)}onIdTokenChanged(m,E,S){const{next:R,error:$,complete:Y}=Pa(m,E,S);return this._delegate.onIdTokenChanged(R,$,Y)}sendSignInLinkToEmail(m,E){return function Ea(v,p,m){return lc.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function ow(v,p,m){return _a.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,h.Z)(function*(){let S;switch(function cf(v,p){Zo(Object.values(Zi).includes(p),v,"invalid-persistence-type"),(0,F.b$)()?Zo(p!==Zi.SESSION,v,"unsupported-persistence-type"):(0,F.UG)()?Zo(p===Zi.NONE,v,"unsupported-persistence-type"):gd()?Zo(p===Zi.NONE||p===Zi.LOCAL&&(0,F.hl)(),v,"unsupported-persistence-type"):Zo(p===Zi.NONE||af(),v,"unsupported-persistence-type")}(E._delegate,m),m){case Zi.SESSION:S=fo;break;case Zi.LOCAL:S=(yield Jt(Bo)._isAvailable())?Bo:ho;break;case Zi.NONE:S=qt;break;default:return _e("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return ui(this._delegate,function Pp(v){return Ih.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return ui(this._delegate,Ml(this._delegate,m))}signInWithCustomToken(m){return ui(this._delegate,function Mh(v,p){return Pi.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return ui(this._delegate,function Nh(v,p,m){return Ml((0,F.m9)(v),uc.credential(p,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return ui(this._delegate,function Lr(v,p,m){return Ph.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return lf(this._delegate,function jr(v,p,m){return ai.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,h.Z)(function*(){return Na(md(),E._delegate,"operation-not-supported-in-this-environment"),ui(E._delegate,function Eu(v,p,m){return mo.apply(this,arguments)}(E._delegate,m,bo))})()}signInWithRedirect(m){var E=this;return(0,h.Z)(function*(){return Na(md(),E._delegate,"operation-not-supported-in-this-environment"),yield ug(E._delegate),Dc(E._delegate,m,bo)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function au(v,p){return Us.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Zi,v})();function Pa(v,p,m){let E=v;"function"!=typeof v&&({next:E,error:p,complete:m}=v);const S=E;return{next:$=>S($&&Do.getOrCreate($)),error:p,complete:m}}function mw(v,p){const m=function Py(v,p){const m=Oy();if(!m)return[];const E=H(Ny,v,p);switch(m.getItem(E)){case Zi.NONE:return[qt];case Zi.LOCAL:return[Bo,fo];case Zi.SESSION:return[fo];default:return[]}}(v,p);if(typeof self<"u"&&!m.includes(Bo)&&m.push(Bo),typeof window<"u")for(const E of[ho,fo])m.includes(E)||m.push(E);return m.includes(qt)||m.push(qt),m}class df{constructor(){this.providerId="phone",this._delegate=new js(cg(J.Z.auth()))}static credential(p,m){return js.credential(p,m)}verifyPhoneNumber(p,m){return this._delegate.verifyPhoneNumber(p,m)}unwrap(){return this._delegate}}df.PHONE_SIGN_IN_METHOD=js.PHONE_SIGN_IN_METHOD,df.PROVIDER_ID=js.PROVIDER_ID;const yw=le;class ky{constructor(p,m,E=J.Z.app()){var S;yw(null===(S=E.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new vc(p,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Fy(v){v.INTERNAL.registerComponent(new me.wA("auth-compat",p=>{const m=p.getProvider("app-compat").getImmediate(),E=p.getProvider("auth");return new Fc(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:uc,FacebookAuthProvider:Lo,GithubAuthProvider:hr,GoogleAuthProvider:Vo,OAuthProvider:Ni,SAMLAuthProvider:ga,PhoneAuthProvider:df,PhoneMultiFactorGenerator:Du,RecaptchaVerifier:ky,TwitterAuthProvider:Ls,Auth:Fc,AuthCredential:ks,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.4.2")}(J.Z)},5861:(at,be,O)=>{function h(F,ee,ne,ge,me,Se,ue){try{var U=F[Se](ue),G=U.value}catch(X){return void ne(X)}U.done?ee(G):Promise.resolve(G).then(ge,me)}function J(F){return function(){var ee=this,ne=arguments;return new Promise(function(ge,me){var Se=F.apply(ee,ne);function ue(G){h(Se,ge,me,ue,U,"next",G)}function U(G){h(Se,ge,me,ue,U,"throw",G)}ue(void 0)})}}O.d(be,{Z:()=>J})},7582:(at,be,O)=>{function ee(he,fe){var we={};for(var Ee in he)Object.prototype.hasOwnProperty.call(he,Ee)&&fe.indexOf(Ee)<0&&(we[Ee]=he[Ee]);if(null!=he&&"function"==typeof Object.getOwnPropertySymbols){var Ie=0;for(Ee=Object.getOwnPropertySymbols(he);Ie<Ee.length;Ie++)fe.indexOf(Ee[Ie])<0&&Object.prototype.propertyIsEnumerable.call(he,Ee[Ie])&&(we[Ee[Ie]]=he[Ee[Ie]])}return we}function X(he,fe,we,Ee){return new(we||(we=Promise))(function(Ae,et){function st(Qt){try{pt(Ee.next(Qt))}catch(Rt){et(Rt)}}function Vn(Qt){try{pt(Ee.throw(Qt))}catch(Rt){et(Rt)}}function pt(Qt){Qt.done?Ae(Qt.value):function Ie(Ae){return Ae instanceof we?Ae:new we(function(et){et(Ae)})}(Qt.value).then(st,Vn)}pt((Ee=Ee.apply(he,fe||[])).next())})}function ie(he){return this instanceof ie?(this.v=he,this):new ie(he)}function _e(he,fe,we){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie,Ee=we.apply(he,fe||[]),Ae=[];return Ie={},et("next"),et("throw"),et("return"),Ie[Symbol.asyncIterator]=function(){return this},Ie;function et(Sn){Ee[Sn]&&(Ie[Sn]=function(An){return new Promise(function(lr,fn){Ae.push([Sn,An,lr,fn])>1||st(Sn,An)})})}function st(Sn,An){try{!function Vn(Sn){Sn.value instanceof ie?Promise.resolve(Sn.value.v).then(pt,Qt):Rt(Ae[0][2],Sn)}(Ee[Sn](An))}catch(lr){Rt(Ae[0][3],lr)}}function pt(Sn){st("next",Sn)}function Qt(Sn){st("throw",Sn)}function Rt(Sn,An){Sn(An),Ae.shift(),Ae.length&&st(Ae[0][0],Ae[0][1])}}function Te(he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var we,fe=he[Symbol.asyncIterator];return fe?fe.call(he):(he=function Oe(he){var fe="function"==typeof Symbol&&Symbol.iterator,we=fe&&he[fe],Ee=0;if(we)return we.call(he);if(he&&"number"==typeof he.length)return{next:function(){return he&&Ee>=he.length&&(he=void 0),{value:he&&he[Ee++],done:!he}}};throw new TypeError(fe?"Object is not iterable.":"Symbol.iterator is not defined.")}(he),we={},Ee("next"),Ee("throw"),Ee("return"),we[Symbol.asyncIterator]=function(){return this},we);function Ee(Ae){we[Ae]=he[Ae]&&function(et){return new Promise(function(st,Vn){!function Ie(Ae,et,st,Vn){Promise.resolve(Vn).then(function(pt){Ae({value:pt,done:st})},et)}(st,Vn,(et=he[Ae](et)).done,et.value)})}}}O.d(be,{FC:()=>_e,KL:()=>Te,_T:()=>ee,mG:()=>X,qq:()=>ie}),"function"==typeof SuppressedError&&SuppressedError}},at=>{at(at.s=1758)}]);